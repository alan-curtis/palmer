!function(){var t={4607:function(){!function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=68)}([function(t,e,i){var n=i(136);t.exports=function(t,e,i){var o=null==t?void 0:n(t,e);return void 0===o?i:o}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(7),r=i(10),a=n(i(146)),s=i(16),l=n(i(147));function c(t,e){var i=r.getCoords(t),n=r.getCoords(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var a=i[0][0],s=i[0][1],l=i[1][0],c=i[1][1],h=n[0][0],u=n[0][1],p=n[1][0],d=n[1][1],m=(d-u)*(l-a)-(p-h)*(c-s);if(0===m)return null;var f=((p-h)*(s-u)-(d-u)*(a-h))/m,g=((l-a)*(s-u)-(c-s)*(a-h))/m;if(f>=0&&f<=1&&g>=0&&g<=1){var _=a+f*(l-a),v=s+f*(c-s);return o.point([_,v])}return null}e.default=function(t,e){var i={},n=[];if("LineString"===t.type&&(t=o.feature(t)),"LineString"===e.type&&(e=o.feature(e)),"Feature"===t.type&&"Feature"===e.type&&null!==t.geometry&&null!==e.geometry&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var h=c(t,e);return h&&n.push(h),o.featureCollection(n)}var u=l.default();return u.load(a.default(e)),s.featureEach(a.default(t),(function(t){s.featureEach(u.search(t),(function(e){var o=c(t,e);if(o){var a=r.getCoords(o).join(",");i[a]||(i[a]=!0,n.push(o))}}))})),o.featureCollection(n)}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,i){var n=i(70),o=i(127)((function(t,e,i){n(t,e,i)}));t.exports=o},function(t,e,i){var n=i(29),o="object"==typeof self&&self&&self.Object===Object&&self,r=n||o||Function("return this")();t.exports=r},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){var i=Array.isArray;t.exports=i},function(t,e,i){"use strict";function n(t,e,i){void 0===i&&(i={});var n={type:"Feature"};return(0===i.id||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=e||{},n.geometry=t,n}function o(t,e,i){return void 0===i&&(i={}),n({type:"Point",coordinates:t},e,i)}function r(t,e,i){void 0===i&&(i={});for(var o=0,r=t;o<r.length;o++){var a=r[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,i)}function a(t,e,i){if(void 0===i&&(i={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,i)}function s(t,e){void 0===e&&(e={});var i={type:"FeatureCollection"};return e.id&&(i.id=e.id),e.bbox&&(i.bbox=e.bbox),i.features=t,i}function l(t,e,i){return void 0===i&&(i={}),n({type:"MultiLineString",coordinates:t},e,i)}function c(t,e,i){return void 0===i&&(i={}),n({type:"MultiPoint",coordinates:t},e,i)}function h(t,e,i){return void 0===i&&(i={}),n({type:"MultiPolygon",coordinates:t},e,i)}function u(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t*n}function p(t,i){void 0===i&&(i="kilometers");var n=e.factors[i];if(!n)throw new Error(i+" units is invalid");return t/n}function d(t){return t%(2*Math.PI)*180/Math.PI}function m(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,i){switch(void 0===i&&(i={}),t){case"Point":return o(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return r(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return l(e).geometry;case"MultiPolygon":return h(e).geometry;default:throw new Error(t+" is invalid")}},e.point=o,e.points=function(t,e,i){return void 0===i&&(i={}),s(t.map((function(t){return o(t,e)})),i)},e.polygon=r,e.polygons=function(t,e,i){return void 0===i&&(i={}),s(t.map((function(t){return r(t,e)})),i)},e.lineString=a,e.lineStrings=function(t,e,i){return void 0===i&&(i={}),s(t.map((function(t){return a(t,e)})),i)},e.featureCollection=s,e.multiLineString=l,e.multiPoint=c,e.multiPolygon=h,e.geometryCollection=function(t,e,i){return void 0===i&&(i={}),n({type:"GeometryCollection",geometries:t},e,i)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,e||0);return Math.round(t*i)/i},e.radiansToLength=u,e.lengthToRadians=p,e.lengthToDegrees=function(t,e){return d(p(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=d,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,i){if(void 0===e&&(e="kilometers"),void 0===i&&(i="kilometers"),!(t>=0))throw new Error("length must be a positive number");return u(p(t,e),i)},e.convertArea=function(t,i,n){if(void 0===i&&(i="meters"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("area must be a positive number");var o=e.areaFactors[i];if(!o)throw new Error("invalid original units");var r=e.areaFactors[n];if(!r)throw new Error("invalid final units");return t/o*r},e.isNumber=m,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!m(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7);function o(t,e,i,n,o,r,a,s){var l,c,h,u,p={x:null,y:null,onLine1:!1,onLine2:!1};return 0==(l=(s-r)*(i-t)-(a-o)*(n-e))?null!==p.x&&null!==p.y&&p:(u=(i-t)*(c=e-r)-(n-e)*(h=t-o),c=((a-o)*c-(s-r)*h)/l,h=u/l,p.x=t+c*(i-t),p.y=e+c*(n-e),c>=0&&c<=1&&(p.onLine1=!0),h>=0&&h<=1&&(p.onLine2=!0),!(!p.onLine1||!p.onLine2)&&[p.x,p.y])}e.default=function(t){var e,i,r={type:"FeatureCollection",features:[]};if("LineString"===(i="Feature"===t.type?t.geometry:t).type)e=[i.coordinates];else if("MultiLineString"===i.type)e=i.coordinates;else if("MultiPolygon"===i.type)e=[].concat.apply([],i.coordinates);else{if("Polygon"!==i.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=i.coordinates}return e.forEach((function(t){e.forEach((function(e){for(var i=0;i<t.length-1;i++)for(var a=i;a<e.length-1;a++){if(t===e){if(1===Math.abs(i-a))continue;if(0===i&&a===t.length-2&&t[i][0]===t[t.length-1][0]&&t[i][1]===t[t.length-1][1])continue}var s=o(t[i][0],t[i][1],t[i+1][0],t[i+1][1],e[a][0],e[a][1],e[a+1][0],e[a+1][1]);s&&r.features.push(n.point([s[0],s[1]]))}}))})),r}},function(t,e,i){var n=i(19),o=i(84),r=i(85),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):r(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&n.isNumber(e[0])&&n.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,i){if(!e||!i)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,i){if(!t)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,i){if(!t)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var n=0,o=t.features;n<o.length;n++){var r=o[n];if(!r||"Feature"!==r.type||!r.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+i+": must be a "+e+", given "+r.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},function(t,e,i){var n=i(72),o=i(73),r=i(74),a=i(75),s=i(76);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(13);t.exports=function(t,e){for(var i=t.length;i--;)if(n(t[i][0],e))return i;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,i){var n=i(17)(Object,"create");t.exports=n},function(t,e,i){var n=i(98);t.exports=function(t,e){var i=t.__data__;return n(e)?i["string"==typeof e?"string":"hash"]:i.map}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7);function o(t,e,i){if(null!==t)for(var n,r,a,s,l,c,h,u,p=0,d=0,m=t.type,f="FeatureCollection"===m,g="Feature"===m,_=f?t.features.length:1,v=0;v<_;v++){l=(u=!!(h=f?t.features[v].geometry:g?t.geometry:t)&&"GeometryCollection"===h.type)?h.geometries.length:1;for(var y=0;y<l;y++){var b=0,x=0;if(null!==(s=u?h.geometries[y]:h)){c=s.coordinates;var k=s.type;switch(p=!i||"Polygon"!==k&&"MultiPolygon"!==k?0:1,k){case null:break;case"Point":if(!1===e(c,d,v,b,x))return!1;d++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===e(c[n],d,v,b,x))return!1;d++,"MultiPoint"===k&&b++}"LineString"===k&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(r=0;r<c[n].length-p;r++){if(!1===e(c[n][r],d,v,b,x))return!1;d++}"MultiLineString"===k&&b++,"Polygon"===k&&x++}"Polygon"===k&&b++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(x=0,r=0;r<c[n].length;r++){for(a=0;a<c[n][r].length-p;a++){if(!1===e(c[n][r][a],d,v,b,x))return!1;d++}x++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===o(s.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function r(t,e){var i;switch(t.type){case"FeatureCollection":for(i=0;i<t.features.length&&!1!==e(t.features[i].properties,i);i++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function s(t,e){var i,n,o,r,a,s,l,c,h,u,p=0,d="FeatureCollection"===t.type,m="Feature"===t.type,f=d?t.features.length:1;for(i=0;i<f;i++){for(s=d?t.features[i].geometry:m?t.geometry:t,c=d?t.features[i].properties:m?t.properties:{},h=d?t.features[i].bbox:m?t.bbox:void 0,u=d?t.features[i].id:m?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(r=l?s.geometries[o]:s))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,p,c,h,u))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===e(r.geometries[n],p,c,h,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,h,u))return!1;p++}}function l(t,e){s(t,(function(t,i,o,r,a){var s,l=null===t?null:t.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return!1!==e(n.feature(t,o,{bbox:r,id:a}),i,0)&&void 0}switch(l){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<t.coordinates.length;c++){var h={type:s,coordinates:t.coordinates[c]};if(!1===e(n.feature(h,o),i,c))return!1}}))}function c(t,e){l(t,(function(t,i,r){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var l,c=0,h=0,u=0;return!1!==o(t,(function(o,s,p,d,m){if(void 0===l||i>c||d>h||m>u)return l=o,c=i,h=d,u=m,void(a=0);var f=n.lineString([l,o],t.properties);if(!1===e(f,i,r,m,a))return!1;a++,l=o}))&&void 0}}}))}function h(t,e){if(!t)throw new Error("geojson is required");l(t,(function(t,i,o){if(null!==t.geometry){var r=t.geometry.type,a=t.geometry.coordinates;switch(r){case"LineString":if(!1===e(t,i,o,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(n.lineString(a[s],t.properties),i,o,s))return!1}}}))}e.coordEach=o,e.coordReduce=function(t,e,i,n){var r=i;return o(t,(function(t,n,o,a,s){r=0===n&&void 0===i?t:e(r,t,n,o,a,s)}),n),r},e.propEach=r,e.propReduce=function(t,e,i){var n=i;return r(t,(function(t,o){n=0===o&&void 0===i?t:e(n,t,o)})),n},e.featureEach=a,e.featureReduce=function(t,e,i){var n=i;return a(t,(function(t,o){n=0===o&&void 0===i?t:e(n,t,o)})),n},e.coordAll=function(t){var e=[];return o(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,i){var n=i;return s(t,(function(t,o,r,a,s){n=0===o&&void 0===i?t:e(n,t,o,r,a,s)})),n},e.flattenEach=l,e.flattenReduce=function(t,e,i){var n=i;return l(t,(function(t,o,r){n=0===o&&0===r&&void 0===i?t:e(n,t,o,r)})),n},e.segmentEach=c,e.segmentReduce=function(t,e,i){var n=i,o=!1;return c(t,(function(t,r,a,s,l){n=!1===o&&void 0===i?t:e(n,t,r,a,s,l),o=!0})),n},e.lineEach=h,e.lineReduce=function(t,e,i){var n=i;return h(t,(function(t,o,r,a){n=0===o&&void 0===i?t:e(n,t,o,r,a)})),n},e.findSegment=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var i,o=e.featureIndex||0,r=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),l=l||t.features[o].properties,i=t.features[o].geometry;break;case"Feature":l=l||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var c=i.coordinates;switch(i.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),n.lineString([c[s],c[s+1]],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),n.lineString([c[a][s],c[a][s+1]],l,e);case"MultiLineString":return r<0&&(r=c.length+r),s<0&&(s=c[r].length+s-1),n.lineString([c[r][s],c[r][s+1]],l,e);case"MultiPolygon":return r<0&&(r=c.length+r),a<0&&(a=c[r].length+a),s<0&&(s=c[r][a].length-s-1),n.lineString([c[r][a][s],c[r][a][s+1]],l,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!n.isObject(e))throw new Error("options is invalid");var i,o=e.featureIndex||0,r=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,l=e.properties;switch(t.type){case"FeatureCollection":o<0&&(o=t.features.length+o),l=l||t.features[o].properties,i=t.features[o].geometry;break;case"Feature":l=l||t.properties,i=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":i=t;break;default:throw new Error("geojson is invalid")}if(null===i)return null;var c=i.coordinates;switch(i.type){case"Point":return n.point(c,l,e);case"MultiPoint":return r<0&&(r=c.length+r),n.point(c[r],l,e);case"LineString":return s<0&&(s=c.length+s),n.point(c[s],l,e);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),n.point(c[a][s],l,e);case"MultiLineString":return r<0&&(r=c.length+r),s<0&&(s=c[r].length+s),n.point(c[r][s],l,e);case"MultiPolygon":return r<0&&(r=c.length+r),a<0&&(a=c[r].length+a),s<0&&(s=c[r][a].length-s),n.point(c[r][a][s],l,e)}throw new Error("geojson is invalid")}},function(t,e,i){var n=i(82),o=i(89);t.exports=function(t,e){var i=o(t,e);return n(i)?i:void 0}},function(t,e,i){var n=i(9),o=i(2);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,i){var n=i(4).Symbol;t.exports=n},function(t,e,i){var n=i(32);t.exports=function(t,e,i){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){var n=i(113),o=i(5),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},function(t,e,i){var n=i(18),o=i(24);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){var i=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,i){var n=i(9),o=i(5);t.exports=function(t){return"symbol"==typeof t||o(t)&&"[object Symbol]"==n(t)}},function(t,e,i){(function(e){t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}
/**
   * splaytree v3.0.1
   * Fast Splay tree for Node and browser
   *
   * @author Alexander Milevski <info@w8r.name>
   * @license MIT
   * @preserve
   */var o=function e(i,n){t(this,e),this.next=null,this.key=i,this.data=n,this.left=null,this.right=null};function r(t,e){return t>e?1:t<e?-1:0}function a(t,e,i){for(var n=new o(null,null),r=n,a=n;;){var s=i(t,e.key);if(s<0){if(null===e.left)break;if(i(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}a.left=e,a=e,e=e.left}else{if(!(s>0))break;if(null===e.right)break;if(i(t,e.right.key)>0){var c=e.right;if(e.right=c.left,c.left=e,null===(e=c).right)break}r.right=e,r=e,e=e.right}}return r.right=e.left,a.left=e.right,e.left=n.right,e.right=n.left,e}function s(t,e,i,n){var r=new o(t,e);if(null===i)return r.left=r.right=null,r;var s=n(t,(i=a(t,i,n)).key);return s<0?(r.left=i.left,r.right=i,i.left=null):s>=0&&(r.right=i.right,r.left=i,i.right=null),r}function l(t,e,i){var n=null,o=null;if(e){var r=i((e=a(t,e,i)).key,t);0===r?(n=e.left,o=e.right):r<0?(o=e.right,e.right=null,n=e):(n=e.left,e.left=null,o=e)}return{left:n,right:o}}function c(t,e,i,n,o){if(t){n("".concat(e).concat(i?"└── ":"├── ").concat(o(t),"\n"));var r=e+(i?"    ":"│   ");t.left&&c(t.left,r,!1,n,o),t.right&&c(t.right,r,!0,n,o)}}var h=function(){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;t(this,e),this._root=null,this._size=0,this._comparator=i}return n(e,[{key:"insert",value:function(t,e){return this._size++,this._root=s(t,e,this._root,this._comparator)}},{key:"add",value:function(t,e){var i=new o(t,e);null===this._root&&(i.left=i.right=null,this._size++,this._root=i);var n=this._comparator,r=a(t,this._root,n),s=n(t,r.key);return 0===s?this._root=r:(s<0?(i.left=r.left,i.right=r,r.left=null):s>0&&(i.right=r.right,i.left=r,r.right=null),this._size++,this._root=i),this._root}},{key:"remove",value:function(t){this._root=this._remove(t,this._root,this._comparator)}},{key:"_remove",value:function(t,e,i){var n;return null===e?null:0===i(t,(e=a(t,e,i)).key)?(null===e.left?n=e.right:(n=a(t,e.left,i)).right=e.right,this._size--,n):e}},{key:"pop",value:function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=a(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null}},{key:"findStatic",value:function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return e;e=n<0?e.left:e.right}return null}},{key:"find",value:function(t){return this._root&&(this._root=a(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root}},{key:"contains",value:function(t){for(var e=this._root,i=this._comparator;e;){var n=i(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1}},{key:"forEach",value:function(t,e){for(var i=this._root,n=[],o=!1;!o;)null!==i?(n.push(i),i=i.left):0!==n.length?(i=n.pop(),t.call(e,i),i=i.right):o=!0;return this}},{key:"range",value:function(t,e,i,n){for(var o=[],r=this._comparator,a=this._root;0!==o.length||a;)if(a)o.push(a),a=a.left;else{if(r((a=o.pop()).key,e)>0)break;if(r(a.key,t)>=0&&i.call(n,a))return this;a=a.right}return this}},{key:"keys",value:function(){var t=[];return this.forEach((function(e){var i=e.key;return t.push(i)})),t}},{key:"values",value:function(){var t=[];return this.forEach((function(e){var i=e.data;return t.push(i)})),t}},{key:"min",value:function(){return this._root?this.minNode(this._root).key:null}},{key:"max",value:function(){return this._root?this.maxNode(this._root).key:null}},{key:"minNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.left;)t=t.left;return t}},{key:"maxNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._root;if(t)for(;t.right;)t=t.right;return t}},{key:"at",value:function(t){for(var e=this._root,i=!1,n=0,o=[];!i;)if(e)o.push(e),e=e.left;else if(o.length>0){if(e=o.pop(),n===t)return e;n++,e=e.right}else i=!0;return null}},{key:"next",value:function(t){var e=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var n=this._comparator;e;){var o=n(t.key,e.key);if(0===o)break;o<0?(i=e,e=e.left):e=e.right}return i}},{key:"prev",value:function(t){var e=this._root,i=null;if(null!==t.left){for(i=t.left;i.right;)i=i.right;return i}for(var n=this._comparator;e;){var o=n(t.key,e.key);if(0===o)break;o<0?e=e.left:(i=e,e=e.right)}return i}},{key:"clear",value:function(){return this._root=null,this._size=0,this}},{key:"toList",value:function(){return function(t){for(var e=t,i=[],n=!1,r=new o(null,null),a=r;!n;)e?(i.push(e),e=e.left):i.length>0?e=(e=a=a.next=i.pop()).right:n=!0;return a.next=null,r.next}(this._root)}},{key:"load",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.length,o=this._comparator;if(i&&f(t,e,0,n-1,o),null===this._root)this._root=u(t,e,0,n),this._size=n;else{var r=m(this.toList(),p(t,e),o);n=this._size+n,this._root=d({head:r},0,n)}return this}},{key:"isEmpty",value:function(){return null===this._root}},{key:"toString",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return String(t.key)},e=[];return c(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")}},{key:"update",value:function(t,e,i){var n=this._comparator,o=l(t,this._root,n),r=o.left,c=o.right;n(t,e)<0?c=s(e,i,c,n):r=s(e,i,r,n),this._root=function(t,e,i){return null===e?t:(null===t||((e=a(t.key,e,i)).left=t),e)}(r,c,n)}},{key:"split",value:function(t){return l(t,this._root,this._comparator)}},{key:"size",get:function(){return this._size}},{key:"root",get:function(){return this._root}}]),e}();function u(t,e,i,n){var r=n-i;if(r>0){var a=i+Math.floor(r/2),s=t[a],l=e[a],c=new o(s,l);return c.left=u(t,e,i,a),c.right=u(t,e,a+1,n),c}return null}function p(t,e){for(var i=new o(null,null),n=i,r=0;r<t.length;r++)n=n.next=new o(t[r],e[r]);return n.next=null,i.next}function d(t,e,i){var n=i-e;if(n>0){var o=e+Math.floor(n/2),r=d(t,e,o),a=t.head;return a.left=r,t.head=t.head.next,a.right=d(t,o+1,i),a}return null}function m(t,e,i){for(var n=new o(null,null),r=n,a=t,s=e;null!==a&&null!==s;)i(a.key,s.key)<0?(r.next=a,a=a.next):(r.next=s,s=s.next),r=r.next;return null!==a?r.next=a:null!==s&&(r.next=s),n.next}function f(t,e,i,n,o){if(!(i>=n)){for(var r=t[i+n>>1],a=i-1,s=n+1;;){do{a++}while(o(t[a],r)<0);do{s--}while(o(t[s],r)>0);if(a>=s)break;var l=t[a];t[a]=t[s],t[s]=l,l=e[a],e[a]=e[s],e[s]=l}f(t,e,i,s,o),f(t,e,s+1,n,o)}}var g=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},_=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var i=t.ll.x<e.ll.x?e.ll.x:t.ll.x,n=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:i,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:n,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},v=Number.EPSILON;void 0===v&&(v=Math.pow(2,-52));var y=v*v,b=function(t,e){if(-v<t&&t<v&&-v<e&&e<v)return 0;var i=t-e;return i*i<y*t*e?0:t<e?-1:1},x=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new k,this.yRounder=new k}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),k=function(){function e(){t(this,e),this.tree=new h,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),i=this.tree.prev(e);if(null!==i&&0===b(e.key,i.key))return this.tree.remove(t),i.key;var n=this.tree.next(e);return null!==n&&0===b(e.key,n.key)?(this.tree.remove(t),n.key):t}}]),e}(),w=new x,L=function(t,e){return t.x*e.y-t.y*e.x},M=function(t,e){return t.x*e.x+t.y*e.y},C=function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},o={x:i.x-t.x,y:i.y-t.y},r=L(n,o);return b(r,0)},P=function(t){return Math.sqrt(M(t,t))},S=function(t,e,i){var n={x:e.x-t.x,y:e.y-t.y},o={x:i.x-t.x,y:i.y-t.y};return M(o,n)/P(o)/P(n)},T=function(t,e,i){return 0===e.y?null:{x:t.x+e.x/e.y*(i-t.y),y:i}},A=function(t,e,i){return 0===e.x?null:{x:i,y:t.y+e.y/e.x*(i-t.x)}},E=function(){function e(i,n){t(this,e),void 0===i.events?i.events=[this]:i.events.push(this),this.point=i,this.isLeft=n}return n(e,null,[{key:"compare",value:function(t,i){var n=e.comparePoints(t.point,i.point);return 0!==n?n:(t.point!==i.point&&t.link(i),t.isLeft!==i.isLeft?t.isLeft?1:-1:O.compare(t.segment,i.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,i=0,n=e.length;i<n;i++){var o=e[i];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var i=this.point.events[e];if(void 0===i.segment.consumedBy)for(var n=e+1;n<t;n++){var o=this.point.events[n];void 0===o.consumedBy&&i.otherSE.point.events===o.otherSE.point.events&&i.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,i=this.point.events.length;e<i;e++){var n=this.point.events[e];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&t.push(n)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,i=new Map,n=function(n){var o,r,a,s,l,c=n.otherSE;i.set(n,{sine:(o=e.point,r=t.point,a=c.point,s={x:r.x-o.x,y:r.y-o.y},l={x:a.x-o.x,y:a.y-o.y},L(l,s)/P(l)/P(s)),cosine:S(e.point,t.point,c.point)})};return function(t,e){i.has(t)||n(t),i.has(e)||n(e);var o=i.get(t),r=o.sine,a=o.cosine,s=i.get(e),l=s.sine,c=s.cosine;return r>=0&&l>=0?a<c?1:a>c?-1:0:r<0&&l<0?a<c?-1:a>c?1:0:l<r?-1:l>r?1:0}}}]),e}(),D=0,O=function(){function e(i,n,o,r){t(this,e),this.id=++D,this.leftSE=i,i.segment=this,i.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=i,this.rings=o,this.windings=r}return n(e,null,[{key:"compare",value:function(t,e){var i=t.leftSE.point.x,n=e.leftSE.point.x,o=t.rightSE.point.x,r=e.rightSE.point.x;if(r<i)return 1;if(o<n)return-1;var a=t.leftSE.point.y,s=e.leftSE.point.y,l=t.rightSE.point.y,c=e.rightSE.point.y;if(i<n){if(s<a&&s<l)return 1;if(s>a&&s>l)return-1;var h=t.comparePoint(e.leftSE.point);if(h<0)return 1;if(h>0)return-1;var u=e.comparePoint(t.rightSE.point);return 0!==u?u:-1}if(i>n){if(a<s&&a<c)return-1;if(a>s&&a>c)return 1;var p=e.comparePoint(t.leftSE.point);if(0!==p)return p;var d=t.comparePoint(e.rightSE.point);return d<0?1:d>0?-1:1}if(a<s)return-1;if(a>s)return 1;if(o<r){var m=e.comparePoint(t.rightSE.point);if(0!==m)return m}if(o>r){var f=t.comparePoint(e.rightSE.point);if(f<0)return 1;if(f>0)return-1}if(o!==r){var g=l-a,_=o-i,v=c-s,y=r-n;if(g>_&&v<y)return 1;if(g<_&&v>y)return-1}return o>r?1:o<r||l<c?-1:l>c?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,i=this.rightSE.point,n=this.vector();if(e.x===i.x)return t.x===e.x?0:t.x<e.x?1:-1;var o=(t.y-e.y)/n.y,r=e.x+o*n.x;if(t.x===r)return 0;var a=(t.x-e.x)/n.x,s=e.y+a*n.y;return t.y===s?0:t.y<s?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),i=t.bbox(),n=_(e,i);if(null===n)return null;var o=this.leftSE.point,r=this.rightSE.point,a=t.leftSE.point,s=t.rightSE.point,l=g(e,a)&&0===this.comparePoint(a),c=g(i,o)&&0===t.comparePoint(o),h=g(e,s)&&0===this.comparePoint(s),u=g(i,r)&&0===t.comparePoint(r);if(c&&l)return u&&!h?r:!u&&h?s:null;if(c)return h&&o.x===s.x&&o.y===s.y?null:o;if(l)return u&&r.x===a.x&&r.y===a.y?null:a;if(u&&h)return null;if(u)return r;if(h)return s;var p=function(t,e,i,n){if(0===e.x)return A(i,n,t.x);if(0===n.x)return A(t,e,i.x);if(0===e.y)return T(i,n,t.y);if(0===n.y)return T(t,e,i.y);var o=L(e,n);if(0==o)return null;var r={x:i.x-t.x,y:i.y-t.y},a=L(r,e)/o,s=L(r,n)/o;return{x:(t.x+s*e.x+(i.x+a*n.x))/2,y:(t.y+s*e.y+(i.y+a*n.y))/2}}(o,this.vector(),a,t.vector());return null===p?null:g(n,p)?w.round(p.x,p.y):null}},{key:"split",value:function(t){var i=[],n=void 0!==t.events,o=new E(t,!0),r=new E(t,!1),a=this.rightSE;this.replaceRightSE(r),i.push(r),i.push(o);var s=new e(o,a,this.rings.slice(),this.windings.slice());return E.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),E.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),n&&(o.checkForConsuming(),r.checkForConsuming()),i}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,i=this.windings.length;e<i;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var i=this,n=t;i.consumedBy;)i=i.consumedBy;for(;n.consumedBy;)n=n.consumedBy;var o=e.compare(i,n);if(0!==o){if(o>0){var r=i;i=n,n=r}if(i.prev===n){var a=i;i=n,n=a}for(var s=0,l=n.rings.length;s<l;s++){var c=n.rings[s],h=n.windings[s],u=i.rings.indexOf(c);-1===u?(i.rings.push(c),i.windings.push(h)):i.windings[u]+=h}n.rings=null,n.windings=null,n.consumedBy=i,n.leftSE.consumedBy=i.leftSE,n.rightSE.consumedBy=i.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,i=this._afterState.windings,n=this._afterState.multiPolys,o=0,r=this.rings.length;o<r;o++){var a=this.rings[o],s=this.windings[o],l=e.indexOf(a);-1===l?(e.push(a),i.push(s)):i[l]+=s}for(var c=[],h=[],u=0,p=e.length;u<p;u++)if(0!==i[u]){var d=e[u],m=d.poly;if(-1===h.indexOf(m))if(d.isExterior)c.push(m);else{-1===h.indexOf(m)&&h.push(m);var f=c.indexOf(d.poly);-1!==f&&c.splice(f,1)}}for(var g=0,_=c.length;g<_;g++){var v=c[g].multiPoly;-1===n.indexOf(v)&&n.push(v)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(H.type){case"union":var i=0===t.length,n=0===e.length;this._isInResult=i!==n;break;case"intersection":var o,r;t.length<e.length?(o=t.length,r=e.length):(o=e.length,r=t.length),this._isInResult=r===H.numMultiPolys&&o<r;break;case"xor":var a=Math.abs(t.length-e.length);this._isInResult=a%2==1;break;case"difference":var s=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=s(t)!==s(e);break;default:throw new Error("Unrecognized operation type found ".concat(H.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,i,n){var o,r,a,s=E.comparePoints(t,i);if(s<0)o=t,r=i,a=1;else{if(!(s>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));o=i,r=t,a=-1}return new e(new E(o,!0),new E(r,!1),[n],[a])}}]),e}(),I=function(){function e(i,n,o){if(t(this,e),!Array.isArray(i)||0===i.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],"number"!=typeof i[0][0]||"number"!=typeof i[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var r=w.round(i[0][0],i[0][1]);this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};for(var a=r,s=1,l=i.length;s<l;s++){if("number"!=typeof i[s][0]||"number"!=typeof i[s][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=w.round(i[s][0],i[s][1]);c.x===a.x&&c.y===a.y||(this.segments.push(O.fromRing(a,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),a=c)}r.x===a.x&&r.y===a.y||this.segments.push(O.fromRing(a,r,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.segments.length;e<i;e++){var n=this.segments[e];t.push(n.leftSE),t.push(n.rightSE)}return t}}]),e}(),B=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new I(i[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var o=1,r=i.length;o<r;o++){var a=new I(i[o],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=n}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,i=this.interiorRings.length;e<i;e++)for(var n=this.interiorRings[e].getSweepEvents(),o=0,r=n.length;o<r;o++)t.push(n[o]);return t}}]),e}(),R=function(){function e(i,n){if(t(this,e),!Array.isArray(i))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof i[0][0][0]&&(i=[i])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var o=0,r=i.length;o<r;o++){var a=new B(i[o],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=n}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++)for(var n=this.polys[e].getSweepEvents(),o=0,r=n.length;o<r;o++)t.push(n[o]);return t}}]),e}(),z=function(){function e(i){t(this,e),this.events=i;for(var n=0,o=i.length;n<o;n++)i[n].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var i=[],n=0,o=t.length;n<o;n++){var r=t[n];if(r.isInResult()&&!r.ringOut){for(var a=null,s=r.leftSE,l=r.rightSE,c=[s],h=s.point,u=[];a=s,s=l,c.push(s),s.point!==h;)for(;;){var p=s.getAvailableLinkedEvents();if(0===p.length){var d=c[0].point,m=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(d.x,",")+" ".concat(d.y,"]. Last matching segment found ends at")+" [".concat(m.x,", ").concat(m.y,"]."))}if(1===p.length){l=p[0].otherSE;break}for(var f=null,g=0,_=u.length;g<_;g++)if(u[g].point===s.point){f=g;break}if(null===f){u.push({index:c.length,point:s.point});var v=s.getLeftmostComparator(a);l=p.sort(v)[0].otherSE;break}var y=u.splice(f)[0],b=c.splice(y.index);b.unshift(b[0].otherSE),i.push(new e(b.reverse()))}i.push(new e(c))}}return i}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],i=1,n=this.events.length-1;i<n;i++){var o=this.events[i].point,r=this.events[i+1].point;0!==C(o,t,r)&&(e.push(o),t=o)}if(1===e.length)return null;var a=e[0],s=e[1];0===C(a,t,s)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:e.length-1,h=this.isExteriorRing()?e.length:-1,u=[],p=c;p!=h;p+=l)u.push([e[p].x,e[p].y]);return u}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,i=this.events.length;e<i;e++){var n=this.events[e];E.compare(t,n)>0&&(t=n)}for(var o=t.segment.prevInResult(),r=o?o.prevInResult():null;;){if(!o)return null;if(!r)return o.ringOut;if(r.ringOut!==o.ringOut)return r.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=r.prevInResult(),r=o?o.prevInResult():null}}}]),e}(),F=function(){function e(i){t(this,e),this.exteriorRing=i,i.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,i=this.interiorRings.length;e<i;e++){var n=this.interiorRings[e].getGeom();null!==n&&t.push(n)}return t}}]),e}(),j=function(){function e(i){t(this,e),this.rings=i,this.polys=this._composePolys(i)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,i=this.polys.length;e<i;e++){var n=this.polys[e].getGeom();null!==n&&t.push(n)}return t}},{key:"_composePolys",value:function(t){for(var e=[],i=0,n=t.length;i<n;i++){var o=t[i];if(!o.poly)if(o.isExteriorRing())e.push(new F(o));else{var r=o.enclosingRing();r.poly||e.push(new F(r)),r.poly.addInterior(o)}}return e}}]),e}(),N=function(){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.compare;t(this,e),this.queue=i,this.tree=new h(n),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),i;var n=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!n)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=n,r=n,a=void 0,s=void 0;void 0===a;)null===(o=this.tree.prev(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);for(;void 0===s;)null===(r=this.tree.next(r))?s=null:void 0===r.key.consumedBy&&(s=r.key);if(t.isLeft){var l=null;if(a){var c=a.getIntersection(e);if(null!==c&&(e.isAnEndpoint(c)||(l=c),!a.isAnEndpoint(c)))for(var h=this._splitSafely(a,c),u=0,p=h.length;u<p;u++)i.push(h[u])}var d=null;if(s){var m=s.getIntersection(e);if(null!==m&&(e.isAnEndpoint(m)||(d=m),!s.isAnEndpoint(m)))for(var f=this._splitSafely(s,m),g=0,_=f.length;g<_;g++)i.push(f[g])}if(null!==l||null!==d){var v;v=null===l?d:null===d||E.comparePoints(l,d)<=0?l:d,this.queue.remove(e.rightSE),i.push(e.rightSE);for(var y=e.split(v),b=0,x=y.length;b<x;b++)i.push(y[b])}i.length>0?(this.tree.remove(e),i.push(t)):(this.segments.push(e),e.prev=a)}else{if(a&&s){var k=a.getIntersection(s);if(null!==k){if(!a.isAnEndpoint(k))for(var w=this._splitSafely(a,k),L=0,M=w.length;L<M;L++)i.push(w[L]);if(!s.isAnEndpoint(k))for(var C=this._splitSafely(s,k),P=0,S=C.length;P<S;P++)i.push(C[P])}}this.tree.remove(e)}return i}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var i=t.rightSE;this.queue.remove(i);var n=t.split(e);return n.push(i),void 0===t.consumedBy&&this.tree.insert(t),n}}]),e}(),U=void 0!==e&&e.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,G=void 0!==e&&e.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,H=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,i){H.type=t,w.reset();for(var n=[new R(e,!0)],o=0,r=i.length;o<r;o++)n.push(new R(i[o],!1));if(H.numMultiPolys=n.length,"difference"===H.type)for(var a=n[0],s=1;s<n.length;)null!==_(n[s].bbox,a.bbox)?s++:n.splice(s,1);if("intersection"===H.type)for(var l=0,c=n.length;l<c;l++)for(var u=n[l],p=l+1,d=n.length;p<d;p++)if(null===_(u.bbox,n[p].bbox))return[];for(var m=new h(E.compare),f=0,g=n.length;f<g;f++)for(var v=n[f].getSweepEvents(),y=0,b=v.length;y<b;y++)if(m.insert(v[y]),m.size>U)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var x=new N(m),k=m.size,L=m.pop();L;){var M=L.key;if(m.size===k){var C=M.segment;throw new Error("Unable to pop() ".concat(M.isLeft?"left":"right"," SweepEvent ")+"[".concat(M.point.x,", ").concat(M.point.y,"] from segment #").concat(C.id," ")+"[".concat(C.leftSE.point.x,", ").concat(C.leftSE.point.y,"] -> ")+"[".concat(C.rightSE.point.x,", ").concat(C.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(m.size>U)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(x.segments.length>G)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var P=x.process(M),S=0,T=P.length;S<T;S++){var A=P[S];void 0===A.consumedBy&&m.insert(A)}k=m.size,L=m.pop()}w.reset();var D=z.factory(x.segments);return new j(D).getGeom()}}]),e}());return{union:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return H.run("union",t,i)},intersection:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return H.run("intersection",t,i)},xor:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return H.run("xor",t,i)},difference:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return H.run("difference",t,i)}}}()}).call(this,i(152))},function(t,e,i){var n=i(17)(i(4),"Map");t.exports=n},function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(this,i(83))},function(t,e,i){var n=i(90),o=i(97),r=i(99),a=i(100),s=i(101);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(20),o=i(13);t.exports=function(t,e,i){(void 0!==i&&!o(t[e],i)||void 0===i&&!(e in t))&&n(t,e,i)}},function(t,e,i){var n=i(17),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,i){var n=i(112)(Object.getPrototypeOf,Object);t.exports=n},function(t,e){var i=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||i)}},function(t,e,i){(function(t){var n=i(4),o=i(115),r=e&&!e.nodeType&&e,a=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===r?n.Buffer:void 0,l=(s?s.isBuffer:void 0)||o;t.exports=l}).call(this,i(21)(t))},function(t,e,i){var n=i(117),o=i(118),r=i(119),a=r&&r.isTypedArray,s=a?o(a):n;t.exports=s},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e,i){var n=i(123),o=i(125),r=i(23);t.exports=function(t){return r(t)?n(t,!0):o(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,i){var n=i(6),o=i(137),r=i(138),a=i(141);t.exports=function(t,e){return n(t)?t:o(t,e)?[t]:r(a(t))}},function(t,e,i){var n=i(26);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(16);e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return n.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},function(t){t.exports=JSON.parse('{"name":"@geoman-io/leaflet-geoman-free","version":"2.11.2","description":"A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0","keywords":["leaflet","geoman","polygon management","geometry editing","map data","map overlay","polygon","geojson","leaflet-draw","data-field-geojson","ui-leaflet-draw"],"files":["dist"],"main":"dist/leaflet-geoman.min.js","types":"dist/leaflet-geoman.d.ts","dependencies":{"@turf/boolean-contains":"6.3.0","@turf/kinks":"6.3.0","@turf/line-intersect":"6.3.0","@turf/line-split":"6.3.0","lodash":"4.17.21","polygon-clipping":"0.15.3"},"devDependencies":{"@babel/core":"7.14.0","@babel/preset-env":"7.14.1","@types/leaflet":"^1.7.0","babel-loader":"8.2.2","copy-webpack-plugin":"8.1.1","css-loader":"5.2.4","cypress":"6.9.1","cypress-wait-until":"1.7.1","eslint":"7.26.0","eslint-config-airbnb-base":"14.2.1","eslint-config-prettier":"8.3.0","eslint-plugin-cypress":"2.11.3","eslint-plugin-import":"2.22.1","file-loader":"6.2.0","leaflet":"1.7.1","mini-css-extract-plugin":"1.6.0","prettier":"2.2.1","prosthetic-hand":"1.3.1","terser-webpack-plugin":"^5.1.2","url-loader":"4.1.1","webpack":"5.36.2","webpack-cli":"4.7.0"},"peerDependencies":{"leaflet":"^1.2.0"},"scripts":{"start":"npm run dev","dev":"./node_modules/.bin/webpack --config=webpack.dev.js","test":"./node_modules/.bin/cypress run","cypress":"./node_modules/.bin/cypress open","build":"./node_modules/.bin/webpack --config=webpack.build.js","prepare":"npm run build","eslint-check":"eslint --print-config . | eslint-config-prettier-check","eslint":"eslint src/ --fix","prettier":"prettier --write \'{src,cypress}/**/*.{js,css}\'","lint":"npm run eslint && npm run prettier"},"repository":{"type":"git","url":"git://github.com/geoman-io/leaflet-geoman.git"},"author":{"name":"Sumit Kumar","email":"sumit@geoman.io","url":"http://geoman.io/leaflet-geoman"},"license":"MIT","bugs":{"url":"https://github.com/geoman-io/leaflet-geoman/issues"},"homepage":"https://geoman.io/leaflet-geoman","prettier":{"trailingComma":"es5","tabWidth":2,"semi":true,"singleQuote":true}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex löschen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer löschen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verknüpfen","rotateButton":"Layer drehen"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l\'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Adaugă un punct","firstVertex":"Apasă aici pentru a adăuga primul Vertex","continueLine":"Apasă aici pentru a continua desenul","finishLine":"Apasă pe orice obiect pentru a finisa desenul","finishPoly":"Apasă pe primul obiect pentru a finisa","finishRect":"Apasă pentru a finisa","startCircle":"Apasă pentru a desena un cerc","finishCircle":"Apasă pentru a finisa un cerc","placeCircleMarker":"Adaugă un punct"},"actions":{"finish":"Termină","cancel":"Anulează","removeLastVertex":"Șterge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaugă o bulină","drawPolyButton":"Desenează un poligon","drawLineButton":"Desenează o linie","drawCircleButton":"Desenează un cerc","drawRectButton":"Desenează un dreptunghi","editButton":"Editează straturile","dragButton":"Mută straturile","cutButton":"Taie straturile","deleteButton":"Șterge straturile","drawCircleMarkerButton":"Desenează marcatorul cercului","snappingButton":"Fixați marcatorul glisat pe alte straturi și vârfuri","pinningButton":"Fixați vârfurile partajate împreună"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Нажмите, чтобы нанести маркер","firstVertex":"Нажмите, чтобы нанести первый объект","continueLine":"Нажмите, чтобы продолжить рисование","finishLine":"Нажмите любой существующий маркер для завершения","finishPoly":"Выберите первую точку, чтобы закончить","finishRect":"Нажмите, чтобы закончить","startCircle":"Нажмите, чтобы добавить центр круга","finishCircle":"Нажмите, чтобы задать радиус","placeCircleMarker":"Нажмите, чтобы нанести круговой маркер"},"actions":{"finish":"Завершить","cancel":"Отменить","removeLastVertex":"Отменить последнее действие"},"buttonTitles":{"drawMarkerButton":"Добавить маркер","drawPolyButton":"Рисовать полигон","drawLineButton":"Рисовать кривую","drawCircleButton":"Рисовать круг","drawRectButton":"Рисовать прямоугольник","editButton":"Редактировать слой","dragButton":"Перенести слой","cutButton":"Вырезать слой","deleteButton":"Удалить слой","drawCircleMarkerButton":"Добавить круговой маркер","snappingButton":"Привязать перетаскиваемый маркер к другим слоям и вершинам","pinningButton":"Связать общие точки вместе"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer vértice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del circulo","finishCircle":"Presiona para finalizar el circulo","placeCircleMarker":"Presiona para colocar un marcador de circulo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover ultimo vértice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Polígono","drawLineButton":"Dibujar Línea","drawCircleButton":"Dibujar Circulo","drawRectButton":"Dibujar Rectángulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Remover Capas","drawCircleMarkerButton":"Dibujar Marcador de Circulo","snappingButton":"El marcador de Snap arrastrado a otras capas y vértices","pinningButton":"Fijar juntos los vértices compartidos"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te beëindigen","finishPoly":"Klik op het eerst punt om te beëindigen","finishRect":"Klik om te beëindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te beëindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer à dessiner","finishLine":"Cliquez sur n\'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"Éditer des calques","dragButton":"Déplacer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d\'autres couches et sommets","pinningButton":"Épingler ensemble les sommets partagés"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"单击放置标记","firstVertex":"单击放置首个顶点","continueLine":"单击继续绘制","finishLine":"单击任何存在的标记以完成","finishPoly":"单击第一个标记以完成","finishRect":"单击完成","startCircle":"单击放置圆心","finishCircle":"单击完成圆形","placeCircleMarker":"点击放置圆形标记"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最后的顶点"},"buttonTitles":{"drawMarkerButton":"绘制标记","drawPolyButton":"绘制多边形","drawLineButton":"绘制线段","drawCircleButton":"绘制圆形","drawRectButton":"绘制长方形","editButton":"编辑图层","dragButton":"拖拽图层","cutButton":"剪切图层","deleteButton":"删除图层","drawCircleMarkerButton":"画圆圈标记","snappingButton":"将拖动的标记捕捉到其他图层和顶点","pinningButton":"将共享顶点固定在一起"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"單擊放置標記","firstVertex":"單擊放置第一個頂點","continueLine":"單擊繼續繪製","finishLine":"單擊任何存在的標記以完成","finishPoly":"單擊第一個標記以完成","finishRect":"單擊完成","startCircle":"單擊放置圓心","finishCircle":"單擊完成圓形","placeCircleMarker":"點擊放置圓形標記"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最後一個頂點"},"buttonTitles":{"drawMarkerButton":"放置標記","drawPolyButton":"繪製多邊形","drawLineButton":"繪製線段","drawCircleButton":"繪製圓形","drawRectButton":"繪製方形","editButton":"編輯圖形","dragButton":"移動圖形","cutButton":"裁切圖形","deleteButton":"刪除圖形","drawCircleMarkerButton":"畫圓圈標記","snappingButton":"將拖動的標記對齊到其他圖層和頂點","pinningButton":"將共享頂點固定在一起"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro vértice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o polígono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do círculo","finishCircle":"Clique para fechar o círculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover último vértice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um polígono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um círculo","drawRectButton":"Desenhar um retângulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de círculos de desenho","snappingButton":"Marcador arrastado para outras camadas e vértices","pinningButton":"Vértices compartilhados de pinos juntos"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawić znacznik","firstVertex":"Kliknij, aby ustawić pierwszy punkt","continueLine":"Kliknij, aby kontynuować rysowanie","finishLine":"Kliknij dowolny punkt, aby zakończyć","finishPoly":"Kliknij pierwszy punkt, aby zakończyć","finishRect":"Kliknij, aby zakończyć","startCircle":"Kliknij, aby ustawić środek koła","finishCircle":"Kliknij, aby zakończyć rysowanie koła","placeCircleMarker":"Kliknij, aby ustawić okrągły znacznik"},"actions":{"finish":"Zakończ","cancel":"Anuluj","removeLastVertex":"Usuń ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielokąt","drawLineButton":"Narysuj ścieżkę","drawCircleButton":"Narysuj koło","drawRectButton":"Narysuj prostokąt","editButton":"Edytuj","dragButton":"Przesuń","cutButton":"Wytnij","deleteButton":"Usuń","drawCircleMarkerButton":"Narysuj okrągły znacznik","snappingButton":"Snap przeciągnięty marker na inne warstwy i wierzchołki","pinningButton":"Sworzeń wspólne wierzchołki razem"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klicka för att placera markör","firstVertex":"Klicka för att placera första hörnet","continueLine":"Klicka för att fortsätta rita","finishLine":"Klicka på en existerande punkt för att slutföra","finishPoly":"Klicka på den första punkten för att slutföra","finishRect":"Klicka för att slutföra","startCircle":"Klicka för att placera cirkelns centrum","finishCircle":"Klicka för att slutföra cirkeln","placeCircleMarker":"Klicka för att placera cirkelmarkör"},"actions":{"finish":"Slutför","cancel":"Avbryt","removeLastVertex":"Ta bort sista hörnet"},"buttonTitles":{"drawMarkerButton":"Rita Markör","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmarkör","snappingButton":"Snäpp dra markören till andra lager och hörn","pinningButton":"Fäst delade hörn tillsammans"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Κάντε κλικ για να τοποθετήσετε Δείκτη","firstVertex":"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο","continueLine":"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε","finishLine":"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί","finishPoly":"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε","finishRect":"Κάντε κλικ για να τελειώσετε","startCircle":"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου","finishCircle":"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο","placeCircleMarker":"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},"actions":{"finish":"Τέλος","cancel":"Ακύρωση","removeLastVertex":"Κατάργηση τελευταίου σημείου"},"buttonTitles":{"drawMarkerButton":"Σχεδίαση Δείκτη","drawPolyButton":"Σχεδίαση Πολυγώνου","drawLineButton":"Σχεδίαση Γραμμής","drawCircleButton":"Σχεδίαση Κύκλου","drawRectButton":"Σχεδίαση Ορθογωνίου","editButton":"Επεξεργασία Επιπέδων","dragButton":"Μεταφορά Επιπέδων","cutButton":"Αποκοπή Επιπέδων","deleteButton":"Κατάργηση Επιπέδων","drawCircleMarkerButton":"Σχεδίαση Κυκλικού Δείκτη","snappingButton":"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές","pinningButton":"Περικοπή κοινών κορυφών μαζί"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jelölő elhelyezéséhez","firstVertex":"Kattintson az első pont elhelyezéséhez","continueLine":"Kattintson a következő pont elhelyezéséhez","finishLine":"A befejezéshez kattintson egy meglévő pontra","finishPoly":"A befejezéshez kattintson az első pontra","finishRect":"Kattintson a befejezéshez","startCircle":"Kattintson a kör középpontjának elhelyezéséhez","finishCircle":"Kattintson a kör befejezéséhez","placeCircleMarker":"Kattintson a körjelölő elhelyezéséhez"},"actions":{"finish":"Befejezés","cancel":"Mégse","removeLastVertex":"Utolsó pont eltávolítása"},"buttonTitles":{"drawMarkerButton":"Jelölő rajzolása","drawPolyButton":"Poligon rajzolása","drawLineButton":"Vonal rajzolása","drawCircleButton":"Kör rajzolása","drawRectButton":"Négyzet rajzolása","editButton":"Elemek szerkesztése","dragButton":"Elemek mozgatása","cutButton":"Elemek vágása","deleteButton":"Elemek törlése","drawCircleMarkerButton":"Kör jelölő rajzolása","snappingButton":"Kapcsolja a jelöltőt másik elemhez vagy ponthoz","pinningButton":"Közös pontok összekötése"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en markør","firstVertex":"Tryk for at placere det første punkt","continueLine":"Tryk for at fortsætte linjen","finishLine":"Tryk på et eksisterende punkt for at afslutte","finishPoly":"Tryk på det første punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmarkør"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer markør","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Træk","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmarkør","snappingButton":"Fastgør trukket markør til andre elementer","pinningButton":"Sammenlæg delte elementer"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Klikk for å plassere punkt","firstVertex":"Klikk for å plassere første punkt","continueLine":"Klikk for å tegne videre","finishLine":"Klikk på et eksisterende punkt for å fullføre","finishPoly":"Klikk første punkt for å fullføre","finishRect":"Klikk for å fullføre","startCircle":"Klikk for å sette sirkel midtpunkt","finishCircle":"Klikk for å fullføre sirkel","placeCircleMarker":"Klikk for å plassere sirkel"},"actions":{"finish":"Fullfør","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"کلیک برای جانمایی نشان","firstVertex":"کلیک برای رسم اولین رأس","continueLine":"کلیک برای ادامه رسم","finishLine":"کلیک روی هر نشان موجود برای پایان","finishPoly":"کلیک روی اولین نشان برای پایان","finishRect":"کلیک برای پایان","startCircle":"کلیک برای رسم مرکز دایره","finishCircle":"کلیک برای پایان رسم دایره","placeCircleMarker":"کلیک برای رسم نشان دایره"},"actions":{"finish":"پایان","cancel":"لفو","removeLastVertex":"حذف آخرین رأس"},"buttonTitles":{"drawMarkerButton":"درج نشان","drawPolyButton":"رسم چندضلعی","drawLineButton":"رسم خط","drawCircleButton":"رسم دایره","drawRectButton":"رسم چهارضلعی","editButton":"ویرایش لایه‌ها","dragButton":"جابجایی لایه‌ها","cutButton":"برش لایه‌ها","deleteButton":"حذف لایه‌ها","drawCircleMarkerButton":"رسم نشان دایره","snappingButton":"نشانگر را به لایه‌ها و رئوس دیگر بکشید","pinningButton":"رئوس مشترک را با هم پین کنید"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Натисніть, щоб нанести маркер","firstVertex":"Натисніть, щоб нанести першу вершину","continueLine":"Натисніть, щоб продовжити малювати","finishLine":"Натисніть будь-який існуючий маркер для завершення","finishPoly":"Виберіть перший маркер, щоб завершити","finishRect":"Натисніть, щоб завершити","startCircle":"Натисніть, щоб додати центр кола","finishCircle":"Натисніть, щоб завершити коло","placeCircleMarker":"Натисніть, щоб нанести круговий маркер"},"actions":{"finish":"Завершити","cancel":"Відмінити","removeLastVertex":"Видалити попередню вершину"},"buttonTitles":{"drawMarkerButton":"Малювати маркер","drawPolyButton":"Малювати полігон","drawLineButton":"Малювати криву","drawCircleButton":"Малювати коло","drawRectButton":"Малювати прямокутник","editButton":"Редагувати шари","dragButton":"Перенести шари","cutButton":"Вирізати шари","deleteButton":"Видалити шари","drawCircleMarkerButton":"Малювати круговий маркер","snappingButton":"Прив’язати перетягнутий маркер до інших шарів та вершин","pinningButton":"Зв\'язати спільні вершини разом"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"İşaretçi yerleştirmek için tıklayın","firstVertex":"İlk tepe noktasını yerleştirmek için tıklayın","continueLine":"Çizime devam etmek için tıklayın","finishLine":"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın","finishPoly":"Bitirmek için ilk işaretçiyi tıklayın","finishRect":"Bitirmek için tıklayın","startCircle":"Daire merkezine yerleştirmek için tıklayın","finishCircle":"Daireyi bitirmek için tıklayın","placeCircleMarker":"Daire işaretçisi yerleştirmek için tıklayın"},"actions":{"finish":"Bitir","cancel":"İptal","removeLastVertex":"Son köşeyi kaldır"},"buttonTitles":{"drawMarkerButton":"Çizim İşaretçisi","drawPolyButton":"Çokgenler çiz","drawLineButton":"Çoklu çizgi çiz","drawCircleButton":"Çember çiz","drawRectButton":"Dikdörtgen çiz","editButton":"Katmanları düzenle","dragButton":"Katmanları sürükle","cutButton":"Katmanları kes","deleteButton":"Katmanları kaldır","drawCircleMarkerButton":"Daire işaretçisi çiz","snappingButton":"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır","pinningButton":"Paylaşılan köşeleri birbirine sabitle"}}')},function(t){t.exports=JSON.parse('{"tooltips":{"placeMarker":"Kliknutím vytvoříte značku","firstVertex":"Kliknutím vytvoříte první objekt","continueLine":"Kliknutím pokračujte v kreslení","finishLine":"Kliknutí na libovolnou existující značku pro dokončení","finishPoly":"Vyberte první bod pro dokončení","finishRect":"Klikněte pro dokončení","startCircle":"Kliknutím přidejte střed kruhu","finishCircle":"Нажмите, чтобы задать радиус","placeCircleMarker":"Kliknutím nastavte poloměr"},"actions":{"finish":"Dokončit","cancel":"Zrušit","removeLastVertex":"Zrušit poslední akci"},"buttonTitles":{"drawMarkerButton":"Přidat značku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit křivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obdélník","editButton":"Upravit vrstvu","dragButton":"Přeneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"Přidat kruhovou značku","snappingButton":"Navázat tažnou značku k dalším vrstvám a vrcholům","pinningButton":"Spojit společné body dohromady"}}')},function(t,e,i){var n=i(144),o=i(145);t.exports=function(t,e){return null!=t&&o(t,e,n)}},function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(i(42)),r=n(i(150)),a=n(i(151)),s=i(10);function l(t,e){var i,n=!1;for(i=0;i<t.coordinates.length;i++)if(g(t.coordinates[i],e.coordinates)){n=!0;break}return n}function c(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){for(var o=n[i],r=!1,a=0,s=t.coordinates;a<s.length;a++)if(g(o,s[a])){r=!0;break}if(!r)return!1}return!0}function h(t,e){for(var i=!1,n=0,o=e.coordinates;n<o.length;n++){var r=o[n];if(a.default(r,t,{ignoreEndVertices:!0})&&(i=!0),!a.default(r,t))return!1}return!!i}function u(t,e){for(var i=0,n=e.coordinates;i<n.length;i++){var o=n[i];if(!r.default(o,t,{ignoreBoundary:!0}))return!1}return!0}function p(t,e){for(var i=!1,n=0,o=e.coordinates;n<o.length;n++){var r=o[n];if(a.default({type:"Point",coordinates:r},t,{ignoreEndVertices:!0})&&(i=!0),!a.default({type:"Point",coordinates:r},t,{ignoreEndVertices:!1}))return!1}return i}function d(t,e){var i=!1,n=0;if(!f(o.default(t),o.default(e)))return!1;for(;n<e.coordinates.length-1;n++){var a=_(e.coordinates[n],e.coordinates[n+1]);if(r.default({type:"Point",coordinates:a},t,{ignoreBoundary:!0})){i=!0;break}}return i}function m(t,e){if("Feature"===t.type&&null===t.geometry)return!1;if("Feature"===e.type&&null===e.geometry)return!1;if(!f(o.default(t),o.default(e)))return!1;for(var i=0,n=s.getGeom(e).coordinates;i<n.length;i++)for(var a=0,l=n[i];a<l.length;a++){var c=l[a];if(!r.default(c,t))return!1}return!0}function f(t,e){return!(t[0]>e[0]||t[2]<e[2]||t[1]>e[1]||t[3]<e[3])}function g(t,e){return t[0]===e[0]&&t[1]===e[1]}function _(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}e.default=function(t,e){var i=s.getGeom(t),n=s.getGeom(e),o=s.getType(t),f=s.getType(e),_=s.getCoords(t),v=s.getCoords(e);switch(o){case"Point":switch(f){case"Point":return g(_,v);default:throw new Error("feature2 "+f+" geometry not supported")}case"MultiPoint":switch(f){case"Point":return l(i,n);case"MultiPoint":return c(i,n);default:throw new Error("feature2 "+f+" geometry not supported")}case"LineString":switch(f){case"Point":return a.default(n,i,{ignoreEndVertices:!0});case"LineString":return p(i,n);case"MultiPoint":return h(i,n);default:throw new Error("feature2 "+f+" geometry not supported")}case"Polygon":switch(f){case"Point":return r.default(n,i,{ignoreBoundary:!0});case"LineString":return d(i,n);case"Polygon":return m(i,n);case"MultiPoint":return u(i,n);default:throw new Error("feature2 "+f+" geometry not supported")}default:throw new Error("feature1 "+o+" geometry not supported")}},e.isPointInMultiPoint=l,e.isMultiPointInMultiPoint=c,e.isMultiPointOnLine=h,e.isMultiPointInPoly=u,e.isLineOnLine=p,e.isLineInPoly=d,e.isPolyInPoly=m,e.doBBoxOverlap=f,e.compareCoords=g,e.getMidpoint=_},function(t,e,i){t.exports=i(155)},function(t,e){Array.prototype.findIndex=Array.prototype.findIndex||function(t){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],o=0;o<i;o++)if(t.call(n,e[o],o,e))return o;return-1},Array.prototype.find=Array.prototype.find||function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=Object(this),i=e.length>>>0,n=arguments[1],o=0;o<i;o++){var r=e[o];if(t.call(n,r,o,e))return r}},"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var i=arguments[e];if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach((function(t){t.hasOwnProperty("remove")||Object.defineProperty(t,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;for(var o,r,a=0|e,s=Math.max(a>=0?a:n-Math.abs(a),0);s<n;){if((o=i[s])===(r=t)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1}})},function(t,e,i){var n=i(71),o=i(31),r=i(102),a=i(104),s=i(2),l=i(38),c=i(37);t.exports=function t(e,i,h,u,p){e!==i&&r(i,(function(r,l){if(p||(p=new n),s(r))a(e,i,l,h,t,u,p);else{var d=u?u(c(e,l),r,l+"",e,i,p):void 0;void 0===d&&(d=r),o(e,l,d)}}),l)}},function(t,e,i){var n=i(11),o=i(77),r=i(78),a=i(79),s=i(80),l=i(81);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=r,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,i){var n=i(12),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,i=n(e,t);return!(i<0||(i==e.length-1?e.pop():o.call(e,i,1),--this.size,0))}},function(t,e,i){var n=i(12);t.exports=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]}},function(t,e,i){var n=i(12);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,i){var n=i(12);t.exports=function(t,e){var i=this.__data__,o=n(i,t);return o<0?(++this.size,i.push([t,e])):i[o][1]=e,this}},function(t,e,i){var n=i(11);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,i){var n=i(11),o=i(28),r=i(30);t.exports=function(t,e){var i=this.__data__;if(i instanceof n){var a=i.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++i.size,this;i=this.__data__=new r(a)}return i.set(t,e),this.size=i.size,this}},function(t,e,i){var n=i(18),o=i(86),r=i(2),a=i(88),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,h=l.toString,u=c.hasOwnProperty,p=RegExp("^"+h.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!r(t)||o(t))&&(n(t)?p:s).test(a(t))}},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(19),o=Object.prototype,r=o.hasOwnProperty,a=o.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=r.call(t,s),i=t[s];try{t[s]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[s]=i:delete t[s]),o}},function(t,e){var i=Object.prototype.toString;t.exports=function(t){return i.call(t)}},function(t,e,i){var n,o=i(87),r=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!r&&r in t}},function(t,e,i){var n=i(4)["__core-js_shared__"];t.exports=n},function(t,e){var i=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,i){var n=i(91),o=i(11),r=i(28);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(r||o),string:new n}}},function(t,e,i){var n=i(92),o=i(93),r=i(94),a=i(95),s=i(96);function l(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=s,t.exports=l},function(t,e,i){var n=i(14);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,i){var n=i(14),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return o.call(e,t)?e[t]:void 0}},function(t,e,i){var n=i(14),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},function(t,e,i){var n=i(14);t.exports=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,i){var n=i(15);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,i){var n=i(15);t.exports=function(t){return n(this,t).get(t)}},function(t,e,i){var n=i(15);t.exports=function(t){return n(this,t).has(t)}},function(t,e,i){var n=i(15);t.exports=function(t,e){var i=n(this,t),o=i.size;return i.set(t,e),this.size+=i.size==o?0:1,this}},function(t,e,i){var n=i(103)();t.exports=n},function(t,e){t.exports=function(t){return function(e,i,n){for(var o=-1,r=Object(e),a=n(e),s=a.length;s--;){var l=a[t?s:++o];if(!1===i(r[l],l,r))break}return e}}},function(t,e,i){var n=i(31),o=i(105),r=i(106),a=i(109),s=i(110),l=i(22),c=i(6),h=i(114),u=i(35),p=i(18),d=i(2),m=i(116),f=i(36),g=i(37),_=i(120);t.exports=function(t,e,i,v,y,b,x){var k=g(t,i),w=g(e,i),L=x.get(w);if(L)n(t,i,L);else{var M=b?b(k,w,i+"",t,e,x):void 0,C=void 0===M;if(C){var P=c(w),S=!P&&u(w),T=!P&&!S&&f(w);M=w,P||S||T?c(k)?M=k:h(k)?M=a(k):S?(C=!1,M=o(w,!0)):T?(C=!1,M=r(w,!0)):M=[]:m(w)||l(w)?(M=k,l(k)?M=_(k):d(k)&&!p(k)||(M=s(w))):C=!1}C&&(x.set(w,M),y(M,w,v,b,x),x.delete(w)),n(t,i,M)}}},function(t,e,i){(function(t){var n=i(4),o=e&&!e.nodeType&&e,r=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=r&&r.exports===o?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var i=t.length,n=s?s(i):new t.constructor(i);return t.copy(n),n}}).call(this,i(21)(t))},function(t,e,i){var n=i(107);t.exports=function(t,e){var i=e?n(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}},function(t,e,i){var n=i(108);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},function(t,e,i){var n=i(4).Uint8Array;t.exports=n},function(t,e){t.exports=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}},function(t,e,i){var n=i(111),o=i(33),r=i(34);t.exports=function(t){return"function"!=typeof t.constructor||r(t)?{}:n(o(t))}},function(t,e,i){var n=i(2),o=Object.create,r=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();t.exports=r},function(t,e){t.exports=function(t,e){return function(i){return t(e(i))}}},function(t,e,i){var n=i(9),o=i(5);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},function(t,e,i){var n=i(23),o=i(5);t.exports=function(t){return o(t)&&n(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,i){var n=i(9),o=i(33),r=i(5),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,h=l.call(Object);t.exports=function(t){if(!r(t)||"[object Object]"!=n(t))return!1;var e=o(t);if(null===e)return!0;var i=c.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&l.call(i)==h}},function(t,e,i){var n=i(9),o=i(24),r=i(5),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return r(t)&&o(t.length)&&!!a[n(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,i){(function(t){var n=i(29),o=e&&!e.nodeType&&e,r=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=r&&r.exports===o&&n.process,s=function(){try{return r&&r.require&&r.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(this,i(21)(t))},function(t,e,i){var n=i(121),o=i(38);t.exports=function(t){return n(t,o(t))}},function(t,e,i){var n=i(122),o=i(20);t.exports=function(t,e,i,r){var a=!i;i||(i={});for(var s=-1,l=e.length;++s<l;){var c=e[s],h=r?r(i[c],t[c],c,i,t):void 0;void 0===h&&(h=t[c]),a?o(i,c,h):n(i,c,h)}return i}},function(t,e,i){var n=i(20),o=i(13),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){var a=t[e];r.call(t,e)&&o(a,i)&&(void 0!==i||e in t)||n(t,e,i)}},function(t,e,i){var n=i(124),o=i(22),r=i(6),a=i(35),s=i(25),l=i(36),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var i=r(t),h=!i&&o(t),u=!i&&!h&&a(t),p=!i&&!h&&!u&&l(t),d=i||h||u||p,m=d?n(t.length,String):[],f=m.length;for(var g in t)!e&&!c.call(t,g)||d&&("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,f))||m.push(g);return m}},function(t,e){t.exports=function(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}},function(t,e,i){var n=i(2),o=i(34),r=i(126),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return r(t);var e=o(t),i=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&i.push(s);return i}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}},function(t,e,i){var n=i(128),o=i(135);t.exports=function(t){return n((function(e,i){var n=-1,r=i.length,a=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(a=t.length>3&&"function"==typeof a?(r--,a):void 0,s&&o(i[0],i[1],s)&&(a=r<3?void 0:a,r=1),e=Object(e);++n<r;){var l=i[n];l&&t(e,l,n,a)}return e}))}},function(t,e,i){var n=i(39),o=i(129),r=i(131);t.exports=function(t,e){return r(o(t,e,n),t+"")}},function(t,e,i){var n=i(130),o=Math.max;t.exports=function(t,e,i){return e=o(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,s=o(r.length-e,0),l=Array(s);++a<s;)l[a]=r[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=r[a];return c[e]=i(l),n(t,this,c)}}},function(t,e){t.exports=function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}},function(t,e,i){var n=i(132),o=i(134)(n);t.exports=o},function(t,e,i){var n=i(133),o=i(32),r=i(39),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:r;t.exports=a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var i=Date.now;t.exports=function(t){var e=0,n=0;return function(){var o=i(),r=16-(o-n);if(n=o,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,i){var n=i(13),o=i(23),r=i(25),a=i(2);t.exports=function(t,e,i){if(!a(i))return!1;var s=typeof e;return!!("number"==s?o(i)&&r(e,i.length):"string"==s&&e in i)&&n(i[e],t)}},function(t,e,i){var n=i(40),o=i(41);t.exports=function(t,e){for(var i=0,r=(e=n(e,t)).length;null!=t&&i<r;)t=t[o(e[i++])];return i&&i==r?t:void 0}},function(t,e,i){var n=i(6),o=i(26),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(n(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!o(t))||a.test(t)||!r.test(t)||null!=e&&t in Object(e)}},function(t,e,i){var n=i(139),o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,i,n,o){e.push(n?o.replace(r,"$1"):i||t)})),e}));t.exports=a},function(t,e,i){var n=i(140);t.exports=function(t){var e=n(t,(function(t){return 500===i.size&&i.clear(),t})),i=e.cache;return e}},function(t,e,i){var n=i(30);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var n=arguments,o=e?e.apply(this,n):n[0],r=i.cache;if(r.has(o))return r.get(o);var a=t.apply(this,n);return i.cache=r.set(o,a)||r,a};return i.cache=new(o.Cache||n),i}o.Cache=n,t.exports=o},function(t,e,i){var n=i(142);t.exports=function(t){return null==t?"":n(t)}},function(t,e,i){var n=i(19),o=i(143),r=i(6),a=i(26),s=n?n.prototype:void 0,l=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(r(e))return o(e,t)+"";if(a(e))return l?l.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i}},function(t,e){t.exports=function(t,e){for(var i=-1,n=null==t?0:t.length,o=Array(n);++i<n;)o[i]=e(t[i],i,t);return o}},function(t,e){var i=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&i.call(t,e)}},function(t,e,i){var n=i(40),o=i(22),r=i(6),a=i(25),s=i(24),l=i(41);t.exports=function(t,e,i){for(var c=-1,h=(e=n(e,t)).length,u=!1;++c<h;){var p=l(e[c]);if(!(u=null!=t&&i(t,p)))break;t=t[p]}return u||++c!=h?u:!!(h=null==t?0:t.length)&&s(h)&&a(p,h)&&(r(t)||o(t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(7),o=i(10),r=i(16);e.default=function(t){if(!t)throw new Error("geojson is required");var e=[];return r.flattenEach(t,(function(t){!function(t,e){var i=[],r=t.geometry;if(null!==r){switch(r.type){case"Polygon":i=o.getCoords(r);break;case"LineString":i=[o.getCoords(r)]}i.forEach((function(i){(function(t,e){var i=[];return t.reduce((function(t,o){var r,a,s,l,c,h,u=n.lineString([t,o],e);return u.bbox=(a=o,s=(r=t)[0],l=r[1],[s<(c=a[0])?s:c,l<(h=a[1])?l:h,s>c?s:c,l>h?l:h]),i.push(u),o})),i})(i,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}}(t,e)})),n.featureCollection(e)}},function(t,e,i){var n=i(148),o=i(7),r=i(16),a=i(42).default,s=r.featureEach,l=(r.coordEach,o.polygon,o.featureCollection);function c(t){var e=n(t);return e.insert=function(t){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})):s(t,(function(t){if("Feature"!==t.type)throw new Error("invalid features");t.bbox=t.bbox?t.bbox:a(t),e.push(t)})),n.prototype.load.call(this,e)},e.remove=function(t,e){if("Feature"!==t.type)throw new Error("invalid feature");return t.bbox=t.bbox?t.bbox:a(t),n.prototype.remove.call(this,t,e)},e.clear=function(){return n.prototype.clear.call(this)},e.search=function(t){var e=n.prototype.search.call(this,this.toBBox(t));return l(e)},e.collides=function(t){return n.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=n.prototype.all.call(this);return l(t)},e.toJSON=function(){return n.prototype.toJSON.call(this)},e.fromJSON=function(t){return n.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;if(t.bbox)e=t.bbox;else if(Array.isArray(t)&&4===t.length)e=t;else if(Array.isArray(t)&&6===t.length)e=[t[0],t[1],t[3],t[4]];else if("Feature"===t.type)e=a(t);else{if("FeatureCollection"!==t.type)throw new Error("invalid geojson");e=a(t)}return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}t.exports=c,t.exports.default=c},function(t,e,i){"use strict";t.exports=o,t.exports.default=o;var n=i(149);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,n,o){o||(o=f(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,a=e;a<i;a++)r=t.children[a],l(o,t.leaf?n(r):r);return o}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(t,e,i,o,r){for(var a,s=[e,i];s.length;)(i=s.pop())-(e=s.pop())<=o||(a=e+Math.ceil((i-e)/o/2)*o,n(t,a,e,i,r),s.push(e,a,a,i))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!m(t,e))return i;for(var o,r,a,s,l=[];e;){for(o=0,r=e.children.length;o<r;o++)a=e.children[o],m(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):d(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!m(t,e))return!1;for(var n,o,r,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(r=e.children[n],m(t,a=e.leaf?i(r):r)){if(e.leaf||d(t,a))return!0;s.push(r)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,a,s=this.data,l=this.toBBox(t),c=[],h=[];s||c.length;){if(s||(s=c.pop(),n=c[c.length-1],i=h.pop(),a=!0),s.leaf&&-1!==(o=r(t,s.children,e)))return s.children.splice(o,1),c.push(s),this._condense(c),this;a||s.leaf||!d(s,l)?n?(i++,s=n.children[i],a=!1):s=null:(c.push(s),h.push(i),i=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:c,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var o,r=i-e+1,s=this._maxEntries;if(r<=s)return a(o=f(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(r)/Math.log(s)),s=Math.ceil(r/Math.pow(s,n-1))),(o=f([])).leaf=!1,o.height=n;var l,c,h,u,p=Math.ceil(r/s),d=p*Math.ceil(Math.sqrt(s));for(g(t,e,i,d,this.compareMinX),l=e;l<=i;l+=d)for(g(t,l,h=Math.min(l+d-1,i),p,this.compareMinY),c=l;c<=h;c+=p)u=Math.min(c+p-1,h),o.children.push(this._build(t,c,u,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,i,n){for(var o,r,a,s,l,c,h,p,d,m;n.push(e),!e.leaf&&n.length-1!==i;){for(h=p=1/0,o=0,r=e.children.length;o<r;o++)l=u(a=e.children[o]),d=t,m=a,(c=(Math.max(m.maxX,d.maxX)-Math.min(m.minX,d.minX))*(Math.max(m.maxY,d.maxY)-Math.min(m.minY,d.minY))-l)<p?(p=c,h=l<h?l:h,s=a):c===p&&l<h&&(h=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,o=i?t:n(t),r=[],a=this._chooseSubtree(o,this.data,e,r);for(a.children.push(t),l(a,o);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(o,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var r=this._chooseSplitIndex(i,o,n),s=f(i.children.splice(r,i.children.length-r));s.height=i.height,s.leaf=i.leaf,a(i,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,o,r,a,l,c,h,p,d,m,f,g,_,v;for(c=h=1/0,n=e;n<=i-e;n++)d=o=s(t,0,n,this.toBBox),m=r=s(t,n,i,this.toBBox),void 0,void 0,void 0,void 0,f=Math.max(d.minX,m.minX),g=Math.max(d.minY,m.minY),_=Math.min(d.maxX,m.maxX),v=Math.min(d.maxY,m.maxY),a=Math.max(0,_-f)*Math.max(0,v-g),l=u(o)+u(r),a<c?(c=a,p=n,h=l<h?l:h):a===c&&l<h&&(h=l,p=n);return p},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:c,o=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var o,r,a=this.toBBox,c=s(t,0,e,a),h=s(t,i-e,i,a),u=p(c)+p(h);for(o=e;o<i-e;o++)r=t.children[o],l(c,t.leaf?a(r):r),u+=p(c);for(o=i-e-1;o>=e;o--)r=t.children[o],l(h,t.leaf?a(r):r),u+=p(h);return u},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)l(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){t.exports=function(){"use strict";function t(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(i,n,o,r,a){!function e(i,n,o,r,a){for(;r>o;){if(r-o>600){var s=r-o+1,l=n-o+1,c=Math.log(s),h=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*h*(s-h)/s)*(l-s/2<0?-1:1);e(i,n,Math.max(o,Math.floor(n-l*h/s+u)),Math.min(r,Math.floor(n+(s-l)*h/s+u)),a)}var p=i[n],d=o,m=r;for(t(i,o,n),a(i[r],p)>0&&t(i,o,r);d<m;){for(t(i,d,m),d++,m--;a(i[d],p)<0;)d++;for(;a(i[m],p)>0;)m--}0===a(i[o],p)?t(i,o,m):t(i,++m,r),m<=n&&(o=m+1),n<=m&&(r=m-1)}}(i,n,o||0,r||i.length-1,a||e)}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10);function o(t,e,i){var n=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var o=0,r=e.length-1;o<e.length;r=o++){var a=e[o][0],s=e[o][1],l=e[r][0],c=e[r][1];if(t[1]*(a-l)+s*(l-t[0])+c*(t[0]-a)==0&&(a-t[0])*(l-t[0])<=0&&(s-t[1])*(c-t[1])<=0)return!i;s>t[1]!=c>t[1]&&t[0]<(l-a)*(t[1]-s)/(c-s)+a&&(n=!n)}return n}e.default=function(t,e,i){if(void 0===i&&(i={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=n.getCoord(t),a=n.getGeom(e),s=a.type,l=e.bbox,c=a.coordinates;if(l&&!1===function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}(r,l))return!1;"Polygon"===s&&(c=[c]);for(var h=!1,u=0;u<c.length&&!h;u++)if(o(r,c[u][0],i.ignoreBoundary)){for(var p=!1,d=1;d<c[u].length&&!p;)o(r,c[u][d],!i.ignoreBoundary)&&(p=!0),d++;p||(h=!0)}return h}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(10);function o(t,e,i,n){var o=i[0],r=i[1],a=t[0],s=t[1],l=e[0],c=e[1],h=l-a,u=c-s;return 0==(i[0]-a)*u-(i[1]-s)*h&&(n?"start"===n?Math.abs(h)>=Math.abs(u)?h>0?a<o&&o<=l:l<=o&&o<a:u>0?s<r&&r<=c:c<=r&&r<s:"end"===n?Math.abs(h)>=Math.abs(u)?h>0?a<=o&&o<l:l<o&&o<=a:u>0?s<=r&&r<c:c<r&&r<=s:"both"===n&&(Math.abs(h)>=Math.abs(u)?h>0?a<o&&o<l:l<o&&o<a:u>0?s<r&&r<c:c<r&&r<s):Math.abs(h)>=Math.abs(u)?h>0?a<=o&&o<=l:l<=o&&o<=a:u>0?s<=r&&r<=c:c<=r&&r<=s)}e.default=function(t,e,i){void 0===i&&(i={});for(var r=n.getCoord(t),a=n.getCoords(e),s=0;s<a.length-1;s++){var l=!1;if(i.ignoreEndVertices&&(0===s&&(l="start"),s===a.length-2&&(l="end"),0===s&&s+1===a.length-1&&(l="both")),o(a[s],a[s+1],r,l))return!0}return!1}},function(t,e){var i,n,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var l,c=[],h=!1,u=-1;function p(){h&&l&&(h=!1,l.length?c=l.concat(c):u=-1,c.length&&d())}function d(){if(!h){var t=s(p);h=!0;for(var e=c.length;e;){for(l=c,c=[];++u<e;)l&&l[u].run();u=-1,e=c.length}l=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function f(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new m(t,e)),1!==c.length||h||s(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e),i(69);var n=i(43),o=i(3),r=i.n(o),a=i(44),s=i(45),l=i(46),c=i(47),h=i(48),u=i(49),p=i(50),d=i(51),m=i(52),f=i(53),g=i(54),_={en:a,de:s,it:l,id:c,ro:h,ru:u,es:p,nl:d,fr:m,pt_br:i(55),zh:f,zh_tw:g,pl:i(56),sv:i(57),el:i(58),hu:i(59),da:i(60),no:i(61),fa:i(62),ua:i(63),tr:i(64),cz:i(65)};function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function y(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var b={_globalEditModeEnabled:!1,enableGlobalEditMode:function(t){this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach((function(e){e.pm.enable(t)})),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers=[],this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach((function(t){t.pm.disable()})),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var t=this,e=this._addedLayers;this._addedLayers=[],e.forEach((function(e){e.pm&&!e._pmTempLayer&&t.globalEditModeEnabled()&&e.pm.enable(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){y(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t.globalOptions))}))},_layerAdded:function(t){var e=t.layer;this._addedLayers.push(e)}},x={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,t.forEach((function(t){t.pm.enableLayerDrag()})),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,t.forEach((function(t){t.pm.disableLayerDrag()})),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(t){var e=t.layer;e.pm&&!e._pmTempLayer&&this.globalDragModeEnabled()&&(this.disableGlobalDragMode(),this.enableGlobalDragMode())}},k={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer((function(e){t._isRelevantForRemoval(e)&&(e.pm.disable(),e.on("click",t.removeLayer,t))})),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("deleteLayer",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer((function(e){e.off("click",t.removeLayer,t)})),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("deleteLayer",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(t){var e=t.layer;this._isRelevantForRemoval(e)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(t){var e=t.target;this._isRelevantForRemoval(e)&&!e.pm.dragging()&&(e.removeFrom(this.map.pm._getContainingLayer()),e.remove(),e instanceof L.LayerGroup?(this._fireRemoveLayerGroup(e),this._fireRemoveLayerGroup(this.map,e)):(e.pm._fireRemove(e),e.pm._fireRemove(this.map,e)))},_isRelevantForRemoval:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore)&&!t._pmTempLayer&&t.pm.options.allowRemoval}},w={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var t=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter((function(t){return t instanceof L.Polyline})).forEach((function(e){t._isRelevantForRotate(e)&&e.pm.enableRotate()})),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter((function(t){return t instanceof L.Polyline})).forEach((function(t){t.pm.disableRotate()})),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(t){var e=t.layer;this._isRelevantForRotate(e)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore)&&!t._pmTempLayer&&t.pm.options.allowRotation}};function M(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function C(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?M(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var S={_fireDrawStart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},t,e)},_fireDrawEnd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},t,e)},_fireCreate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Draw",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:t,layer:t},e,i)},_fireCenterPlaced:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Draw",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="Draw"===t?this._layer:void 0,n="Draw"!==t?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:i,layer:n,latlng:this._layer.getLatLng()},t,e)},_fireCut:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Draw",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(t,"pm:cut",{shape:this._shape,layer:e,originalLayer:i},n,o)},_fireEdit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layer,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(t,"pm:edit",{layer:this._layer,shape:this.getShape()},e,i)},_fireEnable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDisable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},t,e)},_fireUpdate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},t,e)},_fireMarkerDragStart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},i,n)},_fireMarkerDrag:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},i,n)},_fireMarkerDragEnd:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Edit",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e,intersectionReset:i},n,o)},_fireDragStart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},t,e)},_fireDrag:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:drag",C(C({},t),{},{shape:this.getShape()}),e,i)},_fireDragEnd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Edit",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},t,e)},_fireRemove:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:this.getShape()},i,n)},_fireVertexAdded:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Edit",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:t,indexPath:e,latlng:i,shape:this.getShape()},n,o)},_fireVertexRemoved:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:t,indexPath:e,shape:this.getShape()},i,n)},_fireVertexClick:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},i,n)},_fireIntersect:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Edit",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:t,shape:this.getShape()},e,i)},_fireLayerReset:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},i,n)},_fireSnapDrag:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:snapdrag",e,i,n)},_fireSnap:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:snap",e,i,n)},_fireUnsnap:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Snapping",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:unsnap",e,i,n)},_fireRotationEnable:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Rotation",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly},i,n)},_fireRotationDisable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Rotation",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(t,"pm:rotatedisable",{layer:this._layer},e,i)},_fireRotationStart:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Rotation",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:e},i,n)},_fireRotation:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Rotation",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(t,"pm:rotate",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,angle:this._rotationLayer.pm.getAngle(),angleDiff:e,oldLatLngs:i,newLatLngs:this._rotationLayer.getLatLngs()},n,o)},_fireRotationEnd:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Rotation",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(t,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:e,angle:this._rotationLayer.pm.getAngle(),originLatLngs:i,newLatLngs:this._rotationLayer.getLatLngs()},n,o)},_fireActionClick:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Toolbar",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:t.text,action:t,btnName:e,button:i},n,o)},_fireButtonClick:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Toolbar",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:t,button:e},i,n)},_fireLangChange:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Global",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:t,activeLang:e,fallback:i,translations:n},o,r)},_fireGlobalDragModeToggled:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map},e,i)},_fireGlobalEditModeToggled:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map},e,i)},_fireGlobalRemovalModeToggled:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Global",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map},e,i)},_fireGlobalCutModeToggled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},t,e)},_fireGlobalDrawModeToggled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},t,e)},_fireGlobalRotateModeToggled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Global",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},t,e)},_fireRemoveLayerGroup:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Edit",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:void 0},i,n)},_fireKeyeventEvent:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Global",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:t,eventType:e,focusOn:i},n,o)},__fire:function(t,e,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};i=r()(i,o,{source:n}),L.PM.Utils._fireEvent(t,e,i)}},T={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(t){this.map=t,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this)},_onKeyListener:function(t){var e="document";this.map.getContainer().contains(t.target)&&(e="map");var i={event:t,eventType:t.type,focusOn:e};this._lastEvents[t.type]=i,this._lastEvents.current=i,this.map.pm._fireKeyeventEvent(t,t.type,e)},getLastKeyEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current";return this._lastEvents[t]},isShiftKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.shiftKey},isAltKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.altKey},isCtrlKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.ctrlKey},isMetaKeyPressed:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.metaKey},getPressedKey:function(){var t;return null===(t=this._lastEvents.current)||void 0===t?void 0:t.event.key}},A=L.Class.extend({includes:[b,x,k,w,S],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this.Keyboard=T,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"}},this.Keyboard._initKeyListener(t)},setLang:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",n=L.PM.activeLang;e&&(_[t]=r()(_[i],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this._fireLangChange(n,t,i,_[t])},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon",e=arguments.length>1?arguments[1]:void 0;"Poly"===t&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Polygon";"Poly"===t&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.ignoreShapes||[],o=i.merge||!1;this.map.pm.Draw.shapes.forEach((function(i){-1===n.indexOf(i)&&e.map.pm.Draw[i].setPathOptions(t,o)}))},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,i=r()(this.globalOptions,t),n=!1;this.map.pm.Draw.CircleMarker.enabled()&&this.map.pm.Draw.CircleMarker.options.editable!==i.editable&&(this.map.pm.Draw.CircleMarker.disable(),n=!0),this.map.pm.Draw.shapes.forEach((function(t){e.map.pm.Draw[t].setOptions(i)})),n&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach((function(t){t.pm.setOptions(i)})),this.applyGlobalOptions(),this.globalOptions=i},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach((function(t){t.pm.enabled()&&t.pm.applyOptions()}))},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=L.PM.Utils.findLayers(this.map);if(!t)return e;var i=L.featureGroup();return i._pmTempLayer=!0,e.forEach((function(t){i.addLayer(t)})),i},getGeomanDrawLayers:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=L.PM.Utils.findLayers(this.map).filter((function(t){return!0===t._drawnByGeoman}));if(!t)return e;var i=L.featureGroup();return i._pmTempLayer=!0,e.forEach((function(t){i.addLayer(t)})),i},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map}}),E=i(0),D=i.n(E),O=i(66),I=i.n(O);function B(t){var e=L.PM.activeLang;return I()(_,e)||(e="en"),D()(_[e],t)}function R(t){return!function t(e){return e.filter((function(t){return![null,"",void 0].includes(t)})).reduce((function(e,i){return e.concat(Array.isArray(i)?t(i):i)}),[])}(t).length}function z(t){return t.reduce((function(t,e){return 0!==e.length&&t.push(Array.isArray(e)?z(e):e),t}),[])}function F(t,e,i){for(var n,o,r,a=6378137,s=6356752.3142,l=1/298.257223563,c=t.lng,h=t.lat,u=i,p=Math.PI,d=e*p/180,m=Math.sin(d),f=Math.cos(d),g=(1-l)*Math.tan(h*p/180),_=1/Math.sqrt(1+g*g),v=g*_,y=Math.atan2(g,f),b=_*m,x=1-b*b,k=x*(a*a-s*s)/(s*s),w=1+k/16384*(4096+k*(k*(320-175*k)-768)),M=k/1024*(256+k*(k*(74-47*k)-128)),C=u/(s*w),P=2*Math.PI;Math.abs(C-P)>1e-12;)n=Math.cos(2*y+C),P=C,C=u/(s*w)+M*(o=Math.sin(C))*(n+M/4*((r=Math.cos(C))*(2*n*n-1)-M/6*n*(4*o*o-3)*(4*n*n-3)));var S=v*o-_*r*f,T=Math.atan2(v*r+_*o*f,(1-l)*Math.sqrt(b*b+S*S)),A=l/16*x*(4+l*(4-3*x)),E=c+180*(Math.atan2(o*m,_*r-v*o*f)-(1-A)*l*b*(C+A*o*(n+A*r*(2*n*n-1))))/p,D=180*T/p;return L.latLng(E,D)}function j(t,e,i,n){for(var o,r,a=[],s=0;s<i;s+=1)o=F(t,360*s/i+n,e),r=L.latLng(o.lng,o.lat),a.push(r);return a}function N(t,e,i,n){return function(t,e,i){e=(e+360)%360;var n=Math.PI/180,o=180/Math.PI,r=6378137,a=t.lng*n,s=t.lat*n,l=e*n,c=Math.sin(s),h=Math.cos(s),u=Math.cos(i/r),p=Math.sin(i/r),d=Math.asin(c*u+h*p*Math.cos(l)),m=a+Math.atan2(Math.sin(l)*p*h,u-c*Math.sin(d));return m=(m*=o)>180?m-360:m<-180?m+360:m,L.latLng([d*o,m])}(e,function(t,e,i){var n=t.latLngToContainerPoint(e),o=t.latLngToContainerPoint(i),r=180*Math.atan2(o.y-n.y,o.x-n.x)/Math.PI+90;return r+(r<0?360:0)}(t,e,i),n)}function U(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getLatLngs();return t instanceof L.Polygon?L.polygon(e).getLatLngs():L.polyline(e).getLatLngs()}function G(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function H(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?G(Object(i),!0).forEach((function(e){Z(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Z(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var V=L.Control.extend({includes:[S],options:{position:"topleft"},initialize:function(t){this._button=H(H({},this.options),t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):"edit"===this._button.tool?this._container=this._map.pm.Toolbar.editContainer:"options"===this._button.tool?this._container=this._map.pm.Toolbar.optionsContainer:"custom"===this._button.tool?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus="boolean"==typeof t?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},_triggerClick:function(t){t&&t.preventDefault(),this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t})},_makeButton:function(t){var e=this,i=this.options.position.indexOf("right")>-1?"pos-right":"",n=L.DomUtil.create("div","button-container  ".concat(i),this._container),o=L.DomUtil.create("a","leaflet-buttons-control-button",n);o.setAttribute("role","button"),o.setAttribute("tabindex","0"),o.href="#";var r=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(i),n),a=t.actions,s={cancel:{text:B("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:B("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:B("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[t.jsClass]._removeLastVertex()}},finish:{text:B("actions.finish"),onClick:function(e){this._map.pm.Draw[t.jsClass]._finishShape(e)}}};a.forEach((function(n){var o,a="string"==typeof n?n:n.name;if(s[a])o=s[a];else{if(!n.text)return;o=n}var l=L.DomUtil.create("a","leaflet-pm-action ".concat(i," action-").concat(a),r);l.setAttribute("role","button"),l.setAttribute("tabindex","0"),l.href="#",l.innerHTML=o.text,!t.disabled&&o.onClick&&(L.DomEvent.addListener(l,"click",(function(i){i.preventDefault();var n="",r=e._map.pm.Toolbar.buttons;for(var a in r)if(r[a]._button===t){n=a;break}e._fireActionClick(o,n,t)}),e),L.DomEvent.addListener(l,"click",o.onClick,e)),L.DomEvent.disableClickPropagation(l)})),t.toggleStatus&&L.DomUtil.addClass(n,"active");var l=L.DomUtil.create("div","control-icon",o);return t.title&&l.setAttribute("title",t.title),t.iconUrl&&l.setAttribute("src",t.iconUrl),t.className&&L.DomUtil.addClass(l,t.className),t.disabled||(L.DomEvent.addListener(o,"click",(function(){e._button.disableOtherButtons&&e._map.pm.Toolbar.triggerClickOnToggledButtons(e);var i="",n=e._map.pm.Toolbar.buttons;for(var o in n)if(n[o]._button===t){i=o;break}e._fireButtonClick(i,t)})),L.DomEvent.addListener(o,"click",this._triggerClick,this)),t.disabled&&(L.DomUtil.addClass(o,"pm-disabled"),L.DomUtil.addClass(l,"pm-disabled")),L.DomEvent.disableClickPropagation(o),n},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&!1!==this._button.cssToggle?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_clicked:function(){this._button.doToggle&&this.toggle()}});function W(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function q(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?W(Object(i),!0).forEach((function(e){$(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):W(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function $(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Y(t){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}L.Control.PMButton=V;var K=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;void 0!==t.editPolygon&&(t.editMode=t.editPolygon),void 0!==t.deleteLayer&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this._showHideButtons(),this.isVisible=!0},applyIconStyle:function(){var t=this.getButtons(),e={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete"}};for(var i in t){var n=t[i];L.Util.setOptions(n,{className:e.geomanIcons[i]})}},removeControls:function(){var t=this.getButtons();for(var e in t)t[e].remove();this.isVisible=!1},toggleControls:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){var e=["snappingOption"];for(var i in this.buttons)!e.includes(i)&&this.buttons[i]!==t&&this.buttons[i].toggled()&&this.buttons[i]._triggerClick()},toggleButton:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"editPolygon"===t&&(t="editMode"),"deleteLayer"===t&&(t="removalMode"),i&&this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var t=this,e={className:"control-icon leaflet-pm-icon-marker",title:B("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},i={title:B("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},n={className:"control-icon leaflet-pm-icon-polyline",title:B("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},o={title:B("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},r={title:B("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},a={title:B("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},s={title:B("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},l={title:B("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},c={title:B("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(e,i){t.map.pm.Draw[i.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},h={title:B("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},u={title:B("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]};this._addButton("drawMarker",new L.Control.PMButton(e)),this._addButton("drawPolyline",new L.Control.PMButton(n)),this._addButton("drawRectangle",new L.Control.PMButton(a)),this._addButton("drawPolygon",new L.Control.PMButton(i)),this._addButton("drawCircle",new L.Control.PMButton(o)),this._addButton("drawCircleMarker",new L.Control.PMButton(r)),this._addButton("editMode",new L.Control.PMButton(s)),this._addButton("dragMode",new L.Control.PMButton(l)),this._addButton("cutPolygon",new L.Control.PMButton(c)),this._addButton("removalMode",new L.Control.PMButton(h)),this._addButton("rotateMode",new L.Control.PMButton(u))},_showHideButtons:function(){this.removeControls();var t=this.getButtons(),e=[];for(var i in!1===this.options.drawControls&&(e=e.concat(Object.keys(t).filter((function(e){return!t[e]._button.tool})))),!1===this.options.editControls&&(e=e.concat(Object.keys(t).filter((function(e){return"edit"===t[e]._button.tool})))),!1===this.options.optionsControls&&(e=e.concat(Object.keys(t).filter((function(e){return"options"===t[e]._button.tool})))),!1===this.options.customControls&&(e=e.concat(Object.keys(t).filter((function(e){return"custom"===t[e]._button.tool})))),t)if(this.options[i]&&-1===e.indexOf(i)){var n=t[i]._button.tool;n||(n="draw"),t[i].setPosition(this._getBtnPosition(n)),t[i].addTo(this.map)}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");"object"!==Y(e)&&(e={name:e});var i=this._btnNameMapping(t);if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");var n=this.map.pm.Draw.createNewDrawInstance(e.name,i);return e=q(q({},this.buttons[i]._button),e),{drawInstance:n,control:this.createCustomControl(e)}},createCustomControl:function(t){if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),!1!==t.toggle&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&"draw"!==t.block||(t.block=""),t.className?-1===t.className.indexOf("control-icon")&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var e={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:!0,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};!1!==this.options[t.name]&&(this.options[t.name]=!0);var i=this._addButton(t.name,new L.Control.PMButton(e));return this.changeControlOrder(),i},changeControlOrder:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this._shapeMapping(),i=[];t.forEach((function(t){e[t]?i.push(e[t]):i.push(t)}));var n=this.getButtons(),o={};i.forEach((function(t){n[t]&&(o[t]=n[t])}));var r=Object.keys(n).filter((function(t){return!n[t]._button.tool}));r.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])}));var a=Object.keys(n).filter((function(t){return"edit"===n[t]._button.tool}));a.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])}));var s=Object.keys(n).filter((function(t){return"options"===n[t]._button.tool}));s.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])}));var l=Object.keys(n).filter((function(t){return"custom"===n[t]._button.tool}));l.forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])})),Object.keys(n).forEach((function(t){-1===i.indexOf(t)&&(o[t]=n[t])})),this.map.pm.Toolbar.buttons=o,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),e=[];for(var i in t)e.push(i);return e},changeActionsOfControl:function(t,e){var i=this._btnNameMapping(t);if(!i)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[i])throw new TypeError("Button with this name not exists");this.buttons[i]._button.actions=e,this.changeControlOrder()},setButtonDisabled:function(t,e){var i=this._btnNameMapping(t);this.buttons[i]._button.disabled=!!e,this._showHideButtons()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode"}},_btnNameMapping:function(t){var e=this._shapeMapping();return e[t]?e[t]:t}});function J(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function X(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?J(Object(i),!0).forEach((function(e){Q(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Q(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var tt={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach((function(t){Array.isArray(t)?e._assignEvents(t):(t.off("drag",e._handleSnapping,e),t.on("drag",e._handleSnapping,e),t.off("dragend",e._cleanupSnapping,e),t.on("dragend",e._cleanupSnapping,e))}))},_cleanupSnapping:function(){delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach((function(t){t.remove()}))},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(t){var e=this,i=t.target;if(i._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed())return!1;if(void 0===this._snapList&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0)return!1;var n,o=this._calcClosestLayer(i.getLatLng(),this._snapList);if(0===Object.keys(o).length)return!1;n=o.layer instanceof L.Marker||o.layer instanceof L.CircleMarker||!this.options.snapSegment?o.latlng:this._checkPrioritiySnapping(o);var r=this.options.snapDistance,a={marker:i,shape:this._shape,snapLatLng:n,segment:o.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:o.layer,distance:o.distance};if(this._fireSnapDrag(a.marker,a),this._fireSnapDrag(this._layer,a),o.distance<r){i._orgLatLng=i.getLatLng(),i.setLatLng(n),i._snapped=!0,i._snapInfo=a;var s=this._snapLatLng||{},l=n||{};s.lat===l.lat&&s.lng===l.lng||(e._snapLatLng=n,e._fireSnap(i,a),e._fireSnap(e._layer,a))}else this._snapLatLng&&(this._unsnap(a),i._snapped=!1,this._fireUnsnap(a.marker,a),this._fireUnsnap(this._layer,a));return!0},_createSnapList:function(){var t=this,e=[],i=[],n=this._map;n.off("pm:remove",this._handleSnapLayerRemoval,this),n.on("pm:remove",this._handleSnapLayerRemoval,this),n.eachLayer((function(t){if((t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.CircleMarker||t instanceof L.ImageOverlay)&&!0!==t.options.snapIgnore){if(void 0===t.options.snapIgnore&&(!L.PM.optIn&&!0===t.options.pmIgnore||L.PM.optIn&&!1!==t.options.pmIgnore))return;(t instanceof L.Circle||t instanceof L.CircleMarker)&&t.pm&&t.pm._hiddenPolyCircle?e.push(t.pm._hiddenPolyCircle):t instanceof L.ImageOverlay&&(t=L.rectangle(t.getBounds())),e.push(t);var n=L.polyline([],{color:"red",pmIgnore:!0});n._pmTempLayer=!0,i.push(n),(t instanceof L.Circle||t instanceof L.CircleMarker)&&i.push(n)}})),e=(e=(e=e.filter((function(e){return t._layer!==e}))).filter((function(t){return t._latlng||t._latlngs&&!R(t._latlngs)}))).filter((function(t){return!t._pmTempLayer})),this._otherSnapLayers?(this._otherSnapLayers.forEach((function(){var t=L.polyline([],{color:"red",pmIgnore:!0});t._pmTempLayer=!0,i.push(t)})),this._snapList=e.concat(this._otherSnapLayers)):this._snapList=e,this.debugIndicatorLines=i},_handleSnapLayerRemoval:function(t){var e=t.layer,i=this._snapList.findIndex((function(t){return t._leaflet_id===e._leaflet_id}));this._snapList.splice(i,1)},_calcClosestLayer:function(t,e){var i=this,n=[],o={};return e.forEach((function(e,r){if(!e._parentCopy||e._parentCopy!==i._layer){var a=i._calcLayerDistances(t,e);i.debugIndicatorLines[r]&&i.debugIndicatorLines[r].setLatLngs([t,a.latlng]),(void 0===o.distance||a.distance<=o.distance)&&(a.distance<o.distance&&(n=[]),(o=a).layer=e,n.push(o))}})),this._getClosestLayerByPriority(n)},_calcLayerDistances:function(t,e){var i,n,o,r=this,a=this._map,s=e instanceof L.Marker||e instanceof L.CircleMarker,l=e instanceof L.Polygon,c=t,h=s?e.getLatLng():e.getLatLngs();return s?{latlng:X({},h),distance:this._getDistance(a,h,c)}:(function t(e){e.forEach((function(s,h){if(Array.isArray(s))t(s);else if(r.options.snapSegment){var u,p=s;u=l?h+1===e.length?0:h+1:h+1===e.length?void 0:h+1;var d=e[u];if(d){var m=r._getDistanceToSegment(a,c,p,d);(void 0===n||m<n)&&(n=m,o=[p,d])}}else{var f=r._getDistance(a,c,s);(void 0===n||f<n)&&(n=f,i=s)}}))}(h),this.options.snapSegment?{latlng:X({},this._getClosestPointOnSegment(a,t,o[0],o[1])),segment:o,distance:n}:{latlng:i,distance:n})},_getClosestLayerByPriority:function(t){t=t.sort((function(t,e){return t._leaflet_id-e._leaflet_id}));var e=this._map.pm.globalOptions.snappingOrder||[],i=0,n={};return e.concat(["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"]).forEach((function(t){n[t]||(i+=1,n[t]=i)})),t.sort(function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"asc";if(!e||0===Object.keys(e).length)return function(t,e){return t-e};for(var n,o=Object.keys(e),r=o.length,a={};r--;)n=o[r],a[n.toLowerCase()]=e[n];function s(t){return t instanceof L.Marker?"Marker":t instanceof L.Circle?"Circle":t instanceof L.CircleMarker?"CircleMarker":t instanceof L.Rectangle?"Rectangle":t instanceof L.Polygon?"Polygon":t instanceof L.Polyline?"Line":void 0}return function(e,n){var o,r;if("instanceofShape"===t){if(o=s(e.layer).toLowerCase(),r=s(n.layer).toLowerCase(),!o||!r)return 0}else{if(!e.hasOwnProperty(t)||!n.hasOwnProperty(t))return 0;o=e[t].toLowerCase(),r=n[t].toLowerCase()}var l=o in a?a[o]:Number.MAX_SAFE_INTEGER,c=r in a?a[r]:Number.MAX_SAFE_INTEGER,h=0;return l<c?h=-1:l>c&&(h=1),"desc"===i?-1*h:h}}("instanceofShape",n)),t[0]||{}},_checkPrioritiySnapping:function(t){var e=this._map,i=t.segment[0],n=t.segment[1],o=t.latlng,r=this._getDistance(e,i,o),a=this._getDistance(e,n,o),s=r<a?i:n,l=r<a?r:a;if(this.options.snapMiddle){var c=L.PM.Utils.calcMiddleLatLng(e,i,n),h=this._getDistance(e,c,o);h<r&&h<a&&(s=c,l=h)}return X({},l<this.options.snapDistance?s:o)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,e,i,n){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var r=t.project(e,o),a=t.project(i,o),s=t.project(n,o),l=L.LineUtil.closestPointOnSegment(r,a,s);return t.unproject(l,o)},_getDistanceToSegment:function(t,e,i,n){var o=t.latLngToLayerPoint(e),r=t.latLngToLayerPoint(i),a=t.latLngToLayerPoint(n);return L.LineUtil.pointToSegmentDistance(o,r,a)},_getDistance:function(t,e,i){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(i))}},et=L.Class.extend({includes:[tt,S],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},initialize:function(t){var e=this,i=new L.Icon.Default;i.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=i,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut"],this.shapes.forEach((function(t){e[t]=new L.PM.Draw[t](e._map)})),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.options.pathOptions=e?r()(this.options.pathOptions,t):t},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var t=this;this.shapes.forEach((function(e){t[e].disable()}))},addControls:function(){var t=this;this.shapes.forEach((function(e){t[e].addButton()}))},getActiveShape:function(){var t,e=this;return this.shapes.forEach((function(i){e[i]._enabled&&(t=i)})),t},_setGlobalDrawMode:function(){"Cut"===this._shape?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var t=L.PM.Utils.findLayers(this._map);this._enabled?t.forEach((function(t){L.PM.Utils.disablePopup(t)})):t.forEach((function(t){L.PM.Utils.enablePopup(t)}))},createNewDrawInstance:function(t,e){var i=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[i])throw new TypeError("There is no class L.PM.Draw.".concat(i));return this[t]=new L.PM.Draw[i](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate"};return e[t]?e[t]:this[t]?this[t]._shape:t},_finishLayer:function(t){t.pm&&(t.pm.setOptions(this.options),t.pm._shape=this._shape,t.pm._map=this._map),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,e){"layerPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===e&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return 0===(this._map||this._layer._map).pm.getGeomanLayers().length}});et.Marker=et.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker([0,0],this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer((function(t){e.isRelevantMarker(t)&&t.pm.enable()})),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer((function(e){t.isRelevantMarker(e)&&e.pm.disable()})),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}},_createMarker:function(t){if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=new L.Marker(e,this.options.markerStyle);this._setPane(i,"markerPane"),this._finishLayer(i),i.pm||(i.options.draggable=!1),i.addTo(this._map.pm._getContainingLayer()),i.pm&&this.options.markerEditable?i.pm.enable():i.dragging&&i.dragging.disable(),this._fireCreate(i),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}}});var it=i(8),nt=i.n(it);function ot(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function rt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(i),!0).forEach((function(e){at(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ot(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function at(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function st(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function lt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?st(Object(i),!0).forEach((function(e){ct(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):st(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ct(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}et.Line=et.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&"snap"!==this.options.finishOn&&this._map.on(this.options.finishOn,this._finishShape,this),"dblclick"===this.options.finishOn&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&"snap"!==this.options.finishOn&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();if(t.length>0){var e=t[t.length-1];this._hintline.setLatLngs([e,this._hintMarker.getLatLng()])}},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,t.latlng)},hasSelfIntersection:function(){return nt()(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(t,e){var i=L.polyline(this._layer.getLatLngs());t&&(e||(e=this._hintMarker.getLatLng()),i.addLatLng(e));var n=nt()(i.toGeoJSON(15));this._doesSelfIntersect=n.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(t){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,t.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();if(e.equals(this._layer.getLatLngs()[0]))this._finishShape(t);else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:e,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(e);var i=this._createMarker(e);this._setTooltipText(),this._hintline.setLatLngs([e,e]),this._fireVertexAdded(i,void 0,e,"Draw"),"snap"===this.options.finishOn&&this._hintMarker._snapped&&this._finishShape(t)}}},_removeLastVertex:function(){var t=this._layer.getLatLngs(),e=t.pop();if(t.length<1)this.disable();else{var i=this._layerGroup.getLayers().filter((function(t){return t instanceof L.Marker})).filter((function(t){return!L.DomUtil.hasClass(t._icon,"cursor-marker")})).find((function(t){return t.getLatLng()===e}));this._layerGroup.removeLayer(i),this._layer.setLatLngs(t),this._syncHintLine(),this._setTooltipText()}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=1)){var e=L.polyline(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),e.on("click",this._finishShape,this),e},_setTooltipText:function(){var t;t=B(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(t)}}),et.Polygon=et.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),1===this._layer.getLatLngs().flat().length?(e.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(e)-1,this.options.snappable&&this._cleanupSnapping()):e.on("click",(function(){return 1})),e},_setTooltipText:function(){var t;t=B(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(t)},_finishShape:function(t){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var e=this._layer.getLatLngs();if(!(e.length<=2)){var i=L.polygon(e,this.options.pathOptions);this._setPane(i,"layerPane"),this._finishLayer(i),i.addTo(this._map.pm._getContainingLayer()),this._fireCreate(i),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),et.Rectangle=et.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker([0,0],{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){L.DomUtil.addClass(this._hintMarker._icon,"visible"),this._styleMarkers=[];for(var e=0;e<2;e+=1){var i=L.marker([0,0],{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(i,"vertexPane"),i._pmTempLayer=!0,this._layerGroup.addLayer(i),this._styleMarkers.push(i)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach((function(t){L.DomUtil.addClass(t._icon,"visible"),t.setLatLng(e)})),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(B("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}},_syncRectangleSize:function(){var t=this,e=this._startMarker.getLatLng(),i=this._hintMarker.getLatLng(),n=L.PM.Utils._getRotatedRectangle(e,i,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(n),this.options.cursorMarker&&this._styleMarkers){var o=[];n.forEach((function(e){e.equals(t._startMarker.getLatLng())||e.equals(t._hintMarker.getLatLng())||o.push(e)})),o.forEach((function(e,i){t._styleMarkers[i].setLatLng(e)}))}},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var n=L.rectangle([i,e],this.options.pathOptions);if(this.options.rectangleAngle){var o=L.PM.Utils._getRotatedRectangle(i,e,this.options.rectangleAngle||0,this._map);n.setLatLngs(o),n.pm&&n.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(n,"layerPane"),this._finishLayer(n),n.addTo(this._map.pm._getContainingLayer()),this._fireCreate(n),this.disable(),this.options.continueDrawing&&this.enable()}}}),et.Circle=et.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle([0,0],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._centerMarker),this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t,e=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng();t=this._map.options.crs===L.CRS.Simple?this._map.distance(e,i):e.distanceTo(i),this.options.minRadiusCircle&&t<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&t>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping()},_placeCenterMarker:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(B("tooltips.finishCircle")),this._fireCenterPlaced())},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e,i=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng();e=this._map.options.crs===L.CRS.Simple?this._map.distance(i,n):i.distanceTo(n),this.options.minRadiusCircle&&e<this.options.minRadiusCircle?e=this.options.minRadiusCircle:this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle&&(e=this.options.maxRadiusCircle);var o=rt(rt({},this.options.pathOptions),{},{radius:e}),r=L.circle(i,o);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),r.pm&&r.pm._updateHiddenPolyCircle(),this._fireCreate(r),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=t.distanceTo(e);return this.options.minRadiusCircle&&i<this.options.minRadiusCircle?e=N(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle&&(e=N(this._map,t,e,this.options.maxRadiusCircle)),e},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=t.distanceTo(e);(this.options.minRadiusCircle&&i<this.options.minRadiusCircle||this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}}),et.CircleMarker=et.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable?(this._layerGroup=new L.LayerGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._centerMarker=L.marker([0,0],{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._centerMarker),this._hintMarker=L.marker([0,0],{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"):(this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker([0,0],this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(B("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip()),this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer((function(t){e.isRelevantMarker(t)&&t.pm.enable()})),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer((function(e){t.isRelevantMarker(e)&&e.pm.disable()})),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(B("tooltips.finishCircle")),this._fireCenterPlaced())},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(i)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping()},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&t.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),i=L.circleMarker(e,this.options.pathOptions);this._setPane(i,"layerPane"),this._finishLayer(i),i.addTo(this._map.pm._getContainingLayer()),i.pm&&this.options.markerEditable&&i.pm.enable(),this._fireCreate(i),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),i=this._hintMarker.getLatLng(),n=this._map.project(e).distanceTo(this._map.project(i));this.options.editable&&(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?n=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(n=this.options.maxRadiusCircleMarker));var o=lt(lt({},this.options.pathOptions),{},{radius:n}),r=L.circleMarker(e,o);this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),r.pm&&r.pm._updateHiddenPolyCircle(),this._fireCreate(r),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(this.options.editable){var e=this._centerMarker.getLatLng(),i=this._map.project(e).distanceTo(this._map.project(t));this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?t=N(this._map,e,t,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker&&(t=N(this._map,e,t,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return t},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),i=this._map.project(e),n=L.point(i.x+t,i.y);return this._map.unproject(n).distanceTo(e)}});var ht=i(1),ut=i.n(ht);function pt(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function dt(t,e){return t<e?-1:t>e?1:0}var mt=function(t,e,i,n,o){!function t(e,i,n,o,r){for(;o>n;){if(o-n>600){var a=o-n+1,s=i-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(n,Math.floor(i-s*c/a+h)),Math.min(o,Math.floor(i+(a-s)*c/a+h)),r)}var u=e[i],p=n,d=o;for(pt(e,n,i),r(e[o],u)>0&&pt(e,n,o);p<d;){for(pt(e,p,d),p++,d--;r(e[p],u)<0;)p++;for(;r(e[d],u)>0;)d--}0===r(e[n],u)?pt(e,n,d):pt(e,++d,o),d<=i&&(n=d+1),i<=d&&(o=d-1)}}(t,e,i||0,n||t.length-1,o||dt)};function ft(t,e){if(!(this instanceof ft))return new ft(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function gt(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function _t(t,e){vt(t,0,t.children.length,e,t)}function vt(t,e,i,n,o){o||(o=Ct(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,a=e;a<i;a++)r=t.children[a],yt(o,t.leaf?n(r):r);return o}function yt(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function bt(t,e){return t.minX-e.minX}function xt(t,e){return t.minY-e.minY}function kt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function wt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Lt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Mt(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Ct(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Pt(t,e,i,n,o){for(var r,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(r=e+Math.ceil((i-e)/n/2)*n,mt(t,r,e,i,o),a.push(e,r,r,i))}ft.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!Mt(t,e))return i;for(var o,r,a,s,l=[];e;){for(o=0,r=e.children.length;o<r;o++)a=e.children[o],Mt(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):Lt(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!Mt(t,e))return!1;for(var n,o,r,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(r=e.children[n],Mt(t,a=e.leaf?i(r):r)){if(e.leaf||Lt(t,a))return!0;s.push(r)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Ct([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,r,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),r=!0),a.leaf&&-1!==(o=gt(t,a.children,e)))return a.children.splice(o,1),l.push(a),this._condense(l),this;r||a.leaf||!Lt(a,s)?n?(i++,a=n.children[i],r=!1):a=null:(l.push(a),c.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:bt,compareMinY:xt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var o,r=i-e+1,a=this._maxEntries;if(r<=a)return _t(o=Ct(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),(o=Ct([])).leaf=!1,o.height=n;var s,l,c,h,u=Math.ceil(r/a),p=u*Math.ceil(Math.sqrt(a));for(Pt(t,e,i,p,this.compareMinX),s=e;s<=i;s+=p)for(Pt(t,s,c=Math.min(s+p-1,i),u,this.compareMinY),l=s;l<=c;l+=u)h=Math.min(l+u-1,c),o.children.push(this._build(t,l,h,n-1));return _t(o,this.toBBox),o},_chooseSubtree:function(t,e,i,n){for(var o,r,a,s,l,c,h,u,p,d;n.push(e),!e.leaf&&n.length-1!==i;){for(h=u=1/0,o=0,r=e.children.length;o<r;o++)l=kt(a=e.children[o]),p=t,d=a,(c=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<u?(u=c,h=l<h?l:h,s=a):c===u&&l<h&&(h=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,o=i?t:n(t),r=[],a=this._chooseSubtree(o,this.data,e,r);for(a.children.push(t),yt(a,o);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(o,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var r=this._chooseSplitIndex(i,o,n),a=Ct(i.children.splice(r,i.children.length-r));a.height=i.height,a.leaf=i.leaf,_t(i,this.toBBox),_t(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=Ct([t,e]),this.data.height=t.height+1,this.data.leaf=!1,_t(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,o,r,a,s,l,c,h,u,p,d,m,f,g;for(l=c=1/0,n=e;n<=i-e;n++)u=o=vt(t,0,n,this.toBBox),p=r=vt(t,n,i,this.toBBox),void 0,void 0,void 0,void 0,d=Math.max(u.minX,p.minX),m=Math.max(u.minY,p.minY),f=Math.min(u.maxX,p.maxX),g=Math.min(u.maxY,p.maxY),a=Math.max(0,f-d)*Math.max(0,g-m),s=kt(o)+kt(r),a<l?(l=a,h=n,c=s<c?s:c):a===l&&s<c&&(c=s,h=n);return h},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:bt,o=t.leaf?this.compareMinY:xt;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var o,r,a=this.toBBox,s=vt(t,0,e,a),l=vt(t,i-e,i,a),c=wt(s)+wt(l);for(o=e;o<i-e;o++)r=t.children[o],yt(s,t.leaf?a(r):r),c+=wt(s);for(o=i-e-1;o>=e;o--)r=t.children[o],yt(l,t.leaf?a(r):r),c+=wt(l);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)yt(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():_t(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var St=ft;function Tt(t,e,i){if(!Ot(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&It(n),o&&Bt(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function At(t,e,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!Dt(t[0][1])||!Dt(t[0][1]))throw new Error("coordinates must contain numbers");return Tt({type:"LineString",coordinates:t},e,i)}function Et(t,e){if(!Ot(e=e||{}))throw new Error("options is invalid");var i=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&It(i),n&&Bt(n);var o={type:"FeatureCollection"};return n&&(o.id=n),i&&(o.bbox=i),o.features=t,o}function Dt(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Ot(t){return!!t&&t.constructor===Object}function It(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Dt(t))throw new Error("bbox must only contain numbers")}))}function Bt(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Rt(t,e,i){if(null!==t)for(var n,o,r,a,s,l,c,h,u=0,p=0,d=t.type,m="FeatureCollection"===d,f="Feature"===d,g=m?t.features.length:1,_=0;_<g;_++){s=(h=!!(c=m?t.features[_].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var y=0,b=0;if(null!==(a=h?c.geometries[v]:c)){l=a.coordinates;var x=a.type;switch(u=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,_,y,b))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,_,y,b))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-u;o++){if(!1===e(l[n][o],p,_,y,b))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&b++}"Polygon"===x&&y++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for("MultiPolygon"===x&&(b=0),o=0;o<l[n].length;o++){for(r=0;r<l[n][o].length-u;r++){if(!1===e(l[n][o][r],p,_,y,b))return!1;p++}b++}y++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===Rt(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function zt(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function Ft(t,e){!function(t,e){var i,n,o,r,a,s,l,c,h,u,p=0,d="FeatureCollection"===t.type,m="Feature"===t.type,f=d?t.features.length:1;for(i=0;i<f;i++){for(s=d?t.features[i].geometry:m?t.geometry:t,c=d?t.features[i].properties:m?t.properties:{},h=d?t.features[i].bbox:m?t.bbox:void 0,u=d?t.features[i].id:m?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(r=l?s.geometries[o]:s))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,p,c,h,u))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===e(r.geometries[n],p,c,h,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,h,u))return!1;p++}}(t,(function(t,i,n,o,r){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Tt(t,n,{bbox:o,id:r}),i,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(Tt({type:a,coordinates:c},n),i,l))return!1}}))}function jt(t){var e=[t[0],t[1]],i=[t[0],t[3]],n=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],n,i,e]]}}}function Nt(t){var e=[1/0,1/0,-1/0,-1/0];return Rt(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}var Ut=function(t){var e=St(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=jt(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Nt(t);return St.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var i=jt(t);i.bbox=t,e.push(i)})):zt(t,(function(t){t.bbox=t.bbox?t.bbox:Nt(t),e.push(t)})),St.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=jt(e)).bbox=e}return St.prototype.remove.call(this,t)},e.clear=function(){return St.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:St.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return St.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:St.prototype.all.call(this)}},e.toJSON=function(){return St.prototype.toJSON.call(this)},e.fromJSON=function(t){return St.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Nt(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e},Gt={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function Ht(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function Zt(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var Vt=function(t,e,i){if(!function(t){return!!t&&t.constructor===Object}(i=i||{}))throw new Error("options is invalid");var n=i.units,o=Zt(t),r=Zt(e),a=Ht(r[1]-o[1]),s=Ht(r[0]-o[0]),l=Ht(o[1]),c=Ht(r[1]),h=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(l)*Math.cos(c);return function(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=Gt[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t*i}(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)),n)};function Wt(t,e,i){if(null!==t)for(var n,o,r,a,s,l,c,h,u=0,p=0,d=t.type,m="FeatureCollection"===d,f="Feature"===d,g=m?t.features.length:1,_=0;_<g;_++){s=(h=!!(c=m?t.features[_].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var y=0,b=0;if(null!==(a=h?c.geometries[v]:c)){l=a.coordinates;var x=a.type;switch(u=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,_,y,b))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,_,y,b))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-u;o++){if(!1===e(l[n][o],p,_,y,b))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&b++}"Polygon"===x&&y++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for("MultiPolygon"===x&&(b=0),o=0;o<l[n].length;o++){for(r=0;r<l[n][o].length-u;r++){if(!1===e(l[n][o][r],p,_,y,b))return!1;p++}b++}y++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===Wt(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}var qt=function(t,e){if(!function(t){return!!t&&t.constructor===Object}(e=e||{}))throw new Error("options is invalid");var i=e.precision,n=e.coordinates,o=e.mutate;if(i=null==i||isNaN(i)?6:i,n=null==n||isNaN(n)?3:n,!t)throw new Error("<geojson> is required");if("number"!=typeof i)throw new Error("<precision> must be a number");if("number"!=typeof n)throw new Error("<coordinates> must be a number");!1!==o&&void 0!==o||(t=JSON.parse(JSON.stringify(t)));var r=Math.pow(10,i);return Wt(t,(function(t){!function(t,e,i){t.length>i&&t.splice(i,t.length);for(var n=0;n<t.length;n++)t[n]=Math.round(t[n]*e)/e}(t,r,n)})),t};function $t(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Yt(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Kt(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}var Jt=function(t){if(!t)throw new Error("geojson is required");var e=[];return Ft(t,(function(t){!function(t,e){var i=[],n=t.geometry;switch(n.type){case"Polygon":i=Yt(n);break;case"LineString":i=[Yt(n)]}i.forEach((function(i){(function(t,e){var i=[];return t.reduce((function(t,n){var o,r,a,s,l,c,h=At([t,n],e);return h.bbox=(r=n,a=(o=t)[0],s=o[1],[a<(l=r[0])?a:l,s<(c=r[1])?s:c,a>l?a:l,s>c?s:c]),i.push(h),n})),i})(i,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),Et(e)};function Xt(t,e){var i=Yt(t),n=Yt(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=i[0][0],r=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],c=n[0][1],h=n[1][0],u=n[1][1],p=(u-c)*(a-o)-(h-l)*(s-r);if(0===p)return null;var d=((h-l)*(r-c)-(u-c)*(o-l))/p,m=((a-o)*(r-c)-(s-r)*(o-l))/p;return d>=0&&d<=1&&m>=0&&m<=1?function(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Dt(t[0])||!Dt(t[1]))throw new Error("coordinates must contain numbers");return Tt({type:"Point",coordinates:t},e,i)}([o+d*(a-o),r+d*(s-r)]):null}function Qt(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function te(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}var ee=function t(e,i,n){if(!function(t){return!!t&&t.constructor===Object}(n=n||{}))throw new Error("options is invalid");if(!0===n.final)return function(e,i){var n=t(i,e);return(n+180)%360}(e,i);var o=te(e),r=te(i),a=Qt(o[0]),s=Qt(r[0]),l=Qt(o[1]),c=Qt(r[1]),h=Math.sin(s-a)*Math.cos(c),u=Math.cos(l)*Math.sin(c)-Math.sin(l)*Math.cos(c)*Math.cos(s-a);return function(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}(Math.atan2(h,u))},ie={meters:6371008.8,metres:6371008.8,millimeters:6371008800,millimetres:6371008800,centimeters:637100880,centimetres:637100880,kilometers:6371.0088,kilometres:6371.0088,miles:3958.761333810546,nauticalmiles:6371008.8/1852,inches:6371008.8*39.37,yards:6371008.8/1.0936,feet:20902260.511392,radians:1,degrees:6371008.8/111325};function ne(t,e,i){if(!se(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!ae(t))throw new Error("bbox must only contain numbers")}))}(n),o&&function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function oe(t){if(null==t)throw new Error("radians is required");return t%(2*Math.PI)*180/Math.PI}function re(t){if(null==t)throw new Error("degrees is required");return t%360*Math.PI/180}function ae(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function se(t){return!!t&&t.constructor===Object}var le=function(t,e,i,n){if(!se(n=n||{}))throw new Error("options is invalid");var o=n.units,r=n.properties,a=function(t){if(!t)throw new Error("coord is required");if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates;if(Array.isArray(t)&&t.length>=2&&void 0===t[0].length&&void 0===t[1].length)return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),s=re(a[0]),l=re(a[1]),c=re(i),h=function(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var i=ie[e||"kilometers"];if(!i)throw new Error(e+" units is invalid");return t/i}(e,o),u=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(c));return function(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!ae(t[0])||!ae(t[1]))throw new Error("coordinates must contain numbers");return ne({type:"Point",coordinates:t},e,i)}([oe(s+Math.atan2(Math.sin(c)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(u))),oe(u)],r)};function ce(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function he(t,e){return t<e?-1:t>e?1:0}var ue=function(t,e,i,n,o){!function t(e,i,n,o,r){for(;o>n;){if(o-n>600){var a=o-n+1,s=i-n+1,l=Math.log(a),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);t(e,i,Math.max(n,Math.floor(i-s*c/a+h)),Math.min(o,Math.floor(i+(a-s)*c/a+h)),r)}var u=e[i],p=n,d=o;for(ce(e,n,i),r(e[o],u)>0&&ce(e,n,o);p<d;){for(ce(e,p,d),p++,d--;r(e[p],u)<0;)p++;for(;r(e[d],u)>0;)d--}0===r(e[n],u)?ce(e,n,d):ce(e,++d,o),d<=i&&(n=d+1),i<=d&&(o=d-1)}}(t,e,i||0,n||t.length-1,o||he)};function pe(t,e){if(!(this instanceof pe))return new pe(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function de(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function me(t,e){fe(t,0,t.children.length,e,t)}function fe(t,e,i,n,o){o||(o=we(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,a=e;a<i;a++)r=t.children[a],ge(o,t.leaf?n(r):r);return o}function ge(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function _e(t,e){return t.minX-e.minX}function ve(t,e){return t.minY-e.minY}function ye(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function be(t){return t.maxX-t.minX+(t.maxY-t.minY)}function xe(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function ke(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function we(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Le(t,e,i,n,o){for(var r,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=n||(r=e+Math.ceil((i-e)/n/2)*n,ue(t,r,e,i,o),a.push(e,r,r,i))}pe.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!ke(t,e))return i;for(var o,r,a,s,l=[];e;){for(o=0,r=e.children.length;o<r;o++)a=e.children[o],ke(t,s=e.leaf?n(a):a)&&(e.leaf?i.push(a):xe(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!ke(t,e))return!1;for(var n,o,r,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(r=e.children[n],ke(t,a=e.leaf?i(r):r)){if(e.leaf||xe(t,a))return!0;s.push(r)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=we([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,r,a=this.data,s=this.toBBox(t),l=[],c=[];a||l.length;){if(a||(a=l.pop(),n=l[l.length-1],i=c.pop(),r=!0),a.leaf&&-1!==(o=de(t,a.children,e)))return a.children.splice(o,1),l.push(a),this._condense(l),this;r||a.leaf||!xe(a,s)?n?(i++,a=n.children[i],r=!1):a=null:(l.push(a),c.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:_e,compareMinY:ve,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var o,r=i-e+1,a=this._maxEntries;if(r<=a)return me(o=we(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),(o=we([])).leaf=!1,o.height=n;var s,l,c,h,u=Math.ceil(r/a),p=u*Math.ceil(Math.sqrt(a));for(Le(t,e,i,p,this.compareMinX),s=e;s<=i;s+=p)for(Le(t,s,c=Math.min(s+p-1,i),u,this.compareMinY),l=s;l<=c;l+=u)h=Math.min(l+u-1,c),o.children.push(this._build(t,l,h,n-1));return me(o,this.toBBox),o},_chooseSubtree:function(t,e,i,n){for(var o,r,a,s,l,c,h,u,p,d;n.push(e),!e.leaf&&n.length-1!==i;){for(h=u=1/0,o=0,r=e.children.length;o<r;o++)l=ye(a=e.children[o]),p=t,d=a,(c=(Math.max(d.maxX,p.maxX)-Math.min(d.minX,p.minX))*(Math.max(d.maxY,p.maxY)-Math.min(d.minY,p.minY))-l)<u?(u=c,h=l<h?l:h,s=a):c===u&&l<h&&(h=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,o=i?t:n(t),r=[],a=this._chooseSubtree(o,this.data,e,r);for(a.children.push(t),ge(a,o);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(o,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var r=this._chooseSplitIndex(i,o,n),a=we(i.children.splice(r,i.children.length-r));a.height=i.height,a.leaf=i.leaf,me(i,this.toBBox),me(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=we([t,e]),this.data.height=t.height+1,this.data.leaf=!1,me(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,o,r,a,s,l,c,h,u,p,d,m,f,g;for(l=c=1/0,n=e;n<=i-e;n++)u=o=fe(t,0,n,this.toBBox),p=r=fe(t,n,i,this.toBBox),void 0,void 0,void 0,void 0,d=Math.max(u.minX,p.minX),m=Math.max(u.minY,p.minY),f=Math.min(u.maxX,p.maxX),g=Math.min(u.maxY,p.maxY),a=Math.max(0,f-d)*Math.max(0,g-m),s=ye(o)+ye(r),a<l?(l=a,h=n,c=s<c?s:c):a===l&&s<c&&(c=s,h=n);return h},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:_e,o=t.leaf?this.compareMinY:ve;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var o,r,a=this.toBBox,s=fe(t,0,e,a),l=fe(t,i-e,i,a),c=be(s)+be(l);for(o=e;o<i-e;o++)r=t.children[o],ge(s,t.leaf?a(r):r),c+=be(s);for(o=i-e-1;o>=e;o--)r=t.children[o],ge(l,t.leaf?a(r):r),c+=be(l);return c},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)ge(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():me(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Me=pe;function Ce(t,e,i){if(!Ee(i=i||{}))throw new Error("options is invalid");var n=i.bbox,o=i.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");n&&De(n),o&&Oe(o);var r={type:"Feature"};return o&&(r.id=o),n&&(r.bbox=n),r.properties=e||{},r.geometry=t,r}function Pe(t,e,i){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ae(t[0])||!Ae(t[1]))throw new Error("coordinates must contain numbers");return Ce({type:"Point",coordinates:t},e,i)}function Se(t,e,i){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!Ae(t[0][1])||!Ae(t[0][1]))throw new Error("coordinates must contain numbers");return Ce({type:"LineString",coordinates:t},e,i)}function Te(t,e){if(!Ee(e=e||{}))throw new Error("options is invalid");var i=e.bbox,n=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");i&&De(i),n&&Oe(n);var o={type:"FeatureCollection"};return n&&(o.id=n),i&&(o.bbox=i),o.features=t,o}function Ae(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function Ee(t){return!!t&&t.constructor===Object}function De(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!Ae(t))throw new Error("bbox must only contain numbers")}))}function Oe(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")}function Ie(t,e,i){if(null!==t)for(var n,o,r,a,s,l,c,h,u=0,p=0,d=t.type,m="FeatureCollection"===d,f="Feature"===d,g=m?t.features.length:1,_=0;_<g;_++){s=(h=!!(c=m?t.features[_].geometry:f?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var v=0;v<s;v++){var y=0,b=0;if(null!==(a=h?c.geometries[v]:c)){l=a.coordinates;var x=a.type;switch(u=!i||"Polygon"!==x&&"MultiPolygon"!==x?0:1,x){case null:break;case"Point":if(!1===e(l,p,_,y,b))return!1;p++,y++;break;case"LineString":case"MultiPoint":for(n=0;n<l.length;n++){if(!1===e(l[n],p,_,y,b))return!1;p++,"MultiPoint"===x&&y++}"LineString"===x&&y++;break;case"Polygon":case"MultiLineString":for(n=0;n<l.length;n++){for(o=0;o<l[n].length-u;o++){if(!1===e(l[n][o],p,_,y,b))return!1;p++}"MultiLineString"===x&&y++,"Polygon"===x&&b++}"Polygon"===x&&y++;break;case"MultiPolygon":for(n=0;n<l.length;n++){for("MultiPolygon"===x&&(b=0),o=0;o<l[n].length;o++){for(r=0;r<l[n][o].length-u;r++){if(!1===e(l[n][o][r],p,_,y,b))return!1;p++}b++}y++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(!1===Ie(a.geometries[n],e,i))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Be(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var i=0;i<t.features.length&&!1!==e(t.features[i],i);i++);}function Re(t,e){!function(t,e){var i,n,o,r,a,s,l,c,h,u,p=0,d="FeatureCollection"===t.type,m="Feature"===t.type,f=d?t.features.length:1;for(i=0;i<f;i++){for(s=d?t.features[i].geometry:m?t.geometry:t,c=d?t.features[i].properties:m?t.properties:{},h=d?t.features[i].bbox:m?t.bbox:void 0,u=d?t.features[i].id:m?t.id:void 0,a=(l=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(r=l?s.geometries[o]:s))switch(r.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(r,p,c,h,u))return!1;break;case"GeometryCollection":for(n=0;n<r.geometries.length;n++)if(!1===e(r.geometries[n],p,c,h,u))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,c,h,u))return!1;p++}}(t,(function(t,i,n,o,r){var a,s=null===t?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return!1!==e(Ce(t,n,{bbox:o,id:r}),i,0)&&void 0}switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c=t.coordinates[l];if(!1===e(Ce({type:a,coordinates:c},n),i,l))return!1}}))}function ze(t){var e=[t[0],t[1]],i=[t[0],t[3]],n=[t[2],t[3]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:[[e,[t[2],t[1]],n,i,e]]}}}function Fe(t){var e=[1/0,1/0,-1/0,-1/0];return Ie(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}function je(t){if(!t)throw new Error("coords is required");if("Feature"===t.type&&null!==t.geometry)return t.geometry.coordinates;if(t.coordinates)return t.coordinates;if(Array.isArray(t))return t;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}var Ne=function(t){if(!t)throw new Error("geojson is required");var e=[];return Re(t,(function(t){!function(t,e){var i=[],n=t.geometry;switch(n.type){case"Polygon":i=je(n);break;case"LineString":i=[je(n)]}i.forEach((function(i){(function(t,e){var i=[];return t.reduce((function(t,n){var o,r,a,s,l,c,h=Se([t,n],e);return h.bbox=(r=n,a=(o=t)[0],s=o[1],[a<(l=r[0])?a:l,s<(c=r[1])?s:c,a>l?a:l,s>c?s:c]),i.push(h),n})),i})(i,t.properties).forEach((function(t){t.id=e.length,e.push(t)}))}))}(t,e)})),Te(e)};function Ue(t,e){var i=je(t),n=je(e);if(2!==i.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==n.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=i[0][0],r=i[0][1],a=i[1][0],s=i[1][1],l=n[0][0],c=n[0][1],h=n[1][0],u=n[1][1],p=(u-c)*(a-o)-(h-l)*(s-r);if(0===p)return null;var d=((h-l)*(r-c)-(u-c)*(o-l))/p,m=((a-o)*(r-c)-(s-r)*(o-l))/p;return d>=0&&d<=1&&m>=0&&m<=1?Pe([o+d*(a-o),r+d*(s-r)]):null}var Ge=function(t,e){var i={},n=[];if("LineString"===t.type&&(t=Ce(t)),"LineString"===e.type&&(e=Ce(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=Ue(t,e);return o&&n.push(o),Te(n)}var r=function(t){var e=Me(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;(t=ze(e)).bbox=e}else t.bbox=t.bbox?t.bbox:Fe(t);return Me.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach((function(t){var i=ze(t);i.bbox=t,e.push(i)})):Be(t,(function(t){t.bbox=t.bbox?t.bbox:Fe(t),e.push(t)})),Me.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;(t=ze(e)).bbox=e}return Me.prototype.remove.call(this,t)},e.clear=function(){return Me.prototype.clear.call(this)},e.search=function(t){return{type:"FeatureCollection",features:Me.prototype.search.call(this,this.toBBox(t))}},e.collides=function(t){return Me.prototype.collides.call(this,this.toBBox(t))},e.all=function(){return{type:"FeatureCollection",features:Me.prototype.all.call(this)}},e.toJSON=function(){return Me.prototype.toJSON.call(this)},e.fromJSON=function(t){return Me.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return{minX:(e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Fe(t))[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}();return r.load(Ne(e)),Be(Ne(t),(function(t){Be(r.search(t),(function(e){var o=Ue(t,e);if(o){var r=je(o).join(",");i[r]||(i[r]=!0,n.push(o))}}))})),Te(n)};function He(t,e){var i=[],n=Ut();return Ft(e,(function(e){if(i.forEach((function(t,e){t.id=e})),i.length){var o=n.search(e);if(o.features.length){var r=Ve(e,o);i=i.filter((function(t){return t.id!==r.id})),n.remove(r),zt(Ze(r,e),(function(t){i.push(t),n.insert(t)}))}}else(i=Ze(t,e).features).forEach((function(t){t.bbox||(t.bbox=function(t){var e=t[0],i=t[1],n=t[2],o=t[3];if(Vt(t.slice(0,2),[n,i])>=Vt(t.slice(0,2),[e,o])){var r=(i+o)/2;return[e,r-(n-e)/2,n,r+(n-e)/2]}var a=(e+n)/2;return[a-(o-i)/2,i,a+(o-i)/2,o]}(function(t){var e=[1/0,1/0,-1/0,-1/0];return Rt(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}(t)))})),n.load(Et(i))})),Et(i)}function Ze(t,e){var i=[],n=Yt(t)[0],o=Yt(t)[t.geometry.coordinates.length-1];if(We(n,$t(e))||We(o,$t(e)))return Et([t]);var r=Ut(),a=Jt(t);r.load(a);var s=r.search(e);if(!s.features.length)return Et([t]);var l=Ve(e,s),c=function(t,e,i){var n=i;return zt(t,(function(t,o){n=0===o&&void 0===i?t:e(n,t,o)})),n}(a,(function(t,n,o){var r=Yt(n)[1],a=$t(e);return o===l.id?(t.push(a),i.push(At(t)),We(a,r)?[a]:[a,r]):(t.push(r),t)}),[n]);return c.length>1&&i.push(At(c)),Et(i)}function Ve(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var i,n=1/0;return zt(e,(function(e){var o=function(t,e,i){if(!Ee(i=i||{}))throw new Error("options is invalid");var n=t.geometry?t.geometry.type:t.type;if("LineString"!==n&&"MultiLineString"!==n)throw new Error("lines must be LineString or MultiLineString");var o=Pe([1/0,1/0],{dist:1/0}),r=0;return Re(t,(function(t){for(var n=je(t),a=0;a<n.length-1;a++){var s=Pe(n[a]);s.properties.dist=Vt(e,s,i);var l=Pe(n[a+1]);l.properties.dist=Vt(e,l,i);var c=Vt(s,l,i),h=Math.max(s.properties.dist,l.properties.dist),u=ee(s,l),p=le(e,h,u+90,i),d=le(e,h,u-90,i),m=Ge(Se([p.geometry.coordinates,d.geometry.coordinates]),Se([s.geometry.coordinates,l.geometry.coordinates])),f=null;m.features.length>0&&((f=m.features[0]).properties.dist=Vt(e,f,i),f.properties.location=r+Vt(s,f,i)),s.properties.dist<o.properties.dist&&((o=s).properties.index=a,o.properties.location=r),l.properties.dist<o.properties.dist&&((o=l).properties.index=a+1,o.properties.location=r+c),f&&f.properties.dist<o.properties.dist&&((o=f).properties.index=a),r+=c}})),o}(e,t).properties.dist;o<n&&(i=e,n=o)})),i}function We(t,e){return t[0]===e[0]&&t[1]===e[1]}var qe=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var i=Kt(t),n=Kt(e);if("LineString"!==i)throw new Error("line must be LineString");if("FeatureCollection"===n)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===n)throw new Error("splitter cannot be a GeometryCollection");var o=qt(e,{precision:7});switch(n){case"Point":return Ze(t,o);case"MultiPoint":return He(t,o);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return He(t,function(t,e){var i={},n=[];if("LineString"===t.type&&(t=Tt(t)),"LineString"===e.type&&(e=Tt(e)),"Feature"===t.type&&"Feature"===e.type&&"LineString"===t.geometry.type&&"LineString"===e.geometry.type&&2===t.geometry.coordinates.length&&2===e.geometry.coordinates.length){var o=Xt(t,e);return o&&n.push(o),Et(n)}var r=Ut();return r.load(Jt(e)),zt(Jt(t),(function(t){zt(r.search(t),(function(e){var o=Xt(t,e);if(o){var r=Yt(o).join(",");i[r]||(i[r]=!0,n.push(o))}}))})),Et(n)}(t,o))}},$e=i(67),Ye=i.n($e),Ke=i(27),Je=i.n(Ke);function Xe(t){var e={type:"Feature"};return e.geometry=t,e}function Qe(t){return"Feature"===t.type?t.geometry:t}function ti(t){return t.geometry.coordinates}function ei(t){return Xe({type:"Polygon",coordinates:t})}function ii(t){return Xe({type:"MultiPolygon",coordinates:t})}function ni(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}et.Cut=et.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t=this;if(this._editedLayers=[],this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect)){var e=this._layer.getLatLngs(),i=L.polygon(e,this.options.pathOptions);i._latlngInfos=this._layer._latlngInfo,this.cut(i),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach((function(e){var i=e.layer,n=e.originalLayer;t._fireCut(n,i,n),t._fireCut(t._map,i,n),n.pm._fireEdit()})),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}},cut:function(t){var e=this,i=this._map._layers,n=t._latlngInfos||[];Object.keys(i).map((function(t){return i[t]})).filter((function(t){return t.pm})).filter((function(t){return!t._pmTempLayer})).filter((function(t){return!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore})).filter((function(t){return t instanceof L.Polyline})).filter((function(e){return e!==t})).filter((function(t){return t.pm.options.allowCutting})).filter((function(t){return!(e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0)||e.options.layersToCut.indexOf(t)>-1})).filter((function(t){return!e._layerGroup.hasLayer(t)})).filter((function(e){try{var i=!!ut()(t.toGeoJSON(15),e.toGeoJSON(15)).features.length>0;return i||e instanceof L.Polyline&&!(e instanceof L.Polygon)?i:(n=t.toGeoJSON(15),o=e.toGeoJSON(15),r=Qe(n),a=Qe(o),!(0===(s=Je.a.intersection(r.coordinates,a.coordinates)).length||!(1===s.length?ei(s[0]):ii(s))))}catch(t){return e instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var n,o,r,a,s})).forEach((function(i){var o;if(i instanceof L.Polygon){var r=(o=L.polygon(i.getLatLngs())).getLatLngs();n.forEach((function(t){if(t&&t.snapInfo){var i=t.latlng,n=e._calcClosestLayer(i,[o]);if(n&&n.segment&&n.distance<e.options.snapDistance){var a=n.segment;if(a&&2===a.length){var s=L.PM.Utils._getIndexFromSegment(r,a),l=s.indexPath,c=s.parentPath,h=s.newIndex;(l.length>1?D()(r,c):r).splice(h,0,i)}}}}))}else o=i;var a=e._cutLayer(t,o),s=L.geoJSON(a,i.options);if(1===s.getLayers().length){var l=s.getLayers();s=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return ni(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ni(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l,1)[0]}e._setPane(s,"layerPane");var c=s.addTo(e._map.pm._getContainingLayer());if(c.pm.enable(i.pm.options),c.pm.disable(),i._pmTempLayer=!0,t._pmTempLayer=!0,i.remove(),i.removeFrom(e._map.pm._getContainingLayer()),t.remove(),t.removeFrom(e._map.pm._getContainingLayer()),c.getLayers&&0===c.getLayers().length&&e._map.pm.removeLayer({target:c}),c instanceof L.LayerGroup?(c.eachLayer((function(t){e._addDrawnLayerProp(t)})),e._addDrawnLayerProp(c)):e._addDrawnLayerProp(c),e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0){var h=e.options.layersToCut.indexOf(i);h>-1&&e.options.layersToCut.splice(h,1)}e._editedLayers.push({layer:c,originalLayer:i})}))},_cutLayer:function(t,e){var i,n,o,r,a,s,l=L.geoJSON();if(e instanceof L.Polygon)n=e.toGeoJSON(15),o=t.toGeoJSON(15),r=Qe(n),a=Qe(o),i=0===(s=Je.a.difference(r.coordinates,a.coordinates)).length?null:1===s.length?ei(s[0]):ii(s);else{var c=function(t){t instanceof L.Polyline&&(t=t.toGeoJSON(15));var e=ti(t),i=function t(e){return Array.isArray(e)?1+t(e[0]):-1}(e),n=[];return i>1?e.forEach((function(t){n.push(function(t){return Xe({type:"LineString",coordinates:t})}(t))})):n.push(t),n}(e);c.forEach((function(e){var i=qe(e,t.toGeoJSON(15));(i&&i.features.length>0?L.geoJSON(i):L.geoJSON(e)).getLayers().forEach((function(e){Ye()(t.toGeoJSON(15),e.toGeoJSON(15))||e.addTo(l)}))})),i=c.length>1?function(t){var e=[];return t.eachLayer((function(t){e.push(ti(t.toGeoJSON(15)))})),function(t){return Xe({type:"MultiLineString",coordinates:t})}(e)}(l):l.toGeoJSON(15)}return i}});var oi={enableLayerDrag:function(){var t;this.options.draggable&&(this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,(null===(t=this._layer._map)||void 0===t?void 0:t.options.preferCanvas)?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0,this._layer.on("mousedown",this._dragMixinOnMouseDown,this))},disableLayerDrag:function(){var t;this._layerDragEnabled=!1,(null===(t=this._layer._map)||void 0===t?void 0:t.options.preferCanvas)?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable(),this._layer.off("mousedown",this._dragMixinOnMouseDown,this)},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_dragMixinOnMouseDown:function(t){if(!(t.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(t);var e=t._fromLayerSync,i=this._syncLayers("_dragMixinOnMouseDown",t);this._layer instanceof L.Marker&&(!this.options.snappable||e||i?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||e||i?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,this._layer._map.on("mouseup",this._dragMixinOnMouseUp,this),this._layer._map.on("mousemove",this._dragMixinOnMouseMove,this)}},_dragMixinOnMouseMove:function(t){this._overwriteEventIfItComesFromMarker(t);var e=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",t),this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._layer._map.dragging.disable(),this._fireDragStart()),this._onLayerDrag(t),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(t){var e=this,i=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",t),this._originalMapDragState&&this._layer._map.dragging.enable(),this._safeToCacheDragState=!0,this._layer._map.off("mousemove",this._dragMixinOnMouseMove,this),this._layer._map.off("mouseup",this._dragMixinOnMouseUp,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),window.setTimeout((function(){e._dragging=!1,L.DomUtil.removeClass(i,"leaflet-pm-dragging"),e._fireDragEnd(),e._fireEdit(),e._layerEdited=!0}),10),!0)},_onLayerDrag:function(t){var e=t.latlng,i=e.lat-this._tempDragCoord.lat,n=e.lng-this._tempDragCoord.lng,o=function t(e){return e.map((function(e){return Array.isArray(e)?t(e):{lat:e.lat+i,lng:e.lng+n}}))};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var r=o([this._layer.getLatLng()]);this._layer.setLatLng(r[0])}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var a=this._layer.getLatLng();this._layer._snapped&&(a=this._layer._orgLatLng);var s=o([a]);this._layer.setLatLng(s[0])}else if(this._layer instanceof L.ImageOverlay){var l=o([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(l)}else{var c=o(this._layer.getLatLngs());this._layer.setLatLngs(c)}this._tempDragCoord=e,t.layer=this._layer,this._fireDrag(t)},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image?t=this._layer._image:this._layer._icon&&(t=this._layer._icon),t},_overwriteEventIfItComesFromMarker:function(t){t.target.getLatLng&&(!t.target._radius||t.target._radius<=10)&&(t.containerPoint=this._map.mouseEventToContainerPoint(t.originalEvent),t.latlng=this._map.containerPointToLatLng(t.containerPoint))},_syncLayers:function(t,e){var i=this;if(this.enabled())return!1;if(!e._fromLayerSync&&this._layer===e.target&&this.options.syncLayersOnDrag){e._fromLayerSync=!0;var n=[];if(L.Util.isArray(this.options.syncLayersOnDrag))n=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach((function(t){t instanceof L.LayerGroup&&(n=n.concat(t.pm.getLayers(!0)))}));else if(!0===this.options.syncLayersOnDrag&&this._parentLayerGroup)for(var o in this._parentLayerGroup){var r=this._parentLayerGroup[o];r.pm&&(n=r.pm.getLayers(!0))}return L.Util.isArray(n)&&n.length>0&&(n=n.filter((function(t){return!!t.pm})).filter((function(t){return!!t.pm.options.draggable}))).forEach((function(n){n!==i._layer&&n.pm[t]&&(n._snapped=!1,n.pm[t](e))})),n.length>0}return!1},_stopDOMImageDrag:function(t){return t.preventDefault(),!1}};function ri(t,e){e instanceof L.Layer&&(e=e.getLatLng());var i=t.getMaxZoom();return i===1/0&&(i=t.getZoom()),t.project(e,i)}function ai(t,e){var i=t.getMaxZoom();return i===1/0&&(i=t.getZoom()),t.unproject(e,i)}var si={_onRotateStart:function(t){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=ri(this._map,this._rotationOriginLatLng),this._rotationStartPoint=ri(this._map,t.target.getLatLng()),this._initialRotateLatLng=U(this._layer),this._startAngle=this.getAngle();var e=U(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,e),this._fireRotationStart(this._map,e)},_onRotate:function(t){var e=ri(this._map,t.target.getLatLng()),i=this._rotationStartPoint,n=this._rotationOriginPoint,o=Math.atan2(e.y-n.y,e.x-n.x)-Math.atan2(i.y-n.y,i.x-n.x);this._layer.setLatLngs(this._rotateLayer(o,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var r=this;!function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(n>-1&&i.push(n),L.Util.isArray(e[0]))e.forEach((function(e,n){return t(e,i.slice(),n)}));else{var o=D()(r._markers,i);e.forEach((function(t,e){o[e].setLatLng(t)}))}}(this._layer.getLatLngs());var a=U(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(o,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var s=180*o/Math.PI,l=(s=s<0?s+360:s)+this._startAngle;this._setAngle(l),this._rotationLayer.pm._setAngle(l),this._fireRotation(this._rotationLayer,s,a),this._fireRotation(this._map,s,a)},_onRotateEnd:function(){var t=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var e=U(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=U(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,t,e),this._fireRotationEnd(this._map,t,e),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1)},_rotateLayer:function(t,e,i,n,o){var r=ri(o,i);return this._matrix=n.clone().rotate(t,r).flip(),function t(e,i,n){var o=n.getMaxZoom();if(o===1/0&&(o=n.getZoom()),L.Util.isArray(e)){var r=[];return e.forEach((function(e){r.push(t(e,i,n))})),r}return e instanceof L.LatLng?function(t,e,i,n){return i.unproject(e.transform(i.project(t,n)),n)}(e,i,n,o):null}(e,this._matrix,o)},_setAngle:function(t){t=t<0?t+360:t,this._angle=t%360},_getRotationCenter:function(){var t=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),e=t.getCenter();return t.removeFrom(this._layer._map),e},enableRotate:function(){this.options.allowRotation?(this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}).addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=U(this._layer),this._rotateEnabled=!0,this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(t){var e=t*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(e,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+t),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(e,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers())},rotateLayerToAngle:function(t){var e=t-this.getAngle();this.rotateLayer(e)},getAngle:function(){return this._angle||0}},li=L.Class.extend({includes:[oi,tt,si,S],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,e){"layerPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":"vertexPane"===e?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":"markerPane"===e&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(t,e){var i=e.target,n={layer:this._layer,marker:i,event:e},o="";return"move"===t?o="moveVertexValidation":"add"===t?o="addVertexValidation":"remove"===t&&(o="removeVertexValidation"),this.options[o]&&"function"==typeof this.options[o]&&!this.options[o](n)?("move"===t&&(i._cancelDragEventChain=i.getLatLng()),!1):(i._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(t){return!t._cancelDragEventChain||(t._latlng=t._cancelDragEventChain,t.update(),!1)},_vertexValidationDragEnd:function(t){return!t._cancelDragEventChain||(t._cancelDragEventChain=null,!1)}});function ci(t){return function(t){if(Array.isArray(t))return hi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return hi(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?hi(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}li.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.getLayers(),this._getMap(),this._layers.forEach((function(t){return e._initLayer(t)})),this._layerGroup.on("layeradd",L.Util.throttle((function(t){if(!t.layer._pmTempLayer){e._layers=e.getLayers();var i=e._layers.filter((function(t){return!t.pm._parentLayerGroup||!(e._layerGroup._leaflet_id in t.pm._parentLayerGroup)}));i.forEach((function(t){e._initLayer(t)})),i.length>0&&e._getMap()&&e._getMap().pm.globalEditModeEnabled()&&e.enabled()&&e.enable(e.getOptions())}}),100,this),this),this._layerGroup.on("layerremove",(function(t){e._removeLayerFromGroup(t.target)}),this),this._layerGroup.on("layerremove",L.Util.throttle((function(t){t.target._pmTempLayer||(e._layers=e.getLayers())}),100,this),this)},enable:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach((function(i){i instanceof L.LayerGroup?-1===e.indexOf(i._leaflet_id)&&(e.push(i._leaflet_id),i.pm.enable(t,e)):i.pm.enable(t)}))},disable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0===t.length&&(this._layers=this.getLayers()),this._layers.forEach((function(e){e instanceof L.LayerGroup?-1===t.indexOf(e._leaflet_id)&&(t.push(e._leaflet_id),e.pm.disable(t)):e.pm.disable()}))},enabled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];0===t.length&&(this._layers=this.getLayers());var e=this._layers.find((function(e){return e instanceof L.LayerGroup?-1===t.indexOf(e._leaflet_id)&&(t.push(e._leaflet_id),e.pm.enabled(t)):e.pm.enabled()}));return!!e},toggleEdit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach((function(i){i instanceof L.LayerGroup?-1===e.indexOf(i._leaflet_id)&&(e.push(i._leaflet_id),i.pm.toggleEdit(t,e)):i.pm.toggleEdit(t)}))},_initLayer:function(t){var e=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[e]=this._layerGroup},_removeLayerFromGroup:function(t){if(t.pm&&t.pm._layerGroup){var e=L.Util.stamp(this._layerGroup);delete t.pm._layerGroup[e]}},dragging:function(){return this._layers=this.getLayers(),!!this._layers&&!!this._layers.find((function(t){return t.pm.dragging()}))},getOptions:function(){return this.options},_getMap:function(){var t;return this._map||(null===(t=this._layers.find((function(t){return!!t._map})))||void 0===t?void 0:t._map)||null},getLayers:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[];return t?this._layerGroup.getLayers().forEach((function(t){o.push(t),t instanceof L.LayerGroup&&-1===n.indexOf(t._leaflet_id)&&(n.push(t._leaflet_id),o=o.concat(t.pm.getLayers(!0,!0,!0,n)))})):o=this._layerGroup.getLayers(),i&&(o=o.filter((function(t){return!(t instanceof L.LayerGroup)}))),e&&(o=(o=(o=o.filter((function(t){return!!t.pm}))).filter((function(t){return!t._pmTempLayer}))).filter((function(t){return!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore}))),o},setOptions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];0===e.length&&(this._layers=this.getLayers()),this.options=t,this._layers.forEach((function(i){i.pm&&(i instanceof L.LayerGroup?-1===e.indexOf(i._leaflet_id)&&(e.push(i._leaflet_id),i.pm.setOptions(t,e)):i.pm.setOptions(t))}))}}),li.Marker=li.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this.options.allowEditing?this.enabled()||(this.applyOptions(),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this._enabled=!1,this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable())},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){var e=t.target;e.remove(),this._fireRemove(e),this._fireRemove(this._map,e)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});var ui={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.applyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.applyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(ci(this._markerGroup.getLayers()),ci(this.markerCache));this.markerCache=t.filter((function(t,e,i){return i.indexOf(t)===e}))},renderLimits:function(t){var e=this;this.markerCache.forEach((function(i){t.includes(i)?e._markerGroup.addLayer(i):e._markerGroup.removeLayer(i)}))},applyLimitFilters:function(t){var e=t.latlng,i=void 0===e?{lat:0,lng:0}:e;if(!this._preventRenderMarkers){var n=ci(this._filterClosestMarkers(i));this.renderLimits(n)}},_filterClosestMarkers:function(t){var e=ci(this.markerCache),i=this.options.limitMarkersToCount;return e.sort((function(e,i){return e._latlng.distanceTo(t)-i._latlng.distanceTo(t)})),e.filter((function(t,e){return!(i>-1)||e<i}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(t){this._preventRenderMarkers=!!t}};function pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}li.Line=li.extend({includes:[ui],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:("#f00000ff"!==this._layer.options.color?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layer;if(!this.enabled())return!1;if(t.pm._dragging)return!1;t.pm._enabled=!1,t.pm._markerGroup.clearLayers(),t.pm._markerGroup.removeFrom(this._map),this._layer.off("remove",this._onLayerRemove,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var e=t._path?t._path:this._layer._renderer._container;return L.DomUtil.removeClass(e,"leaflet-pm-draggable"),this.hasSelfIntersection()&&L.DomUtil.removeClass(e,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),!0},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_onLayerRemove:function(t){this.disable(t.target)},_initMarkers:function(){var t=this,e=this._map,i=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,this._markers=function e(i){if(Array.isArray(i[0]))return i.map(e,t);var n=i.map(t._createMarker,t);return!0!==t.options.hideMiddleMarkers&&i.map((function(e,o){var r=t.isPolygon()?(o+1)%i.length:o+1;return t._createMiddleMarker(n[o],n[r])})),n}(i),this.filterMarkerGroup(),e.addLayer(this._markerGroup)},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this.options.rotate?(e.on("dragstart",this._onRotateStart,this),e.on("drag",this._onRotate,this),e.on("dragend",this._onRotateEnd,this)):(e.on("click",this._onVertexClick,this),e.on("dragstart",this._onMarkerDragStart,this),e.on("move",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(e),e},_createMiddleMarker:function(t,e){if(!t||!e)return!1;var i=L.PM.Utils.calcMiddleLatLng(this._map,t.getLatLng(),e.getLatLng()),n=this._createMarker(i),o=L.divIcon({className:"marker-icon marker-icon-middle"});return n.setIcon(o),n.leftM=t,n.rightM=e,t._middleMarkerNext=n,e._middleMarkerPrev=n,n.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),n.on("movestart",this._onMiddleMarkerMoveStart,this),n},_onMiddleMarkerClick:function(t){var e=t.target;if(this._vertexValidation("add",t)){var i=L.divIcon({className:"marker-icon"});e.setIcon(i),this._addMarker(e,e.leftM,e.rightM)}},_onMiddleMarkerMoveStart:function(t){var e=t.target;e.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",t)?(e._dragging=!0,this._addMarker(e,e.leftM,e.rightM)):e.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(t){var e=t.target;this._vertexValidationDrag(e)},_onMiddleMarkerMoveEnd:function(t){var e=t.target;if(e.off("move",this._onMiddleMarkerMovePrevent,this),e.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(e)){var i=L.divIcon({className:"marker-icon"});e.setIcon(i),setTimeout((function(){delete e._dragging}),100)}},_addMarker:function(t,e,i){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var n=t.getLatLng(),o=this._layer._latlngs;delete t.leftM,delete t.rightM;var r=this.findDeepMarkerIndex(this._markers,e),a=r.indexPath,s=r.index,l=r.parentPath,c=a.length>1?D()(o,l):o,h=a.length>1?D()(this._markers,l):this._markers;c.splice(s+1,0,n),h.splice(s+1,0,t),this._layer.setLatLngs(o),!0!==this.options.hideMiddleMarkers&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,i)),this._fireEdit(),this._layerEdited=!0,this._fireVertexAdded(t,this.findDeepMarkerIndex(this._markers,t).indexPath,n),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return nt()(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;t?this._flashLayer():(e.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(nt()(this._layer.toGeoJSON(15)))}else e.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout((function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1}),200)},_updateDisabledMarkerStyle:function(t,e){var i=this;t.forEach((function(t){if(Array.isArray(t))return i._updateDisabledMarkerStyle(t,e);t._icon&&(e&&!i._checkMarkerAllowedToDrag(t)?L.DomUtil.addClass(t._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(t._icon,"vertexmarker-disabled"))}))},_removeMarker:function(t){var e=t.target;if(this._vertexValidation("remove",t)){if(!this.options.allowSelfIntersection){var i=this._layer.getLatLngs();this._coordsBeforeEdit=JSON.parse(JSON.stringify(i))}var n=this._layer.getLatLngs(),o=this.findDeepMarkerIndex(this._markers,e),r=o.indexPath,a=o.index,s=o.parentPath;if(r){var l=r.length>1?D()(n,s):n,c=r.length>1?D()(this._markers,s):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(l.length<=2||this.isPolygon()&&l.length<=3)){l.splice(a,1),this._layer.setLatLngs(n),this.isPolygon()&&l.length<=2&&l.splice(0,l.length);var h=!1;if(l.length<=1&&(l.splice(0,l.length),this._layer.setLatLngs(n),this.disable(),this.enable(this.options),h=!0),R(n)&&this._layer.remove(),n=z(n),this._layer.setLatLngs(n),this._markers=z(this._markers),!h&&(c=r.length>1?D()(this._markers,s):this._markers,e._middleMarkerPrev&&this._markerGroup.removeLayer(e._middleMarkerPrev),e._middleMarkerNext&&this._markerGroup.removeLayer(e._middleMarkerNext),this._markerGroup.removeLayer(e),c)){var u,p;if(this.isPolygon()?(u=(a+1)%c.length,p=(a+(c.length-1))%c.length):(p=a-1<0?void 0:a-1,u=a+1>=c.length?void 0:a+1),u!==p){var d=c[p],m=c[u];!0!==this.options.hideMiddleMarkers&&this._createMiddleMarker(d,m)}c.splice(a,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(e,r)}else this._flashLayer()}}},findDeepMarkerIndex:function(t,e){var i;t.some(function t(n){return function(o,r){var a=n.concat(r);return o._leaflet_id===e._leaflet_id?(i=a,!0):Array.isArray(o)&&o.some(t(a))}}([]));var n={};return i&&(n={indexPath:i,index:i[i.length-1],parentPath:i.slice(0,i.length-1)}),n},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),i=t.getLatLng(),n=this.findDeepMarkerIndex(this._markers,t),o=n.indexPath,r=n.index,a=n.parentPath;(o.length>1?D()(e,a):e).splice(r,1,i),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=this.findDeepMarkerIndex(this._markers,t),i=e.indexPath,n=e.index,o=e.parentPath,r=i.length>1?D()(this._markers,o):this._markers,a=(n+1)%r.length;return{prevMarker:r[(n+(r.length-1))%r.length],nextMarker:r[a]}},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,n=e.nextMarker,o=L.polyline([i.getLatLng(),t.getLatLng()]),r=L.polyline([t.getLatLng(),n.getLatLng()]),a=ut()(this._layer.toGeoJSON(15),o.toGeoJSON(15)).features.length,s=ut()(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?s+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(a+=1),!(a<=2&&s<=2)},_onMarkerDragStart:function(t){var e=t.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",t)){var i=this.findDeepMarkerIndex(this._markers,e).indexPath;this._fireMarkerDragStart(t,i),this.options.allowSelfIntersection||(this._coordsBeforeEdit=this._layer.getLatLngs()),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null}},_onMarkerDrag:function(t){var e=t.target;if(this._vertexValidationDrag(e)){var i=this.findDeepMarkerIndex(this._markers,e),n=i.indexPath,o=i.index,r=i.parentPath;if(n){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&!1===this._markerAllowedToDrag)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var a=n.length>1?D()(this._markers,r):this._markers,s=(o+1)%a.length,l=(o+(a.length-1))%a.length,c=e.getLatLng(),h=a[l].getLatLng(),u=a[s].getLatLng();if(e._middleMarkerNext){var p=L.PM.Utils.calcMiddleLatLng(this._map,c,u);e._middleMarkerNext.setLatLng(p)}if(e._middleMarkerPrev){var d=L.PM.Utils.calcMiddleLatLng(this._map,c,h);e._middleMarkerPrev.setLatLng(d)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(t,n)}}},_onMarkerDragEnd:function(t){var e=t.target;if(this._vertexValidationDragEnd(e)){var i=this.findDeepMarkerIndex(this._markers,e).indexPath,n=this.hasSelfIntersection();n&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(n=!1);var o=!this.options.allowSelfIntersection&&n;if(this._fireMarkerDragEnd(t,i,o),o)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(t,i);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0}},_onVertexClick:function(t){var e=t.target;if(!e._dragging){var i=this.findDeepMarkerIndex(this._markers,e).indexPath;this._fireVertexClick(t,i)}}}),li.Polygon=li.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),i=e.prevMarker,n=e.nextMarker,o=L.polyline([i.getLatLng(),t.getLatLng()]),r=L.polyline([t.getLatLng(),n.getLatLng()]),a=ut()(this._layer.toGeoJSON(15),o.toGeoJSON(15)).features.length,s=ut()(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.length;return!(a<=2&&s<=2)}}),li.Rectangle=li.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this,e=this._map,i=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.LayerGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=i.map(this._createMarker,this);var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(i.push(a.value),!e||i.length!==e);n=!0);}catch(t){o=!0,r=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw r}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return pi(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?pi(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this._markers,1);this._cornerMarkers=n[0],this._layer.getLatLngs()[0].forEach((function(e,i){var n=t._cornerMarkers.find((function(t){return t._index===i}));n&&n.setLatLng(e)}))},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,e){var i=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(i,"vertexPane"),i._origLatLng=t,i._index=e,i._pmTempLayer=!0,this._markerGroup.addLayer(i),i},_addMarkerEvents:function(){var t=this;this._markers[0].forEach((function(e){e.on("dragstart",t._onMarkerDragStart,t),e.on("drag",t._onMarkerDrag,t),e.on("dragend",t._onMarkerDragEnd,t),t.options.preventMarkerRemoval||e.on("contextmenu",t._removeMarker,t)}))},_removeMarker:function(){return null},_onMarkerDragStart:function(t){if(this._vertexValidation("move",t)){var e=t.target,i=this._cornerMarkers;e._oppositeCornerLatLng=i.find((function(t){return t._index===(e._index+2)%4})).getLatLng(),e._snapped=!1,this._fireMarkerDragStart(t)}},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&void 0!==e._index&&(this._adjustRectangleForMarkerMove(e),this._fireMarkerDrag(t))},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._cornerMarkers.forEach((function(t){delete t._oppositeCornerLatLng})),this._fireMarkerDragEnd(t),this._fireEdit(),this._layerEdited=!0)},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=L.PM.Utils._getRotatedRectangle(t.getLatLng(),t._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(e),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var t=this,e=this._layer.getLatLngs()[0];e&&4!==e.length&&e.length>0?(e.forEach((function(e,i){t._cornerMarkers[i].setLatLng(e)})),this._cornerMarkers.slice(e.length).forEach((function(t){t.setLatLng(e[0])}))):e&&e.length?this._cornerMarkers.forEach((function(t){t.setLatLng(e[t._index])})):console.error("The layer has no LatLngs")},_findCorners:function(){this._layer.getBounds();var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this._angle||0,this._map)}}),li.Circle=li.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(t){var e=this;L.Util.setOptions(this,t),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",(function(t){e.disable(t.target)})),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layer;if(!this.enabled())return!1;if(t.pm._dragging)return!1;this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),t.pm._enabled=!1,t.pm._helperLayers.clearLayers();var e=t._path?t._path:this._layer._renderer._container;return L.DomUtil.removeClass(e,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),!0},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(n),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(t,e){var i=t.getLatLng(),n=e.getLatLng();this._hintline=L.polyline([i,n],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this),e.on("dragstart",this._onCircleDragStart,this),e.on("drag",this._onCircleDrag,this),e.on("dragend",this._onCircleDragEnd,this),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){if(!t.target._cancelDragEventChain){var e=t.latlng;this._layer.setLatLng(e);var i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._outerMarker._latlng=n,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit")}},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=t.distanceTo(e);this.options.minRadiusCircle&&i<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(i),this._updateHiddenPolyCircle()},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_disableSnapping:function(){var t=this;this._markers.forEach((function(e){e.off("move",t._syncHintLine,t),e.off("move",t._syncCircleRadius,t),e.off("drag",t._handleSnapping,t),e.off("dragend",t._cleanupSnapping,t)})),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(t))},_onCircleDragStart:function(t){this._vertexValidationDrag(t.target)?(delete this._vertexValidationReset,this._fireDragStart(t)):this._vertexValidationReset=!0},_onCircleDrag:function(t){this._vertexValidationReset||this._fireDrag(t)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(t,e){var i=this._map.project(t),n=L.point(i.x+e,i.y);return this._map.unproject(n)},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=t.distanceTo(e);return this.options.minRadiusCircle&&i<this.options.minRadiusCircle?e=N(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle&&(e=N(this._map,t,e,this.options.maxRadiusCircle)),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=t.distanceTo(e);(this.options.minRadiusCircle&&i<this.options.minRadiusCircle||this.options.maxRadiusCircle&&i>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),li.CircleMarker=li.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this.applyOptions(),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable())},disable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layer;return!t.pm._dragging&&(t.pm._helperLayers&&t.pm._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),t.pm._enabled=!1,!0)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.LayerGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),i=this._layer._radius,n=this._getLatLngOnCircle(e,i);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(n),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var i=this._map.project(t),n=L.point(i.x+e,i.y);return this._map.unproject(n)},_createHintLine:function(t,e){var i=t.getLatLng(),n=e.getLatLng();this._hintline=L.polyline([i,n],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"):e.dragging.disable(),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_moveCircle:function(){var t=this._centerMarker.getLatLng();this._layer.setLatLng(t);var e=this._layer._radius,i=this._getLatLngOnCircle(t,e);this._outerMarker._latlng=i,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit")},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,i=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(i),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(i),this._updateHiddenPolyCircle()},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!0,this._vertexValidation("move",t)},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;e instanceof L.Marker&&!this._vertexValidationDrag(e)||this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var e=t.target;this._vertexValidationDragEnd(e)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(t))},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=void 0===this.options.snapSegment||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t=this._layer._map||this._map;if(t){var e=t.project(this._layer.getLatLng()),i=L.point(e.x+this._layer.getRadius(),e.y),n=this._layer.getLatLng().distanceTo(t.unproject(i)),o=L.circle(this._layer.getLatLng(),this._layer.options);o.setRadius(n),this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(o,200).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(o,200),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));return this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker?e=N(this._map,t,e,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker&&(e=N(this._map,t,e,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker))),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),i=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&i<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&i>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),i=this._map.project(e),n=L.point(i.x+t,i.y);return this._map.unproject(n).distanceTo(e)}}),li.ImageOverlay=li.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._layer;return!t.pm._dragging&&(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._layer.off("contextmenu",this._removeMarker,this),t.pm._enabled=!1,!0)},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),i(153),i(154);var di=function(t,e,i,n,o,r){this._matrix=[t,e,i,n,o,r]};di.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},di.prototype={transform:function(t){return this._transform(t.clone())},_transform:function(t){var e=this._matrix,i=t.x,n=t.y;return t.x=e[0]*i+e[1]*n+e[4],t.y=e[2]*i+e[3]*n+e[5],t},untransform:function(t){var e=this._matrix;return new L.Point((t.x/e[0]-e[4])/e[0],(t.y/e[2]-e[5])/e[2])},clone:function(){var t=this._matrix;return new L.PM.Matrix(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(t){return void 0===t?new L.Point(this._matrix[4],this._matrix[5]):("number"==typeof t?(e=t,i=t):(e=t.x,i=t.y),this._add(1,0,0,1,e,i));var e,i},scale:function(t,e){return void 0===t?new L.Point(this._matrix[0],this._matrix[3]):(e=e||L.point(0,0),"number"==typeof t?(i=t,n=t):(i=t.x,n=t.y),this._add(i,0,0,n,e.x,e.y)._add(1,0,0,1,-e.x,-e.y));var i,n},rotate:function(t,e){var i=Math.cos(t),n=Math.sin(t);return e=e||new L.Point(0,0),this._add(i,n,-n,i,e.x,e.y)._add(1,0,0,1,-e.x,-e.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(t,e,i,n,o,r){var a,s=[[],[],[]],l=this._matrix,c=[[l[0],l[2],l[4]],[l[1],l[3],l[5]],[0,0,1]],h=[[t,i,o],[e,n,r],[0,0,1]];t&&t instanceof L.PM.Matrix&&(h=[[(l=t._matrix)[0],l[2],l[4]],[l[1],l[3],l[5]],[0,0,1]]);for(var u=0;u<3;u+=1)for(var p=0;p<3;p+=1){a=0;for(var d=0;d<3;d+=1)a+=c[u][d]*h[d][p];s[u][p]=a}return this._matrix=[s[0][0],s[1][0],s[0][1],s[1][1],s[0][2],s[1][2]],this}};var mi=di,fi={calcMiddleLatLng:function(t,e,i){var n=t.project(e),o=t.project(i);return t.unproject(n._add(o)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer((function(t){(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.Circle||t instanceof L.CircleMarker||t instanceof L.ImageOverlay)&&e.push(t)})),e=(e=(e=e.filter((function(t){return!!t.pm}))).filter((function(t){return!t._pmTempLayer}))).filter((function(t){return!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&!1===t.options.pmIgnore}))},circleToPolygon:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:60,i=t.getLatLng(),n=t.getRadius(),o=j(i,n,e,0),r=[],a=0;a<o.length;a+=1){var s=[o[a].lat,o[a].lng];r.push(s)}return L.polygon(r,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.fire(e,i,n);var o=this.getAllParentGroups(t),r=o.groups;r.forEach((function(t){t.fire(e,i,n)}))},getAllParentGroups:function(t){var e=[],i=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||(new Date).getTime()-t._pmLastGroupFetch.time>1e3?(function t(n){for(var o in n._eventParents)if(-1===e.indexOf(o)){e.push(o);var r=n._eventParents[o];i.push(r),t(r)}}(t),t._pmLastGroupFetch={time:(new Date).getTime(),groups:i,groupIds:e},{groupIds:e,groups:i}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:j,getTranslation:B,findDeepCoordIndex:function(t,e){var i;t.some(function t(n){return function(o,r){var a=n.concat(r);return o.lat&&o.lat===e.lat&&o.lng===e.lng?(i=a,!0):Array.isArray(o)&&o.some(t(a))}}([]));var n={};return i&&(n={indexPath:i,index:i[i.length-1],parentPath:i.slice(0,i.length-1)}),n},_getIndexFromSegment:function(t,e){if(e&&2===e.length){var i=this.findDeepCoordIndex(t,e[0]),n=this.findDeepCoordIndex(t,e[1]),o=Math.max(i.index,n.index);return 0!==i.index&&0!==n.index||1===o||(o+=1),{indexA:i,indexB:n,newIndex:o,indexPath:i.indexPath,parentPath:i.parentPath}}return null},_getRotatedRectangle:function(t,e,i,n){var o=ri(n,t),r=ri(n,e),a=i*Math.PI/180,s=Math.cos(a),l=Math.sin(a),c=(r.x-o.x)*s+(r.y-o.y)*l,h=(r.y-o.y)*s-(r.x-o.x)*l,u=c*s+o.x,p=c*l+o.y,d=-h*l+o.x,m=h*s+o.y;return[ai(n,o),ai(n,{x:u,y:p}),ai(n,r),ai(n,{x:d,y:m})]}};L.PM=L.PM||{version:n.version,Map:A,Toolbar:K,Draw:et,Edit:li,Utils:fi,Matrix:mi,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){function t(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this))}function e(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}function i(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Marker(this))}function n(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}function o(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}function r(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}function a(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}function s(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}function l(){this.pm=void 0,L.PM.optIn?!1===this.options.pmIgnore&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.Map.addInitHook(t),L.LayerGroup.addInitHook(e),L.Marker.addInitHook(i),L.CircleMarker.addInitHook(n),L.Polyline.addInitHook(o),L.Polygon.addInitHook(r),L.Rectangle.addInitHook(a),L.Circle.addInitHook(s),L.ImageOverlay.addInitHook(l)},reInitLayer:function(t){var e=this;t instanceof L.LayerGroup&&t.eachLayer((function(t){e.reInitLayer(t)})),t.pm||L.PM.optIn&&!1!==t.options.pmIgnore||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline?t.pm=new L.PM.Edit.Line(t):t instanceof L.LayerGroup?t.pm=new L.PM.Edit.LayerGroup(t):t instanceof L.ImageOverlay&&(t.pm=new L.PM.Edit.ImageOverlay(t)))}},L.PM.initialize()}])},1639:function(t,e,i){"use strict";t.exports=i(9281)},7114:function(t,e,i){"use strict";var n=i(5670),o={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};n.isMsie()&&n.mixin(o.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),n.isMsie()&&n.isMsie()<=7&&n.mixin(o.input,{marginTop:"-1px"}),t.exports=o},3312:function(t,e,i){"use strict";var n="aaDataset",o="aaValue",r="aaDatum",a=i(5670),s=i(3855),l=i(6619),c=i(7114),h=i(6823);function u(t){var e;(t=t||{}).templates=t.templates||{},t.source||a.error("missing source"),t.name&&(e=t.name,!/^[_a-zA-Z0-9-]+$/.test(e))&&a.error("invalid dataset name: "+t.name),this.query=null,this._isEmpty=!0,this.highlight=!!t.highlight,this.name=void 0===t.name||null===t.name?a.getUniqueId():t.name,this.source=t.source,this.displayFn=function(t){return t=t||"value",a.isFunction(t)?t:e;function e(e){return e[t]}}(t.display||t.displayKey),this.debounce=t.debounce,this.cache=!1!==t.cache,this.templates=function(t,e){return{empty:t.empty&&a.templatify(t.empty),header:t.header&&a.templatify(t.header),footer:t.footer&&a.templatify(t.footer),suggestion:t.suggestion||i};function i(t){return"<p>"+e(t)+"</p>"}}(t.templates,this.displayFn),this.css=a.mixin({},c,t.appendTo?c.appendTo:{}),this.cssClasses=t.cssClasses=a.mixin({},c.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||a.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var i=a.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=t.$menu&&t.$menu.find(i+"-"+this.name).length>0?s.element(t.$menu.find(i+"-"+this.name)[0]):s.element(l.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=t.$menu,this.clearCachedSuggestions()}u.extractDatasetName=function(t){return s.element(t).data(n)},u.extractValue=function(t){return s.element(t).data(o)},u.extractDatum=function(t){var e=s.element(t).data(r);return"string"==typeof e&&(e=JSON.parse(e)),e},a.mixin(u.prototype,h,{_render:function(t,e){if(this.$el){var i,c=this,h=[].slice.call(arguments,2);if(this.$el.empty(),i=e&&e.length,this._isEmpty=!i,!i&&this.templates.empty)this.$el.html(u.apply(this,h)).prepend(c.templates.header?d.apply(this,h):null).append(c.templates.footer?m.apply(this,h):null);else if(i)this.$el.html(p.apply(this,h)).prepend(c.templates.header?d.apply(this,h):null).append(c.templates.footer?m.apply(this,h):null);else if(e&&!Array.isArray(e))throw new TypeError("suggestions must be an array");this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(i?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(i?"without":"with")+"-"+this.name),this.trigger("rendered",t)}function u(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!0}].concat(e),c.templates.empty.apply(this,e)}function p(){var t,i,h=[].slice.call(arguments,0),u=this,p=l.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return t=s.element(p).css(this.css.suggestions),i=a.map(e,d),t.append.apply(t,i),t;function d(t){var e,i=l.suggestion.replace("%PREFIX%",u.cssClasses.prefix).replace("%SUGGESTION%",u.cssClasses.suggestion);return(e=s.element(i).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(c.templates.suggestion.apply(this,[t].concat(h)))).data(n,c.name),e.data(o,c.displayFn(t)||void 0),e.data(r,JSON.stringify(t)),e.children().each((function(){s.element(this).css(u.css.suggestionChild)})),e}}function d(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!i}].concat(e),c.templates.header.apply(this,e)}function m(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!i}].concat(e),c.templates.footer.apply(this,e)}},getRoot:function(){return this.$el},update:function(t){function e(e){if(!this.canceled&&t===this.query){var i=[].slice.call(arguments,1);this.cacheSuggestions(t,e,i),this._render.apply(this,[t,e].concat(i))}}if(this.query=t,this.canceled=!1,this.shouldFetchFromCache(t))e.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs));else{var i=this,n=function(){i.canceled||i.source(t,e.bind(i))};if(this.debounce){clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((function(){i.debounceTimeout=null,n()}),this.debounce)}else n()}},cacheSuggestions:function(t,e,i){this.cachedQuery=t,this.cachedSuggestions=e,this.cachedRenderExtraArgs=i},shouldFetchFromCache:function(t){return this.cache&&this.cachedQuery===t&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.$el&&(this.cancel(),this.$el.empty(),this.trigger("rendered",""))},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),t.exports=u},5445:function(t,e,i){"use strict";var n=i(5670),o=i(3855),r=i(6823),a=i(3312),s=i(7114);function l(t){var e,i,r,a=this;(t=t||{}).menu||n.error("menu is required"),n.isArray(t.datasets)||n.isObject(t.datasets)||n.error("1 or more datasets required"),t.datasets||n.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=t.minLength||0,this.templates={},this.appendTo=t.appendTo||!1,this.css=n.mixin({},s,t.appendTo?s.appendTo:{}),this.cssClasses=t.cssClasses=n.mixin({},s.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||n.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),e=n.bind(this._onSuggestionClick,this),i=n.bind(this._onSuggestionMouseEnter,this),r=n.bind(this._onSuggestionMouseLeave,this);var c=n.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=o.element(t.menu).on("mouseenter.aa",c,i).on("mouseleave.aa",c,r).on("click.aa",c,e),this.$container=t.appendTo?t.wrapper:this.$menu,t.templates&&t.templates.header&&(this.templates.header=n.templatify(t.templates.header),this.$menu.prepend(this.templates.header())),t.templates&&t.templates.empty&&(this.templates.empty=n.templatify(t.templates.empty),this.$empty=o.element('<div class="'+n.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=n.map(t.datasets,(function(e){return function(t,e,i){return new l.Dataset(n.mixin({$menu:t,cssClasses:i},e))}(a.$menu,e,t.cssClasses)})),n.each(this.datasets,(function(t){var e=t.getRoot();e&&0===e.parent().length&&a.$menu.append(e),t.onSync("rendered",a._onRendered,a)})),t.templates&&t.templates.footer&&(this.templates.footer=n.templatify(t.templates.footer),this.$menu.append(this.templates.footer()));var h=this;o.element(window).resize((function(){h._redraw()}))}n.mixin(l.prototype,r,{_onSuggestionClick:function(t){this.trigger("suggestionClicked",o.element(t.currentTarget))},_onSuggestionMouseEnter:function(t){var e=o.element(t.currentTarget);if(!e.hasClass(n.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))){this._removeCursor();var i=this;setTimeout((function(){i._setCursor(e,!1)}),0)}},_onSuggestionMouseLeave:function(t){if(t.relatedTarget&&o.element(t.relatedTarget).closest("."+n.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length>0)return;this._removeCursor(),this.trigger("cursorRemoved")},_onRendered:function(t,e){if(this.isEmpty=n.every(this.datasets,(function(t){return t.isEmpty()})),this.isEmpty)if(e.length>=this.minLength&&this.trigger("empty"),this.$empty)if(e.length<this.minLength)this._hide();else{var i=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query});this.$empty.html(i),this.$empty.show(),this._show()}else n.any(this.datasets,(function(t){return t.templates&&t.templates.empty}))?e.length<this.minLength?this._hide():this._show():this._hide();else this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),e.length>=this.minLength?this._show():this._hide());this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(n.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(n.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(t,e){t.first().addClass(n.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",e)},_removeCursor:function(){this._getCursor().removeClass(n.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(t){var e,i,n,o;this.isOpen&&(i=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),-1!==(n=((n=e.index(i)+t)+1)%(e.length+1)-1)?(n<-1&&(n=e.length-1),this._setCursor(o=e.eq(n),!0),this._ensureVisible(o)):this.trigger("cursorRemoved"))},_ensureVisible:function(t){var e,i,n,o;i=(e=t.position().top)+t.height()+parseInt(t.css("margin-top"),10)+parseInt(t.css("margin-bottom"),10),n=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10),e<0?this.$menu.scrollTop(n+e):o<i&&this.$menu.scrollTop(n+(i-o))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(t){this.$menu.css("ltr"===t?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(t){var e=null;return t.length&&(e={raw:a.extractDatum(t),value:a.extractValue(t),datasetName:a.extractDatasetName(t)}),e},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(t){n.each(this.datasets,(function(e){e.update(t)}))},empty:function(){n.each(this.datasets,(function(t){t.clear()})),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".aa"),this.$menu=null,n.each(this.datasets,(function(t){t.destroy()}))}}),l.Dataset=a,t.exports=l},7368:function(t,e,i){"use strict";var n=i(5670),o=i(3855);function r(t){t&&t.el||n.error("EventBus initialized without el"),this.$el=o.element(t.el)}n.mixin(r.prototype,{trigger:function(t,e,i,o){var r=n.Event("autocomplete:"+t);return this.$el.trigger(r,[e,i,o]),r}}),t.exports=r},6823:function(t,e,i){"use strict";var n=i(624),o=/\s+/;function r(t,e,i,n){var r;if(!i)return this;for(e=e.split(o),i=n?function(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}(i,n):i,this._callbacks=this._callbacks||{};r=e.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(i);return this}function a(t,e,i){return function(){for(var n,o=0,r=t.length;!n&&o<r;o+=1)n=!1===t[o].apply(e,i);return!n}}t.exports={onSync:function(t,e,i){return r.call(this,"sync",t,e,i)},onAsync:function(t,e,i){return r.call(this,"async",t,e,i)},off:function(t){var e;if(!this._callbacks)return this;t=t.split(o);for(;e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var e,i,r,s,l;if(!this._callbacks)return this;t=t.split(o),r=[].slice.call(arguments,1);for(;(e=t.shift())&&(i=this._callbacks[e]);)s=a(i.sync,this,[e].concat(r)),l=a(i.async,this,[e].concat(r)),s()&&n(l);return this}}},6619:function(t){"use strict";t.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},1286:function(t,e,i){"use strict";var n;n={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};var o=i(5670),r=i(3855),a=i(6823);function s(t){var e,i,a,s,l,c=this;(t=t||{}).input||o.error("input is missing"),e=o.bind(this._onBlur,this),i=o.bind(this._onFocus,this),a=o.bind(this._onKeydown,this),s=o.bind(this._onInput,this),this.$hint=r.element(t.hint),this.$input=r.element(t.input).on("blur.aa",e).on("focus.aa",i).on("keydown.aa",a),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=o.noop),o.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",(function(t){n[t.which||t.keyCode]||o.defer(o.bind(c._onInput,c,t))})):this.$input.on("input.aa",s),this.query=this.$input.val(),this.$overflowHelper=(l=this.$input,r.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:l.css("font-family"),fontSize:l.css("font-size"),fontStyle:l.css("font-style"),fontVariant:l.css("font-variant"),fontWeight:l.css("font-weight"),wordSpacing:l.css("word-spacing"),letterSpacing:l.css("letter-spacing"),textIndent:l.css("text-indent"),textRendering:l.css("text-rendering"),textTransform:l.css("text-transform")}).insertAfter(l))}function l(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}s.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},o.mixin(s.prototype,a,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(t){var e=n[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(t,e){var i,n,o;switch(t){case"tab":n=this.getHint(),o=this.getInputValue(),i=n&&n!==o&&!l(e);break;case"up":case"down":i=!l(e);break;default:i=!1}i&&e.preventDefault()},_shouldTrigger:function(t,e){var i;switch(t){case"tab":i=!l(e);break;default:i=!0}return i},_checkInputValue:function(){var t,e,i,n,o;t=this.getInputValue(),n=t,o=this.query,i=!(!(e=s.normalizeQuery(n)===s.normalizeQuery(o))||!this.query)&&this.query.length!==t.length,this.query=t,e?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(t){this.query=t},getInputValue:function(){return this.$input.val()},setInputValue:function(t,e){void 0===t&&(t=this.query),this.$input.val(t),e?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(t){this.$input.attr("aria-activedescendant",t)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,i;i=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),""!==t&&i&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e,i;return t=this.$input.val().length,e=this.$input[0].selectionStart,o.isNumber(e)?e===t:!document.selection||((i=document.selection.createRange()).moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),t.exports=s},4520:function(t,e,i){"use strict";var n="aaAttrs",o=i(5670),r=i(3855),a=i(7368),s=i(1286),l=i(5445),c=i(6619),h=i(7114);function u(t){var e,i;if((t=t||{}).input||o.error("missing input"),this.isActivated=!1,this.debug=!!t.debug,this.autoselect=!!t.autoselect,this.autoselectOnBlur=!!t.autoselectOnBlur,this.openOnFocus=!!t.openOnFocus,this.minLength=o.isNumber(t.minLength)?t.minLength:1,this.autoWidth=void 0===t.autoWidth||!!t.autoWidth,this.clearOnSelected=!!t.clearOnSelected,this.tabAutocomplete=void 0===t.tabAutocomplete||!!t.tabAutocomplete,t.hint=!!t.hint,t.hint&&t.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=t.css=o.mixin({},h,t.appendTo?h.appendTo:{}),this.cssClasses=t.cssClasses=o.mixin({},h.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix=o.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=t.listboxId=[this.cssClasses.root,"listbox",o.getUniqueId()].join("-");var s=function(t){var e,i,a,s;e=r.element(t.input),i=r.element(c.wrapper.replace("%ROOT%",t.cssClasses.root)).css(t.css.wrapper),t.appendTo||"block"!==e.css("display")||"table"!==e.parent().css("display")||i.css("display","table-cell");var l=c.dropdown.replace("%PREFIX%",t.cssClasses.prefix).replace("%DROPDOWN_MENU%",t.cssClasses.dropdownMenu);a=r.element(l).css(t.css.dropdown).attr({role:"listbox",id:t.listboxId}),t.templates&&t.templates.dropdownMenu&&a.html(o.templatify(t.templates.dropdownMenu)());(s=e.clone().css(t.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(e))).val("").addClass(o.className(t.cssClasses.prefix,t.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),s.removeData&&s.removeData();e.data(n,{"aria-autocomplete":e.attr("aria-autocomplete"),"aria-expanded":e.attr("aria-expanded"),"aria-owns":e.attr("aria-owns"),autocomplete:e.attr("autocomplete"),dir:e.attr("dir"),role:e.attr("role"),spellcheck:e.attr("spellcheck"),style:e.attr("style"),type:e.attr("type")}),e.addClass(o.className(t.cssClasses.prefix,t.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":t.datasets&&t.datasets[0]&&t.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":t.ariaLabel,"aria-owns":t.listboxId}).css(t.hint?t.css.input:t.css.inputWithNoHint);try{e.attr("dir")||e.attr("dir","auto")}catch(t){}return(i=t.appendTo?i.appendTo(r.element(t.appendTo).eq(0)).eq(0):e.wrap(i).parent()).prepend(t.hint?s:null).append(a),{wrapper:i,input:e,hint:s,menu:a}}(t);this.$node=s.wrapper;var l=this.$input=s.input;e=s.menu,i=s.hint,t.dropdownMenuContainer&&r.element(t.dropdownMenuContainer).css("position","relative").append(e.css("top","0")),l.on("blur.aa",(function(t){var i=document.activeElement;o.isMsie()&&(e[0]===i||e[0].contains(i))&&(t.preventDefault(),t.stopImmediatePropagation(),o.defer((function(){l.focus()})))})),e.on("mousedown.aa",(function(t){t.preventDefault()})),this.eventBus=t.eventBus||new a({el:l}),this.dropdown=new u.Dropdown({appendTo:t.appendTo,wrapper:this.$node,menu:e,datasets:t.datasets,templates:t.templates,cssClasses:t.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new u.Input({input:l,hint:i}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(t),this._setLanguageDirection()}o.mixin(u.prototype,{_bindKeyboardShortcuts:function(t){if(t.keyboardShortcuts){var e=this.$input,i=[];o.each(t.keyboardShortcuts,(function(t){"string"==typeof t&&(t=t.toUpperCase().charCodeAt(0)),i.push(t)})),r.element(document).keydown((function(t){var n=t.target||t.srcElement,o=n.tagName;if(!n.isContentEditable&&"INPUT"!==o&&"SELECT"!==o&&"TEXTAREA"!==o){var r=t.which||t.keyCode;-1!==i.indexOf(r)&&(e.focus(),t.stopPropagation(),t.preventDefault())}}))}},_onSuggestionClicked:function(t,e){var i;(i=this.dropdown.getDatumForSuggestion(e))&&this._select(i,{selectionMethod:"click"})},_onCursorMoved:function(t,e){var i=this.dropdown.getDatumForCursor(),n=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(n),i&&(e&&this.input.setInputValue(i.value,!0),this.eventBus.trigger("cursorchanged",i.raw,i.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var t=this.$input[0].getBoundingClientRect();this.autoWidth&&this.$node.css("width",t.width+"px");var e=this.$node[0].getBoundingClientRect(),i=t.bottom-e.top;this.$node.css("top",i+"px");var n=t.left-e.left;this.$node.css("left",n+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){if(this.isActivated=!0,this.openOnFocus){var t=this.input.getQuery();t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open()}},_onBlurred:function(){var t,e;t=this.dropdown.getDatumForCursor(),e=this.dropdown.getDatumForTopSuggestion();var i={selectionMethod:"blur"};this.debug||(this.autoselectOnBlur&&t?this._select(t,i):this.autoselectOnBlur&&e?this._select(e,i):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(t,e){var i,n;i=this.dropdown.getDatumForCursor(),n=this.dropdown.getDatumForTopSuggestion();var o={selectionMethod:"enterKey"};i?(this._select(i,o),e.preventDefault()):this.autoselect&&n&&(this._select(n,o),e.preventDefault())},_onTabKeyed:function(t,e){if(this.tabAutocomplete){var i;(i=this.dropdown.getDatumForCursor())?(this._select(i,{selectionMethod:"tabKey"}),e.preventDefault()):this._autocomplete(!0)}else this.dropdown.close()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var t=this.input.getLanguageDirection();this.dir!==t&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function(){var t,e,i,n,r;(t=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(e=this.input.getInputValue(),i=s.normalizeQuery(e),n=o.escapeRegExChars(i),(r=new RegExp("^(?:"+n+")(.+$)","i").exec(t.value))?this.input.setHint(e+r[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(t){var e,i,n,o;e=this.input.getHint(),i=this.input.getQuery(),n=t||this.input.isCursorAtEnd(),e&&i!==e&&n&&((o=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(t,e){void 0!==t.value&&this.input.setQuery(t.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(t.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",t.raw,t.datasetName,e).isDefaultPrevented()&&(this.dropdown.close(),o.defer(o.bind(this.dropdown.empty,this.dropdown)))},open:function(){if(!this.isActivated){var t=this.input.getInputValue();t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty()}this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(t){t=o.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),function(t,e){var i=t.find(o.className(e.prefix,e.input));o.each(i.data(n),(function(t,e){void 0===t?i.removeAttr(e):i.attr(e,t)})),i.detach().removeClass(o.className(e.prefix,e.input,!0)).insertAfter(t),i.removeData&&i.removeData(n);t.remove()}(this.$node,this.cssClasses),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),u.Dropdown=l,u.Input=s,u.sources=i(6331),t.exports=u},3855:function(t){"use strict";t.exports={element:null}},2926:function(t){"use strict";t.exports=function(t){var e=t.match(/Algolia for JavaScript \((\d+\.)(\d+\.)(\d+)\)/)||t.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);if(e)return[e[1],e[2],e[3]]}},5670:function(t,e,i){"use strict";var n,o=i(3855);function r(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}t.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(t){if(void 0===t&&(t=navigator.userAgent),/(msie|trident)/i.test(t)){var e=t.match(/(msie |rv:)(\d+(.\d+)?)/i);if(e)return e[2]}return!1},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(t){return"number"==typeof t},toStr:function(t){return null==t?"":t+""},cloneDeep:function(t){var e=this.mixin({},t),i=this;return this.each(e,(function(t,n){t&&(i.isArray(t)?e[n]=[].concat(t):i.isObject(t)&&(e[n]=i.cloneDeep(t)))})),e},error:function(t){throw new Error(t)},every:function(t,e){var i=!0;return t?(this.each(t,(function(n,o){i&&(i=e.call(null,n,o,t)&&i)})),!!i):i},any:function(t,e){var i=!1;return t?(this.each(t,(function(n,o){if(e.call(null,n,o,t))return i=!0,!1})),i):i},getUniqueId:(n=0,function(){return n++}),templatify:function(t){if(this.isFunction(t))return t;var e=o.element(t);return"SCRIPT"===e.prop("tagName")?function(){return e.text()}:function(){return String(t)}},defer:function(t){setTimeout(t,0)},noop:function(){},formatPrefix:function(t,e){return e?"":t+"-"},className:function(t,e,i){return(i?"":".")+t+e},escapeHighlightedString:function(t,e,i){e=e||"<em>";var n=document.createElement("div");n.appendChild(document.createTextNode(e)),i=i||"</em>";var o=document.createElement("div");o.appendChild(document.createTextNode(i));var a=document.createElement("div");return a.appendChild(document.createTextNode(t)),a.innerHTML.replace(RegExp(r(n.innerHTML),"g"),e).replace(RegExp(r(o.innerHTML),"g"),i)}}},2683:function(t,e,i){"use strict";var n=i(5670),o=i(3489),r=i(2926);var a,s,l=(a=[],s=window.Promise.resolve(),function(t,e){return function(i,o){(function(t,e){return window.Promise.resolve().then((function(){return a.length&&(s=t.search(a),a=[]),s})).then((function(t){if(t)return t.results[e]}))})(t.as,a.push({indexName:t.indexName,query:i,params:e})-1).then((function(t){t&&o(t.hits,t)})).catch((function(t){n.error(t.message)}))}});t.exports=function(t,e){var i=r(t.as._ua);if(i&&i[0]>=3&&i[1]>20){var n="autocomplete.js "+o;-1===t.as._ua.indexOf(n)&&(t.as._ua+="; "+n)}return l(t,e)}},6331:function(t,e,i){"use strict";t.exports={hits:i(2683),popularIn:i(2226)}},2226:function(t,e,i){"use strict";var n=i(5670),o=i(3489),r=i(2926);t.exports=function(t,e,i,a){var s=r(t.as._ua);if(s&&s[0]>=3&&s[1]>20&&((e=e||{}).additionalUA="autocomplete.js "+o),!i.source)return n.error("Missing 'source' key");var l=n.isFunction(i.source)?i.source:function(t){return t[i.source]};if(!i.index)return n.error("Missing 'index' key");var c=i.index;return a=a||{},function(s,h){t.search(s,e,(function(t,s){if(t)n.error(t.message);else{if(s.hits.length>0){var u=s.hits[0],p=n.mixin({hitsPerPage:0},i);delete p.source,delete p.index;var d=r(c.as._ua);return d&&d[0]>=3&&d[1]>20&&(e.additionalUA="autocomplete.js "+o),void c.search(l(u),p,(function(t,e){if(t)n.error(t.message);else{var i=[];if(a.includeAll){var o=a.allTitle||"All departments";i.push(n.mixin({facet:{value:o,count:e.nbHits}},n.cloneDeep(u)))}n.each(e.facets,(function(t,e){n.each(t,(function(t,o){i.push(n.mixin({facet:{facet:e,value:o,count:t}},n.cloneDeep(u)))}))}));for(var r=1;r<s.hits.length;++r)i.push(s.hits[r]);h(i,s)}}))}h([])}}))}}},9281:function(t,e,i){"use strict";var n=i(7939);i(3855).element=n;var o=i(5670);o.isArray=n.isArray,o.isFunction=n.isFunction,o.isObject=n.isPlainObject,o.bind=n.proxy,o.each=function(t,e){n.each(t,(function(t,i){return e(i,t)}))},o.map=n.map,o.mixin=n.extend,o.Event=n.Event;var r="aaAutocomplete",a=i(4520),s=i(7368);function l(t,e,i,l){i=o.isArray(i)?i:[].slice.call(arguments,2);var c=n(t).each((function(t,o){var c=n(o),h=new s({el:c}),u=l||new a({input:c,eventBus:h,dropdownMenuContainer:e.dropdownMenuContainer,hint:void 0===e.hint||!!e.hint,minLength:e.minLength,autoselect:e.autoselect,autoselectOnBlur:e.autoselectOnBlur,tabAutocomplete:e.tabAutocomplete,openOnFocus:e.openOnFocus,templates:e.templates,debug:e.debug,clearOnSelected:e.clearOnSelected,cssClasses:e.cssClasses,datasets:i,keyboardShortcuts:e.keyboardShortcuts,appendTo:e.appendTo,autoWidth:e.autoWidth,ariaLabel:e.ariaLabel||o.getAttribute("aria-label")});c.data(r,u)}));return c.autocomplete={},o.each(["open","close","getVal","setVal","destroy","getWrapper"],(function(t){c.autocomplete[t]=function(){var e,i=arguments;return c.each((function(o,a){var s=n(a).data(r);e=s[t].apply(s,i)})),e}})),c}l.sources=a.sources,l.escapeHighlightedString=o.escapeHighlightedString;var c="autocomplete"in window,h=window.autocomplete;l.noConflict=function(){return c?window.autocomplete=h:delete window.autocomplete,l},t.exports=l},3489:function(t){t.exports="0.38.0"},7939:function(t){var e;e=window,t.exports=function(t){var e=function(){var e,i,n,o,r,a,s=[],l=s.concat,c=s.filter,h=s.slice,u=t.document,p={},d={},m={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,_=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],x=["after","prepend","before","append"],k=u.createElement("table"),w=u.createElement("tr"),L={tr:u.createElement("tbody"),tbody:k,thead:k,tfoot:k,td:w,th:w,"*":u.createElement("div")},M=/complete|loaded|interactive/,C=/^[\w-]*$/,P={},S=P.toString,T={},A=u.createElement("div"),E={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},D=Array.isArray||function(t){return t instanceof Array};function O(t){return null==t?String(t):P[S.call(t)]||"object"}function I(t){return"function"==O(t)}function B(t){return null!=t&&t==t.window}function R(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function z(t){return"object"==O(t)}function F(t){return z(t)&&!B(t)&&Object.getPrototypeOf(t)==Object.prototype}function j(t){var e=!!t&&"length"in t&&t.length,i=n.type(t);return"function"!=i&&!B(t)&&("array"==i||0===e||"number"==typeof e&&e>0&&e-1 in t)}function N(t){return c.call(t,(function(t){return null!=t}))}function U(t){return t.length>0?n.fn.concat.apply([],t):t}function G(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function H(t){return t in d?d[t]:d[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function Z(t,e){return"number"!=typeof e||m[G(t)]?e:e+"px"}function V(t){var e,i;return p[t]||(e=u.createElement(t),u.body.appendChild(e),i=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==i&&(i="block"),p[t]=i),p[t]}function W(t){return"children"in t?h.call(t.children):n.map(t.childNodes,(function(t){if(1==t.nodeType)return t}))}function q(t,e){var i,n=t?t.length:0;for(i=0;i<n;i++)this[i]=t[i];this.length=n,this.selector=e||""}function $(t,n,o){for(i in n)o&&(F(n[i])||D(n[i]))?(F(n[i])&&!F(t[i])&&(t[i]={}),D(n[i])&&!D(t[i])&&(t[i]=[]),$(t[i],n[i],o)):n[i]!==e&&(t[i]=n[i])}function Y(t,e){return null==e?n(t):n(t).filter(e)}function K(t,e,i,n){return I(e)?e.call(t,i,n):e}function J(t,e,i){null==i?t.removeAttribute(e):t.setAttribute(e,i)}function X(t,i){var n=t.className||"",o=n&&n.baseVal!==e;if(i===e)return o?n.baseVal:n;o?n.baseVal=i:t.className=i}function Q(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?n.parseJSON(t):t):t}catch(e){return t}}function tt(t,e){e(t);for(var i=0,n=t.childNodes.length;i<n;i++)tt(t.childNodes[i],e)}return T.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(i)return i.call(t,e);var n,o=t.parentNode,r=!o;return r&&(o=A).appendChild(t),n=~T.qsa(o,e).indexOf(t),r&&A.removeChild(t),n},r=function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},a=function(t){return c.call(t,(function(e,i){return t.indexOf(e)==i}))},T.fragment=function(t,i,o){var r,a,s;return g.test(t)&&(r=n(u.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(_,"<$1></$2>")),i===e&&(i=f.test(t)&&RegExp.$1),i in L||(i="*"),(s=L[i]).innerHTML=""+t,r=n.each(h.call(s.childNodes),(function(){s.removeChild(this)}))),F(o)&&(a=n(r),n.each(o,(function(t,e){b.indexOf(t)>-1?a[t](e):a.attr(t,e)}))),r},T.Z=function(t,e){return new q(t,e)},T.isZ=function(t){return t instanceof T.Z},T.init=function(t,i){var o;if(!t)return T.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&f.test(t))o=T.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);o=T.qsa(u,t)}else{if(I(t))return n(u).ready(t);if(T.isZ(t))return t;if(D(t))o=N(t);else if(z(t))o=[t],t=null;else if(f.test(t))o=T.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);o=T.qsa(u,t)}}return T.Z(o,t)},(n=function(t,e){return T.init(t,e)}).extend=function(t){var e,i=h.call(arguments,1);return"boolean"==typeof t&&(e=t,t=i.shift()),i.forEach((function(i){$(t,i,e)})),t},T.qsa=function(t,e){var i,n="#"==e[0],o=!n&&"."==e[0],r=n||o?e.slice(1):e,a=C.test(r);return t.getElementById&&a&&n?(i=t.getElementById(r))?[i]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:h.call(a&&!n&&t.getElementsByClassName?o?t.getElementsByClassName(r):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=u.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},n.type=O,n.isFunction=I,n.isWindow=B,n.isArray=D,n.isPlainObject=F,n.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.isNumeric=function(t){var e=Number(t),i=typeof t;return null!=t&&"boolean"!=i&&("string"!=i||t.length)&&!isNaN(e)&&isFinite(e)||!1},n.inArray=function(t,e,i){return s.indexOf.call(e,t,i)},n.camelCase=r,n.trim=function(t){return null==t?"":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(t,e){var i,n,o,r=[];if(j(t))for(n=0;n<t.length;n++)null!=(i=e(t[n],n))&&r.push(i);else for(o in t)null!=(i=e(t[o],o))&&r.push(i);return U(r)},n.each=function(t,e){var i,n;if(j(t)){for(i=0;i<t.length;i++)if(!1===e.call(t[i],i,t[i]))return t}else for(n in t)if(!1===e.call(t[n],n,t[n]))return t;return t},n.grep=function(t,e){return c.call(t,e)},t.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){P["[object "+e+"]"]=e.toLowerCase()})),n.fn={constructor:T.Z,length:0,forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,splice:s.splice,indexOf:s.indexOf,concat:function(){var t,e,i=[];for(t=0;t<arguments.length;t++)e=arguments[t],i[t]=T.isZ(e)?e.toArray():e;return l.apply(T.isZ(this)?this.toArray():this,i)},map:function(t){return n(n.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return n(h.apply(this,arguments))},ready:function(t){return M.test(u.readyState)&&u.body?t(n):u.addEventListener("DOMContentLoaded",(function(){t(n)}),!1),this},get:function(t){return t===e?h.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){return s.every.call(this,(function(e,i){return!1!==t.call(e,i,e)})),this},filter:function(t){return I(t)?this.not(this.not(t)):n(c.call(this,(function(e){return T.matches(e,t)})))},add:function(t,e){return n(a(this.concat(n(t,e))))},is:function(t){return this.length>0&&T.matches(this[0],t)},not:function(t){var i=[];if(I(t)&&t.call!==e)this.each((function(e){t.call(this,e)||i.push(this)}));else{var o="string"==typeof t?this.filter(t):j(t)&&I(t.item)?h.call(t):n(t);this.forEach((function(t){o.indexOf(t)<0&&i.push(t)}))}return n(i)},has:function(t){return this.filter((function(){return z(t)?n.contains(this,t):n(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!z(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!z(t)?t:n(t)},find:function(t){var e=this;return t?"object"==typeof t?n(t).filter((function(){var t=this;return s.some.call(e,(function(e){return n.contains(e,t)}))})):1==this.length?n(T.qsa(this[0],t)):this.map((function(){return T.qsa(this,t)})):n()},closest:function(t,e){var i=[],o="object"==typeof t&&n(t);return this.each((function(n,r){for(;r&&!(o?o.indexOf(r)>=0:T.matches(r,t));)r=r!==e&&!R(r)&&r.parentNode;r&&i.indexOf(r)<0&&i.push(r)})),n(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=n.map(i,(function(t){if((t=t.parentNode)&&!R(t)&&e.indexOf(t)<0)return e.push(t),t}));return Y(e,t)},parent:function(t){return Y(a(this.pluck("parentNode")),t)},children:function(t){return Y(this.map((function(){return W(this)})),t)},contents:function(){return this.map((function(){return this.contentDocument||h.call(this.childNodes)}))},siblings:function(t){return Y(this.map((function(t,e){return c.call(W(e.parentNode),(function(t){return t!==e}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return n.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=V(this.nodeName))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=I(t);if(this[0]&&!e)var i=n(t).get(0),o=i.parentNode||this.length>1;return this.each((function(r){n(this).wrapAll(e?t.call(this,r):o?i.cloneNode(!0):i)}))},wrapAll:function(t){if(this[0]){var e;for(n(this[0]).before(t=n(t));(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=I(t);return this.each((function(i){var o=n(this),r=o.contents(),a=e?t.call(this,i):t;r.length?r.wrapAll(a):o.append(a)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()}))},prev:function(t){return n(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return n(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each((function(e){var i=this.innerHTML;n(this).empty().append(K(this,t,e,i))})):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each((function(e){var i=K(this,t,e,this.textContent);this.textContent=null==i?"":""+i})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,n){var o;return"string"!=typeof t||1 in arguments?this.each((function(e){if(1===this.nodeType)if(z(t))for(i in t)J(this,i,t[i]);else J(this,t,K(this,n,e,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(o=this[0].getAttribute(t))?o:e},removeAttr:function(t){return this.each((function(){1===this.nodeType&&t.split(" ").forEach((function(t){J(this,t)}),this)}))},prop:function(t,e){return t=E[t]||t,1 in arguments?this.each((function(i){this[t]=K(this,e,i,this[t])})):this[0]&&this[0][t]},removeProp:function(t){return t=E[t]||t,this.each((function(){delete this[t]}))},data:function(t,i){var n="data-"+t.replace(y,"-$1").toLowerCase(),o=1 in arguments?this.attr(n,i):this.attr(n);return null!==o?Q(o):e},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each((function(e){this.value=K(this,t,e,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=n(this),o=K(this,e,t,i.offset()),r=i.offsetParent().offset(),a={top:o.top-r.top,left:o.left-r.left};"static"==i.css("position")&&(a.position="relative"),i.css(a)}));if(!this.length)return null;if(u.documentElement!==this[0]&&!n.contains(u.documentElement,this[0]))return{top:0,left:0};var i=this[0].getBoundingClientRect();return{left:i.left+t.pageXOffset,top:i.top+t.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(t,e){if(arguments.length<2){var o=this[0];if("string"==typeof t){if(!o)return;return o.style[r(t)]||getComputedStyle(o,"").getPropertyValue(t)}if(D(t)){if(!o)return;var a={},s=getComputedStyle(o,"");return n.each(t,(function(t,e){a[e]=o.style[r(e)]||s.getPropertyValue(e)})),a}}var l="";if("string"==O(t))e||0===e?l=G(t)+":"+Z(t,e):this.each((function(){this.style.removeProperty(G(t))}));else for(i in t)t[i]||0===t[i]?l+=G(i)+":"+Z(i,t[i])+";":this.each((function(){this.style.removeProperty(G(i))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&s.some.call(this,(function(t){return this.test(X(t))}),H(t))},addClass:function(t){return t?this.each((function(e){if("className"in this){o=[];var i=X(this);K(this,t,e,i).split(/\s+/g).forEach((function(t){n(this).hasClass(t)||o.push(t)}),this),o.length&&X(this,i+(i?" ":"")+o.join(" "))}})):this},removeClass:function(t){return this.each((function(i){if("className"in this){if(t===e)return X(this,"");o=X(this),K(this,t,i,o).split(/\s+/g).forEach((function(t){o=o.replace(H(t)," ")})),X(this,o.trim())}}))},toggleClass:function(t,i){return t?this.each((function(o){var r=n(this);K(this,t,o,X(this)).split(/\s+/g).forEach((function(t){(i===e?!r.hasClass(t):i)?r.addClass(t):r.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var i="scrollTop"in this[0];return t===e?i?this[0].scrollTop:this[0].pageYOffset:this.each(i?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var i="scrollLeft"in this[0];return t===e?i?this[0].scrollLeft:this[0].pageXOffset:this.each(i?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),o=v.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(n(t).css("margin-top"))||0,i.left-=parseFloat(n(t).css("margin-left"))||0,o.top+=parseFloat(n(e[0]).css("border-top-width"))||0,o.left+=parseFloat(n(e[0]).css("border-left-width"))||0,{top:i.top-o.top,left:i.left-o.left}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||u.body;t&&!v.test(t.nodeName)&&"static"==n(t).css("position");)t=t.offsetParent;return t}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var i=t.replace(/./,(function(t){return t[0].toUpperCase()}));n.fn[t]=function(o){var r,a=this[0];return o===e?B(a)?a["inner"+i]:R(a)?a.documentElement["scroll"+i]:(r=this.offset())&&r[t]:this.each((function(e){(a=n(this)).css(t,K(this,o,e,a[t]()))}))}})),x.forEach((function(i,o){var r=o%2;n.fn[i]=function(){var i,a,s=n.map(arguments,(function(t){var o=[];return"array"==(i=O(t))?(t.forEach((function(t){return t.nodeType!==e?o.push(t):n.zepto.isZ(t)?o=o.concat(t.get()):void(o=o.concat(T.fragment(t)))})),o):"object"==i||null==t?t:T.fragment(t)})),l=this.length>1;return s.length<1?this:this.each((function(e,i){a=r?i:i.parentNode,i=0==o?i.nextSibling:1==o?i.firstChild:2==o?i:null;var c=n.contains(u.documentElement,a);s.forEach((function(e){if(l)e=e.cloneNode(!0);else if(!a)return n(e).remove();a.insertBefore(e,i),c&&tt(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var i=e.ownerDocument?e.ownerDocument.defaultView:t;i.eval.call(i,e.innerHTML)}}))}))}))},n.fn[r?i+"To":"insert"+(o?"Before":"After")]=function(t){return n(t)[i](this),this}})),T.Z.prototype=q.prototype=n.fn,T.uniq=a,T.deserializeValue=Q,n.zepto=T,n}();return function(e){var i,n=1,o=Array.prototype.slice,r=e.isFunction,a=function(t){return"string"==typeof t},s={},l={},c="onfocusin"in t,h={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};function p(t){return t._zid||(t._zid=n++)}function d(t,e,i,n){if((e=m(e)).ns)var o=f(e.ns);return(s[p(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||o.test(t.ns))&&(!i||p(t.fn)===p(i))&&(!n||t.sel==n)}))}function m(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function f(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function g(t,e){return t.del&&!c&&t.e in h||!!e}function _(t){return u[t]||c&&h[t]||t}function v(t,n,o,r,a,l,c){var h=p(t),d=s[h]||(s[h]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(o);var s=m(n);s.fn=o,s.sel=a,s.e in u&&(o=function(t){var i=t.relatedTarget;if(!i||i!==this&&!e.contains(this,i))return s.fn.apply(this,arguments)}),s.del=l;var h=l||o;s.proxy=function(e){if(!(e=L(e)).isImmediatePropagationStopped()){try{var n=Object.getOwnPropertyDescriptor(e,"data");n&&!n.writable||(e.data=r)}catch(e){}var o=h.apply(t,e._args==i?[e]:[e].concat(e._args));return!1===o&&(e.preventDefault(),e.stopPropagation()),o}},s.i=d.length,d.push(s),"addEventListener"in t&&t.addEventListener(_(s.e),s.proxy,g(s,c))}))}function y(t,e,i,n,o){var r=p(t);(e||"").split(/\s/).forEach((function(e){d(t,e,i,n).forEach((function(e){delete s[r][e.i],"removeEventListener"in t&&t.removeEventListener(_(e.e),e.proxy,g(e,o))}))}))}l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents",e.event={add:v,remove:y},e.proxy=function(t,i){var n=2 in arguments&&o.call(arguments,2);if(r(t)){var s=function(){return t.apply(i,n?n.concat(o.call(arguments)):arguments)};return s._zid=p(t),s}if(a(i))return n?(n.unshift(t[i],t),e.proxy.apply(null,n)):e.proxy(t[i],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,i){return this.on(t,e,i)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,i,n){return this.on(t,e,i,n,1)};var b=function(){return!0},x=function(){return!1},k=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,w={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function L(t,n){if(n||!t.isDefaultPrevented){n||(n=t),e.each(w,(function(e,i){var o=n[e];t[e]=function(){return this[i]=b,o&&o.apply(n,arguments)},t[i]=x}));try{t.timeStamp||(t.timeStamp=Date.now())}catch(t){}(n.defaultPrevented!==i?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)}return t}function M(t){var e,n={originalEvent:t};for(e in t)k.test(e)||t[e]===i||(n[e]=t[e]);return L(n,t)}e.fn.delegate=function(t,e,i){return this.on(e,t,i)},e.fn.undelegate=function(t,e,i){return this.off(e,t,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(t,n,s,l,c){var h,u,p=this;return t&&!a(t)?(e.each(t,(function(t,e){p.on(t,n,s,e,c)})),p):(a(n)||r(l)||!1===l||(l=s,s=n,n=i),l!==i&&!1!==s||(l=s,s=i),!1===l&&(l=x),p.each((function(i,r){c&&(h=function(t){return y(r,t.type,l),l.apply(this,arguments)}),n&&(u=function(t){var i,a=e(t.target).closest(n,r).get(0);if(a&&a!==r)return i=e.extend(M(t),{currentTarget:a,liveFired:r}),(h||l).apply(a,[i].concat(o.call(arguments,1)))}),v(r,t,l,s,n,u||h)})))},e.fn.off=function(t,n,o){var s=this;return t&&!a(t)?(e.each(t,(function(t,e){s.off(t,n,e)})),s):(a(n)||r(o)||!1===o||(o=n,n=i),!1===o&&(o=x),s.each((function(){y(this,t,o,n)})))},e.fn.trigger=function(t,i){return(t=a(t)||e.isPlainObject(t)?e.Event(t):L(t))._args=i,this.each((function(){t.type in h&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)}))},e.fn.triggerHandler=function(t,i){var n,o;return this.each((function(r,s){(n=M(a(t)?e.Event(t):t))._args=i,n.target=s,e.each(d(s,t.type||t),(function(t,e){if(o=e.proxy(n),n.isImmediatePropagationStopped())return!1}))})),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(t,e){a(t)||(t=(e=t).type);var i=document.createEvent(l[t]||"Events"),n=!0;if(e)for(var o in e)"bubbles"==o?n=!!e[o]:i[o]=e[o];return i.initEvent(t,n,!0),L(i)}}(e),function(t){var e,i=[];t.fn.remove=function(){return this.each((function(){this.parentNode&&("IMG"===this.tagName&&(i.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",e&&clearTimeout(e),e=setTimeout((function(){i=[]}),6e4)),this.parentNode.removeChild(this))}))}}(e),function(t){var e={},i=t.fn.data,n=t.camelCase,o=t.expando="Zepto"+ +new Date,r=[];function a(r,a){var l=r[o],c=l&&e[l];if(void 0===a)return c||s(r);if(c){if(a in c)return c[a];var h=n(a);if(h in c)return c[h]}return i.call(t(r),a)}function s(i,r,a){var s=i[o]||(i[o]=++t.uuid),c=e[s]||(e[s]=l(i));return void 0!==r&&(c[n(r)]=a),c}function l(e){var i={};return t.each(e.attributes||r,(function(e,o){0==o.name.indexOf("data-")&&(i[n(o.name.replace("data-",""))]=t.zepto.deserializeValue(o.value))})),i}t.fn.data=function(e,i){return void 0===i?t.isPlainObject(e)?this.each((function(i,n){t.each(e,(function(t,e){s(n,t,e)}))})):0 in this?a(this[0],e):void 0:this.each((function(){s(this,e,i)}))},t.data=function(e,i,n){return t(e).data(i,n)},t.hasData=function(i){var n=i[o],r=n&&e[n];return!!r&&!t.isEmptyObject(r)},t.fn.removeData=function(i){return"string"==typeof i&&(i=i.split(/\s+/)),this.each((function(){var r=this[o],a=r&&e[r];a&&t.each(i||a,(function(t){delete a[i?n(this):t]}))}))},["remove","empty"].forEach((function(e){var i=t.fn[e];t.fn[e]=function(){var t=this.find("*");return"remove"===e&&(t=t.add(this)),t.removeData(),i.call(this)}}))}(e),e}(e)},6626:function(t,e,i){"use strict";function n(t){t=t||{},this.settings={timeMovingThreshold:t.timeMovingThreshold||15e3,eleGainThreshold:t.eleGainThreshold||5},this.xml=null,this.metadata={},this.waypoints=[],this.routes=[],this.tracks=[]}n.prototype.parse=function(t){var e=this,i=new DOMParser;this.xml=i.parseFromString(t,"text/xml");var n=this.xml.querySelector("metadata");null!==n&&(this.metadata=this.parseMetadataType(n));for(var o=[].slice.call(this.xml.querySelectorAll("wpt")),r=0;r<o.length;r++){var a=o[r],s=e.parseWptType(a,!0);e.waypoints.push(s)}for(var l=[].slice.call(this.xml.querySelectorAll("rte")),c=0;c<l.length;c++){var h=l[c],u=e.parseRteType(h);u.time=e.calcTime(u.points),u.distance=e.calcDistance(u.points),u.elevation=e.calcElevation(u.points),u.heartRate=e.calcHeartRate(u.points),e.routes.push(u)}for(var p=[].slice.call(this.xml.querySelectorAll("trk")),d=0;d<p.length;d++){var m=p[d],f=e.parseTrkType(m);f.time=e.calcTime(f.points),f.distance=e.calcDistance(f.points),f.elevation=e.calcElevation(f.points),f.heartRate=e.calcHeartRate(f.points),e.tracks.push(f)}},n.prototype.getFirstTagValue=function(t,e){var i=t.querySelectorAll(e);return i.length?i[0].textContent:null},n.prototype.getFirstTagValueNs=function(t,e,i){var n=t.getElementsByTagNameNS(e,i);return n.length?n[0].textContent:null},n.prototype.getTpxValue=function(t,e){var i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v1",e);return null===i&&(i=this.getFirstTagValueNs(t,"http://www.garmin.com/xmlschemas/TrackPointExtension/v2",e)),i},n.prototype.parseLinks=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("link")),n=0;n<i.length;n++){var o=i[n],r=this.parseLinkType(o);e.push(r)}return e},n.prototype.parseRtepts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("rtept")),n=0;n<i.length;n++){var o=i[n],r=this.parseWptType(o,!1);e.push(r)}return e},n.prototype.parseTrkpts=function(t){for(var e=[],i=[].slice.call(t.querySelectorAll("trkpt")),n=0;n<i.length;n++){var o=i[n],r=this.parseWptType(o,!1);e.push(r)}return e},n.prototype.parseTrksegs=function(t){for(var e=this,i=[],n=[].slice.call(t.querySelectorAll("trkseg")),o=0;o<n.length;o++){var r=n[o],a=e.parseTrksegType(r,!1);a.time=e.calcTime(a.points),a.distance=e.calcDistance(a.points),a.elevation=e.calcElevation(a.points),a.heartRate=e.calcHeartRate(a.points),i.push(a)}return i},n.prototype.parseWptTypeExtensions=function(t){return{tpx:this.parseTrackPointExtensionType(t)}},n.prototype.parseLinkType=function(t){return{href:t.getAttribute("href"),text:this.getFirstTagValue(t,"text"),type:this.getFirstTagValue(t,"type")}},n.prototype.parseMetadataType=function(t){return{name:this.getFirstTagValue(t,"name"),desc:this.getFirstTagValue(t,"desc"),time:Date.parse(this.getFirstTagValue(t,"time")),links:this.parseLinks(t)}},n.prototype.parseWptType=function(t,e){var i={lat:parseFloat(t.getAttribute("lat")),lon:parseFloat(t.getAttribute("lon")),ele:parseFloat(this.getFirstTagValue(t,"ele")),time:Date.parse(this.getFirstTagValue(t,"time")),extension:this.parseWptTypeExtensions(t)};return e&&(i.name=this.getFirstTagValue(t,"name"),i.cmt=this.getFirstTagValue(t,"cmt"),i.desc=this.getFirstTagValue(t,"desc"),i.links=this.parseLinks(t)),i},n.prototype.parseRteType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseRtepts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrkType=function(t){return{name:this.getFirstTagValue(t,"name"),cmt:this.getFirstTagValue(t,"cmt"),desc:this.getFirstTagValue(t,"desc"),src:this.getFirstTagValue(t,"src"),number:this.getFirstTagValue(t,"number"),type:this.getFirstTagValue(t,"type"),links:this.parseLinks(t),points:this.parseTrkpts(t),segments:this.parseTrksegs(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseTrksegType=function(t){return{points:this.parseTrkpts(t),extensions:this.parseMmpExtensionType(t,["color","weight","opacity"])}},n.prototype.parseMmpExtensionType=function(t,e){var i=t.querySelector("extensions");if(null===i)return{};for(var n={},o=0;o<e.length;o++){var r=e[o];n[r]=this.getFirstTagValueNs(i,"https://www.mapsmarker.com/GPX/1/",r)}return n},n.prototype.parseTrackPointExtensionType=function(t){var e=t.querySelector("TrackPointExtension");return null===e?{}:{atemp:parseFloat(this.getTpxValue(e,"atemp")),wtemp:parseFloat(this.getTpxValue(e,"wtemp")),depth:parseFloat(this.getTpxValue(e,"depth")),hr:parseInt(this.getTpxValue(e,"hr")),cad:parseInt(this.getTpxValue(e,"cad")),speed:parseFloat(this.getTpxValue(e,"speed")),course:parseFloat(this.getTpxValue(e,"course")),bearing:parseFloat(this.getTpxValue(e,"bearing"))}},n.prototype.calcTime=function(t){var e=0,i=0;t[0].elapsed=e;for(var n=0;n<t.length-1;n++){var o=t[n+1].time-t[n].time;isNaN(o)||(e+=o,o<this.settings.timeMovingThreshold&&(i+=o)),t[n+1].elapsed=e}return{start:t[0].time,end:t[t.length-1].time,total:e,moving:i}},n.prototype.calcDistance=function(t){var e=0;t[0].dist=e;for(var i=0;i<t.length-1;i++){e+=this.calcDistanceBetween(t[i],t[i+1]),t[i+1].dist=e}return{total:e}},n.prototype.calcDistanceBetween=function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lon-t.lon)*i/2),s=r*r+Math.cos(n)*Math.cos(o)*a*a;return 6371e3*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))},n.prototype.calcElevation=function(t){for(var e=[],i=0,n=0,o=null,r=0;r<t.length;r++){var a=t[r].ele;if(isNaN(a))t[r].gain=Math.abs(i),t[r].loss=Math.abs(n);else if(null!==o){var s=a-o;Math.abs(s)>=5&&(s>0?i+=s:s<0&&(n+=s),o=a,e.push(a)),t[r].gain=Math.abs(i),t[r].loss=Math.abs(n)}else e.push(a),o=a,t[r].gain=Math.abs(i),t[r].loss=Math.abs(n)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),gain:Math.abs(i),loss:Math.abs(n),avg:e.reduce((function(t,e){return t+e}),0)/e.length}},n.prototype.calcHeartRate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i].extension;void 0!==n.tpx&&n.tpx.hr&&e.push(n.tpx.hr)}return{max:Math.max.apply(null,e),min:Math.min.apply(null,e),avg:e.reduce((function(t,e){return t+e}),0)/e.length}};var o=n;const r="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function a(t,e,i){const n=i||(t=>Array.prototype.slice.call(t));let o=!1,a=[];return function(...i){a=n(i),o||(o=!0,r.call(window,(()=>{o=!1,t.apply(e,a)})))}}const s=t=>"start"===t?"left":"end"===t?"right":"center",l=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;function c(){}const h=function(){let t=0;return function(){return t++}}();function u(t){return null==t}function p(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.substr(0,7)&&"Array]"===e.substr(-6)}function d(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const m=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function f(t,e){return m(t)?t:e}function g(t,e){return void 0===t?e:t}const _=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function v(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function y(t,e,i,n){let o,r,a;if(p(t))if(r=t.length,n)for(o=r-1;o>=0;o--)e.call(i,t[o],o);else for(o=0;o<r;o++)e.call(i,t[o],o);else if(d(t))for(a=Object.keys(t),r=a.length,o=0;o<r;o++)e.call(i,t[a[o]],a[o])}function b(t,e){let i,n,o,r;if(!t||!e||t.length!==e.length)return!1;for(i=0,n=t.length;i<n;++i)if(o=t[i],r=e[i],o.datasetIndex!==r.datasetIndex||o.index!==r.index)return!1;return!0}function x(t){if(p(t))return t.map(x);if(d(t)){const e=Object.create(null),i=Object.keys(t),n=i.length;let o=0;for(;o<n;++o)e[i[o]]=x(t[i[o]]);return e}return t}function k(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function w(t,e,i,n){if(!k(t))return;const o=e[t],r=i[t];d(o)&&d(r)?L(o,r,n):e[t]=x(r)}function L(t,e,i){const n=p(e)?e:[e],o=n.length;if(!d(t))return t;const r=(i=i||{}).merger||w;for(let a=0;a<o;++a){if(!d(e=n[a]))continue;const o=Object.keys(e);for(let n=0,a=o.length;n<a;++n)r(o[n],t,e,i)}return t}function M(t,e){return L(t,e,{merger:C})}function C(t,e,i){if(!k(t))return;const n=e[t],o=i[t];d(n)&&d(o)?M(n,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=x(o))}function P(t,e){const i=t.indexOf(".",e);return-1===i?t.length:i}function S(t,e){if(""===e)return t;let i=0,n=P(e,i);for(;t&&n>i;)t=t[e.substr(i,n-i)],i=n+1,n=P(e,i);return t}function T(t){return t.charAt(0).toUpperCase()+t.slice(1)}const A=t=>void 0!==t,E=t=>"function"==typeof t,D=Math.PI,O=2*D,I=O+D,B=Number.POSITIVE_INFINITY,R=D/180,z=D/2,F=D/4,j=2*D/3,N=Math.log10,U=Math.sign;function G(t){const e=Math.round(t);t=Z(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(N(t))),n=t/i;return(n<=1?1:n<=2?2:n<=5?5:10)*i}function H(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Z(t,e,i){return Math.abs(t-e)<i}function V(t,e,i){let n,o,r;for(n=0,o=t.length;n<o;n++)r=t[n][i],isNaN(r)||(e.min=Math.min(e.min,r),e.max=Math.max(e.max,r))}function W(t){return t*(D/180)}function q(t){return t*(180/D)}function $(t){if(!m(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function Y(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function K(t,e){return(t-e+I)%O-D}function J(t){return(t%O+O)%O}function X(t,e,i,n){const o=J(t),r=J(e),a=J(i),s=J(r-o),l=J(a-o),c=J(o-r),h=J(o-a);return o===r||o===a||n&&r===a||s>l&&c<h}function Q(t,e,i){return Math.max(e,Math.min(i,t))}const tt=t=>0===t||1===t,et=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*O/i),it=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*O/i)+1,nt={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*z),easeOutSine:t=>Math.sin(t*z),easeInOutSine:t=>-.5*(Math.cos(D*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>tt(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>tt(t)?t:et(t,.075,.3),easeOutElastic:t=>tt(t)?t:it(t,.075,.3),easeInOutElastic(t){const e=.1125;return tt(t)?t:t<.5?.5*et(2*t,e,.45):.5+.5*it(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-nt.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*nt.easeInBounce(2*t):.5*nt.easeOutBounce(2*t-1)+.5},ot={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rt="0123456789ABCDEF",at=t=>rt[15&t],st=t=>rt[(240&t)>>4]+rt[15&t],lt=t=>(240&t)>>4==(15&t);function ct(t){var e=function(t){return lt(t.r)&&lt(t.g)&&lt(t.b)&&lt(t.a)}(t)?at:st;return t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t}function ht(t){return t+.5|0}const ut=(t,e,i)=>Math.max(Math.min(t,i),e);function pt(t){return ut(ht(2.55*t),0,255)}function dt(t){return ut(ht(255*t),0,255)}function mt(t){return ut(ht(t/2.55)/100,0,1)}function ft(t){return ut(ht(100*t),0,100)}const gt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const _t=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function vt(t,e,i){const n=e*Math.min(i,1-i),o=(e,o=(e+t/30)%12)=>i-n*Math.max(Math.min(o-3,9-o,1),-1);return[o(0),o(8),o(4)]}function yt(t,e,i){const n=(n,o=(n+t/60)%6)=>i-i*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function bt(t,e,i){const n=vt(t,1,.5);let o;for(e+i>1&&(o=1/(e+i),e*=o,i*=o),o=0;o<3;o++)n[o]*=1-e-i,n[o]+=e;return n}function xt(t){const e=t.r/255,i=t.g/255,n=t.b/255,o=Math.max(e,i,n),r=Math.min(e,i,n),a=(o+r)/2;let s,l,c;return o!==r&&(c=o-r,l=a>.5?c/(2-o-r):c/(o+r),s=o===e?(i-n)/c+(i<n?6:0):o===i?(n-e)/c+2:(e-i)/c+4,s=60*s+.5),[0|s,l||0,a]}function kt(t,e,i,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,n)).map(dt)}function wt(t,e,i){return kt(vt,t,e,i)}function Lt(t){return(t%360+360)%360}function Mt(t){const e=_t.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?pt(+e[5]):dt(+e[5]));const o=Lt(+e[2]),r=+e[3]/100,a=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return kt(bt,t,e,i)}(o,r,a):"hsv"===e[1]?function(t,e,i){return kt(yt,t,e,i)}(o,r,a):wt(o,r,a),{r:i[0],g:i[1],b:i[2],a:n}}const Ct={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Pt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let St;function Tt(t){St||(St=function(){const t={},e=Object.keys(Pt),i=Object.keys(Ct);let n,o,r,a,s;for(n=0;n<e.length;n++){for(a=s=e[n],o=0;o<i.length;o++)r=i[o],s=s.replace(r,Ct[r]);r=parseInt(Pt[a],16),t[s]=[r>>16&255,r>>8&255,255&r]}return t}(),St.transparent=[0,0,0,0]);const e=St[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}function At(t,e,i){if(t){let n=xt(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*i,0===e?360:1)),n=wt(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Et(t,e){return t?Object.assign(e||{},t):t}function Dt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=dt(t[3]))):(e=Et(t,{r:0,g:0,b:0,a:1})).a=dt(e.a),e}function Ot(t){return"r"===t.charAt(0)?function(t){const e=gt.exec(t);let i,n,o,r=255;if(e){if(e[7]!==i){const t=+e[7];r=255&(e[8]?pt(t):255*t)}return i=+e[1],n=+e[3],o=+e[5],i=255&(e[2]?pt(i):i),n=255&(e[4]?pt(n):n),o=255&(e[6]?pt(o):o),{r:i,g:n,b:o,a:r}}}(t):Mt(t)}class It{constructor(t){if(t instanceof It)return t;const e=typeof t;let i;var n,o,r;"object"===e?i=Dt(t):"string"===e&&(r=(n=t).length,"#"===n[0]&&(4===r||5===r?o={r:255&17*ot[n[1]],g:255&17*ot[n[2]],b:255&17*ot[n[3]],a:5===r?17*ot[n[4]]:255}:7!==r&&9!==r||(o={r:ot[n[1]]<<4|ot[n[2]],g:ot[n[3]]<<4|ot[n[4]],b:ot[n[5]]<<4|ot[n[6]],a:9===r?ot[n[7]]<<4|ot[n[8]]:255})),i=o||Tt(t)||Ot(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Et(this._rgb);return t&&(t.a=mt(t.a)),t}set rgb(t){this._rgb=Dt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${mt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):this._rgb;var t}hexString(){return this._valid?ct(this._rgb):this._rgb}hslString(){return this._valid?function(t){if(!t)return;const e=xt(t),i=e[0],n=ft(e[1]),o=ft(e[2]);return t.a<255?`hsla(${i}, ${n}%, ${o}%, ${mt(t.a)})`:`hsl(${i}, ${n}%, ${o}%)`}(this._rgb):this._rgb}mix(t,e){const i=this;if(t){const n=i.rgb,o=t.rgb;let r;const a=e===r?.5:e,s=2*a-1,l=n.a-o.a,c=((s*l==-1?s:(s+l)/(1+s*l))+1)/2;r=1-c,n.r=255&c*n.r+r*o.r+.5,n.g=255&c*n.g+r*o.g+.5,n.b=255&c*n.b+r*o.b+.5,n.a=a*n.a+(1-a)*o.a,i.rgb=n}return i}clone(){return new It(this.rgb)}alpha(t){return this._rgb.a=dt(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=ht(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return At(this._rgb,2,t),this}darken(t){return At(this._rgb,2,-t),this}saturate(t){return At(this._rgb,1,t),this}desaturate(t){return At(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=xt(t);i[0]=Lt(i[0]+e),i=wt(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}function Bt(t){return new It(t)}const Rt=t=>t instanceof CanvasGradient||t instanceof CanvasPattern;function zt(t){return Rt(t)?t:Bt(t)}function Ft(t){return Rt(t)?t:Bt(t).saturate(.5).darken(.1).hexString()}const jt=Object.create(null),Nt=Object.create(null);function Ut(t,e){if(!e)return t;const i=e.split(".");for(let e=0,n=i.length;e<n;++e){const n=i[e];t=t[n]||(t[n]=Object.create(null))}return t}function Gt(t,e,i){return"string"==typeof e?L(Ut(t,e),i):L(Ut(t,""),e)}var Ht=new class{constructor(t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Ft(e.backgroundColor),this.hoverBorderColor=(t,e)=>Ft(e.borderColor),this.hoverColor=(t,e)=>Ft(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.describe(t)}set(t,e){return Gt(this,t,e)}get(t){return Ut(this,t)}describe(t,e){return Gt(Nt,t,e)}override(t,e){return Gt(jt,t,e)}route(t,e,i,n){const o=Ut(this,t),r=Ut(this,i),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=r[n];return d(t)?Object.assign({},e,t):g(t,e)},set(t){this[a]=t}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function Zt(t,e,i,n,o){let r=e[o];return r||(r=e[o]=t.measureText(o).width,i.push(o)),r>n&&(n=r),n}function Vt(t,e,i,n){let o=(n=n||{}).data=n.data||{},r=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(o=n.data={},r=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0;const s=i.length;let l,c,h,u,d;for(l=0;l<s;l++)if(u=i[l],null!=u&&!0!==p(u))a=Zt(t,o,r,a,u);else if(p(u))for(c=0,h=u.length;c<h;c++)d=u[c],null==d||p(d)||(a=Zt(t,o,r,a,d));t.restore();const m=r.length/2;if(m>i.length){for(l=0;l<m;l++)delete o[r[l]];r.splice(0,m)}return a}function Wt(t,e,i){const n=t.currentDevicePixelRatio,o=0!==i?Math.max(i/2,.5):0;return Math.round((e-o)*n)/n+o}function qt(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function $t(t,e,i,n){let o,r,a,s,l;const c=e.pointStyle,h=e.rotation,u=e.radius;let p=(h||0)*R;if(c&&"object"==typeof c&&(o=c.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,n),t.rotate(p),t.drawImage(c,-c.width/2,-c.height/2,c.width,c.height),void t.restore();if(!(isNaN(u)||u<=0)){switch(t.beginPath(),c){default:t.arc(i,n,u,0,O),t.closePath();break;case"triangle":t.moveTo(i+Math.sin(p)*u,n-Math.cos(p)*u),p+=j,t.lineTo(i+Math.sin(p)*u,n-Math.cos(p)*u),p+=j,t.lineTo(i+Math.sin(p)*u,n-Math.cos(p)*u),t.closePath();break;case"rectRounded":l=.516*u,s=u-l,r=Math.cos(p+F)*s,a=Math.sin(p+F)*s,t.arc(i-r,n-a,l,p-D,p-z),t.arc(i+a,n-r,l,p-z,p),t.arc(i+r,n+a,l,p,p+z),t.arc(i-a,n+r,l,p+z,p+D),t.closePath();break;case"rect":if(!h){s=Math.SQRT1_2*u,t.rect(i-s,n-s,2*s,2*s);break}p+=F;case"rectRot":r=Math.cos(p)*u,a=Math.sin(p)*u,t.moveTo(i-r,n-a),t.lineTo(i+a,n-r),t.lineTo(i+r,n+a),t.lineTo(i-a,n+r),t.closePath();break;case"crossRot":p+=F;case"cross":r=Math.cos(p)*u,a=Math.sin(p)*u,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r);break;case"star":r=Math.cos(p)*u,a=Math.sin(p)*u,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r),p+=F,r=Math.cos(p)*u,a=Math.sin(p)*u,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a),t.moveTo(i+a,n-r),t.lineTo(i-a,n+r);break;case"line":r=Math.cos(p)*u,a=Math.sin(p)*u,t.moveTo(i-r,n-a),t.lineTo(i+r,n+a);break;case"dash":t.moveTo(i,n),t.lineTo(i+Math.cos(p)*u,n+Math.sin(p)*u)}t.fill(),e.borderWidth>0&&t.stroke()}}function Yt(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Kt(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Jt(t){t.restore()}function Xt(t,e,i,n,o){if(!e)return t.lineTo(i.x,i.y);if("middle"===o){const n=(e.x+i.x)/2;t.lineTo(n,e.y),t.lineTo(n,i.y)}else"after"===o!=!!n?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Qt(t,e,i,n){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?i.cp2x:i.cp1x,n?i.cp2y:i.cp1y,i.x,i.y)}function te(t,e,i,n,o,r={}){const a=p(e)?e:[e],s=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(t.save(),t.font=o.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]);u(e.rotation)||t.rotate(e.rotation);e.color&&(t.fillStyle=e.color);e.textAlign&&(t.textAlign=e.textAlign);e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,r),l=0;l<a.length;++l)c=a[l],s&&(r.strokeColor&&(t.strokeStyle=r.strokeColor),u(r.strokeWidth)||(t.lineWidth=r.strokeWidth),t.strokeText(c,i,n,r.maxWidth)),t.fillText(c,i,n,r.maxWidth),ee(t,i,n,c,r),n+=o.lineHeight;t.restore()}function ee(t,e,i,n,o){if(o.strikethrough||o.underline){const r=t.measureText(n),a=e-r.actualBoundingBoxLeft,s=e+r.actualBoundingBoxRight,l=i-r.actualBoundingBoxAscent,c=i+r.actualBoundingBoxDescent,h=o.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(a,h),t.lineTo(s,h),t.stroke()}}function ie(t,e){const{x:i,y:n,w:o,h:r,radius:a}=e;t.arc(i+a.topLeft,n+a.topLeft,a.topLeft,-z,D,!0),t.lineTo(i,n+r-a.bottomLeft),t.arc(i+a.bottomLeft,n+r-a.bottomLeft,a.bottomLeft,D,z,!0),t.lineTo(i+o-a.bottomRight,n+r),t.arc(i+o-a.bottomRight,n+r-a.bottomRight,a.bottomRight,z,0,!0),t.lineTo(i+o,n+a.topRight),t.arc(i+o-a.topRight,n+a.topRight,a.topRight,0,-z,!0),t.lineTo(i+a.topLeft,n)}const ne=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),oe=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function re(t,e){const i=(""+t).match(ne);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function ae(t,e){const i={},n=d(e),o=n?Object.keys(e):e,r=d(t)?n?i=>g(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of o)i[t]=+r(t)||0;return i}function se(t){return ae(t,{top:"y",right:"x",bottom:"y",left:"x"})}function le(t){return ae(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ce(t){const e=se(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function he(t,e){t=t||{},e=e||Ht.font;let i=g(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let n=g(t.style,e.style);n&&!(""+n).match(oe)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const o={family:g(t.family,e.family),lineHeight:re(g(t.lineHeight,e.lineHeight),i),size:i,style:n,weight:g(t.weight,e.weight),string:""};return o.string=function(t){return!t||u(t.size)||u(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(o),o}function ue(t,e,i,n){let o,r,a,s=!0;for(o=0,r=t.length;o<r;++o)if(a=t[o],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==i&&p(a)&&(a=a[i%a.length],s=!1),void 0!==a))return n&&!s&&(n.cacheable=!1),a}function pe(t,e,i){i=i||(i=>t[i]<e);let n,o=t.length-1,r=0;for(;o-r>1;)n=r+o>>1,i(n)?r=n:o=n;return{lo:r,hi:o}}const de=(t,e,i)=>pe(t,i,(n=>t[n][e]<i)),me=(t,e,i)=>pe(t,i,(n=>t[n][e]>=i));const fe=["push","pop","shift","splice","unshift"];function ge(t,e){const i=t._chartjs;if(!i)return;const n=i.listeners,o=n.indexOf(e);-1!==o&&n.splice(o,1),n.length>0||(fe.forEach((e=>{delete t[e]})),delete t._chartjs)}function _e(t){const e=new Set;let i,n;for(i=0,n=t.length;i<n;++i)e.add(t[i]);return e.size===n?t:Array.from(e)}function ve(t,e=[""],i=t,n,o=(()=>t[0])){A(n)||(n=Te("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:o,override:o=>ve([o,...t],e,i,n)};return new Proxy(r,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,n)=>we(i,n,(()=>function(t,e,i,n){let o;for(const r of e)if(o=Te(xe(r,t),i),A(o))return ke(t,o)?Pe(i,n,t,o):o}(n,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Ae(t).includes(e),ownKeys:t=>Ae(t),set:(t,e,i)=>((t._storage||(t._storage=o()))[e]=i,delete t[e],delete t._keys,!0)})}function ye(t,e,i,n){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:be(t,n),setContext:e=>ye(t,e,i,n),override:o=>ye(t.override(o),e,i,n)};return new Proxy(o,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>we(t,e,(()=>function(t,e,i){const{_proxy:n,_context:o,_subProxy:r,_descriptors:a}=t;let s=n[e];E(s)&&a.isScriptable(e)&&(s=function(t,e,i,n){const{_proxy:o,_context:r,_subProxy:a,_stack:s}=i;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t),e=e(r,a||n),s.delete(t),d(e)&&(e=Pe(o._scopes,o,t,e));return e}(e,s,t,i));p(s)&&s.length&&(s=function(t,e,i,n){const{_proxy:o,_context:r,_subProxy:a,_descriptors:s}=i;if(A(r.index)&&n(t))e=e[r.index%e.length];else if(d(e[0])){const i=e,n=o._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=Pe(n,o,t,l);e.push(ye(i,r,a&&a[t],s))}}return e}(e,s,t,a.isIndexable));ke(e,s)&&(s=ye(s,o,r&&r[e],a));return s}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,n)=>(t[i]=n,delete e[i],!0)})}function be(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:n=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:i,indexable:n,isScriptable:E(i)?i:()=>i,isIndexable:E(n)?n:()=>n}}const xe=(t,e)=>t?t+T(e):e,ke=(t,e)=>d(e)&&"adapters"!==t;function we(t,e,i){let n=t[e];return A(n)||(n=i(),A(n)&&(t[e]=n)),n}function Le(t,e,i){return E(t)?t(e,i):t}const Me=(t,e)=>!0===t?e:"string"==typeof t?S(e,t):void 0;function Ce(t,e,i,n){for(const o of e){const e=Me(i,o);if(e){t.add(e);const o=Le(e._fallback,i,e);if(A(o)&&o!==i&&o!==n)return o}else if(!1===e&&A(n)&&i!==n)return null}return!1}function Pe(t,e,i,n){const o=e._rootScopes,r=Le(e._fallback,i,n),a=[...t,...o],s=new Set;s.add(n);let l=Se(s,a,i,r||i);return null!==l&&((!A(r)||r===i||(l=Se(s,a,r,l),null!==l))&&ve(Array.from(s),[""],o,r,(()=>function(t,e,i){const n=t._getTarget();e in n||(n[e]={});const o=n[e];if(p(o)&&d(i))return i;return o}(e,i,n))))}function Se(t,e,i,n){for(;i;)i=Ce(t,e,i,n);return i}function Te(t,e){for(const i of e){if(!i)continue;const e=i[t];if(A(e))return e}}function Ae(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const Ee=Number.EPSILON||1e-14,De=(t,e)=>e<t.length&&!t[e].skip&&t[e],Oe=t=>"x"===t?"y":"x";function Ie(t,e,i,n){const o=t.skip?e:t,r=e,a=i.skip?e:i,s=Y(r,o),l=Y(a,r);let c=s/(s+l),h=l/(s+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=n*c,p=n*h;return{previous:{x:r.x-u*(a.x-o.x),y:r.y-u*(a.y-o.y)},next:{x:r.x+p*(a.x-o.x),y:r.y+p*(a.y-o.y)}}}function Be(t,e="x"){const i=Oe(e),n=t.length,o=Array(n).fill(0),r=Array(n);let a,s,l,c=De(t,0);for(a=0;a<n;++a)if(s=l,l=c,c=De(t,a+1),l){if(c){const t=c[e]-l[e];o[a]=0!==t?(c[i]-l[i])/t:0}r[a]=s?c?U(o[a-1])!==U(o[a])?0:(o[a-1]+o[a])/2:o[a-1]:o[a]}!function(t,e,i){const n=t.length;let o,r,a,s,l,c=De(t,0);for(let h=0;h<n-1;++h)l=c,c=De(t,h+1),l&&c&&(Z(e[h],0,Ee)?i[h]=i[h+1]=0:(o=i[h]/e[h],r=i[h+1]/e[h],s=Math.pow(o,2)+Math.pow(r,2),s<=9||(a=3/Math.sqrt(s),i[h]=o*a*e[h],i[h+1]=r*a*e[h])))}(t,o,r),function(t,e,i="x"){const n=Oe(i),o=t.length;let r,a,s,l=De(t,0);for(let c=0;c<o;++c){if(a=s,s=l,l=De(t,c+1),!s)continue;const o=s[i],h=s[n];a&&(r=(o-a[i])/3,s[`cp1${i}`]=o-r,s[`cp1${n}`]=h-r*e[c]),l&&(r=(l[i]-o)/3,s[`cp2${i}`]=o+r,s[`cp2${n}`]=h+r*e[c])}}(t,r,e)}function Re(t,e,i){return Math.max(Math.min(t,i),e)}function ze(t,e,i,n,o){let r,a,s,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)Be(t,o);else{let i=n?t[t.length-1]:t[0];for(r=0,a=t.length;r<a;++r)s=t[r],l=Ie(i,s,t[Math.min(r+1,a-(n?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,i=s}e.capBezierPoints&&function(t,e){let i,n,o,r,a,s=Yt(t[0],e);for(i=0,n=t.length;i<n;++i)a=r,r=s,s=i<n-1&&Yt(t[i+1],e),r&&(o=t[i],a&&(o.cp1x=Re(o.cp1x,e.left,e.right),o.cp1y=Re(o.cp1y,e.top,e.bottom)),s&&(o.cp2x=Re(o.cp2x,e.left,e.right),o.cp2y=Re(o.cp2y,e.top,e.bottom)))}(t,i)}function Fe(){return"undefined"!=typeof window&&"undefined"!=typeof document}function je(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Ne(t,e,i){let n;return"string"==typeof t?(n=parseInt(t,10),-1!==t.indexOf("%")&&(n=n/100*e.parentNode[i])):n=t,n}const Ue=t=>window.getComputedStyle(t,null);const Ge=["top","right","bottom","left"];function He(t,e,i){const n={};i=i?"-"+i:"";for(let o=0;o<4;o++){const r=Ge[o];n[r]=parseFloat(t[e+"-"+r+i])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}function Ze(t,e){const{canvas:i,currentDevicePixelRatio:n}=e,o=Ue(i),r="border-box"===o.boxSizing,a=He(o,"padding"),s=He(o,"border","width"),{x:l,y:c,box:h}=function(t,e){const i=t.native||t,n=i.touches,o=n&&n.length?n[0]:i,{offsetX:r,offsetY:a}=o;let s,l,c=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(r,a,i.target))s=r,l=a;else{const t=e.getBoundingClientRect();s=o.clientX-t.left,l=o.clientY-t.top,c=!0}return{x:s,y:l,box:c}}(t,i),u=a.left+(h&&s.left),p=a.top+(h&&s.top);let{width:d,height:m}=e;return r&&(d-=a.width+s.width,m-=a.height+s.height),{x:Math.round((l-u)/d*i.width/n),y:Math.round((c-p)/m*i.height/n)}}const Ve=t=>Math.round(10*t)/10;function We(t,e,i,n){const o=Ue(t),r=He(o,"margin"),a=Ne(o.maxWidth,t,"clientWidth")||B,s=Ne(o.maxHeight,t,"clientHeight")||B,l=function(t,e,i){let n,o;if(void 0===e||void 0===i){const r=je(t);if(r){const t=r.getBoundingClientRect(),a=Ue(r),s=He(a,"border","width"),l=He(a,"padding");e=t.width-l.width-s.width,i=t.height-l.height-s.height,n=Ne(a.maxWidth,r,"clientWidth"),o=Ne(a.maxHeight,r,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:n||B,maxHeight:o||B}}(t,e,i);let{width:c,height:h}=l;if("content-box"===o.boxSizing){const t=He(o,"border","width"),e=He(o,"padding");c-=e.width+t.width,h-=e.height+t.height}return c=Math.max(0,c-r.width),h=Math.max(0,n?Math.floor(c/n):h-r.height),c=Ve(Math.min(c,a,l.maxWidth)),h=Ve(Math.min(h,s,l.maxHeight)),c&&!h&&(h=Ve(c/2)),{width:c,height:h}}function qe(t,e,i){const n=e||1,o=Math.floor(t.height*n),r=Math.floor(t.width*n);t.height=o/n,t.width=r/n;const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==n||a.height!==o||a.width!==r)&&(t.currentDevicePixelRatio=n,a.height=o,a.width=r,t.ctx.setTransform(n,0,0,n,0,0),!0)}const $e=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(t){}return t}();function Ye(t,e){const i=function(t,e){return Ue(t).getPropertyValue(e)}(t,e),n=i&&i.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Ke(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Je(t,e,i,n){return{x:t.x+i*(e.x-t.x),y:"middle"===n?i<.5?t.y:e.y:"after"===n?i<1?t.y:e.y:i>0?e.y:t.y}}function Xe(t,e,i,n){const o={x:t.cp2x,y:t.cp2y},r={x:e.cp1x,y:e.cp1y},a=Ke(t,o,i),s=Ke(o,r,i),l=Ke(r,e,i),c=Ke(a,s,i),h=Ke(s,l,i);return Ke(c,h,i)}const Qe=new Map;function ti(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let n=Qe.get(i);return n||(n=new Intl.NumberFormat(t,e),Qe.set(i,n)),n}(e,i).format(t)}function ei(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function ii(t,e){let i,n;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,n=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=n)}function ni(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function oi(t){return"angle"===t?{between:X,compare:K,normalize:J}:{between:(t,e,i)=>t>=Math.min(e,i)&&t<=Math.max(i,e),compare:(t,e)=>t-e,normalize:t=>t}}function ri({start:t,end:e,count:i,loop:n,style:o}){return{start:t%i,end:e%i,loop:n&&(e-t+1)%i==0,style:o}}function ai(t,e,i){if(!i)return[t];const{property:n,start:o,end:r}=i,a=e.length,{compare:s,between:l,normalize:c}=oi(n),{start:h,end:u,loop:p,style:d}=function(t,e,i){const{property:n,start:o,end:r}=i,{between:a,normalize:s}=oi(n),l=e.length;let c,h,{start:u,end:p,loop:d}=t;if(d){for(u+=l,p+=l,c=0,h=l;c<h&&a(s(e[u%l][n]),o,r);++c)u--,p--;u%=l,p%=l}return p<u&&(p+=l),{start:u,end:p,loop:d,style:t.style}}(t,e,i),m=[];let f,g,_,v=!1,y=null;const b=()=>v||l(o,_,f)&&0!==s(o,_),x=()=>!v||0===s(r,f)||l(r,_,f);for(let t=h,i=h;t<=u;++t)g=e[t%a],g.skip||(f=c(g[n]),f!==_&&(v=l(f,o,r),null===y&&b()&&(y=0===s(f,o)?t:i),null!==y&&x()&&(m.push(ri({start:y,end:t,loop:p,count:a,style:d})),y=null),i=t,_=f));return null!==y&&m.push(ri({start:y,end:u,loop:p,count:a,style:d})),m}function si(t,e){const i=[],n=t.segments;for(let o=0;o<n.length;o++){const r=ai(n[o],t.points,e);r.length&&i.push(...r)}return i}function li(t,e,i,n){return n&&n.setContext&&i?function(t,e,i,n){const o=ci(t.options),r=i.length,a=[];let s=e[0].start,l=s;for(const c of e){let e,h=o,u=i[s%r];for(l=s+1;l<=c.end;l++){const o=i[l%r];e=ci(n.setContext({type:"segment",p0:u,p1:o,p0DataIndex:(l-1)%r,p1DataIndex:l%r,datasetIndex:t._datasetIndex})),hi(e,h)&&(a.push({start:s,end:l-1,loop:c.loop,style:h}),h=e,s=l-1),u=o,h=e}s<l-1&&(a.push({start:s,end:l-1,loop:c.loop,style:e}),s=l-1)}return a}(t,e,i,n):e}function ci(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function hi(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var ui=new
/*!
 * Chart.js v3.5.1
 * https://www.chartjs.org
 * (c) 2021 Chart.js Contributors
 * Released under the MIT License
 */
class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,n){const o=e.listeners[n],r=e.duration;o.forEach((n=>n({chart:t,initial:e.initial,numSteps:r,currentStep:Math.min(i-e.start,r)})))}_refresh(){const t=this;t._request||(t._running=!0,t._request=r.call(window,(()=>{t._update(),t._request=null,t._running&&t._refresh()})))}_update(t=Date.now()){const e=this;let i=0;e._charts.forEach(((n,o)=>{if(!n.running||!n.items.length)return;const r=n.items;let a,s=r.length-1,l=!1;for(;s>=0;--s)a=r[s],a._active?(a._total>n.duration&&(n.duration=a._total),a.tick(t),l=!0):(r[s]=r[r.length-1],r.pop());l&&(o.draw(),e._notify(o,n,t,"progress")),r.length||(n.running=!1,e._notify(o,n,t,"complete"),n.initial=!1),i+=r.length})),e._lastDate=t,0===i&&(e._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};const pi="transparent",di={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const n=zt(t||pi),o=n.valid&&zt(e||pi);return o&&o.valid?o.mix(n,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class mi{constructor(t,e,i,n){const o=e[i];n=ue([t.to,n,o,t.from]);const r=ue([t.from,o,n]);this._active=!0,this._fn=t.fn||di[t.type||typeof r],this._easing=nt[t.easing]||nt.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,i){const n=this;if(n._active){n._notify(!1);const o=n._target[n._prop],r=i-n._start,a=n._duration-r;n._start=i,n._duration=Math.floor(Math.max(a,t.duration)),n._total+=r,n._loop=!!t.loop,n._to=ue([t.to,e,o,t.from]),n._from=ue([t.from,o,e])}}cancel(){const t=this;t._active&&(t.tick(Date.now()),t._active=!1,t._notify(!1))}tick(t){const e=this,i=t-e._start,n=e._duration,o=e._prop,r=e._from,a=e._loop,s=e._to;let l;if(e._active=r!==s&&(a||i<n),!e._active)return e._target[o]=s,void e._notify(!0);i<0?e._target[o]=r:(l=i/n%2,l=a&&l>1?2-l:l,l=e._easing(Math.min(1,Math.max(0,l))),e._target[o]=e._fn(r,s,l))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}Ht.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const fi=Object.keys(Ht.animation);Ht.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),Ht.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Ht.describe("animations",{_fallback:"animation"}),Ht.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class gi{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!d(t))return;const e=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const n=t[i];if(!d(n))return;const o={};for(const t of fi)o[t]=n[t];(p(n.properties)&&n.properties||[i]).forEach((t=>{t!==i&&e.has(t)||e.set(t,o)}))}))}_animateOptions(t,e){const i=e.options,n=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!n)return[];const o=this._createAnimations(n,i);return i.$shared&&function(t,e){const i=[],n=Object.keys(e);for(let e=0;e<n.length;e++){const o=t[n[e]];o&&o.active()&&i.push(o.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),o}_createAnimations(t,e){const i=this._properties,n=[],o=t.$animations||(t.$animations={}),r=Object.keys(e),a=Date.now();let s;for(s=r.length-1;s>=0;--s){const l=r[s];if("$"===l.charAt(0))continue;if("options"===l){n.push(...this._animateOptions(t,e));continue}const c=e[l];let h=o[l];const u=i.get(l);if(h){if(u&&h.active()){h.update(u,c,a);continue}h.cancel()}u&&u.duration?(o[l]=h=new mi(u,t,l,c),n.push(h)):t[l]=c}return n}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(ui.add(this._chart,i),!0):void 0}}function _i(t,e){const i=t&&t.options||{},n=i.reverse,o=void 0===i.min?e:0,r=void 0===i.max?e:0;return{start:n?r:o,end:n?o:r}}function vi(t,e){const i=[],n=t._getSortedDatasetMetas(e);let o,r;for(o=0,r=n.length;o<r;++o)i.push(n[o].index);return i}function yi(t,e,i,n){const o=t.keys,r="single"===n.mode;let a,s,l,c;if(null!==e){for(a=0,s=o.length;a<s;++a){if(l=+o[a],l===i){if(n.all)continue;break}c=t.values[l],m(c)&&(r||0===e||U(e)===U(c))&&(e+=c)}return e}}function bi(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function xi(t,e,i){const n=t[e]||(t[e]={});return n[i]||(n[i]={})}function ki(t,e,i){for(const n of e.getMatchingVisibleMetas("bar").reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function wi(t,e){const{chart:i,_cachedMeta:n}=t,o=i._stacks||(i._stacks={}),{iScale:r,vScale:a,index:s}=n,l=r.axis,c=a.axis,h=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(r,a,n),u=e.length;let p;for(let t=0;t<u;++t){const i=e[t],{[l]:n,[c]:r}=i;p=(i._stacks||(i._stacks={}))[c]=xi(o,h,n),p[s]=r,p._top=ki(p,a,!0),p._bottom=ki(p,a,!1)}}function Li(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Mi(t,e){const i=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[n]||void 0===e[n][i])return;delete e[n][i]}}}const Ci=t=>"reset"===t||"none"===t,Pi=(t,e)=>e?t:Object.assign({},t);class Si{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const t=this,e=t._cachedMeta;t.configure(),t.linkScales(),e._stacked=bi(e.vScale,e),t.addElements()}updateIndex(t){this.index!==t&&Mi(this._cachedMeta),this.index=t}linkScales(){const t=this,e=t.chart,i=t._cachedMeta,n=t.getDataset(),o=(t,e,i,n)=>"x"===t?e:"r"===t?n:i,r=i.xAxisID=g(n.xAxisID,Li(e,"x")),a=i.yAxisID=g(n.yAxisID,Li(e,"y")),s=i.rAxisID=g(n.rAxisID,Li(e,"r")),l=i.indexAxis,c=i.iAxisID=o(l,r,a,s),h=i.vAxisID=o(l,a,r,s);i.xScale=t.getScaleForId(r),i.yScale=t.getScaleForId(a),i.rScale=t.getScaleForId(s),i.iScale=t.getScaleForId(c),i.vScale=t.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ge(this._data,this),t._stacked&&Mi(t)}_dataCheck(){const t=this,e=t.getDataset(),i=e.data||(e.data=[]),n=t._data;if(d(i))t._data=function(t){const e=Object.keys(t),i=new Array(e.length);let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n],i[n]={x:r,y:t[r]};return i}(i);else if(n!==i){if(n){ge(n,t);const e=t._cachedMeta;Mi(e),e._parsed=[]}i&&Object.isExtensible(i)&&(r=t,(o=i)._chartjs?o._chartjs.listeners.push(r):(Object.defineProperty(o,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),fe.forEach((t=>{const e="_onData"+T(t),i=o[t];Object.defineProperty(o,t,{configurable:!0,enumerable:!1,value(...t){const n=i.apply(this,t);return o._chartjs.listeners.forEach((i=>{"function"==typeof i[e]&&i[e](...t)})),n}})})))),t._syncList=[],t._data=i}var o,r}addElements(){const t=this,e=t._cachedMeta;t._dataCheck(),t.datasetElementType&&(e.dataset=new t.datasetElementType)}buildOrUpdateElements(t){const e=this,i=e._cachedMeta,n=e.getDataset();let o=!1;e._dataCheck();const r=i._stacked;i._stacked=bi(i.vScale,i),i.stack!==n.stack&&(o=!0,Mi(i),i.stack=n.stack),e._resyncElements(t),(o||r!==i._stacked)&&wi(e,i._parsed)}configure(){const t=this,e=t.chart.config,i=e.datasetScopeKeys(t._type),n=e.getOptionScopes(t.getDataset(),i,!0);t.options=e.createResolver(n,t.getContext()),t._parsing=t.options.parsing}parse(t,e){const i=this,{_cachedMeta:n,_data:o}=i,{iScale:r,_stacked:a}=n,s=r.axis;let l,c,h,u=0===t&&e===o.length||n._sorted,m=t>0&&n._parsed[t-1];if(!1===i._parsing)n._parsed=o,n._sorted=!0,h=o;else{h=p(o[t])?i.parseArrayData(n,o,t,e):d(o[t])?i.parseObjectData(n,o,t,e):i.parsePrimitiveData(n,o,t,e);const r=()=>null===c[s]||m&&c[s]<m[s];for(l=0;l<e;++l)n._parsed[l+t]=c=h[l],u&&(r()&&(u=!1),m=c);n._sorted=u}a&&wi(i,h)}parsePrimitiveData(t,e,i,n){const{iScale:o,vScale:r}=t,a=o.axis,s=r.axis,l=o.getLabels(),c=o===r,h=new Array(n);let u,p,d;for(u=0,p=n;u<p;++u)d=u+i,h[u]={[a]:c||o.parse(l[d],d),[s]:r.parse(e[d],d)};return h}parseArrayData(t,e,i,n){const{xScale:o,yScale:r}=t,a=new Array(n);let s,l,c,h;for(s=0,l=n;s<l;++s)c=s+i,h=e[c],a[s]={x:o.parse(h[0],c),y:r.parse(h[1],c)};return a}parseObjectData(t,e,i,n){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(n);let c,h,u,p;for(c=0,h=n;c<h;++c)u=c+i,p=e[u],l[c]={x:o.parse(S(p,a),u),y:r.parse(S(p,s),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const n=this.chart,o=this._cachedMeta,r=e[t.axis];return yi({keys:vi(n,!0),values:e._stacks[t.axis]},r,o.index,{mode:i})}updateRangeFromParsed(t,e,i,n){const o=i[e.axis];let r=null===o?NaN:o;const a=n&&i._stacks[e.axis];n&&a&&(n.values=a,t.min=Math.min(t.min,r),t.max=Math.max(t.max,r),r=yi(n,o,this._cachedMeta.index,{all:!0})),t.min=Math.min(t.min,r),t.max=Math.max(t.max,r)}getMinMax(t,e){const i=this,n=i._cachedMeta,o=n._parsed,r=n._sorted&&t===n.iScale,a=o.length,s=i._getOtherScale(t),l=e&&n._stacked&&{keys:vi(i.chart,!0),values:null},c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:u}=function(t){const{min:e,max:i,minDefined:n,maxDefined:o}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:o?i:Number.POSITIVE_INFINITY}}(s);let p,d,f,g;function _(){return f=o[p],d=f[t.axis],g=f[s.axis],!m(d)||h>g||u<g}for(p=0;p<a&&(_()||(i.updateRangeFromParsed(c,t,f,l),!r));++p);if(r)for(p=a-1;p>=0;--p)if(!_()){i.updateRangeFromParsed(c,t,f,l);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let n,o,r;for(n=0,o=e.length;n<o;++n)r=e[n][t.axis],m(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this,i=e._cachedMeta;e.configure(),e._cachedDataOpts={},e.update(t||"default"),i._clip=function(t){let e,i,n,o;return d(t)?(e=t.top,i=t.right,n=t.bottom,o=t.left):e=i=n=o=t,{top:e,right:i,bottom:n,left:o,disabled:!1===t}}(g(e.options.clip,function(t,e,i){if(!1===i)return!1;const n=_i(t,i),o=_i(e,i);return{top:o.end,right:n.end,bottom:o.start,left:n.start}}(i.xScale,i.yScale,e.getMaxOverflow())))}update(t){}draw(){const t=this,e=t._ctx,i=t.chart,n=t._cachedMeta,o=n.data||[],r=i.chartArea,a=[],s=t._drawStart||0,l=t._drawCount||o.length-s;let c;for(n.dataset&&n.dataset.draw(e,r,s,l),c=s;c<s+l;++c){const t=o[c];t.hidden||(t.active?a.push(t):t.draw(e,r))}for(c=0;c<a.length;++c)a[c].draw(e,r)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const n=this,o=n.getDataset();let r;if(t>=0&&t<n._cachedMeta.data.length){const e=n._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,i){return Object.assign(Object.create(t),{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(n.getContext(),t,e)),r.parsed=n.getParsed(t),r.raw=o.data[t],r.index=r.dataIndex=t}else r=n.$context||(n.$context=function(t,e){return Object.assign(Object.create(t),{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(n.chart.getContext(),n.index)),r.dataset=o,r.index=r.datasetIndex=n.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const n=this,o="active"===e,r=n._cachedDataOpts,a=t+"-"+e,s=r[a],l=n.enableOptionSharing&&A(i);if(s)return Pi(s,l);const c=n.chart.config,h=c.datasetElementScopeKeys(n._type,t),u=o?[`${t}Hover`,"hover",t,""]:[t,""],p=c.getOptionScopes(n.getDataset(),h),d=Object.keys(Ht.elements[t]),m=c.resolveNamedOptions(p,d,(()=>n.getContext(i,o)),u);return m.$shared&&(m.$shared=l,r[a]=Object.freeze(Pi(m,l))),m}_resolveAnimations(t,e,i){const n=this,o=n.chart,r=n._cachedDataOpts,a=`animation-${e}`,s=r[a];if(s)return s;let l;if(!1!==o.options.animation){const o=n.chart.config,r=o.datasetAnimationScopeKeys(n._type,e),a=o.getOptionScopes(n.getDataset(),r);l=o.createResolver(a,n.getContext(t,i,e))}const c=new gi(o,l&&l.animations);return l&&l._cacheable&&(r[a]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ci(t)||this.chart._animationsDisabled}updateElement(t,e,i,n){Ci(n)?Object.assign(t,i):this._resolveAnimations(e,n).update(t,i)}updateSharedOptions(t,e,i){t&&!Ci(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,i,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this,i=e._data,n=e._cachedMeta.data;for(const[t,i,n]of e._syncList)e[t](i,n);e._syncList=[];const o=n.length,r=i.length,a=Math.min(r,o);a&&e.parse(0,a),r>o?e._insertElements(o,r-o,t):r<o&&e._removeElements(r,o-r)}_insertElements(t,e,i=!0){const n=this,o=n._cachedMeta,r=o.data,a=t+e;let s;const l=t=>{for(t.length+=e,s=t.length-1;s>=a;s--)t[s]=t[s-e]};for(l(r),s=t;s<a;++s)r[s]=new n.dataElementType;n._parsing&&l(o._parsed),n.parse(t,e),i&&n.updateElements(r,t,e,"reset")}updateElements(t,e,i,n){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(t,e);i._stacked&&Mi(i,n)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,n]=t;this[e](i,n)}}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){this._sync(["_removeElements",t,e]),this._sync(["_insertElements",t,arguments.length-2])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Ti(t){const e=function(t){if(!t._cache.$bar){const e=t.getMatchingVisibleMetas("bar");let i=[];for(let n=0,o=e.length;n<o;n++)i=i.concat(e[n].controller.getAllParsedValues(t));t._cache.$bar=_e(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(t);let i,n,o,r,a=t._length;const s=()=>{32767!==o&&-32768!==o&&(A(r)&&(a=Math.min(a,Math.abs(o-r)||a)),r=o)};for(i=0,n=e.length;i<n;++i)o=t.getPixelForValue(e[i]),s();for(r=void 0,i=0,n=t.ticks.length;i<n;++i)o=t.getPixelForTick(i),s();return a}function Ai(t,e,i,n){return p(t)?function(t,e,i,n){const o=i.parse(t[0],n),r=i.parse(t[1],n),a=Math.min(o,r),s=Math.max(o,r);let l=a,c=s;Math.abs(a)>Math.abs(s)&&(l=s,c=a),e[i.axis]=c,e._custom={barStart:l,barEnd:c,start:o,end:r,min:a,max:s}}(t,e,i,n):e[i.axis]=i.parse(t,n),e}function Ei(t,e,i,n){const o=t.iScale,r=t.vScale,a=o.getLabels(),s=o===r,l=[];let c,h,u,p;for(c=i,h=i+n;c<h;++c)p=e[c],u={},u[o.axis]=s||o.parse(a[c],c),l.push(Ai(p,u,r,c));return l}function Di(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Oi(t,e,i,n){let o=e.borderSkipped;const r={};if(!o)return void(t.borderSkipped=r);const{start:a,end:s,reverse:l,top:c,bottom:h}=function(t){let e,i,n,o,r;return t.horizontal?(e=t.base>t.x,i="left",n="right"):(e=t.base<t.y,i="bottom",n="top"),e?(o="end",r="start"):(o="start",r="end"),{start:i,end:n,reverse:e,top:o,bottom:r}}(t);"middle"===o&&i&&(t.enableBorderRadius=!0,(i._top||0)===n?o=c:(i._bottom||0)===n?o=h:(r[Ii(h,a,s,l)]=!0,o=c)),r[Ii(o,a,s,l)]=!0,t.borderSkipped=r}function Ii(t,e,i,n){var o,r,a;return n?(a=i,t=Bi(t=(o=t)===(r=e)?a:o===a?r:o,i,e)):t=Bi(t,e,i),t}function Bi(t,e,i){return"start"===t?e:"end"===t?i:t}Si.defaults={},Si.prototype.datasetElementType=null,Si.prototype.dataElementType=null;class Ri extends Si{parsePrimitiveData(t,e,i,n){return Ei(t,e,i,n)}parseArrayData(t,e,i,n){return Ei(t,e,i,n)}parseObjectData(t,e,i,n){const{iScale:o,vScale:r}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===o.axis?a:s,c="x"===r.axis?a:s,h=[];let u,p,d,m;for(u=i,p=i+n;u<p;++u)m=e[u],d={},d[o.axis]=o.parse(S(m,l),u),h.push(Ai(S(m,c),d,r,u));return h}updateRangeFromParsed(t,e,i,n){super.updateRangeFromParsed(t,e,i,n);const o=i._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:n}=e,o=this.getParsed(t),r=o._custom,a=Di(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:a}}initialize(){const t=this;t.enableOptionSharing=!0,super.initialize();t._cachedMeta.stack=t.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,n){const o=this,r="reset"===n,{index:a,_cachedMeta:{vScale:s}}=o,l=s.getBasePixel(),c=s.isHorizontal(),h=o._getRuler(),p=o.resolveDataElementOptions(e,n),d=o.getSharedOptions(p),m=o.includeOptions(n,d);o.updateSharedOptions(d,n,p);for(let p=e;p<e+i;p++){const e=o.getParsed(p),i=r||u(e[s.axis])?{base:l,head:l}:o._calculateBarValuePixels(p),f=o._calculateBarIndexPixels(p,h),g=(e._stacks||{})[s.axis],_={horizontal:c,base:i.base,enableBorderRadius:!g||Di(e._custom)||a===g._top||a===g._bottom,x:c?i.head:f.center,y:c?f.center:i.head,height:c?f.size:Math.abs(i.size),width:c?Math.abs(i.size):f.size};m&&(_.options=d||o.resolveDataElementOptions(p,t[p].active?"active":n)),Oi(_,_.options||t[p].options,g,a),o.updateElement(t[p],p,_,n)}}_getStacks(t,e){const i=this._cachedMeta.iScale,n=i.getMatchingVisibleMetas(this._type),o=i.options.stacked,r=n.length,a=[];let s,l;for(s=0;s<r;++s)if(l=n[s],l.controller.options.grouped){if(void 0!==e){const t=l.controller.getParsed(e)[l.controller._cachedMeta.vScale.axis];if(u(t)||isNaN(t))continue}if((!1===o||-1===a.indexOf(l.stack)||void 0===o&&void 0===l.stack)&&a.push(l.stack),l.index===t)break}return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const n=this._getStacks(t,i),o=void 0!==e?n.indexOf(e):-1;return-1===o?n.length-1:o}_getRuler(){const t=this,e=t.options,i=t._cachedMeta,n=i.iScale,o=[];let r,a;for(r=0,a=i.data.length;r<a;++r)o.push(n.getPixelForValue(t.getParsed(r)[n.axis],r));const s=e.barThickness;return{min:s||Ti(n),pixels:o,start:n._startPixel,end:n._endPixel,stackCount:t._getStackCount(),scale:n,grouped:e.grouped,ratio:s?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(t){const e=this,{_cachedMeta:{vScale:i,_stacked:n},options:{base:o,minBarLength:r}}=e,a=o||0,s=e.getParsed(t),l=s._custom,c=Di(l);let h,p,d=s[i.axis],m=0,f=n?e.applyStack(i,s,n):d;f!==d&&(m=f-d,f=d),c&&(d=l.barStart,f=l.barEnd-l.barStart,0!==d&&U(d)!==U(l.barEnd)&&(m=0),m+=d);const g=u(o)||c?m:o;let _=i.getPixelForValue(g);if(h=e.chart.getDataVisibility(t)?i.getPixelForValue(m+f):_,p=h-_,Math.abs(p)<r&&(p=function(t,e,i){return 0!==t?U(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(p,i,a)*r,d===a&&(_-=p/2),h=_+p),_===i.getPixelForValue(a)){const t=U(p)*i.getLineWidthForValue(a)/2;_+=t,p-=t}return{size:p,base:_,head:h,center:h+p/2}}_calculateBarIndexPixels(t,e){const i=this,n=e.scale,o=i.options,r=o.skipNull,a=g(o.maxBarThickness,1/0);let s,l;if(e.grouped){const n=r?i._getStackCount(t):e.stackCount,c="flex"===o.barThickness?function(t,e,i,n){const o=e.pixels,r=o[t];let a=t>0?o[t-1]:null,s=t<o.length-1?o[t+1]:null;const l=i.categoryPercentage;null===a&&(a=r-(null===s?e.end-e.start:s-r)),null===s&&(s=r+r-a);const c=r-(r-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/n,ratio:i.barPercentage,start:c}}(t,e,o,n):function(t,e,i,n){const o=i.barThickness;let r,a;return u(o)?(r=e.min*i.categoryPercentage,a=i.barPercentage):(r=o*n,a=1),{chunk:r/n,ratio:a,start:e.pixels[t]-r/2}}(t,e,o,n),h=i._getStackIndex(i.index,i._cachedMeta.stack,r?t:void 0);s=c.start+c.chunk*h+c.chunk/2,l=Math.min(a,c.chunk*c.ratio)}else s=n.getPixelForValue(i.getParsed(t)[n.axis],t),l=Math.min(a,e.min*e.ratio);return{base:s-l/2,head:s+l/2,center:s,size:l}}draw(){const t=this,e=t._cachedMeta,i=e.vScale,n=e.data,o=n.length;let r=0;for(;r<o;++r)null!==t.getParsed(r)[i.axis]&&n[r].draw(t._ctx)}}Ri.id="bar",Ri.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},Ri.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class zi extends Si{initialize(){this.enableOptionSharing=!0,super.initialize()}parseObjectData(t,e,i,n){const{xScale:o,yScale:r}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=[];let c,h,u;for(c=i,h=i+n;c<h;++c)u=e[c],l.push({x:o.parse(S(u,a),c),y:r.parse(S(u,s),c),_custom:u&&u.r&&+u.r});return l}getMaxOverflow(){const{data:t,_parsed:e}=this._cachedMeta;let i=0;for(let n=t.length-1;n>=0;--n)i=Math.max(i,t[n].size()/2,e[n]._custom);return i>0&&i}getLabelAndValue(t){const e=this._cachedMeta,{xScale:i,yScale:n}=e,o=this.getParsed(t),r=i.getLabelForValue(o.x),a=n.getLabelForValue(o.y),s=o._custom;return{label:e.label,value:"("+r+", "+a+(s?", "+s:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,n){const o=this,r="reset"===n,{iScale:a,vScale:s}=o._cachedMeta,l=o.resolveDataElementOptions(e,n),c=o.getSharedOptions(l),h=o.includeOptions(n,c),u=a.axis,p=s.axis;for(let l=e;l<e+i;l++){const e=t[l],i=!r&&o.getParsed(l),c={},d=c[u]=r?a.getPixelForDecimal(.5):a.getPixelForValue(i[u]),m=c[p]=r?s.getBasePixel():s.getPixelForValue(i[p]);c.skip=isNaN(d)||isNaN(m),h&&(c.options=o.resolveDataElementOptions(l,e.active?"active":n),r&&(c.options.radius=0)),o.updateElement(e,l,c,n)}o.updateSharedOptions(c,n,l)}resolveDataElementOptions(t,e){const i=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return"active"!==e&&(n.radius=0),n.radius+=g(i&&i._custom,o),n}}zi.id="bubble",zi.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},zi.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class Fi extends Si{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,n=this._cachedMeta;let o,r;for(o=t,r=t+e;o<r;++o)n._parsed[o]=+i[o]}_getRotation(){return W(this.options.rotation-90)}_getCircumference(){return W(this.options.circumference)}_getRotationExtents(){let t=O,e=-O;const i=this;for(let n=0;n<i.chart.data.datasets.length;++n)if(i.chart.isDatasetVisible(n)){const o=i.chart.getDatasetMeta(n).controller,r=o._getRotation(),a=o._getCircumference();t=Math.min(t,r),e=Math.max(e,r+a)}return{rotation:t,circumference:e-t}}update(t){const e=this,i=e.chart,{chartArea:n}=i,o=e._cachedMeta,r=o.data,a=e.getMaxBorderWidth()+e.getMaxOffset(r)+e.options.spacing,s=Math.max((Math.min(n.width,n.height)-a)/2,0),l=Math.min((c=e.options.cutout,h=s,"string"==typeof c&&c.endsWith("%")?parseFloat(c)/100:c/h),1);var c,h;const u=e._getRingWeight(e.index),{circumference:p,rotation:d}=e._getRotationExtents(),{ratioX:m,ratioY:f,offsetX:g,offsetY:v}=function(t,e,i){let n=1,o=1,r=0,a=0;if(e<O){const s=t,l=s+e,c=Math.cos(s),h=Math.sin(s),u=Math.cos(l),p=Math.sin(l),d=(t,e,n)=>X(t,s,l,!0)?1:Math.max(e,e*i,n,n*i),m=(t,e,n)=>X(t,s,l,!0)?-1:Math.min(e,e*i,n,n*i),f=d(0,c,u),g=d(z,h,p),_=m(D,c,u),v=m(D+z,h,p);n=(f-_)/2,o=(g-v)/2,r=-(f+_)/2,a=-(g+v)/2}return{ratioX:n,ratioY:o,offsetX:r,offsetY:a}}(d,p,l),y=(n.width-a)/m,b=(n.height-a)/f,x=Math.max(Math.min(y,b)/2,0),k=_(e.options.radius,x),w=(k-Math.max(k*l,0))/e._getVisibleDatasetWeightTotal();e.offsetX=g*k,e.offsetY=v*k,o.total=e.calculateTotal(),e.outerRadius=k-w*e._getRingWeightOffset(e.index),e.innerRadius=Math.max(e.outerRadius-w*u,0),e.updateElements(r,0,r.length,t)}_circumference(t,e){const i=this,n=i.options,o=i._cachedMeta,r=i._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===o._parsed[t]||o.data[t].hidden?0:i.calculateCircumference(o._parsed[t]*r/O)}updateElements(t,e,i,n){const o=this,r="reset"===n,a=o.chart,s=a.chartArea,l=a.options.animation,c=(s.left+s.right)/2,h=(s.top+s.bottom)/2,u=r&&l.animateScale,p=u?0:o.innerRadius,d=u?0:o.outerRadius,m=o.resolveDataElementOptions(e,n),f=o.getSharedOptions(m),g=o.includeOptions(n,f);let _,v=o._getRotation();for(_=0;_<e;++_)v+=o._circumference(_,r);for(_=e;_<e+i;++_){const e=o._circumference(_,r),i=t[_],a={x:c+o.offsetX,y:h+o.offsetY,startAngle:v,endAngle:v+e,circumference:e,outerRadius:d,innerRadius:p};g&&(a.options=f||o.resolveDataElementOptions(_,i.active?"active":n)),v+=e,o.updateElement(i,_,a,n)}o.updateSharedOptions(f,n,m)}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,n=0;for(i=0;i<e.length;i++){const o=t._parsed[i];null===o||isNaN(o)||!this.chart.getDataVisibility(i)||e[i].hidden||(n+=Math.abs(o))}return n}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?O*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=ti(e._parsed[t],i.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){const e=this;let i=0;const n=e.chart;let o,r,a,s,l;if(!t)for(o=0,r=n.data.datasets.length;o<r;++o)if(n.isDatasetVisible(o)){a=n.getDatasetMeta(o),t=a.data,s=a.controller,s!==e&&s.configure();break}if(!t)return 0;for(o=0,r=t.length;o<r;++o)l=s.resolveDataElementOptions(o),"inner"!==l.borderAlign&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let e=0;for(let i=0,n=t.length;i<n;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(g(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Fi.id="doughnut",Fi.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},Fi.descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t},Fi.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(t){let e=t.label;const i=": "+t.formattedValue;return p(e)?(e=e.slice(),e[0]+=i):e+=i,e}}}}};class ji extends Si{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this,i=e._cachedMeta,{dataset:n,data:o=[],_dataset:r}=i,a=e.chart._animationsDisabled;let{start:s,count:l}=function(t,e,i){const n=e.length;let o=0,r=n;if(t._sorted){const{iScale:a,_parsed:s}=t,l=a.axis,{min:c,max:h,minDefined:u,maxDefined:p}=a.getUserBounds();u&&(o=Q(Math.min(de(s,a.axis,c).lo,i?n:de(e,l,a.getPixelForValue(c)).lo),0,n-1)),r=p?Q(Math.max(de(s,a.axis,h).hi+1,i?0:de(e,l,a.getPixelForValue(h)).hi+1),o,n)-o:n-o}return{start:o,count:r}}(i,o,a);e._drawStart=s,e._drawCount=l,function(t){const{xScale:e,yScale:i,_scaleRanges:n}=t,o={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!n)return t._scaleRanges=o,!0;const r=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==i.min||n.ymax!==i.max;return Object.assign(n,o),r}(i)&&(s=0,l=o.length),n._datasetIndex=e.index,n._decimated=!!r._decimated,n.points=o;const c=e.resolveDatasetElementOptions(t);e.options.showLine||(c.borderWidth=0),c.segment=e.options.segment,e.updateElement(n,void 0,{animated:!a,options:c},t),e.updateElements(o,s,l,t)}updateElements(t,e,i,n){const o=this,r="reset"===n,{iScale:a,vScale:s,_stacked:l}=o._cachedMeta,c=o.resolveDataElementOptions(e,n),h=o.getSharedOptions(c),p=o.includeOptions(n,h),d=a.axis,m=s.axis,f=o.options.spanGaps,g=H(f)?f:Number.POSITIVE_INFINITY,_=o.chart._animationsDisabled||r||"none"===n;let v=e>0&&o.getParsed(e-1);for(let c=e;c<e+i;++c){const e=t[c],i=o.getParsed(c),f=_?e:{},y=u(i[m]),b=f[d]=a.getPixelForValue(i[d],c),x=f[m]=r||y?s.getBasePixel():s.getPixelForValue(l?o.applyStack(s,i,l):i[m],c);f.skip=isNaN(b)||isNaN(x)||y,f.stop=c>0&&i[d]-v[d]>g,f.parsed=i,p&&(f.options=h||o.resolveDataElementOptions(c,e.active?"active":n)),_||o.updateElement(e,c,f,n),v=i}o.updateSharedOptions(h,n,c)}getMaxOverflow(){const t=this,e=t._cachedMeta,i=e.dataset,n=i.options&&i.options.borderWidth||0,o=e.data||[];if(!o.length)return n;const r=o[0].size(t.resolveDataElementOptions(0)),a=o[o.length-1].size(t.resolveDataElementOptions(o.length-1));return Math.max(n,r,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}ji.id="line",ji.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},ji.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Ni extends Si{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,n=i.data.labels||[],o=ti(e._parsed[t].r,i.options.locale);return{label:n[t]||"",value:o}}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}_updateRadius(){const t=this,e=t.chart,i=e.chartArea,n=e.options,o=Math.min(i.right-i.left,i.bottom-i.top),r=Math.max(o/2,0),a=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();t.outerRadius=r-a*t.index,t.innerRadius=t.outerRadius-a}updateElements(t,e,i,n){const o=this,r="reset"===n,a=o.chart,s=o.getDataset(),l=a.options.animation,c=o._cachedMeta.rScale,h=c.xCenter,u=c.yCenter,p=c.getIndexAngle(0)-.5*D;let d,m=p;const f=360/o.countVisibleElements();for(d=0;d<e;++d)m+=o._computeAngle(d,n,f);for(d=e;d<e+i;d++){const e=t[d];let i=m,g=m+o._computeAngle(d,n,f),_=a.getDataVisibility(d)?c.getDistanceFromCenterForValue(s.data[d]):0;m=g,r&&(l.animateScale&&(_=0),l.animateRotate&&(i=g=p));const v={x:h,y:u,innerRadius:0,outerRadius:_,startAngle:i,endAngle:g,options:o.resolveDataElementOptions(d,e.active?"active":n)};o.updateElement(e,d,v,n)}}countVisibleElements(){const t=this.getDataset(),e=this._cachedMeta;let i=0;return e.data.forEach(((e,n)=>{!isNaN(t.data[n])&&this.chart.getDataVisibility(n)&&i++})),i}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?W(this.resolveDataElementOptions(t,e).angle||i):0}}Ni.id="polarArea",Ni.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Ni.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:t=>t.chart.data.labels[t.dataIndex]+": "+t.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class Ui extends Fi{}Ui.id="pie",Ui.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Gi extends Si{getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}update(t){const e=this,i=e._cachedMeta,n=i.dataset,o=i.data||[],r=i.iScale.getLabels();if(n.points=o,"resize"!==t){const i=e.resolveDatasetElementOptions(t);e.options.showLine||(i.borderWidth=0);const a={_loop:!0,_fullLoop:r.length===o.length,options:i};e.updateElement(n,void 0,a,t)}e.updateElements(o,0,o.length,t)}updateElements(t,e,i,n){const o=this,r=o.getDataset(),a=o._cachedMeta.rScale,s="reset"===n;for(let l=e;l<e+i;l++){const e=t[l],i=o.resolveDataElementOptions(l,e.active?"active":n),c=a.getPointPositionForValue(l,r.data[l]),h=s?a.xCenter:c.x,u=s?a.yCenter:c.y,p={x:h,y:u,angle:c.angle,skip:isNaN(h)||isNaN(u),options:i};o.updateElement(e,l,p,n)}}}Gi.id="radar",Gi.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Gi.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Hi extends ji{}Hi.id="scatter",Hi.defaults={showLine:!1,fill:!1},Hi.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:t=>"("+t.label+", "+t.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};function Zi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Vi{constructor(t){this.options=t||{}}formats(){return Zi()}parse(t,e){return Zi()}format(t,e){return Zi()}add(t,e,i){return Zi()}diff(t,e,i){return Zi()}startOf(t,e,i){return Zi()}endOf(t,e){return Zi()}}Vi.override=function(t){Object.assign(Vi.prototype,t)};var Wi={_date:Vi};function qi(t,e){return"native"in t?{x:t.x,y:t.y}:Ze(t,e)}function $i(t,e,i,n){const{controller:o,data:r,_sorted:a}=t,s=o._cachedMeta.iScale;if(s&&e===s.axis&&a&&r.length){const t=s._reversePixels?me:de;if(!n)return t(r,e,i);if(o._sharedOptions){const n=r[0],o="function"==typeof n.getRange&&n.getRange(e);if(o){const n=t(r,e,i-o),a=t(r,e,i+o);return{lo:n.lo,hi:a.hi}}}}return{lo:0,hi:r.length-1}}function Yi(t,e,i,n,o){const r=t.getSortedVisibleDatasetMetas(),a=i[e];for(let t=0,i=r.length;t<i;++t){const{index:i,data:s}=r[t],{lo:l,hi:c}=$i(r[t],e,a,o);for(let t=l;t<=c;++t){const e=s[t];e.skip||n(e,i,t)}}}function Ki(t,e,i,n){const o=[];if(!Yt(e,t.chartArea,t._minPadding))return o;return Yi(t,i,e,(function(t,i,r){t.inRange(e.x,e.y,n)&&o.push({element:t,datasetIndex:i,index:r})}),!0),o}function Ji(t,e,i,n,o){const r=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,n){const o=e?Math.abs(t.x-n.x):0,r=i?Math.abs(t.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(r,2))}}(i);let a=Number.POSITIVE_INFINITY,s=[];if(!Yt(e,t.chartArea,t._minPadding))return s;return Yi(t,i,e,(function(i,l,c){if(n&&!i.inRange(e.x,e.y,o))return;const h=i.getCenterPoint(o);if(!Yt(h,t.chartArea,t._minPadding)&&!i.inRange(e.x,e.y,o))return;const u=r(e,h);u<a?(s=[{element:i,datasetIndex:l,index:c}],a=u):u===a&&s.push({element:i,datasetIndex:l,index:c})})),s}function Xi(t,e,i,n){const o=qi(e,t),r=[],a=i.axis,s="x"===a?"inXRange":"inYRange";let l=!1;return function(t,e){const i=t.getSortedVisibleDatasetMetas();let n,o,r;for(let t=0,a=i.length;t<a;++t){({index:n,data:o}=i[t]);for(let t=0,i=o.length;t<i;++t)r=o[t],r.skip||e(r,n,t)}}(t,((t,e,i)=>{t[s](o[a],n)&&r.push({element:t,datasetIndex:e,index:i}),t.inRange(o.x,o.y,n)&&(l=!0)})),i.intersect&&!l?[]:r}var Qi={modes:{index(t,e,i,n){const o=qi(e,t),r=i.axis||"x",a=i.intersect?Ki(t,o,r,n):Ji(t,o,r,!1,n),s=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=a[0].index,i=t.data[e];i&&!i.skip&&s.push({element:i,datasetIndex:t.index,index:e})})),s):[]},dataset(t,e,i,n){const o=qi(e,t),r=i.axis||"xy";let a=i.intersect?Ki(t,o,r,n):Ji(t,o,r,!1,n);if(a.length>0){const e=a[0].datasetIndex,i=t.getDatasetMeta(e).data;a=[];for(let t=0;t<i.length;++t)a.push({element:i[t],datasetIndex:e,index:t})}return a},point:(t,e,i,n)=>Ki(t,qi(e,t),i.axis||"xy",n),nearest:(t,e,i,n)=>Ji(t,qi(e,t),i.axis||"xy",i.intersect,n),x:(t,e,i,n)=>(i.axis="x",Xi(t,e,i,n)),y:(t,e,i,n)=>(i.axis="y",Xi(t,e,i,n))}};const tn=["left","top","right","bottom"];function en(t,e){return t.filter((t=>t.pos===e))}function nn(t,e){return t.filter((t=>-1===tn.indexOf(t.pos)&&t.box.axis===e))}function on(t,e){return t.sort(((t,i)=>{const n=e?i:t,o=e?t:i;return n.weight===o.weight?n.index-o.index:n.weight-o.weight}))}function rn(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:n,stackWeight:o}=i;if(!t||!tn.includes(n))continue;const r=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return e}(t),{vBoxMaxWidth:n,hBoxMaxHeight:o}=e;let r,a,s;for(r=0,a=t.length;r<a;++r){s=t[r];const{fullSize:a}=s.box,l=i[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*n:a&&e.availableWidth,s.height=o):(s.width=n,s.height=c?c*o:a&&e.availableHeight)}return i}function an(t,e,i,n){return Math.max(t[i],e[i])+Math.max(t[n],e[n])}function sn(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ln(t,e,i,n){const{pos:o,box:r}=i,a=t.maxPadding;if(!d(o)){i.size&&(t[o]-=i.size);const e=n[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?r.height:r.width),i.size=e.size/e.count,t[o]+=i.size}r.getPadding&&sn(a,r.getPadding());const s=Math.max(0,e.outerWidth-an(a,t,"left","right")),l=Math.max(0,e.outerHeight-an(a,t,"top","bottom")),c=s!==t.w,h=l!==t.h;return t.w=s,t.h=l,i.horizontal?{same:c,other:h}:{same:h,other:c}}function cn(t,e){const i=e.maxPadding;function n(t){const n={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{n[t]=Math.max(e[t],i[t])})),n}return n(t?["left","right"]:["top","bottom"])}function hn(t,e,i,n){const o=[];let r,a,s,l,c,h;for(r=0,a=t.length,c=0;r<a;++r){s=t[r],l=s.box,l.update(s.width||e.w,s.height||e.h,cn(s.horizontal,e));const{same:a,other:u}=ln(e,i,s,n);c|=a&&o.length,h=h||u,l.fullSize||o.push(s)}return c&&hn(o,e,i,n)||h}function un(t,e,i,n,o){t.top=i,t.left=e,t.right=e+n,t.bottom=i+o,t.width=n,t.height=o}function pn(t,e,i,n){const o=i.padding;let{x:r,y:a}=e;for(const s of t){const t=s.box,l=n[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const n=e.w*c,r=l.size||t.height;A(l.start)&&(a=l.start),t.fullSize?un(t,o.left,a,i.outerWidth-o.right-o.left,r):un(t,e.left+l.placed,a,n,r),l.start=a,l.placed+=n,a=t.bottom}else{const n=e.h*c,a=l.size||t.width;A(l.start)&&(r=l.start),t.fullSize?un(t,r,o.top,a,i.outerHeight-o.bottom-o.top):un(t,r,e.top+l.placed,a,n),l.start=r,l.placed+=n,r=t.right}}e.x=r,e.y=a}Ht.set("layout",{padding:{top:0,right:0,bottom:0,left:0}});var dn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,n){if(!t)return;const o=ce(t.options.layout.padding),r=Math.max(e-o.width,0),a=Math.max(i-o.height,0),s=function(t){const e=function(t){const e=[];let i,n,o,r,a,s;for(i=0,n=(t||[]).length;i<n;++i)o=t[i],({position:r,options:{stack:a,stackWeight:s=1}}=o),e.push({index:i,box:o,pos:r,horizontal:o.isHorizontal(),weight:o.weight,stack:a&&r+a,stackWeight:s});return e}(t),i=on(e.filter((t=>t.box.fullSize)),!0),n=on(en(e,"left"),!0),o=on(en(e,"right")),r=on(en(e,"top"),!0),a=on(en(e,"bottom")),s=nn(e,"x"),l=nn(e,"y");return{fullSize:i,leftAndTop:n.concat(r),rightAndBottom:o.concat(l).concat(a).concat(s),chartArea:en(e,"chartArea"),vertical:n.concat(o).concat(l),horizontal:r.concat(a).concat(s)}}(t.boxes),l=s.vertical,c=s.horizontal;y(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const h=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,u=Object.freeze({outerWidth:e,outerHeight:i,padding:o,availableWidth:r,availableHeight:a,vBoxMaxWidth:r/2/h,hBoxMaxHeight:a/2}),p=Object.assign({},o);sn(p,ce(n));const d=Object.assign({maxPadding:p,w:r,h:a,x:o.left,y:o.top},o),m=rn(l.concat(c),u);hn(s.fullSize,d,u,m),hn(l,d,u,m),hn(c,d,u,m)&&hn(l,d,u,m),function(t){const e=t.maxPadding;function i(i){const n=Math.max(e[i]-t[i],0);return t[i]+=n,n}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(d),pn(s.leftAndTop,d,u,m),d.x+=d.w,d.y+=d.h,pn(s.rightAndBottom,d,u,m),t.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},y(s.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(d.w,d.h)}))}};class mn{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,n){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):i)}}isAttached(t){return!0}}class fn extends mn{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}}const gn={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_n=t=>null===t||""===t;const vn=!!$e&&{passive:!0};function yn(t,e,i){t.canvas.removeEventListener(e,i,vn)}function bn(t,e,i){const n=t.canvas,o=n&&je(n)||n,r=new MutationObserver((t=>{const e=je(o);t.forEach((t=>{for(let n=0;n<t.addedNodes.length;n++){const r=t.addedNodes[n];r!==o&&r!==e||i(t.target)}}))}));return r.observe(document,{childList:!0,subtree:!0}),r}function xn(t,e,i){const n=t.canvas,o=n&&je(n);if(!o)return;const r=new MutationObserver((t=>{t.forEach((t=>{for(let e=0;e<t.removedNodes.length;e++)if(t.removedNodes[e]===n){i();break}}))}));return r.observe(o,{childList:!0}),r}const kn=new Map;let wn=0;function Ln(){const t=window.devicePixelRatio;t!==wn&&(wn=t,kn.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function Mn(t,e,i){const n=t.canvas,o=n&&je(n);if(!o)return;const r=a(((t,e)=>{const n=o.clientWidth;i(t,e),n<o.clientWidth&&i()}),window),s=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,n=e.contentRect.height;0===i&&0===n||r(i,n)}));return s.observe(o),function(t,e){kn.size||window.addEventListener("resize",Ln),kn.set(t,e)}(t,r),s}function Cn(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){kn.delete(t),kn.size||window.removeEventListener("resize",Ln)}(t)}function Pn(t,e,i){const n=t.canvas,o=a((e=>{null!==t.ctx&&i(function(t,e){const i=gn[t.type]||t.type,{x:n,y:o}=Ze(t,e);return{type:i,chart:e,native:t,x:void 0!==n?n:null,y:void 0!==o?o:null}}(e,t))}),t,(t=>{const e=t[0];return[e,e.offsetX,e.offsetY]}));return function(t,e,i){t.addEventListener(e,i,vn)}(n,e,o),o}class Sn extends mn{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,n=t.getAttribute("height"),o=t.getAttribute("width");if(t.$chartjs={initial:{height:n,width:o,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",_n(o)){const e=Ye(t,"width");void 0!==e&&(t.width=e)}if(_n(n))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Ye(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e.$chartjs)return!1;const i=e.$chartjs.initial;["height","width"].forEach((t=>{const n=i[t];u(n)?e.removeAttribute(t):e.setAttribute(t,n)}));const n=i.style||{};return Object.keys(n).forEach((t=>{e.style[t]=n[t]})),e.width=e.width,delete e.$chartjs,!0}addEventListener(t,e,i){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),o={attach:bn,detach:xn,resize:Mn}[e]||Pn;n[e]=o(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),n=i[e];if(!n)return;({attach:Cn,detach:Cn,resize:Cn}[e]||yn)(t,e,n),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,n){return We(t,e,i,n)}isAttached(t){const e=je(t);return!(!e||!e.isConnected)}}class Tn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return H(this.x)&&H(this.y)}getProps(t,e){const i=this,n=this.$animations;if(!e||!n)return i;const o={};return t.forEach((t=>{o[t]=n[t]&&n[t].active()?n[t]._to:i[t]})),o}}Tn.defaults={},Tn.defaultRoutes=void 0;const An={values:t=>p(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const n=this.chart.options.locale;let o,r=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(o="scientific"),r=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const a=N(Math.abs(r)),s=Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:o,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),ti(t,n,l)},logarithmic(t,e,i){if(0===t)return"0";const n=t/Math.pow(10,Math.floor(N(t)));return 1===n||2===n||5===n?An.numeric.call(this,t,e,i):""}};var En={formatters:An};function Dn(t,e){const i=t.options.ticks,n=i.maxTicksLimit||function(t){const e=t.options.offset,i=t._tickSize(),n=t._length/i+(e?0:1),o=t._maxLength/i;return Math.floor(Math.min(n,o))}(t),o=i.major.enabled?function(t){const e=[];let i,n;for(i=0,n=t.length;i<n;i++)t[i].major&&e.push(i);return e}(e):[],r=o.length,a=o[0],s=o[r-1],l=[];if(r>n)return function(t,e,i,n){let o,r=0,a=i[0];for(n=Math.ceil(n),o=0;o<t.length;o++)o===a&&(e.push(t[o]),r++,a=i[r*n])}(e,l,o,r/n),l;const c=function(t,e,i){const n=function(t){const e=t.length;let i,n;if(e<2)return!1;for(n=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==n)return!1;return n}(t),o=e.length/i;if(!n)return Math.max(o,1);const r=function(t){const e=[],i=Math.sqrt(t);let n;for(n=1;n<i;n++)t%n==0&&(e.push(n),e.push(t/n));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}(n);for(let t=0,e=r.length-1;t<e;t++){const e=r[t];if(e>o)return e}return Math.max(o,1)}(o,e,n);if(r>0){let t,i;const n=r>1?Math.round((s-a)/(r-1)):null;for(On(e,l,c,u(n)?0:a-n,a),t=0,i=r-1;t<i;t++)On(e,l,c,o[t],o[t+1]);return On(e,l,c,s,u(n)?e.length:s+n),l}return On(e,l,c),l}function On(t,e,i,n,o){const r=g(n,0),a=Math.min(g(o,t.length),t.length);let s,l,c,h=0;for(i=Math.ceil(i),o&&(s=o-n,i=s/Math.floor(s/i)),c=r;c<0;)h++,c=Math.round(r+h*i);for(l=Math.max(r,0);l<a;l++)l===c&&(e.push(t[l]),h++,c=Math.round(r+h*i))}Ht.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:En.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Ht.route("scale.ticks","color","","color"),Ht.route("scale.grid","color","","borderColor"),Ht.route("scale.grid","borderColor","","borderColor"),Ht.route("scale.title","color","","color"),Ht.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),Ht.describe("scales",{_fallback:"scale"}),Ht.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const In=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i;function Bn(t,e){const i=[],n=t.length/e,o=t.length;let r=0;for(;r<o;r+=n)i.push(t[Math.floor(r)]);return i}function Rn(t,e,i){const n=t.ticks.length,o=Math.min(e,n-1),r=t._startPixel,a=t._endPixel,s=1e-6;let l,c=t.getPixelForTick(o);if(!(i&&(l=1===n?Math.max(c-r,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(o-1))/2,c+=o<e?l:-l,c<r-s||c>a+s)))return c}function zn(t){return t.drawTicks?t.tickLength:0}function Fn(t,e){if(!t.display)return 0;const i=he(t.font,e),n=ce(t.padding);return(p(t.text)?t.text.length:1)*i.lineHeight+n.height}function jn(t,e,i){let n=s(t);return(i&&"right"!==e||!i&&"right"===e)&&(n=(t=>"left"===t?"right":"right"===t?"left":t)(n)),n}class Nn extends Tn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){const e=this;e.options=t.setContext(e.getContext()),e.axis=t.axis,e._userMin=e.parse(t.min),e._userMax=e.parse(t.max),e._suggestedMin=e.parse(t.suggestedMin),e._suggestedMax=e.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:n}=this;return t=f(t,Number.POSITIVE_INFINITY),e=f(e,Number.NEGATIVE_INFINITY),i=f(i,Number.POSITIVE_INFINITY),n=f(n,Number.NEGATIVE_INFINITY),{min:f(t,i),max:f(e,n),minDefined:m(t),maxDefined:m(e)}}getMinMax(t){const e=this;let i,{min:n,max:o,minDefined:r,maxDefined:a}=e.getUserBounds();if(r&&a)return{min:n,max:o};const s=e.getMatchingVisibleMetas();for(let l=0,c=s.length;l<c;++l)i=s[l].controller.getMinMax(e,t),r||(n=Math.min(n,i.min)),a||(o=Math.max(o,i.max));return{min:f(n,f(o,n)),max:f(o,f(n,o))}}getPadding(){const t=this;return{left:t.paddingLeft||0,top:t.paddingTop||0,right:t.paddingRight||0,bottom:t.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){v(this.options.beforeUpdate,[this])}update(t,e,i){const n=this,o=n.options.ticks,r=o.sampleSize;n.beforeUpdate(),n.maxWidth=t,n.maxHeight=e,n._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),n.ticks=null,n._labelSizes=null,n._gridLineItems=null,n._labelItems=null,n.beforeSetDimensions(),n.setDimensions(),n.afterSetDimensions(),n._maxLength=n.isHorizontal()?n.width+i.left+i.right:n.height+i.top+i.bottom,n._dataLimitsCached||(n.beforeDataLimits(),n.determineDataLimits(),n.afterDataLimits(),n._range=function(t,e){const{min:i,max:n}=t;return{min:i-Math.abs(_(e,i)),max:n+_(e,n)}}(n,n.options.grace),n._dataLimitsCached=!0),n.beforeBuildTicks(),n.ticks=n.buildTicks()||[],n.afterBuildTicks();const a=r<n.ticks.length;n._convertTicksToLabels(a?Bn(n.ticks,r):n.ticks),n.configure(),n.beforeCalculateLabelRotation(),n.calculateLabelRotation(),n.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(n.ticks=Dn(n,n.ticks),n._labelSizes=null),a&&n._convertTicksToLabels(n.ticks),n.beforeFit(),n.fit(),n.afterFit(),n.afterUpdate()}configure(){const t=this;let e,i,n=t.options.reverse;t.isHorizontal()?(e=t.left,i=t.right):(e=t.top,i=t.bottom,n=!n),t._startPixel=e,t._endPixel=i,t._reversePixels=n,t._length=i-e,t._alignToPixels=t.options.alignToPixels}afterUpdate(){v(this.options.afterUpdate,[this])}beforeSetDimensions(){v(this.options.beforeSetDimensions,[this])}setDimensions(){const t=this;t.isHorizontal()?(t.width=t.maxWidth,t.left=0,t.right=t.width):(t.height=t.maxHeight,t.top=0,t.bottom=t.height),t.paddingLeft=0,t.paddingTop=0,t.paddingRight=0,t.paddingBottom=0}afterSetDimensions(){v(this.options.afterSetDimensions,[this])}_callHooks(t){const e=this;e.chart.notifyPlugins(t,e.getContext()),v(e.options[t],[e])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){v(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this,i=e.options.ticks;let n,o,r;for(n=0,o=t.length;n<o;n++)r=t[n],r.label=v(i.callback,[r.value,n,t],e)}afterTickToLabelConversion(){v(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){v(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this,e=t.options,i=e.ticks,n=t.ticks.length,o=i.minRotation||0,r=i.maxRotation;let a,s,l,c=o;if(!t._isVisible()||!i.display||o>=r||n<=1||!t.isHorizontal())return void(t.labelRotation=o);const h=t._getLabelSizes(),u=h.widest.width,p=h.highest.height,d=Q(t.chart.width-u,0,t.maxWidth);a=e.offset?t.maxWidth/n:d/(n-1),u+6>a&&(a=d/(n-(e.offset?.5:1)),s=t.maxHeight-zn(e.grid)-i.padding-Fn(e.title,t.chart.options.font),l=Math.sqrt(u*u+p*p),c=q(Math.min(Math.asin(Q((h.highest.height+6)/a,-1,1)),Math.asin(Q(s/l,-1,1))-Math.asin(Q(p/l,-1,1)))),c=Math.max(o,Math.min(r,c))),t.labelRotation=c}afterCalculateLabelRotation(){v(this.options.afterCalculateLabelRotation,[this])}beforeFit(){v(this.options.beforeFit,[this])}fit(){const t=this,e={width:0,height:0},{chart:i,options:{ticks:n,title:o,grid:r}}=t,a=t._isVisible(),s=t.isHorizontal();if(a){const a=Fn(o,i.options.font);if(s?(e.width=t.maxWidth,e.height=zn(r)+a):(e.height=t.maxHeight,e.width=zn(r)+a),n.display&&t.ticks.length){const{first:i,last:o,widest:r,highest:a}=t._getLabelSizes(),l=2*n.padding,c=W(t.labelRotation),h=Math.cos(c),u=Math.sin(c);if(s){const i=n.mirror?0:u*r.width+h*a.height;e.height=Math.min(t.maxHeight,e.height+i+l)}else{const i=n.mirror?0:h*r.width+u*a.height;e.width=Math.min(t.maxWidth,e.width+i+l)}t._calculatePadding(i,o,u,h)}}t._handleMargins(),s?(t.width=t._length=i.width-t._margins.left-t._margins.right,t.height=e.height):(t.width=e.width,t.height=t._length=i.height-t._margins.top-t._margins.bottom)}_calculatePadding(t,e,i,n){const o=this,{ticks:{align:r,padding:a},position:s}=o.options,l=0!==o.labelRotation,c="top"!==s&&"x"===o.axis;if(o.isHorizontal()){const s=o.getPixelForTick(0)-o.left,h=o.right-o.getPixelForTick(o.ticks.length-1);let u=0,p=0;l?c?(u=n*t.width,p=i*e.height):(u=i*t.height,p=n*e.width):"start"===r?p=e.width:"end"===r?u=t.width:(u=t.width/2,p=e.width/2),o.paddingLeft=Math.max((u-s+a)*o.width/(o.width-s),0),o.paddingRight=Math.max((p-h+a)*o.width/(o.width-h),0)}else{let i=e.height/2,n=t.height/2;"start"===r?(i=0,n=t.height):"end"===r&&(i=e.height,n=0),o.paddingTop=i+a,o.paddingBottom=n+a}}_handleMargins(){const t=this;t._margins&&(t._margins.left=Math.max(t.paddingLeft,t._margins.left),t._margins.top=Math.max(t.paddingTop,t._margins.top),t._margins.right=Math.max(t.paddingRight,t._margins.right),t._margins.bottom=Math.max(t.paddingBottom,t._margins.bottom))}afterFit(){v(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){const e=this;let i,n;for(e.beforeTickToLabelConversion(),e.generateTickLabels(t),i=0,n=t.length;i<n;i++)u(t[i].label)&&(t.splice(i,1),n--,i--);e.afterTickToLabelConversion()}_getLabelSizes(){const t=this;let e=t._labelSizes;if(!e){const i=t.options.ticks.sampleSize;let n=t.ticks;i<n.length&&(n=Bn(n,i)),t._labelSizes=e=t._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(t,e){const{ctx:i,_longestTextCache:n}=this,o=[],r=[];let a,s,l,c,h,d,m,f,g,_,v,b=0,x=0;for(a=0;a<e;++a){if(c=t[a].label,h=this._resolveTickFontOptions(a),i.font=d=h.string,m=n[d]=n[d]||{data:{},gc:[]},f=h.lineHeight,g=_=0,u(c)||p(c)){if(p(c))for(s=0,l=c.length;s<l;++s)v=c[s],u(v)||p(v)||(g=Zt(i,m.data,m.gc,g,v),_+=f)}else g=Zt(i,m.data,m.gc,g,c),_=f;o.push(g),r.push(_),b=Math.max(g,b),x=Math.max(_,x)}!function(t,e){y(t,(t=>{const i=t.gc,n=i.length/2;let o;if(n>e){for(o=0;o<n;++o)delete t.data[i[o]];i.splice(0,n)}}))}(n,e);const k=o.indexOf(b),w=r.indexOf(x),L=t=>({width:o[t]||0,height:r[t]||0});return{first:L(0),last:L(e-1),widest:L(k),highest:L(w),widths:o,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){const e=this;e._reversePixels&&(t=1-t);const i=e._startPixel+t*e._length;return Q(e._alignToPixels?Wt(e.chart,i,0):i,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this,i=e.ticks||[];if(t>=0&&t<i.length){const n=i[t];return n.$context||(n.$context=function(t,e,i){return Object.assign(Object.create(t),{tick:i,index:e,type:"tick"})}(e.getContext(),t,n))}return e.$context||(e.$context=(n=e.chart.getContext(),o=e,Object.assign(Object.create(n),{scale:o,type:"scale"})));var n,o}_tickSize(){const t=this,e=t.options.ticks,i=W(t.labelRotation),n=Math.abs(Math.cos(i)),o=Math.abs(Math.sin(i)),r=t._getLabelSizes(),a=e.autoSkipPadding||0,s=r?r.widest.width+a:0,l=r?r.highest.height+a:0;return t.isHorizontal()?l*n>s*o?s/n:l/o:l*o<s*n?l/n:s/o}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this,i=e.axis,n=e.chart,o=e.options,{grid:r,position:a}=o,s=r.offset,l=e.isHorizontal(),c=e.ticks.length+(s?1:0),h=zn(r),u=[],p=r.setContext(e.getContext()),m=p.drawBorder?p.borderWidth:0,f=m/2,_=function(t){return Wt(n,t,m)};let v,y,b,x,k,w,L,M,C,P,S,T;if("top"===a)v=_(e.bottom),w=e.bottom-h,M=v-f,P=_(t.top)+f,T=t.bottom;else if("bottom"===a)v=_(e.top),P=t.top,T=_(t.bottom)-f,w=v+f,M=e.top+h;else if("left"===a)v=_(e.right),k=e.right-h,L=v-f,C=_(t.left)+f,S=t.right;else if("right"===a)v=_(e.left),C=t.left,S=_(t.right)-f,k=v+f,L=e.left+h;else if("x"===i){if("center"===a)v=_((t.top+t.bottom)/2+.5);else if(d(a)){const t=Object.keys(a)[0],i=a[t];v=_(e.chart.scales[t].getPixelForValue(i))}P=t.top,T=t.bottom,w=v+f,M=w+h}else if("y"===i){if("center"===a)v=_((t.left+t.right)/2);else if(d(a)){const t=Object.keys(a)[0],i=a[t];v=_(e.chart.scales[t].getPixelForValue(i))}k=v-f,L=k-h,C=t.left,S=t.right}const A=g(o.ticks.maxTicksLimit,c),E=Math.max(1,Math.ceil(c/A));for(y=0;y<c;y+=E){const t=r.setContext(e.getContext(y)),i=t.lineWidth,o=t.color,a=r.borderDash||[],c=t.borderDashOffset,h=t.tickWidth,p=t.tickColor,d=t.tickBorderDash||[],m=t.tickBorderDashOffset;b=Rn(e,y,s),void 0!==b&&(x=Wt(n,b,i),l?k=L=C=S=x:w=M=P=T=x,u.push({tx1:k,ty1:w,tx2:L,ty2:M,x1:C,y1:P,x2:S,y2:T,width:i,color:o,borderDash:a,borderDashOffset:c,tickWidth:h,tickColor:p,tickBorderDash:d,tickBorderDashOffset:m}))}return e._ticksLength=c,e._borderValue=v,u}_computeLabelItems(t){const e=this,i=e.axis,n=e.options,{position:o,ticks:r}=n,a=e.isHorizontal(),s=e.ticks,{align:l,crossAlign:c,padding:h,mirror:u}=r,m=zn(n.grid),f=m+h,g=u?-h:f,_=-W(e.labelRotation),v=[];let y,b,x,k,w,L,M,C,P,S,T,A,E="middle";if("top"===o)L=e.bottom-g,M=e._getXAxisLabelAlignment();else if("bottom"===o)L=e.top+g,M=e._getXAxisLabelAlignment();else if("left"===o){const t=e._getYAxisLabelAlignment(m);M=t.textAlign,w=t.x}else if("right"===o){const t=e._getYAxisLabelAlignment(m);M=t.textAlign,w=t.x}else if("x"===i){if("center"===o)L=(t.top+t.bottom)/2+f;else if(d(o)){const t=Object.keys(o)[0],i=o[t];L=e.chart.scales[t].getPixelForValue(i)+f}M=e._getXAxisLabelAlignment()}else if("y"===i){if("center"===o)w=(t.left+t.right)/2-f;else if(d(o)){const t=Object.keys(o)[0],i=o[t];w=e.chart.scales[t].getPixelForValue(i)}M=e._getYAxisLabelAlignment(m).textAlign}"y"===i&&("start"===l?E="top":"end"===l&&(E="bottom"));const D=e._getLabelSizes();for(y=0,b=s.length;y<b;++y){x=s[y],k=x.label;const t=r.setContext(e.getContext(y));C=e.getPixelForTick(y)+r.labelOffset,P=e._resolveTickFontOptions(y),S=P.lineHeight,T=p(k)?k.length:1;const i=T/2,n=t.color,l=t.textStrokeColor,h=t.textStrokeWidth;let d;if(a?(w=C,A="top"===o?"near"===c||0!==_?-T*S+S/2:"center"===c?-D.highest.height/2-i*S+S:-D.highest.height+S/2:"near"===c||0!==_?S/2:"center"===c?D.highest.height/2-i*S:D.highest.height-T*S,u&&(A*=-1)):(L=C,A=(1-T)*S/2),t.showLabelBackdrop){const e=ce(t.backdropPadding),i=D.heights[y],n=D.widths[y];let o=L+A-e.top,r=w-e.left;switch(E){case"middle":o-=i/2;break;case"bottom":o-=i}switch(M){case"center":r-=n/2;break;case"right":r-=n}d={left:r,top:o,width:n+e.width,height:i+e.height,color:t.backdropColor}}v.push({rotation:_,label:k,font:P,color:n,strokeColor:l,strokeWidth:h,textOffset:A,textAlign:M,textBaseline:E,translation:[w,L],backdrop:d})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-W(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align&&(i="right"),i}_getYAxisLabelAlignment(t){const e=this,{position:i,ticks:{crossAlign:n,mirror:o,padding:r}}=e.options,a=t+r,s=e._getLabelSizes().widest.width;let l,c;return"left"===i?o?(c=e.right+r,"near"===n?l="left":"center"===n?(l="center",c+=s/2):(l="right",c+=s)):(c=e.right-a,"near"===n?l="right":"center"===n?(l="center",c-=s/2):(l="left",c=e.left)):"right"===i?o?(c=e.left+r,"near"===n?l="right":"center"===n?(l="center",c-=s/2):(l="left",c-=s)):(c=e.left+a,"near"===n?l="left":"center"===n?(l="center",c+=s/2):(l="right",c=e.right)):l="right",{textAlign:l,x:c}}_computeLabelArea(){const t=this;if(t.options.ticks.mirror)return;const e=t.chart,i=t.options.position;return"left"===i||"right"===i?{top:0,left:t.left,bottom:e.height,right:t.right}:"top"===i||"bottom"===i?{top:t.top,left:0,bottom:t.bottom,right:e.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:n,width:o,height:r}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,n,o,r),t.restore())}getLineWidthForValue(t){const e=this,i=e.options.grid;if(!e._isVisible()||!i.display)return 0;const n=e.ticks.findIndex((e=>e.value===t));if(n>=0){return i.setContext(e.getContext(n)).lineWidth}return 0}drawGrid(t){const e=this,i=e.options.grid,n=e.ctx,o=e._gridLineItems||(e._gridLineItems=e._computeGridLineItems(t));let r,a;const s=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(i.display)for(r=0,a=o.length;r<a;++r){const t=o[r];i.drawOnChartArea&&s({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),i.drawTicks&&s({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const t=this,{chart:e,ctx:i,options:{grid:n}}=t,o=n.setContext(t.getContext()),r=n.drawBorder?o.borderWidth:0;if(!r)return;const a=n.setContext(t.getContext(0)).lineWidth,s=t._borderValue;let l,c,h,u;t.isHorizontal()?(l=Wt(e,t.left,r)-r/2,c=Wt(e,t.right,a)+a/2,h=u=s):(h=Wt(e,t.top,r)-r/2,u=Wt(e,t.bottom,a)+a/2,l=c=s),i.save(),i.lineWidth=o.borderWidth,i.strokeStyle=o.borderColor,i.beginPath(),i.moveTo(l,h),i.lineTo(c,u),i.stroke(),i.restore()}drawLabels(t){const e=this;if(!e.options.ticks.display)return;const i=e.ctx,n=e._computeLabelArea();n&&Kt(i,n);const o=e._labelItems||(e._labelItems=e._computeLabelItems(t));let r,a;for(r=0,a=o.length;r<a;++r){const t=o[r],e=t.font,n=t.label;t.backdrop&&(i.fillStyle=t.backdrop.color,i.fillRect(t.backdrop.left,t.backdrop.top,t.backdrop.width,t.backdrop.height)),te(i,n,0,t.textOffset,e,t)}n&&Jt(i)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:n}}=this;if(!i.display)return;const o=he(i.font),r=ce(i.padding),a=i.align;let s=o.lineHeight/2;"bottom"===e||"center"===e||d(e)?(s+=r.bottom,p(i.text)&&(s+=o.lineHeight*(i.text.length-1))):s+=r.top;const{titleX:c,titleY:h,maxWidth:u,rotation:m}=function(t,e,i,n){const{top:o,left:r,bottom:a,right:s,chart:c}=t,{chartArea:h,scales:u}=c;let p,m,f,g=0;const _=a-o,v=s-r;if(t.isHorizontal()){if(m=l(n,r,s),d(i)){const t=Object.keys(i)[0],n=i[t];f=u[t].getPixelForValue(n)+_-e}else f="center"===i?(h.bottom+h.top)/2+_-e:In(t,i,e);p=s-r}else{if(d(i)){const t=Object.keys(i)[0],n=i[t];m=u[t].getPixelForValue(n)-v+e}else m="center"===i?(h.left+h.right)/2-v+e:In(t,i,e);f=l(n,a,o),g="left"===i?-z:z}return{titleX:m,titleY:f,maxWidth:p,rotation:g}}(this,s,e,a);te(t,i.text,0,0,o,{color:i.color,maxWidth:u,rotation:m,textAlign:jn(a,e,n),textBaseline:"middle",translation:[c,h]})}draw(t){const e=this;e._isVisible()&&(e.drawBackground(),e.drawGrid(t),e.drawBorder(),e.drawTitle(),e.drawLabels(t))}_layers(){const t=this,e=t.options,i=e.ticks&&e.ticks.z||0,n=g(e.grid&&e.grid.z,-1);return t._isVisible()&&t.draw===Nn.prototype.draw?[{z:n,draw(e){t.drawBackground(),t.drawGrid(e),t.drawTitle()}},{z:n+1,draw(){t.drawBorder()}},{z:i,draw(e){t.drawLabels(e)}}]:[{z:i,draw(e){t.draw(e)}}]}getMatchingVisibleMetas(t){const e=this,i=e.chart.getSortedVisibleDatasetMetas(),n=e.axis+"AxisID",o=[];let r,a;for(r=0,a=i.length;r<a;++r){const a=i[r];a[n]!==e.id||t&&a.type!==t||o.push(a)}return o}_resolveTickFontOptions(t){return he(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this,e=t._resolveTickFontOptions(0).lineHeight;return(t.isHorizontal()?t.width:t.height)/e}}class Un{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=this,i=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(i)&&(n=e.register(i));const o=e.items,r=t.id,a=e.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in o||(o[r]=t,function(t,e,i){const n=L(Object.create(null),[i?Ht.get(i):{},Ht.get(e),t.defaults]);Ht.set(e,n),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const n=i.split("."),o=n.pop(),r=[t].concat(n).join("."),a=e[i].split("."),s=a.pop(),l=a.join(".");Ht.route(r,o,l,s)}))}(e,t.defaultRoutes);t.descriptors&&Ht.describe(e,t.descriptors)}(t,a,n),e.override&&Ht.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,n=this.scope;i in e&&delete e[i],n&&i in Ht[n]&&(delete Ht[n][i],this.override&&delete jt[i])}}var Gn=new class{constructor(){this.controllers=new Un(Si,"datasets",!0),this.elements=new Un(Tn,"elements"),this.plugins=new Un(Object,"plugins"),this.scales=new Un(Nn,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){const n=this;[...e].forEach((e=>{const o=i||n._getRegistryForType(e);i||o.isForType(e)||o===n.plugins&&e.id?n._exec(t,o,e):y(e,(e=>{const o=i||n._getRegistryForType(e);n._exec(t,o,e)}))}))}_exec(t,e,i){const n=T(t);v(i["before"+n],[],i),e[t](i),v(i["after"+n],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const n=e.get(t);if(void 0===n)throw new Error('"'+t+'" is not a registered '+i+".");return n}};class Hn{constructor(){this._init=[]}notify(t,e,i,n){const o=this;"beforeInit"===e&&(o._init=o._createDescriptors(t,!0),o._notify(o._init,t,"install"));const r=n?o._descriptors(t).filter(n):o._descriptors(t),a=o._notify(r,t,e,i);return"destroy"===e&&(o._notify(r,t,"stop"),o._notify(o._init,t,"uninstall")),a}_notify(t,e,i,n){n=n||{};for(const o of t){const t=o.plugin;if(!1===v(t[i],[e,n,o.options],t)&&n.cancelable)return!1}return!0}invalidate(){u(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,n=g(i.options&&i.options.plugins,{}),o=function(t){const e=[],i=Object.keys(Gn.plugins.items);for(let t=0;t<i.length;t++)e.push(Gn.getPlugin(i[t]));const n=t.plugins||[];for(let t=0;t<n.length;t++){const i=n[t];-1===e.indexOf(i)&&e.push(i)}return e}(i);return!1!==n||e?function(t,e,i,n){const o=[],r=t.getContext();for(let a=0;a<e.length;a++){const s=e[a],l=Zn(i[s.id],n);null!==l&&o.push({plugin:s,options:Vn(t.config,s,l,r)})}return o}(t,o,n,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,n=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(n(e,i),t,"stop"),this._notify(n(i,e),t,"start")}}function Zn(t,e){return e||!1!==t?!0===t?{}:t:null}function Vn(t,e,i,n){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(i,o);return t.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wn(t,e){const i=Ht.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function qn(t,e){return"x"===t||"y"===t?t:e.axis||("top"===(i=e.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.charAt(0).toLowerCase();var i}function $n(t){const e=t.options||(t.options={});e.plugins=g(e.plugins,{}),e.scales=function(t,e){const i=jt[t.type]||{scales:{}},n=e.scales||{},o=Wn(t.type,e),r=Object.create(null),a=Object.create(null);return Object.keys(n).forEach((t=>{const e=n[t],s=qn(t,e),l=function(t,e){return t===e?"_index_":"_value_"}(s,o),c=i.scales||{};r[s]=r[s]||t,a[t]=M(Object.create(null),[{axis:s},e,c[s],c[l]])})),t.data.datasets.forEach((i=>{const o=i.type||t.type,s=i.indexAxis||Wn(o,e),l=(jt[o]||{}).scales||{};Object.keys(l).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,s),o=i[e+"AxisID"]||r[e]||e;a[o]=a[o]||Object.create(null),M(a[o],[{axis:e},n[o],l[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];M(e,[Ht.scales[e.type],Ht.scale])})),a}(t,e)}function Yn(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Kn=new Map,Jn=new Set;function Xn(t,e){let i=Kn.get(t);return i||(i=e(),Kn.set(t,i),Jn.add(i)),i}const Qn=(t,e,i)=>{const n=S(e,i);void 0!==n&&t.add(n)};class to{constructor(t){this._config=function(t){return(t=t||{}).data=Yn(t.data),$n(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Yn(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),$n(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Xn(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Xn(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Xn(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Xn(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let n=i.get(t);return n&&!e||(n=new Map,i.set(t,n)),n}getOptionScopes(t,e,i){const{options:n,type:o}=this,r=this._cachedScopes(t,i),a=r.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>Qn(s,t,e)))),e.forEach((t=>Qn(s,n,t))),e.forEach((t=>Qn(s,jt[o]||{},t))),e.forEach((t=>Qn(s,Ht,t))),e.forEach((t=>Qn(s,Nt,t)))}));const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),Jn.has(e)&&r.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,jt[e]||{},Ht.datasets[e]||{},{type:e},Ht,Nt]}resolveNamedOptions(t,e,i,n=[""]){const o={$shared:!0},{resolver:r,subPrefixes:a}=eo(this._resolverCache,t,n);let s=r;if(function(t,e){const{isScriptable:i,isIndexable:n}=be(t);for(const o of e)if(i(o)&&E(t[o])||n(o)&&p(t[o]))return!0;return!1}(r,e)){o.$shared=!1;s=ye(r,i=E(i)?i():i,this.createResolver(t,i,a))}for(const t of e)o[t]=s[t];return o}createResolver(t,e,i=[""],n){const{resolver:o}=eo(this._resolverCache,t,i);return d(e)?ye(o,e,void 0,n):o}}function eo(t,e,i){let n=t.get(e);n||(n=new Map,t.set(e,n));const o=i.join();let r=n.get(o);if(!r){r={resolver:ve(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},n.set(o,r)}return r}const io=["top","bottom","left","right","chartArea"];function no(t,e){return"top"===t||"bottom"===t||-1===io.indexOf(t)&&"x"===e}function oo(t,e){return function(i,n){return i[t]===n[t]?i[e]-n[e]:i[t]-n[t]}}function ro(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),v(i&&i.onComplete,[t],e)}function ao(t){const e=t.chart,i=e.options.animation;v(i&&i.onProgress,[t],e)}function so(t){return Fe()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const lo={},co=t=>{const e=so(t);return Object.values(lo).filter((t=>t.canvas===e)).pop()};class ho{constructor(t,e){const i=this,n=this.config=new to(e),o=so(t),r=co(o);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas can be reused.");const a=n.createResolver(n.chartOptionScopes(),i.getContext());this.platform=new(n.platform||function(t){return!Fe()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?fn:Sn}(o));const s=i.platform.acquireContext(o,a.aspectRatio),l=s&&s.canvas,c=l&&l.height,u=l&&l.width;this.id=h(),this.ctx=s,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Hn,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let i;return function(){return e?(clearTimeout(i),i=setTimeout(t,e)):t(),e}}((()=>this.update("resize")),a.resizeDelay||0),lo[i.id]=i,s&&l?(ui.listen(i,"complete",ro),ui.listen(i,"progress",ao),i._initialize(),i.attached&&i.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:n,_aspectRatio:o}=this;return u(t)?e&&o?o:n?i/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}_initialize(){const t=this;return t.notifyPlugins("beforeInit"),t.options.responsive?t.resize():qe(t,t.options.devicePixelRatio),t.bindEvents(),t.notifyPlugins("afterInit"),t}clear(){return qt(this.canvas,this.ctx),this}stop(){return ui.stop(this),this}resize(t,e){ui.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this,n=i.options,o=i.canvas,r=n.maintainAspectRatio&&i.aspectRatio,a=i.platform.getMaximumSize(o,t,e,r),s=n.devicePixelRatio||i.platform.getDevicePixelRatio();i.width=a.width,i.height=a.height,i._aspectRatio=i.aspectRatio,qe(i,s,!0)&&(i.notifyPlugins("resize",{size:a}),v(n.onResize,[i,a],i),i.attached&&i._doResize()&&i.render())}ensureScalesHaveIDs(){y(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this,e=t.options,i=e.scales,n=t.scales,o=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];i&&(r=r.concat(Object.keys(i).map((t=>{const e=i[t],n=qn(t,e),o="r"===n,r="x"===n;return{options:e,dposition:o?"chartArea":r?"bottom":"left",dtype:o?"radialLinear":r?"category":"linear"}})))),y(r,(i=>{const r=i.options,a=r.id,s=qn(a,r),l=g(r.type,i.dtype);void 0!==r.position&&no(r.position,s)===no(i.dposition)||(r.position=i.dposition),o[a]=!0;let c=null;if(a in n&&n[a].type===l)c=n[a];else{c=new(Gn.getScale(l))({id:a,type:l,ctx:t.ctx,chart:t}),n[c.id]=c}c.init(r,e)})),y(o,((t,e)=>{t||delete n[e]})),y(n,(e=>{dn.configure(t,e,e.options),dn.addBox(t,e)}))}_updateMetasets(){const t=this,e=t._metasets,i=t.data.datasets.length,n=e.length;if(e.sort(((t,e)=>t.index-e.index)),n>i){for(let e=i;e<n;++e)t._destroyDatasetMeta(e);e.splice(i,n-i)}t._sortedMetasets=e.slice(0).sort(oo("order","index"))}_removeUnreferencedMetasets(){const t=this,{_metasets:e,data:{datasets:i}}=t;e.length>i.length&&delete t._stacks,e.forEach(((e,n)=>{0===i.filter((t=>t===e._dataset)).length&&t._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=this,e=[],i=t.data.datasets;let n,o;for(t._removeUnreferencedMetasets(),n=0,o=i.length;n<o;n++){const o=i[n];let r=t.getDatasetMeta(n);const a=o.type||t.config.type;if(r.type&&r.type!==a&&(t._destroyDatasetMeta(n),r=t.getDatasetMeta(n)),r.type=a,r.indexAxis=o.indexAxis||Wn(a,t.options),r.order=o.order||0,r.index=n,r.label=""+o.label,r.visible=t.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const i=Gn.getController(a),{datasetElementType:o,dataElementType:s}=Ht.datasets[a];Object.assign(i.prototype,{dataElementType:Gn.getElement(s),datasetElementType:o&&Gn.getElement(o)}),r.controller=new i(t,n),e.push(r.controller)}}return t._updateMetasets(),e}_resetElements(){const t=this;y(t.data.datasets,((e,i)=>{t.getDatasetMeta(i).controller.reset()}),t)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this,i=e.config;i.update(),e._options=i.createResolver(i.chartOptionScopes(),e.getContext()),y(e.scales,(t=>{dn.removeBox(e,t)}));const n=e._animationsDisabled=!e.options.animation;e.ensureScalesHaveIDs(),e.buildOrUpdateScales();if(((t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0})(new Set(Object.keys(e._listeners)),new Set(e.options.events))&&!!this._responsiveListeners===e.options.responsive||(e.unbindEvents(),e.bindEvents()),e._plugins.invalidate(),!1===e.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const o=e.buildOrUpdateControllers();e.notifyPlugins("beforeElementsUpdate");let r=0;for(let t=0,i=e.data.datasets.length;t<i;t++){const{controller:i}=e.getDatasetMeta(t),a=!n&&-1===o.indexOf(i);i.buildOrUpdateElements(a),r=Math.max(+i.getMaxOverflow(),r)}e._minPadding=r,e._updateLayout(r),n||y(o,(t=>{t.reset()})),e._updateDatasets(t),e.notifyPlugins("afterUpdate",{mode:t}),e._layers.sort(oo("z","_idx")),e._lastEvent&&e._eventHandler(e._lastEvent,!0),e.render()}_updateLayout(t){const e=this;if(!1===e.notifyPlugins("beforeLayout",{cancelable:!0}))return;dn.update(e,e.width,e.height,t);const i=e.chartArea,n=i.width<=0||i.height<=0;e._layers=[],y(e.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),e._layers.push(...t._layers()))}),e),e._layers.forEach(((t,e)=>{t._idx=e})),e.notifyPlugins("afterLayout")}_updateDatasets(t){const e=this,i="function"==typeof t;if(!1!==e.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let n=0,o=e.data.datasets.length;n<o;++n)e._updateDataset(n,i?t({datasetIndex:n}):t);e.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this,n=i.getDatasetMeta(t),o={meta:n,index:t,mode:e,cancelable:!0};!1!==i.notifyPlugins("beforeDatasetUpdate",o)&&(n.controller._update(e),o.cancelable=!1,i.notifyPlugins("afterDatasetUpdate",o))}render(){const t=this;!1!==t.notifyPlugins("beforeRender",{cancelable:!0})&&(ui.has(t)?t.attached&&!ui.running(t)&&ui.start(t):(t.draw(),ro({chart:t})))}draw(){const t=this;let e;if(t._resizeBeforeDraw){const{width:e,height:i}=t._resizeBeforeDraw;t._resize(e,i),t._resizeBeforeDraw=null}if(t.clear(),t.width<=0||t.height<=0)return;if(!1===t.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=t._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(t.chartArea);for(t._drawDatasets();e<i.length;++e)i[e].draw(t.chartArea);t.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];t&&!o.visible||i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){const t=this;if(!1===t.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=t.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)t._drawDataset(e[i]);t.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this,i=e.ctx,n=t._clip,o=!n.disabled,r=e.chartArea,a={meta:t,index:t.index,cancelable:!0};!1!==e.notifyPlugins("beforeDatasetDraw",a)&&(o&&Kt(i,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?e.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?e.height:r.bottom+n.bottom}),t.controller.draw(),o&&Jt(i),a.cancelable=!1,e.notifyPlugins("afterDatasetDraw",a))}getElementsAtEventForMode(t,e,i,n){const o=Qi.modes[e];return"function"==typeof o?o(this,t,i,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let n=i.filter((t=>t&&t._dataset===e)).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context={chart:this,type:"chart"})}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const n=this,o=i?"show":"hide",r=n.getDatasetMeta(t),a=r.controller._resolveAnimations(void 0,o);A(e)?(r.data[e].hidden=!i,n.update()):(n.setDatasetVisibility(t,i),a.update(r,{visible:i}),n.update((e=>e.datasetIndex===t?o:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this,i=e._metasets&&e._metasets[t];i&&i.controller&&(i.controller._destroy(),delete e._metasets[t])}destroy(){const t=this,{canvas:e,ctx:i}=t;let n,o;for(t.stop(),ui.remove(t),n=0,o=t.data.datasets.length;n<o;++n)t._destroyDatasetMeta(n);t.config.clearCache(),e&&(t.unbindEvents(),qt(e,i),t.platform.releaseContext(i),t.canvas=null,t.ctx=null),t.notifyPlugins("destroy"),delete lo[t.id]}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this,e=t._listeners,i=t.platform,n=function(e,i,n){e.offsetX=i,e.offsetY=n,t._eventHandler(e)};y(t.options.events,(o=>((n,o)=>{i.addEventListener(t,n,o),e[n]=o})(o,n)))}bindResponsiveEvents(){const t=this;t._responsiveListeners||(t._responsiveListeners={});const e=t._responsiveListeners,i=t.platform,n=(n,o)=>{i.addEventListener(t,n,o),e[n]=o},o=(n,o)=>{e[n]&&(i.removeEventListener(t,n,o),delete e[n])},r=(e,i)=>{t.canvas&&t.resize(e,i)};let a;const s=()=>{o("attach",s),t.attached=!0,t.resize(),n("resize",r),n("detach",a)};a=()=>{t.attached=!1,o("resize",r),n("attach",s)},i.isAttached(t.canvas)?s():a()}unbindEvents(){const t=this;y(t._listeners,((e,i)=>{t.platform.removeEventListener(t,i,e)})),t._listeners={},y(t._responsiveListeners,((e,i)=>{t.platform.removeEventListener(t,i,e)})),t._responsiveListeners=void 0}updateHoverStyle(t,e,i){const n=i?"set":"remove";let o,r,a,s;for("dataset"===e&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){r=t[a];const e=r&&this.getDatasetMeta(r.datasetIndex).controller;e&&e[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this,i=e._active||[],n=t.map((({datasetIndex:t,index:i})=>{const n=e.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[i],index:i}}));!b(n,i)&&(e._active=n,e._updateHoverStyles(n,i))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}_updateHoverStyles(t,e,i){const n=this,o=n.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),a=r(e,t),s=i?t:r(t,e);a.length&&n.updateHoverStyle(a,o.mode,!1),s.length&&o.mode&&n.updateHoverStyle(s,o.mode,!0)}_eventHandler(t,e){const i=this,n={event:t,replay:e,cancelable:!0},o=e=>(e.options.events||this.options.events).includes(t.type);if(!1===i.notifyPlugins("beforeEvent",n,o))return;const r=i._handleEvent(t,e);return n.cancelable=!1,i.notifyPlugins("afterEvent",n,o),(r||n.changed)&&i.render(),i}_handleEvent(t,e){const i=this,{_active:n=[],options:o}=i,r=o.hover,a=e;let s=[],l=!1,c=null;return"mouseout"!==t.type&&(s=i.getElementsAtEventForMode(t,r.mode,r,a),c="click"===t.type?i._lastEvent:t),i._lastEvent=null,Yt(t,i.chartArea,i._minPadding)&&(v(o.onHover,[t,s,i],i),"mouseup"!==t.type&&"click"!==t.type&&"contextmenu"!==t.type||v(o.onClick,[t,s,i],i)),l=!b(s,n),(l||e)&&(i._active=s,i._updateHoverStyles(s,n,e)),i._lastEvent=c,l}}const uo=()=>y(ho.instances,(t=>t._plugins.invalidate())),po=!0;function mo(t,e,i){const{startAngle:n,pixelMargin:o,x:r,y:a,outerRadius:s,innerRadius:l}=e;let c=o/s;t.beginPath(),t.arc(r,a,s,n-c,i+c),l>o?(c=o/l,t.arc(r,a,l,i+c,n-c,!0)):t.arc(r,a,o,i+z,n-z),t.closePath(),t.clip()}function fo(t,e,i,n){const o=ae(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const r=(i-e)/2,a=Math.min(r,n*e/2),s=t=>{const e=(i-Math.min(r,t))*n/2;return Q(t,0,Math.min(r,e))};return{outerStart:s(o.outerStart),outerEnd:s(o.outerEnd),innerStart:Q(o.innerStart,0,a),innerEnd:Q(o.innerEnd,0,a)}}function go(t,e,i,n){return{x:i+t*Math.cos(e),y:n+t*Math.sin(e)}}function _o(t,e,i,n,o){const{x:r,y:a,startAngle:s,pixelMargin:l,innerRadius:c}=e,h=Math.max(e.outerRadius+n+i-l,0),u=c>0?c+n+i+l:0;let p=0;const d=o-s;if(n){const t=((c>0?c-n:0)+(h>0?h-n:0))/2;p=(d-(0!==t?d*t/(t+n):d))/2}const m=(d-Math.max(.001,d*h-i/D)/h)/2,f=s+m+p,g=o-m-p,{outerStart:_,outerEnd:v,innerStart:y,innerEnd:b}=fo(e,u,h,g-f),x=h-_,k=h-v,w=f+_/x,L=g-v/k,M=u+y,C=u+b,P=f+y/M,S=g-b/C;if(t.beginPath(),t.arc(r,a,h,w,L),v>0){const e=go(k,L,r,a);t.arc(e.x,e.y,v,L,g+z)}const T=go(C,g,r,a);if(t.lineTo(T.x,T.y),b>0){const e=go(C,S,r,a);t.arc(e.x,e.y,b,g+z,S+Math.PI)}if(t.arc(r,a,u,g-b/u,f+y/u,!0),y>0){const e=go(M,P,r,a);t.arc(e.x,e.y,y,P+Math.PI,f-z)}const A=go(x,f,r,a);if(t.lineTo(A.x,A.y),_>0){const e=go(x,w,r,a);t.arc(e.x,e.y,_,f-z,w)}t.closePath()}function vo(t,e,i,n,o){const{options:r}=e,a="inner"===r.borderAlign;r.borderWidth&&(a?(t.lineWidth=2*r.borderWidth,t.lineJoin="round"):(t.lineWidth=r.borderWidth,t.lineJoin="bevel"),e.fullCircles&&function(t,e,i){const{x:n,y:o,startAngle:r,pixelMargin:a,fullCircles:s}=e,l=Math.max(e.outerRadius-a,0),c=e.innerRadius+a;let h;for(i&&mo(t,e,r+O),t.beginPath(),t.arc(n,o,c,r+O,r,!0),h=0;h<s;++h)t.stroke();for(t.beginPath(),t.arc(n,o,l,r,r+O),h=0;h<s;++h)t.stroke()}(t,e,a),a&&mo(t,e,o),_o(t,e,i,n,o),t.stroke())}Object.defineProperties(ho,{defaults:{enumerable:po,value:Ht},instances:{enumerable:po,value:lo},overrides:{enumerable:po,value:jt},registry:{enumerable:po,value:Gn},version:{enumerable:po,value:"3.5.1"},getChart:{enumerable:po,value:co},register:{enumerable:po,value:(...t)=>{Gn.add(...t),uo()}},unregister:{enumerable:po,value:(...t)=>{Gn.remove(...t),uo()}}});class yo extends Tn{constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.getProps(["x","y"],i),{angle:o,distance:r}=function(t,e){const i=e.x-t.x,n=e.y-t.y,o=Math.sqrt(i*i+n*n);let r=Math.atan2(n,i);return r<-.5*D&&(r+=O),{angle:r,distance:o}}(n,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),u=this.options.spacing/2;return(h>=O||X(o,a,s))&&(r>=l+u&&r<=c+u)}getCenterPoint(t){const{x:e,y:i,startAngle:n,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],t),{offset:s,spacing:l}=this.options,c=(n+o)/2,h=(r+a+l+s)/2;return{x:e+Math.cos(c)*h,y:i+Math.sin(c)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const e=this,{options:i,circumference:n}=e,o=(i.offset||0)/2,r=(i.spacing||0)/2;if(e.pixelMargin="inner"===i.borderAlign?.33:0,e.fullCircles=n>O?Math.floor(n/O):0,0===n||e.innerRadius<0||e.outerRadius<0)return;t.save();let a=0;if(o){a=o/2;const i=(e.startAngle+e.endAngle)/2;t.translate(Math.cos(i)*a,Math.sin(i)*a),e.circumference>=D&&(a=o)}t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor;const s=function(t,e,i,n){const{fullCircles:o,startAngle:r,circumference:a}=e;let s=e.endAngle;if(o){_o(t,e,i,n,r+O);for(let e=0;e<o;++e)t.fill();isNaN(a)||(s=r+a%O,a%O==0&&(s+=O))}return _o(t,e,i,n,s),t.fill(),s}(t,e,a,r);vo(t,e,a,r,s),t.restore()}}function bo(t,e,i=e){t.lineCap=g(i.borderCapStyle,e.borderCapStyle),t.setLineDash(g(i.borderDash,e.borderDash)),t.lineDashOffset=g(i.borderDashOffset,e.borderDashOffset),t.lineJoin=g(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=g(i.borderWidth,e.borderWidth),t.strokeStyle=g(i.borderColor,e.borderColor)}function xo(t,e,i){t.lineTo(i.x,i.y)}function ko(t,e,i={}){const n=t.length,{start:o=0,end:r=n-1}=i,{start:a,end:s}=e,l=Math.max(o,a),c=Math.min(r,s),h=o<a&&r<a||o>s&&r>s;return{count:n,start:l,loop:e.loop,ilen:c<l&&!h?n+c-l:c-l}}function wo(t,e,i,n){const{points:o,options:r}=e,{count:a,start:s,loop:l,ilen:c}=ko(o,i,n),h=function(t){return t.stepped?Xt:t.tension||"monotone"===t.cubicInterpolationMode?Qt:xo}(r);let u,p,d,{move:m=!0,reverse:f}=n||{};for(u=0;u<=c;++u)p=o[(s+(f?c-u:u))%a],p.skip||(m?(t.moveTo(p.x,p.y),m=!1):h(t,d,p,f,r.stepped),d=p);return l&&(p=o[(s+(f?c:0))%a],h(t,d,p,f,r.stepped)),!!l}function Lo(t,e,i,n){const o=e.points,{count:r,start:a,ilen:s}=ko(o,i,n),{move:l=!0,reverse:c}=n||{};let h,u,p,d,m,f,g=0,_=0;const v=t=>(a+(c?s-t:t))%r,y=()=>{d!==m&&(t.lineTo(g,m),t.lineTo(g,d),t.lineTo(g,f))};for(l&&(u=o[v(0)],t.moveTo(u.x,u.y)),h=0;h<=s;++h){if(u=o[v(h)],u.skip)continue;const e=u.x,i=u.y,n=0|e;n===p?(i<d?d=i:i>m&&(m=i),g=(_*g+e)/++_):(y(),t.lineTo(e,i),p=n,_=0,d=m=i),f=i}y()}function Mo(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?Lo:wo}yo.id="arc",yo.defaults={borderAlign:"center",borderColor:"#fff",borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},yo.defaultRoutes={backgroundColor:"backgroundColor"};const Co="function"==typeof Path2D;function Po(t,e,i,n){Co&&1===e.segments.length?function(t,e,i,n){let o=e._path;o||(o=e._path=new Path2D,e.path(o,i,n)&&o.closePath()),bo(t,e.options),t.stroke(o)}(t,e,i,n):function(t,e,i,n){const{segments:o,options:r}=e,a=Mo(e);for(const s of o)bo(t,r,s.style),t.beginPath(),a(t,e,s,{start:i,end:i+n-1})&&t.closePath(),t.stroke()}(t,e,i,n)}class So extends Tn{constructor(t){super(),this.animated=!0,this.options=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this,n=i.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!i._pointsUpdated){const o=n.spanGaps?i._loop:i._fullLoop;ze(i._points,n,t,o,e),i._pointsUpdated=!0}}set points(t){const e=this;e._points=t,delete e._segments,delete e._path,e._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const i=t.points,n=t.options.spanGaps,o=i.length;if(!o)return[];const r=!!t._loop,{start:a,end:s}=function(t,e,i,n){let o=0,r=e-1;if(i&&!n)for(;o<e&&!t[o].skip;)o++;for(;o<e&&t[o].skip;)o++;for(o%=e,i&&(r+=o);r>o&&t[r%e].skip;)r--;return r%=e,{start:o,end:r}}(i,o,r,n);return li(t,!0===n?[{start:a,end:s,loop:r}]:function(t,e,i,n){const o=t.length,r=[];let a,s=e,l=t[e];for(a=e+1;a<=i;++a){const i=t[a%o];i.skip||i.stop?l.skip||(n=!1,r.push({start:e%o,end:(a-1)%o,loop:n}),e=s=i.stop?a:null):(s=a,l.skip&&(e=a)),l=i}return null!==s&&r.push({start:e%o,end:s%o,loop:n}),r}(i,a,s<a?s+o:s,!!t._fullLoop&&0===a&&s===o-1),i,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this,n=i.options,o=t[e],r=i.points,a=si(i,{property:e,start:o,end:o});if(!a.length)return;const s=[],l=function(t){return t.stepped?Je:t.tension||"monotone"===t.cubicInterpolationMode?Xe:Ke}(n);let c,h;for(c=0,h=a.length;c<h;++c){const{start:i,end:h}=a[c],u=r[i],p=r[h];if(u===p){s.push(u);continue}const d=l(u,p,Math.abs((o-u[e])/(p[e]-u[e])),n.stepped);d[e]=t[e],s.push(d)}return 1===s.length?s[0]:s}pathSegment(t,e,i){return Mo(this)(t,this,e,i)}path(t,e,i){const n=this,o=n.segments,r=Mo(n);let a=n._loop;e=e||0,i=i||n.points.length-e;for(const s of o)a&=r(t,n,s,{start:e,end:e+i-1});return!!a}draw(t,e,i,n){const o=this,r=o.options||{};(o.points||[]).length&&r.borderWidth&&(t.save(),Po(t,o,i,n),t.restore(),o.animated&&(o._pointsUpdated=!1,o._path=void 0))}}function To(t,e,i,n){const o=t.options,{[i]:r}=t.getProps([i],n);return Math.abs(e-r)<o.radius+o.hitRadius}So.id="line",So.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},So.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},So.descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};class Ao extends Tn{constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const n=this.options,{x:o,y:r}=this.getProps(["x","y"],i);return Math.pow(t-o,2)+Math.pow(e-r,2)<Math.pow(n.hitRadius+n.radius,2)}inXRange(t,e){return To(this,t,"x",e)}inYRange(t,e){return To(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this,n=i.options;i.skip||n.radius<.1||!Yt(i,e,i.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,$t(t,n,i.x,i.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Eo(t,e){const{x:i,y:n,base:o,width:r,height:a}=t.getProps(["x","y","base","width","height"],e);let s,l,c,h,u;return t.horizontal?(u=a/2,s=Math.min(i,o),l=Math.max(i,o),c=n-u,h=n+u):(u=r/2,s=i-u,l=i+u,c=Math.min(n,o),h=Math.max(n,o)),{left:s,top:c,right:l,bottom:h}}function Do(t,e,i,n){return t?0:Q(e,i,n)}function Oo(t){const e=Eo(t),i=e.right-e.left,n=e.bottom-e.top,o=function(t,e,i){const n=t.options.borderWidth,o=t.borderSkipped,r=se(n);return{t:Do(o.top,r.top,0,i),r:Do(o.right,r.right,0,e),b:Do(o.bottom,r.bottom,0,i),l:Do(o.left,r.left,0,e)}}(t,i/2,n/2),r=function(t,e,i){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,r=le(o),a=Math.min(e,i),s=t.borderSkipped,l=n||d(o);return{topLeft:Do(!l||s.top||s.left,r.topLeft,0,a),topRight:Do(!l||s.top||s.right,r.topRight,0,a),bottomLeft:Do(!l||s.bottom||s.left,r.bottomLeft,0,a),bottomRight:Do(!l||s.bottom||s.right,r.bottomRight,0,a)}}(t,i/2,n/2);return{outer:{x:e.left,y:e.top,w:i,h:n,radius:r},inner:{x:e.left+o.l,y:e.top+o.t,w:i-o.l-o.r,h:n-o.t-o.b,radius:{topLeft:Math.max(0,r.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,r.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,r.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,r.bottomRight-Math.max(o.b,o.r))}}}}function Io(t,e,i,n){const o=null===e,r=null===i,a=t&&!(o&&r)&&Eo(t,n);return a&&(o||e>=a.left&&e<=a.right)&&(r||i>=a.top&&i<=a.bottom)}function Bo(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ro(t,e,i={}){const n=t.x!==i.x?-e:0,o=t.y!==i.y?-e:0,r=(t.x+t.w!==i.x+i.w?e:0)-n,a=(t.y+t.h!==i.y+i.h?e:0)-o;return{x:t.x+n,y:t.y+o,w:t.w+r,h:t.h+a,radius:t.radius}}Ao.id="point",Ao.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Ao.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class zo extends Tn{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,t&&Object.assign(this,t)}draw(t){const e=this.options,{inner:i,outer:n}=Oo(this),o=(r=n.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?ie:Bo;var r;const a=.33;t.save(),n.w===i.w&&n.h===i.h||(t.beginPath(),o(t,Ro(n,a,i)),t.clip(),o(t,Ro(i,-.33,n)),t.fillStyle=e.borderColor,t.fill("evenodd")),t.beginPath(),o(t,Ro(i,a,n)),t.fillStyle=e.backgroundColor,t.fill(),t.restore()}inRange(t,e,i){return Io(this,t,e,i)}inXRange(t,e){return Io(this,t,null,e)}inYRange(t,e){return Io(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?i:(i+n)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}zo.id="bar",zo.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,enableBorderRadius:!0,pointStyle:void 0},zo.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function Fo(t,e,i){const n=function(t){const e=t.options,i=e.fill;let n=g(i&&i.target,i);return void 0===n&&(n=!!e.backgroundColor),!1!==n&&null!==n&&(!0===n?"origin":n)}(t);if(d(n))return!isNaN(n.value)&&n;let o=parseFloat(n);return m(o)&&Math.floor(o)===o?("-"!==n[0]&&"+"!==n[0]||(o=e+o),!(o===e||o<0||o>=i)&&o):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}class jo{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:n,y:o,radius:r}=this;return e=e||{start:0,end:O},t.arc(n,o,r,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:i+Math.sin(o)*n,angle:o}}}function No(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:i}=t,n=e.options,o=e.getLabels().length,r=[],a=n.reverse?e.max:e.min,s=n.reverse?e.min:e.max;let l,c,h;if(h="start"===i?a:"end"===i?s:d(i)?i.value:e.getBaseValue(),n.grid.circular)return c=e.getPointPositionForValue(0,a),new jo({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(h)});for(l=0;l<o;++l)r.push(e.getPointPositionForValue(l,h));return r}(t):function(t){const{scale:e={},fill:i}=t;let n,o=null;return"start"===i?o=e.bottom:"end"===i?o=e.top:d(i)?o=e.getPixelForValue(i.value):e.getBasePixel&&(o=e.getBasePixel()),m(o)?(n=e.isHorizontal(),{x:n?o:null,y:n?null:o}):null}(t)}function Uo(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Go(t){const{chart:e,scale:i,index:n,line:o}=t,r=[],a=o.segments,s=o.points,l=function(t,e){const i=[],n=t.getSortedVisibleDatasetMetas();for(let t=0;t<n.length;t++){const o=n[t];if(o.index===e)break;Ho(o)&&i.unshift(o.dataset)}return i}(e,n);l.push(Wo({x:null,y:i.bottom},o));for(let t=0;t<a.length;t++){const e=a[t];for(let t=e.start;t<=e.end;t++)Zo(r,s[t],l)}return new So({points:r,options:{}})}const Ho=t=>"line"===t.type&&!t.hidden;function Zo(t,e,i){const n=[];for(let o=0;o<i.length;o++){const r=i[o],{first:a,last:s,point:l}=Vo(r,e,"x");if(!(!l||a&&s))if(a)n.unshift(l);else if(t.push(l),!s)break}t.push(...n)}function Vo(t,e,i){const n=t.interpolate(e,i);if(!n)return{};const o=n[i],r=t.segments,a=t.points;let s=!1,l=!1;for(let t=0;t<r.length;t++){const e=r[t],n=a[e.start][i],c=a[e.end][i];if(o>=n&&o<=c){s=o===n,l=o===c;break}}return{first:s,last:l,point:n}}function Wo(t,e){let i=[],n=!1;return p(t)?(n=!0,i=t):i=function(t,e){const{x:i=null,y:n=null}=t||{},o=e.points,r=[];return e.segments.forEach((({start:t,end:e})=>{e=Uo(t,e,o);const a=o[t],s=o[e];null!==n?(r.push({x:a.x,y:n}),r.push({x:s.x,y:n})):null!==i&&(r.push({x:i,y:a.y}),r.push({x:i,y:s.y}))})),r}(t,e),i.length?new So({points:i,options:{tension:0},_loop:n,_fullLoop:n}):null}function qo(t,e,i){let n=t[e].fill;const o=[e];let r;if(!i)return n;for(;!1!==n&&-1===o.indexOf(n);){if(!m(n))return n;if(r=t[n],!r)return!1;if(r.visible)return n;o.push(n),n=r.fill}return!1}function $o(t,e,i){t.beginPath(),e.path(t),t.lineTo(e.last().x,i),t.lineTo(e.first().x,i),t.closePath(),t.clip()}function Yo(t,e,i,n){if(n)return;let o=e[t],r=i[t];return"angle"===t&&(o=J(o),r=J(r)),{property:t,start:o,end:r}}function Ko(t,e,i,n){return t&&e?n(t[i],e[i]):t?t[i]:e?e[i]:0}function Jo(t,e,i){const{top:n,bottom:o}=e.chart.chartArea,{property:r,start:a,end:s}=i||{};"x"===r&&(t.beginPath(),t.rect(a,n,s-a,o-n),t.clip())}function Xo(t,e,i,n){const o=e.interpolate(i,n);o&&t.lineTo(o.x,o.y)}function Qo(t,e){const{line:i,target:n,property:o,color:r,scale:a}=e,s=function(t,e,i){const n=t.segments,o=t.points,r=e.points,a=[];for(const t of n){let{start:n,end:s}=t;s=Uo(n,s,o);const l=Yo(i,o[n],o[s],t.loop);if(!e.segments){a.push({source:t,target:l,start:o[n],end:o[s]});continue}const c=si(e,l);for(const e of c){const n=Yo(i,r[e.start],r[e.end],e.loop),s=ai(t,o,n);for(const t of s)a.push({source:t,target:e,start:{[i]:Ko(l,n,"start",Math.max)},end:{[i]:Ko(l,n,"end",Math.min)}})}}return a}(i,n,o);for(const{source:e,target:l,start:c,end:h}of s){const{style:{backgroundColor:s=r}={}}=e,u=!0!==n;t.save(),t.fillStyle=s,Jo(t,a,u&&Yo(o,c,h)),t.beginPath();const p=!!i.pathSegment(t,e);let d;if(u){p?t.closePath():Xo(t,n,h,o);const e=!!n.pathSegment(t,l,{move:p,reverse:!0});d=p&&e,d||Xo(t,n,c,o)}t.closePath(),t.fill(d?"evenodd":"nonzero"),t.restore()}}function tr(t,e,i){const n=function(t){const{chart:e,fill:i,line:n}=t;if(m(i))return function(t,e){const i=t.getDatasetMeta(e);return i&&t.isDatasetVisible(e)?i.dataset:null}(e,i);if("stack"===i)return Go(t);if("shape"===i)return!0;const o=No(t);return o instanceof jo?o:Wo(o,n)}(e),{line:o,scale:r,axis:a}=e,s=o.options,l=s.fill,c=s.backgroundColor,{above:h=c,below:u=c}=l||{};n&&o.points.length&&(Kt(t,i),function(t,e){const{line:i,target:n,above:o,below:r,area:a,scale:s}=e,l=i._loop?"angle":e.axis;t.save(),"x"===l&&r!==o&&($o(t,n,a.top),Qo(t,{line:i,target:n,color:o,scale:s,property:l}),t.restore(),t.save(),$o(t,n,a.bottom)),Qo(t,{line:i,target:n,color:r,scale:s,property:l}),t.restore()}(t,{line:o,target:n,above:h,below:u,area:i,scale:r,axis:a}),Jt(t))}var er={id:"filler",afterDatasetsUpdate(t,e,i){const n=(t.data.datasets||[]).length,o=[];let r,a,s,l;for(a=0;a<n;++a)r=t.getDatasetMeta(a),s=r.dataset,l=null,s&&s.options&&s instanceof So&&(l={visible:t.isDatasetVisible(a),index:a,fill:Fo(s,a,n),chart:t,axis:r.controller.options.indexAxis,scale:r.vScale,line:s}),r.$filler=l,o.push(l);for(a=0;a<n;++a)l=o[a],l&&!1!==l.fill&&(l.fill=qo(o,a,i.propagate))},beforeDraw(t,e,i){const n="beforeDraw"===i.drawTime,o=t.getSortedVisibleDatasetMetas(),r=t.chartArea;for(let e=o.length-1;e>=0;--e){const i=o[e].$filler;i&&(i.line.updateControlPoints(r,i.axis),n&&tr(t.ctx,i,r))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const n=t.getSortedVisibleDatasetMetas();for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;i&&tr(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const n=e.meta.$filler;n&&!1!==n.fill&&"beforeDatasetDraw"===i.drawTime&&tr(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};new WeakMap;const ir={average(t){if(!t.length)return!1;let e,i,n=0,o=0,r=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();n+=t.x,o+=t.y,++r}}return{x:n/r,y:o/r}},nearest(t,e){if(!t.length)return!1;let i,n,o,r=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(i=0,n=t.length;i<n;++i){const n=t[i].element;if(n&&n.hasValue()){const t=Y(e,n.getCenterPoint());t<s&&(s=t,o=n)}}if(o){const t=o.tooltipPosition();r=t.x,a=t.y}return{x:r,y:a}}};function nr(t,e){return e&&(p(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function or(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function rr(t,e){const{element:i,datasetIndex:n,index:o}=e,r=t.getDatasetMeta(n).controller,{label:a,value:s}=r.getLabelAndValue(o);return{chart:t,label:a,parsed:r.getParsed(o),raw:t.data.datasets[n].data[o],formattedValue:s,dataset:r.getDataset(),dataIndex:o,datasetIndex:n,element:i}}function ar(t,e){const i=t._chart.ctx,{body:n,footer:o,title:r}=t,{boxWidth:a,boxHeight:s}=e,l=he(e.bodyFont),c=he(e.titleFont),h=he(e.footerFont),u=r.length,p=o.length,d=n.length,m=ce(e.padding);let f=m.height,g=0,_=n.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(_+=t.beforeBody.length+t.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),_){f+=d*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(_-d)*l.lineHeight+(_-1)*e.bodySpacing}p&&(f+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let v=0;const b=function(t){g=Math.max(g,i.measureText(t).width+v)};return i.save(),i.font=c.string,y(t.title,b),i.font=l.string,y(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?a+2:0,y(n,(t=>{y(t.before,b),y(t.lines,b),y(t.after,b)})),v=0,i.font=h.string,y(t.footer,b),i.restore(),g+=m.width,{width:g,height:f}}function sr(t,e,i,n){const{x:o,width:r}=i,{width:a,chartArea:{left:s,right:l}}=t;let c="center";return"center"===n?c=o<=(s+l)/2?"left":"right":o<=r/2?c="left":o>=a-r/2&&(c="right"),function(t,e,i,n){const{x:o,width:r}=n,a=i.caretSize+i.caretPadding;return"left"===t&&o+r+a>e.width||"right"===t&&o-r-a<0||void 0}(c,t,e,i)&&(c="center"),c}function lr(t,e,i){const n=e.yAlign||function(t,e){const{y:i,height:n}=e;return i<n/2?"top":i>t.height-n/2?"bottom":"center"}(t,i);return{xAlign:e.xAlign||sr(t,e,i,n),yAlign:n}}function cr(t,e,i,n){const{caretSize:o,caretPadding:r,cornerRadius:a}=t,{xAlign:s,yAlign:l}=i,c=o+r,h=a+r;let u=function(t,e){let{x:i,width:n}=t;return"right"===e?i-=n:"center"===e&&(i-=n/2),i}(e,s);const p=function(t,e,i){let{y:n,height:o}=t;return"top"===e?n+=i:n-="bottom"===e?o+i:o/2,n}(e,l,c);return"center"===l?"left"===s?u+=c:"right"===s&&(u-=c):"left"===s?u-=h:"right"===s&&(u+=h),{x:Q(u,0,n.width-e.width),y:Q(p,0,n.height-e.height)}}function hr(t,e,i){const n=ce(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-n.right:t.x+n.left}function ur(t){return nr([],or(t))}function pr(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}class dr extends Tn{constructor(t){super(),this.opacity=0,this._active=[],this._chart=t._chart,this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this,e=t._cachedAnimations;if(e)return e;const i=t._chart,n=t.options.setContext(t.getContext()),o=n.enabled&&i.options.animation&&n.animations,r=new gi(t._chart,o);return o._cacheable&&(t._cachedAnimations=Object.freeze(r)),r}getContext(){const t=this;return t.$context||(t.$context=(e=t._chart.getContext(),i=t,n=t._tooltipItems,Object.assign(Object.create(e),{tooltip:i,tooltipItems:n,type:"tooltip"})));var e,i,n}getTitle(t,e){const i=this,{callbacks:n}=e,o=n.beforeTitle.apply(i,[t]),r=n.title.apply(i,[t]),a=n.afterTitle.apply(i,[t]);let s=[];return s=nr(s,or(o)),s=nr(s,or(r)),s=nr(s,or(a)),s}getBeforeBody(t,e){return ur(e.callbacks.beforeBody.apply(this,[t]))}getBody(t,e){const i=this,{callbacks:n}=e,o=[];return y(t,(t=>{const e={before:[],lines:[],after:[]},r=pr(n,t);nr(e.before,or(r.beforeLabel.call(i,t))),nr(e.lines,r.label.call(i,t)),nr(e.after,or(r.afterLabel.call(i,t))),o.push(e)})),o}getAfterBody(t,e){return ur(e.callbacks.afterBody.apply(this,[t]))}getFooter(t,e){const i=this,{callbacks:n}=e,o=n.beforeFooter.apply(i,[t]),r=n.footer.apply(i,[t]),a=n.afterFooter.apply(i,[t]);let s=[];return s=nr(s,or(o)),s=nr(s,or(r)),s=nr(s,or(a)),s}_createItems(t){const e=this,i=e._active,n=e._chart.data,o=[],r=[],a=[];let s,l,c=[];for(s=0,l=i.length;s<l;++s)c.push(rr(e._chart,i[s]));return t.filter&&(c=c.filter(((e,i,o)=>t.filter(e,i,o,n)))),t.itemSort&&(c=c.sort(((e,i)=>t.itemSort(e,i,n)))),y(c,(i=>{const n=pr(t.callbacks,i);o.push(n.labelColor.call(e,i)),r.push(n.labelPointStyle.call(e,i)),a.push(n.labelTextColor.call(e,i))})),e.labelColors=o,e.labelPointStyles=r,e.labelTextColors=a,e.dataPoints=c,c}update(t,e){const i=this,n=i.options.setContext(i.getContext()),o=i._active;let r,a=[];if(o.length){const t=ir[n.position].call(i,o,i._eventPosition);a=i._createItems(n),i.title=i.getTitle(a,n),i.beforeBody=i.getBeforeBody(a,n),i.body=i.getBody(a,n),i.afterBody=i.getAfterBody(a,n),i.footer=i.getFooter(a,n);const e=i._size=ar(i,n),s=Object.assign({},t,e),l=lr(i._chart,n,s),c=cr(n,s,l,i._chart);i.xAlign=l.xAlign,i.yAlign=l.yAlign,r={opacity:1,x:c.x,y:c.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==i.opacity&&(r={opacity:0});i._tooltipItems=a,i.$context=void 0,r&&i._resolveAnimations().update(i,r),t&&n.external&&n.external.call(i,{chart:i._chart,tooltip:i,replay:e})}drawCaret(t,e,i,n){const o=this.getCaretPosition(t,i,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,i){const{xAlign:n,yAlign:o}=this,{cornerRadius:r,caretSize:a}=i,{x:s,y:l}=t,{width:c,height:h}=e;let u,p,d,m,f,g;return"center"===o?(f=l+h/2,"left"===n?(u=s,p=u-a,m=f+a,g=f-a):(u=s+c,p=u+a,m=f-a,g=f+a),d=u):(p="left"===n?s+r+a:"right"===n?s+c-r-a:this.caretX,"top"===o?(m=l,f=m-a,u=p-a,d=p+a):(m=l+h,f=m+a,u=p+a,d=p-a),g=m),{x1:u,x2:p,x3:d,y1:m,y2:f,y3:g}}drawTitle(t,e,i){const n=this,o=n.title,r=o.length;let a,s,l;if(r){const c=ei(i.rtl,n.x,n.width);for(t.x=hr(n,i.titleAlign,i),e.textAlign=c.textAlign(i.titleAlign),e.textBaseline="middle",a=he(i.titleFont),s=i.titleSpacing,e.fillStyle=i.titleColor,e.font=a.string,l=0;l<r;++l)e.fillText(o[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s,l+1===r&&(t.y+=i.titleMarginBottom-s)}}_drawColorBox(t,e,i,n,o){const r=this,a=r.labelColors[i],s=r.labelPointStyles[i],{boxHeight:l,boxWidth:c}=o,h=he(o.bodyFont),u=hr(r,"left",o),p=n.x(u),d=l<h.lineHeight?(h.lineHeight-l)/2:0,m=e.y+d;if(o.usePointStyle){const e={radius:Math.min(c,l)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},i=n.leftForLtr(p,c)+c/2,r=m+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,$t(t,e,i,r),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,$t(t,e,i,r)}else{t.lineWidth=a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const e=n.leftForLtr(p,c),i=n.leftForLtr(n.xPlus(p,1),c-2),r=le(a.borderRadius);Object.values(r).some((t=>0!==t))?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ie(t,{x:e,y:m,w:c,h:l,radius:r}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ie(t,{x:i,y:m+1,w:c-2,h:l-2,radius:r}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(e,m,c,l),t.strokeRect(e,m,c,l),t.fillStyle=a.backgroundColor,t.fillRect(i,m+1,c-2,l-2))}t.fillStyle=r.labelTextColors[i]}drawBody(t,e,i){const n=this,{body:o}=n,{bodySpacing:r,bodyAlign:a,displayColors:s,boxHeight:l,boxWidth:c}=i,h=he(i.bodyFont);let u=h.lineHeight,p=0;const d=ei(i.rtl,n.x,n.width),m=function(i){e.fillText(i,d.x(t.x+p),t.y+u/2),t.y+=u+r},f=d.textAlign(a);let g,_,v,b,x,k,w;for(e.textAlign=a,e.textBaseline="middle",e.font=h.string,t.x=hr(n,f,i),e.fillStyle=i.bodyColor,y(n.beforeBody,m),p=s&&"right"!==f?"center"===a?c/2+1:c+2:0,b=0,k=o.length;b<k;++b){for(g=o[b],_=n.labelTextColors[b],e.fillStyle=_,y(g.before,m),v=g.lines,s&&v.length&&(n._drawColorBox(e,t,b,d,i),u=Math.max(h.lineHeight,l)),x=0,w=v.length;x<w;++x)m(v[x]),u=h.lineHeight;y(g.after,m)}p=0,u=h.lineHeight,y(n.afterBody,m),t.y-=r}drawFooter(t,e,i){const n=this,o=n.footer,r=o.length;let a,s;if(r){const l=ei(i.rtl,n.x,n.width);for(t.x=hr(n,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=l.textAlign(i.footerAlign),e.textBaseline="middle",a=he(i.footerFont),e.fillStyle=i.footerColor,e.font=a.string,s=0;s<r;++s)e.fillText(o[s],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,e,i,n){const{xAlign:o,yAlign:r}=this,{x:a,y:s}=t,{width:l,height:c}=i,h=n.cornerRadius;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(a+h,s),"top"===r&&this.drawCaret(t,e,i,n),e.lineTo(a+l-h,s),e.quadraticCurveTo(a+l,s,a+l,s+h),"center"===r&&"right"===o&&this.drawCaret(t,e,i,n),e.lineTo(a+l,s+c-h),e.quadraticCurveTo(a+l,s+c,a+l-h,s+c),"bottom"===r&&this.drawCaret(t,e,i,n),e.lineTo(a+h,s+c),e.quadraticCurveTo(a,s+c,a,s+c-h),"center"===r&&"left"===o&&this.drawCaret(t,e,i,n),e.lineTo(a,s+h),e.quadraticCurveTo(a,s,a+h,s),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this,i=e._chart,n=e.$animations,o=n&&n.x,r=n&&n.y;if(o||r){const n=ir[t.position].call(e,e._active,e._eventPosition);if(!n)return;const a=e._size=ar(e,t),s=Object.assign({},n,e._size),l=lr(i,t,s),c=cr(t,s,l,i);o._to===c.x&&r._to===c.y||(e.xAlign=l.xAlign,e.yAlign=l.yAlign,e.width=a.width,e.height=a.height,e.caretX=n.x,e.caretY=n.y,e._resolveAnimations().update(e,c))}}draw(t){const e=this,i=e.options.setContext(e.getContext());let n=e.opacity;if(!n)return;e._updateAnimationTarget(i);const o={width:e.width,height:e.height},r={x:e.x,y:e.y};n=Math.abs(n)<.001?0:n;const a=ce(i.padding),s=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;i.enabled&&s&&(t.save(),t.globalAlpha=n,e.drawBackground(r,t,o,i),ii(t,i.textDirection),r.y+=a.top,e.drawTitle(r,t,i),e.drawBody(r,t,i),e.drawFooter(r,t,i),ni(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this,n=i._active,o=t.map((({datasetIndex:t,index:e})=>{const n=i._chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!b(n,o),a=i._positionChanged(o,e);(r||a)&&(i._active=o,i._eventPosition=e,i.update(!0))}handleEvent(t,e){const i=this,n=i.options,o=i._active||[];let r=!1,a=[];"mouseout"!==t.type&&(a=i._chart.getElementsAtEventForMode(t,n.mode,n,e),n.reverse&&a.reverse());const s=i._positionChanged(a,t);return r=e||!b(a,o)||s,r&&(i._active=a,(n.enabled||n.external)&&(i._eventPosition={x:t.x,y:t.y},i.update(!0,e))),r}_positionChanged(t,e){const{caretX:i,caretY:n,options:o}=this,r=ir[o.position].call(this,t,e);return!1!==r&&(i!==r.x||n!==r.y)}}dr.positioners=ir;var mr={id:"tooltip",_element:dr,positioners:ir,afterInit(t,e,i){i&&(t.tooltip=new dr({_chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip,i={tooltip:e};!1!==t.notifyPlugins("beforeTooltipDraw",i)&&(e&&e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i))},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:c,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,n=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return i[e.dataIndex]}return""},afterTitle:c,beforeBody:c,beforeLabel:c,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return u(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:c,afterBody:c,beforeFooter:c,footer:c,afterFooter:c}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function fr(t,e,i){const n=t.indexOf(e);if(-1===n)return((t,e,i)=>"string"==typeof e?t.push(e)-1:isNaN(e)?null:i)(t,e,i);return n!==t.lastIndexOf(e)?i:n}class gr extends Nn{constructor(t){super(t),this._startValue=void 0,this._valueRange=0}parse(t,e){if(u(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:Q(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:fr(i,t,g(e,t)),i.length-1)}determineDataLimits(){const t=this,{minDefined:e,maxDefined:i}=t.getUserBounds();let{min:n,max:o}=t.getMinMax(!0);"ticks"===t.options.bounds&&(e||(n=0),i||(o=t.getLabels().length-1)),t.min=n,t.max=o}buildTicks(){const t=this,e=t.min,i=t.max,n=t.options.offset,o=[];let r=t.getLabels();r=0===e&&i===r.length-1?r:r.slice(e,i+1),t._valueRange=Math.max(r.length-(n?0:1),1),t._startValue=t.min-(n?.5:0);for(let t=e;t<=i;t++)o.push({value:t});return o}getLabelForValue(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}configure(){const t=this;super.configure(),t.isHorizontal()||(t._reversePixels=!t._reversePixels)}getPixelForValue(t){const e=this;return"number"!=typeof t&&(t=e.parse(t)),null===t?NaN:e.getPixelForDecimal((t-e._startValue)/e._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){const e=this;return Math.round(e._startValue+e.getDecimalForPixel(t)*e._valueRange)}getBasePixel(){return this.bottom}}function _r(t,e){const i=[],{bounds:n,step:o,min:r,max:a,precision:s,count:l,maxTicks:c,maxDigits:h,includeBounds:p}=t,d=o||1,m=c-1,{min:f,max:g}=e,_=!u(r),v=!u(a),y=!u(l),b=(g-f)/(h+1);let x,k,w,L,M=G((g-f)/m/d)*d;if(M<1e-14&&!_&&!v)return[{value:f},{value:g}];L=Math.ceil(g/M)-Math.floor(f/M),L>m&&(M=G(L*M/m/d)*d),u(s)||(x=Math.pow(10,s),M=Math.ceil(M*x)/x),"ticks"===n?(k=Math.floor(f/M)*M,w=Math.ceil(g/M)*M):(k=f,w=g),_&&v&&o&&function(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}((a-r)/o,M/1e3)?(L=Math.round(Math.min((a-r)/M,c)),M=(a-r)/L,k=r,w=a):y?(k=_?r:k,w=v?a:w,L=l-1,M=(w-k)/L):(L=(w-k)/M,L=Z(L,Math.round(L),M/1e3)?Math.round(L):Math.ceil(L));const C=Math.max($(M),$(k));x=Math.pow(10,u(s)?C:s),k=Math.round(k*x)/x,w=Math.round(w*x)/x;let P=0;for(_&&(p&&k!==r?(i.push({value:r}),k<r&&P++,Z(Math.round((k+P*M)*x)/x,r,vr(r,b,t))&&P++):k<r&&P++);P<L;++P)i.push({value:Math.round((k+P*M)*x)/x});return v&&p&&w!==a?Z(i[i.length-1].value,a,vr(a,b,t))?i[i.length-1].value=a:i.push({value:a}):v&&w!==a||i.push({value:w}),i}function vr(t,e,{horizontal:i,minRotation:n}){const o=W(n),r=(i?Math.sin(o):Math.cos(o))||.001,a=.75*e*(""+t).length;return Math.min(e/r,a)}gr.id="category",gr.defaults={ticks:{callback:gr.prototype.getLabelForValue}};class yr extends Nn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return u(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const t=this,{beginAtZero:e}=t.options,{minDefined:i,maxDefined:n}=t.getUserBounds();let{min:o,max:r}=t;const a=t=>o=i?o:t,s=t=>r=n?r:t;if(e){const t=U(o),e=U(r);t<0&&e<0?s(0):t>0&&e>0&&a(0)}if(o===r){let t=1;(r>=Number.MAX_SAFE_INTEGER||o<=Number.MIN_SAFE_INTEGER)&&(t=Math.abs(.05*r)),s(r+t),e||a(o-t)}t.min=o,t.max=r}getTickLimit(){const t=this,e=t.options.ticks;let i,{maxTicksLimit:n,stepSize:o}=e;return o?i=Math.ceil(t.max/o)-Math.floor(t.min/o)+1:(i=t.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this,e=t.options,i=e.ticks;let n=t.getTickLimit();n=Math.max(2,n);const o=_r({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:t._maxDigits(),horizontal:t.isHorizontal(),minRotation:i.minRotation||0,includeBounds:!1!==i.includeBounds},t._range||t);return"ticks"===e.bounds&&V(o,t,"value"),e.reverse?(o.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),o}configure(){const t=this,e=t.ticks;let i=t.min,n=t.max;if(super.configure(),t.options.offset&&e.length){const t=(n-i)/Math.max(e.length-1,1)/2;i-=t,n+=t}t._startValue=i,t._endValue=n,t._valueRange=n-i}getLabelForValue(t){return ti(t,this.chart.options.locale)}}class br extends yr{determineDataLimits(){const t=this,{min:e,max:i}=t.getMinMax(!0);t.min=m(e)?e:0,t.max=m(i)?i:1,t.handleTickRangeOptions()}computeTickLimit(){const t=this,e=t.isHorizontal(),i=e?t.width:t.height,n=W(t.options.ticks.minRotation),o=(e?Math.sin(n):Math.cos(n))||.001,r=t._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,r.lineHeight/o))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}function xr(t){return 1===t/Math.pow(10,Math.floor(N(t)))}br.id="linear",br.defaults={ticks:{callback:En.formatters.numeric}};class kr extends Nn{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=yr.prototype.parse.apply(this,[t,e]);if(0!==i)return m(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const t=this,{min:e,max:i}=t.getMinMax(!0);t.min=m(e)?Math.max(0,e):null,t.max=m(i)?Math.max(0,i):null,t.options.beginAtZero&&(t._zero=!0),t.handleTickRangeOptions()}handleTickRangeOptions(){const t=this,{minDefined:e,maxDefined:i}=t.getUserBounds();let n=t.min,o=t.max;const r=t=>n=e?n:t,a=t=>o=i?o:t,s=(t,e)=>Math.pow(10,Math.floor(N(t))+e);n===o&&(n<=0?(r(1),a(10)):(r(s(n,-1)),a(s(o,1)))),n<=0&&r(s(o,-1)),o<=0&&a(s(n,1)),t._zero&&t.min!==t._suggestedMin&&n===s(t.min,0)&&r(s(n,-1)),t.min=n,t.max=o}buildTicks(){const t=this,e=t.options,i=function(t,e){const i=Math.floor(N(e.max)),n=Math.ceil(e.max/Math.pow(10,i)),o=[];let r=f(t.min,Math.pow(10,Math.floor(N(e.min)))),a=Math.floor(N(r)),s=Math.floor(r/Math.pow(10,a)),l=a<0?Math.pow(10,Math.abs(a)):1;do{o.push({value:r,major:xr(r)}),++s,10===s&&(s=1,++a,l=a>=0?1:l),r=Math.round(s*Math.pow(10,a)*l)/l}while(a<i||a===i&&s<n);const c=f(t.max,r);return o.push({value:c,major:xr(r)}),o}({min:t._userMin,max:t._userMax},t);return"ticks"===e.bounds&&V(i,t,"value"),e.reverse?(i.reverse(),t.start=t.max,t.end=t.min):(t.start=t.min,t.end=t.max),i}getLabelForValue(t){return void 0===t?"0":ti(t,this.chart.options.locale)}configure(){const t=this,e=t.min;super.configure(),t._startValue=N(e),t._valueRange=N(t.max)-N(e)}getPixelForValue(t){const e=this;return void 0!==t&&0!==t||(t=e.min),null===t||isNaN(t)?NaN:e.getPixelForDecimal(t===e.min?0:(N(t)-e._startValue)/e._valueRange)}getValueForPixel(t){const e=this,i=e.getDecimalForPixel(t);return Math.pow(10,e._startValue+i*e._valueRange)}}function wr(t){const e=t.ticks;if(e.display&&t.display){const t=ce(e.backdropPadding);return g(e.font&&e.font.size,Ht.font.size)+t.height}return 0}function Lr(t,e,i,n,o){return t===n||t===o?{start:e-i/2,end:e+i/2}:t<n||t>o?{start:e-i,end:e}:{start:e,end:e+i}}function Mr(t){const e={l:0,r:t.width,t:0,b:t.height-t.paddingTop},i={},n=[],o=[],r=t.getLabels().length;for(let c=0;c<r;c++){const r=t.options.pointLabels.setContext(t.getPointLabelContext(c));o[c]=r.padding;const h=t.getPointPosition(c,t.drawingArea+o[c]),u=he(r.font),d=(a=t.ctx,s=u,l=p(l=t._pointLabels[c])?l:[l],{w:Vt(a,s.string,l),h:l.length*s.lineHeight});n[c]=d;const m=t.getIndexAngle(c),f=q(m),g=Lr(f,h.x,d.w,0,180),_=Lr(f,h.y,d.h,90,270);g.start<e.l&&(e.l=g.start,i.l=m),g.end>e.r&&(e.r=g.end,i.r=m),_.start<e.t&&(e.t=_.start,i.t=m),_.end>e.b&&(e.b=_.end,i.b=m)}var a,s,l;t._setReductions(t.drawingArea,e,i),t._pointLabelItems=function(t,e,i){const n=[],o=t.getLabels().length,r=t.options,a=wr(r),s=t.getDistanceFromCenterForValue(r.ticks.reverse?t.min:t.max);for(let r=0;r<o;r++){const o=0===r?a/2:0,l=t.getPointPosition(r,s+o+i[r]),c=q(t.getIndexAngle(r)),h=e[r],u=Sr(l.y,h.h,c),p=Cr(c),d=Pr(l.x,h.w,p);n.push({x:l.x,y:u,textAlign:p,left:d,top:u,right:d+h.w,bottom:u+h.h})}return n}(t,n,o)}function Cr(t){return 0===t||180===t?"center":t<180?"left":"right"}function Pr(t,e,i){return"right"===i?t-=e:"center"===i&&(t-=e/2),t}function Sr(t,e,i){return 90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e),t}function Tr(t,e,i,n){const{ctx:o}=t;if(i)o.arc(t.xCenter,t.yCenter,e,0,O);else{let i=t.getPointPosition(0,e);o.moveTo(i.x,i.y);for(let r=1;r<n;r++)i=t.getPointPosition(r,e),o.lineTo(i.x,i.y)}}function Ar(t){return H(t)?t:0}kr.id="logarithmic",kr.defaults={ticks:{callback:En.formatters.logarithmic,major:{enabled:!0}}};class Er extends yr{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this;t.width=t.maxWidth,t.height=t.maxHeight,t.paddingTop=wr(t.options)/2,t.xCenter=Math.floor(t.width/2),t.yCenter=Math.floor((t.height-t.paddingTop)/2),t.drawingArea=Math.min(t.height-t.paddingTop,t.width)/2}determineDataLimits(){const t=this,{min:e,max:i}=t.getMinMax(!1);t.min=m(e)&&!isNaN(e)?e:0,t.max=m(i)&&!isNaN(i)?i:0,t.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wr(this.options))}generateTickLabels(t){const e=this;yr.prototype.generateTickLabels.call(e,t),e._pointLabels=e.getLabels().map(((t,i)=>{const n=v(e.options.pointLabels.callback,[t,i],e);return n||0===n?n:""}))}fit(){const t=this,e=t.options;e.display&&e.pointLabels.display?Mr(t):t.setCenterPoint(0,0,0,0)}_setReductions(t,e,i){const n=this;let o=e.l/Math.sin(i.l),r=Math.max(e.r-n.width,0)/Math.sin(i.r),a=-e.t/Math.cos(i.t),s=-Math.max(e.b-(n.height-n.paddingTop),0)/Math.cos(i.b);o=Ar(o),r=Ar(r),a=Ar(a),s=Ar(s),n.drawingArea=Math.max(t/2,Math.min(Math.floor(t-(o+r)/2),Math.floor(t-(a+s)/2))),n.setCenterPoint(o,r,a,s)}setCenterPoint(t,e,i,n){const o=this,r=o.width-e-o.drawingArea,a=t+o.drawingArea,s=i+o.drawingArea,l=o.height-o.paddingTop-n-o.drawingArea;o.xCenter=Math.floor((a+r)/2+o.left),o.yCenter=Math.floor((s+l)/2+o.top+o.paddingTop)}getIndexAngle(t){return J(t*(O/this.getLabels().length)+W(this.options.startAngle||0))}getDistanceFromCenterForValue(t){const e=this;if(u(t))return NaN;const i=e.drawingArea/(e.max-e.min);return e.options.reverse?(e.max-t)*i:(t-e.min)*i}getValueForDistanceFromCenter(t){if(u(t))return NaN;const e=this,i=t/(e.drawingArea/(e.max-e.min));return e.options.reverse?e.max-i:e.min+i}getPointLabelContext(t){const e=this,i=e._pointLabels||[];if(t>=0&&t<i.length){const n=i[t];return function(t,e,i){return Object.assign(Object.create(t),{label:i,index:e,type:"pointLabel"})}(e.getContext(),t,n)}}getPointPosition(t,e){const i=this,n=i.getIndexAngle(t)-z;return{x:Math.cos(n)*e+i.xCenter,y:Math.sin(n)*e+i.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:i,right:n,bottom:o}}drawBackground(){const t=this,{backgroundColor:e,grid:{circular:i}}=t.options;if(e){const n=t.ctx;n.save(),n.beginPath(),Tr(t,t.getDistanceFromCenterForValue(t._endValue),i,t.getLabels().length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const t=this,e=t.ctx,i=t.options,{angleLines:n,grid:o}=i,r=t.getLabels().length;let a,s,l;if(i.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:n}}=t;for(let o=e-1;o>=0;o--){const e=n.setContext(t.getPointLabelContext(o)),r=he(e.font),{x:a,y:s,textAlign:l,left:c,top:h,right:p,bottom:d}=t._pointLabelItems[o],{backdropColor:m}=e;if(!u(m)){const t=ce(e.backdropPadding);i.fillStyle=m,i.fillRect(c-t.left,h-t.top,p-c+t.width,d-h+t.height)}te(i,t._pointLabels[o],a,s+r.lineHeight/2,r,{color:e.color,textAlign:l,textBaseline:"middle"})}}(t,r),o.display&&t.ticks.forEach(((e,i)=>{if(0!==i){s=t.getDistanceFromCenterForValue(e.value);const n=o.setContext(t.getContext(i-1));!function(t,e,i,n){const o=t.ctx,r=e.circular,{color:a,lineWidth:s}=e;!r&&!n||!a||!s||i<0||(o.save(),o.strokeStyle=a,o.lineWidth=s,o.setLineDash(e.borderDash),o.lineDashOffset=e.borderDashOffset,o.beginPath(),Tr(t,i,r,n),o.closePath(),o.stroke(),o.restore())}(t,n,s,r)}})),n.display){for(e.save(),a=t.getLabels().length-1;a>=0;a--){const o=n.setContext(t.getPointLabelContext(a)),{color:r,lineWidth:c}=o;c&&r&&(e.lineWidth=c,e.strokeStyle=r,e.setLineDash(o.borderDash),e.lineDashOffset=o.borderDashOffset,s=t.getDistanceFromCenterForValue(i.ticks.reverse?t.min:t.max),l=t.getPointPosition(a,s),e.beginPath(),e.moveTo(t.xCenter,t.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const t=this,e=t.ctx,i=t.options,n=i.ticks;if(!n.display)return;const o=t.getIndexAngle(0);let r,a;e.save(),e.translate(t.xCenter,t.yCenter),e.rotate(o),e.textAlign="center",e.textBaseline="middle",t.ticks.forEach(((o,s)=>{if(0===s&&!i.reverse)return;const l=n.setContext(t.getContext(s)),c=he(l.font);if(r=t.getDistanceFromCenterForValue(t.ticks[s].value),l.showLabelBackdrop){e.font=c.string,a=e.measureText(o.label).width,e.fillStyle=l.backdropColor;const t=ce(l.backdropPadding);e.fillRect(-a/2-t.left,-r-c.size/2-t.top,a+t.width,c.size+t.height)}te(e,o.label,0,-r,c,{color:l.color})})),e.restore()}drawTitle(){}}Er.id="radialLinear",Er.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:En.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5}},Er.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Er.descriptors={angleLines:{_fallback:"grid"}};const Dr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Or=Object.keys(Dr);function Ir(t,e){return t-e}function Br(t,e){if(u(e))return null;const i=t._adapter,{parser:n,round:o,isoWeekday:r}=t._parseOpts;let a=e;return"function"==typeof n&&(a=n(a)),m(a)||(a="string"==typeof n?i.parse(a,n):i.parse(a)),null===a?null:(o&&(a="week"!==o||!H(r)&&!0!==r?i.startOf(a,o):i.startOf(a,"isoWeek",r)),+a)}function Rr(t,e,i,n){const o=Or.length;for(let r=Or.indexOf(t);r<o-1;++r){const t=Dr[Or[r]],o=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(o*t.size))<=n)return Or[r]}return Or[o-1]}function zr(t,e,i){if(i){if(i.length){const{lo:n,hi:o}=pe(i,e);t[i[n]>=e?i[n]:i[o]]=!0}}else t[e]=!0}function Fr(t,e,i){const n=[],o={},r=e.length;let a,s;for(a=0;a<r;++a)s=e[a],o[s]=a,n.push({value:s,major:!1});return 0!==r&&i?function(t,e,i,n){const o=t._adapter,r=+o.startOf(e[0].value,n),a=e[e.length-1].value;let s,l;for(s=r;s<=a;s=+o.add(s,1,n))l=i[s],l>=0&&(e[l].major=!0);return e}(t,n,o,i):n}class jr extends Nn{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e){const i=t.time||(t.time={}),n=this._adapter=new Wi._date(t.adapters.date);M(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Br(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this,e=t.options,i=t._adapter,n=e.time.unit||"day";let{min:o,max:r,minDefined:a,maxDefined:s}=t.getUserBounds();function l(t){a||isNaN(t.min)||(o=Math.min(o,t.min)),s||isNaN(t.max)||(r=Math.max(r,t.max))}a&&s||(l(t._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(t.getMinMax(!1))),o=m(o)&&!isNaN(o)?o:+i.startOf(Date.now(),n),r=m(r)&&!isNaN(r)?r:+i.endOf(Date.now(),n)+1,t.min=Math.min(o,r-1),t.max=Math.max(o+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this,e=t.options,i=e.time,n=e.ticks,o="labels"===n.source?t.getLabelTimestamps():t._generate();"ticks"===e.bounds&&o.length&&(t.min=t._userMin||o[0],t.max=t._userMax||o[o.length-1]);const r=t.min,a=function(t,e,i){let n=0,o=t.length;for(;n<o&&t[n]<e;)n++;for(;o>n&&t[o-1]>i;)o--;return n>0||o<t.length?t.slice(n,o):t}(o,r,t.max);return t._unit=i.unit||(n.autoSkip?Rr(i.minUnit,t.min,t.max,t._getLabelCapacity(r)):function(t,e,i,n,o){for(let r=Or.length-1;r>=Or.indexOf(i);r--){const i=Or[r];if(Dr[i].common&&t._adapter.diff(o,n,i)>=e-1)return i}return Or[i?Or.indexOf(i):0]}(t,a.length,i.minUnit,t.min,t.max)),t._majorUnit=n.major.enabled&&"year"!==t._unit?function(t){for(let e=Or.indexOf(t)+1,i=Or.length;e<i;++e)if(Dr[Or[e]].common)return Or[e]}(t._unit):void 0,t.initOffsets(o),e.reverse&&a.reverse(),Fr(t,a,t._majorUnit)}initOffsets(t){const e=this;let i,n,o=0,r=0;e.options.offset&&t.length&&(i=e.getDecimalForValue(t[0]),o=1===t.length?1-i:(e.getDecimalForValue(t[1])-i)/2,n=e.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-e.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;o=Q(o,0,a),r=Q(r,0,a),e._offsets={start:o,end:r,factor:1/(o+1+r)}}_generate(){const t=this,e=t._adapter,i=t.min,n=t.max,o=t.options,r=o.time,a=r.unit||Rr(r.minUnit,i,n,t._getLabelCapacity(i)),s=g(r.stepSize,1),l="week"===a&&r.isoWeekday,c=H(l)||!0===l,h={};let u,p,d=i;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":a),e.diff(n,i,a)>1e5*s)throw new Error(i+" and "+n+" are too far apart with stepSize of "+s+" "+a);const m="data"===o.ticks.source&&t.getDataTimestamps();for(u=d,p=0;u<n;u=+e.add(u,s,a),p++)zr(h,u,m);return u!==n&&"ticks"!==o.bounds&&1!==p||zr(h,u,m),Object.keys(h).sort(((t,e)=>t-e)).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}_tickFormatFunction(t,e,i,n){const o=this,r=o.options,a=r.time.displayFormats,s=o._unit,l=o._majorUnit,c=s&&a[s],h=l&&a[l],u=i[e],p=l&&h&&u&&u.major,d=o._adapter.format(t,n||(p?h:c)),m=r.ticks.callback;return m?v(m,[d,e,i],o):d}generateTickLabels(t){let e,i,n;for(e=0,i=t.length;e<i;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){const e=this;return null===t?NaN:(t-e.min)/(e.max-e.min)}getPixelForValue(t){const e=this,i=e._offsets,n=e.getDecimalForValue(t);return e.getPixelForDecimal((i.start+n)*i.factor)}getValueForPixel(t){const e=this,i=e._offsets,n=e.getDecimalForPixel(t)/i.factor-i.end;return e.min+n*(e.max-e.min)}_getLabelSize(t){const e=this,i=e.options.ticks,n=e.ctx.measureText(t).width,o=W(e.isHorizontal()?i.maxRotation:i.minRotation),r=Math.cos(o),a=Math.sin(o),s=e._resolveTickFontOptions(0).size;return{w:n*r+s*a,h:n*a+s*r}}_getLabelCapacity(t){const e=this,i=e.options.time,n=i.displayFormats,o=n[i.unit]||n.millisecond,r=e._tickFormatFunction(t,0,Fr(e,[t],e._majorUnit),o),a=e._getLabelSize(r),s=Math.floor(e.isHorizontal()?e.width/a.w:e.height/a.h)-1;return s>0?s:1}getDataTimestamps(){const t=this;let e,i,n=t._cache.data||[];if(n.length)return n;const o=t.getMatchingVisibleMetas();if(t._normalized&&o.length)return t._cache.data=o[0].controller.getAllParsedValues(t);for(e=0,i=o.length;e<i;++e)n=n.concat(o[e].controller.getAllParsedValues(t));return t._cache.data=t.normalize(n)}getLabelTimestamps(){const t=this,e=t._cache.labels||[];let i,n;if(e.length)return e;const o=t.getLabels();for(i=0,n=o.length;i<n;++i)e.push(Br(t,o[i]));return t._cache.labels=t._normalized?e:t.normalize(e)}normalize(t){return _e(t.sort(Ir))}}function Nr(t,e,i){let n,o,r,a,s=0,l=t.length-1;i?(e>=t[s].pos&&e<=t[l].pos&&({lo:s,hi:l}=de(t,"pos",e)),({pos:n,time:r}=t[s]),({pos:o,time:a}=t[l])):(e>=t[s].time&&e<=t[l].time&&({lo:s,hi:l}=de(t,"time",e)),({time:n,pos:r}=t[s]),({time:o,pos:a}=t[l]));const c=o-n;return c?r+(a-r)*(e-n)/c:r}jr.id="time",jr.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Ur extends jr{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this,e=t._getTimestampsForTable(),i=t._table=t.buildLookupTable(e);t._minPos=Nr(i,t.min),t._tableRange=Nr(i,t.max)-t._minPos,super.initOffsets(e)}buildLookupTable(t){const{min:e,max:i}=this,n=[],o=[];let r,a,s,l,c;for(r=0,a=t.length;r<a;++r)l=t[r],l>=e&&l<=i&&n.push(l);if(n.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(r=0,a=n.length;r<a;++r)c=n[r+1],s=n[r-1],l=n[r],Math.round((c+s)/2)!==l&&o.push({time:l,pos:r/(a-1)});return o}_getTimestampsForTable(){const t=this;let e=t._cache.all||[];if(e.length)return e;const i=t.getDataTimestamps(),n=t.getLabelTimestamps();return e=i.length&&n.length?t.normalize(i.concat(n)):i.length?i:n,e=t._cache.all=e,e}getDecimalForValue(t){return(Nr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this,i=e._offsets,n=e.getDecimalForPixel(t)/i.factor-i.end;return Nr(e._table,n*e._tableRange+e._minPos,!0)}}Ur.id="timeseries",Ur.defaults=jr.defaults;var Gr=i(5243),Hr=i.n(Gr),Zr=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,Vr=""===document.documentElement.style.pointerEvents,Wr={cors:Zr,pointerEvents:Vr},qr={attributionWidthOffset:55},$r=0;function Yr(t){var e="";for(var i in t.f=t.f||"json",t)if(t.hasOwnProperty(i)){var n,o=t[i],r=Object.prototype.toString.call(o);e.length&&(e+="&"),n="[object Array]"===r?"[object Object]"===Object.prototype.toString.call(o[0])?JSON.stringify(o):o.join(","):"[object Object]"===r?JSON.stringify(o):"[object Date]"===r?o.valueOf():o,e+=encodeURIComponent(i)+"="+encodeURIComponent(n)}return e}function Kr(t,e){var i=new window.XMLHttpRequest;return i.onerror=function(n){i.onreadystatechange=Gr.Util.falseFn,t.call(e,{error:{code:500,message:"XMLHttpRequest error"}},null)},i.onreadystatechange=function(){var n,o;if(4===i.readyState){try{n=JSON.parse(i.responseText)}catch(t){n=null,o={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!o&&n.error&&(o=n.error,n=null),i.onerror=Gr.Util.falseFn,t.call(e,o,n)}},i.ontimeout=function(){this.onerror()},i}function Jr(t,e,i,n){var o=Kr(i,n);return o.open("GET",t+"?"+Yr(e),!0),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout,n.options.withCredentials&&(o.withCredentials=!0)),o.send(null),o}function Xr(t,e,i,n){var o=Yr(e),r=Kr(i,n),a=(t+"?"+o).length;if(a<=2e3&&Wr.cors?r.open("GET",t+"?"+o):a>2e3&&Wr.cors&&(r.open("POST",t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),null!=n&&void 0!==n.options&&(r.timeout=n.options.timeout,n.options.withCredentials&&(r.withCredentials=!0)),a<=2e3&&Wr.cors)r.send(null);else{if(!(a>2e3&&Wr.cors))return a<=2e3&&!Wr.cors?Qr(t,e,i,n):void ea("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");r.send(o)}return r}function Qr(t,e,i,n){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var o="c"+$r;e.callback="window._EsriLeafletCallbacks."+o,window._EsriLeafletCallbacks[o]=function(t){if(!0!==window._EsriLeafletCallbacks[o]){var e,r=Object.prototype.toString.call(t);"[object Object]"!==r&&"[object Array]"!==r&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),i.call(n,e,t),window._EsriLeafletCallbacks[o]=!0}};var r=Gr.DomUtil.create("script",null,document.body);return r.type="text/javascript",r.src=t+"?"+Yr(e),r.id=o,r.onerror=function(t){if(t&&!0!==window._EsriLeafletCallbacks[o]){i.call(n,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[o]=!0}},Gr.DomUtil.addClass(r,"esri-leaflet-jsonp"),$r++,{id:o,url:r.src,abort:function(){window._EsriLeafletCallbacks._callback[o]({code:0,message:"Request aborted."})}}}var ta=Wr.cors?Jr:Qr;function ea(){console&&console.warn&&console.warn.apply(console,arguments)}ta.CORS=Jr,ta.JSONP=Qr;var ia={request:Xr,get:ta,post:function(t,e,i,n){var o=Kr(i,n);return o.open("POST",t),null!=n&&void 0!==n.options&&(o.timeout=n.options.timeout),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.send(Yr(e)),o}},na=function(t,e,i,n){var o=(n[0]-i[0])*(t[1]-i[1])-(n[1]-i[1])*(t[0]-i[0]),r=(e[0]-t[0])*(t[1]-i[1])-(e[1]-t[1])*(t[0]-i[0]),a=(n[1]-i[1])*(e[0]-t[0])-(n[0]-i[0])*(e[1]-t[1]);if(0!==a){var s=o/a,l=r/a;if(s>=0&&s<=1&&l>=0&&l<=1)return!0}return!1},oa=function(t,e){for(var i=0;i<t.length-1;i++)for(var n=0;n<e.length-1;n++)if(na(t[i],t[i+1],e[n],e[n+1]))return!0;return!1},ra=function(t){return function(t,e){for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t},aa=function(t){for(var e,i=0,n=0,o=t.length,r=t[n];n<o-1;n++)i+=((e=t[n+1])[0]-r[0])*(e[1]+r[1]),r=e;return i>=0},sa=function(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},la=function(t,e){var i=oa(t,e),n=function(t,e){for(var i=!1,n=-1,o=t.length,r=o-1;++n<o;r=n)(t[n][1]<=e[1]&&e[1]<t[r][1]||t[r][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[r][0]-t[n][0])*(e[1]-t[n][1])/(t[r][1]-t[n][1])+t[n][0]&&(i=!i);return i}(t,e[0]);return!(i||!n)},ca=function t(e,i){var n={};if(e.features){n.type="FeatureCollection",n.features=[];for(var o=0;o<e.features.length;o++)n.features.push(t(e.features[o],i))}if("number"==typeof e.x&&"number"==typeof e.y&&(n.type="Point",n.coordinates=[e.x,e.y],"number"==typeof e.z&&n.coordinates.push(e.z)),e.points&&(n.type="MultiPoint",n.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(n.type="LineString",n.coordinates=e.paths[0].slice(0)):(n.type="MultiLineString",n.coordinates=e.paths.slice(0))),e.rings&&(n=function(t){for(var e,i,n,o=[],r=[],a=0;a<t.length;a++){var s=ra(t[a].slice(0));if(!(s.length<4))if(aa(s)){var l=[s.slice().reverse()];o.push(l)}else r.push(s.slice().reverse())}for(var c=[];r.length;){n=r.pop();var h=!1;for(e=o.length-1;e>=0;e--)if(i=o[e][0],la(i,n)){o[e].push(n),h=!0;break}h||c.push(n)}for(;c.length;){n=c.pop();var u=!1;for(e=o.length-1;e>=0;e--)if(i=o[e][0],oa(i,n)){o[e].push(n),u=!0;break}u||o.push([n.reverse()])}return 1===o.length?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(n.type="Polygon",n.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(n.type="Feature",n.geometry=e.geometry?t(e.geometry):null,n.properties=e.attributes?sa(e.attributes):null,e.attributes))try{n.id=function(t,e){for(var i=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],n=0;n<i.length;n++){var o=i[n];if(o in t&&("string"==typeof t[o]||"number"==typeof t[o]))return t[o]}throw Error("No valid id attribute found")}(e.attributes,i)}catch(t){}return JSON.stringify(n.geometry)===JSON.stringify({})&&(n.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),n},ha=function(t){var e=[],i=t.slice(0),n=ra(i.shift().slice(0));if(n.length>=4){aa(n)||n.reverse(),e.push(n);for(var o=0;o<i.length;o++){var r=ra(i[o].slice(0));r.length>=4&&(aa(r)&&r.reverse(),e.push(r))}}return e},ua=function t(e,i){i=i||"OBJECTID";var n,o={wkid:4326},r={};switch(e.type){case"Point":r.x=e.coordinates[0],r.y=e.coordinates[1],r.spatialReference=o;break;case"MultiPoint":r.points=e.coordinates.slice(0),r.spatialReference=o;break;case"LineString":r.paths=[e.coordinates.slice(0)],r.spatialReference=o;break;case"MultiLineString":r.paths=e.coordinates.slice(0),r.spatialReference=o;break;case"Polygon":r.rings=ha(e.coordinates.slice(0)),r.spatialReference=o;break;case"MultiPolygon":r.rings=function(t){for(var e=[],i=0;i<t.length;i++)for(var n=ha(t[i]),o=n.length-1;o>=0;o--){var r=n[o].slice(0);e.push(r)}return e}(e.coordinates.slice(0)),r.spatialReference=o;break;case"Feature":e.geometry&&(r.geometry=t(e.geometry,i)),r.attributes=e.properties?sa(e.properties):{},e.id&&(r.attributes[i]=e.id);break;case"FeatureCollection":for(r=[],n=0;n<e.features.length;n++)r.push(t(e.features[n],i));break;case"GeometryCollection":for(r=[],n=0;n<e.geometries.length;n++)r.push(t(e.geometries[n],i))}return r},pa='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>';function da(t,e){return ua(t,e)}function ma(t,e){return ca(t,e)}function fa(t){if("NaN"!==t.xmin&&"NaN"!==t.ymin&&"NaN"!==t.xmax&&"NaN"!==t.ymax){var e=(0,Gr.latLng)(t.ymin,t.xmin),i=(0,Gr.latLng)(t.ymax,t.xmax);return(0,Gr.latLngBounds)(e,i)}return null}function ga(t){return{xmin:(t=(0,Gr.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var _a=/^(OBJECTID|FID|OID|ID)$/i;function va(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var i=0;i<=t.fields.length-1;i++)if("esriFieldTypeOID"===t.fields[i].type){e=t.fields[i].name;break}if(!e)for(i=0;i<=t.fields.length-1;i++)if(t.fields[i].name.match(_a)){e=t.fields[i].name;break}}return e}function ya(t){for(var e in t.attributes)if(e.match(_a))return e}function ba(t,e){var i,n=t.features||t.results,o=n&&n.length;i=e||va(t);var r={type:"FeatureCollection",features:[]};if(o)for(var a=n.length-1;a>=0;a--){var s=ma(n[a],i||ya(n[a]));r.features.push(s)}return r}function xa(t){return"/"!==(t=Gr.Util.trim(t))[t.length-1]&&(t+="/"),t}function ka(t){if(-1!==t.url.indexOf("?")){t.requestParams=t.requestParams||{};var e=t.url.substring(t.url.indexOf("?")+1);t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return t.url=xa(t.url.split("?")[0]),t}function wa(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function La(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function Ma(t){return t.getSize().x-qr.attributionWidthOffset+"px"}function Ca(t){if(t.attributionControl){if(t.attributionControl._esriAttributionLayerCount||(t.attributionControl._esriAttributionLayerCount=0),0===t.attributionControl._esriAttributionLayerCount){if(!t.attributionControl._esriAttributionAddedOnce){var e=document.createElement("style");e.type="text/css",e.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(e);var i=document.createElement("style");i.type="text/css",i.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+Ma(t)+";}",document.getElementsByTagName("head")[0].appendChild(i),t.on("resize",(function(e){t.attributionControl&&(t.attributionControl._container.style.maxWidth=Ma(e.target))})),t.attributionControl._esriAttributionAddedOnce=!0}t.attributionControl.setPrefix(pa+' | Powered by <a href="https://www.esri.com">Esri</a>'),Gr.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution:hover"),Gr.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution")}t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount+1}}function Pa(t){t.attributionControl&&(t.attributionControl._esriAttributionLayerCount&&1===t.attributionControl._esriAttributionLayerCount&&(t.attributionControl.setPrefix(pa),Gr.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution:hover"),Gr.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution")),t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount-1)}function Sa(t){var e={geometry:null,geometryType:null};return t instanceof Gr.LatLngBounds?(e.geometry=ga(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof Gr.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof Gr.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=da(t),e.geometryType=La(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=da(t),e.geometryType=La(t.type),e):void ea("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function Ta(t,e){Wr.cors&&Xr(t,{},Gr.Util.bind((function(t,i){if(!t){e._esriAttributions=[];for(var n=0;n<i.contributors.length;n++)for(var o=i.contributors[n],r=0;r<o.coverageAreas.length;r++){var a=o.coverageAreas[r],s=(0,Gr.latLng)(a.bbox[0],a.bbox[1]),l=(0,Gr.latLng)(a.bbox[2],a.bbox[3]);e._esriAttributions.push({attribution:o.attribution,score:a.score,bounds:(0,Gr.latLngBounds)(s,l),minZoom:a.zoomMin,maxZoom:a.zoomMax})}e._esriAttributions.sort((function(t,e){return e.score-t.score})),Aa({target:e})}}),this))}function Aa(t){var e=t.target,i=e._esriAttributions;if(e&&e.attributionControl){var n=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(n&&i){for(var o="",r=e.getBounds(),a=(0,Gr.latLngBounds)(r.getSouthWest().wrap(),r.getNorthEast().wrap()),s=e.getZoom(),l=0;l<i.length;l++){var c=i[l],h=c.attribution;!o.match(h)&&c.bounds.intersects(a)&&s>=c.minZoom&&s<=c.maxZoom&&(o+=", "+h)}o=o.substr(2),n.innerHTML=o,n.style.maxWidth=Ma(e),e.fire("attributionupdated",{attribution:o})}}}var Ea={warn:ea,cleanUrl:xa,getUrlParams:ka,isArcgisOnline:wa,geojsonTypeToArcGIS:La,responseToFeatureCollection:ba,geojsonToArcGIS:da,arcgisToGeoJSON:ma,boundsToExtent:ga,extentToBounds:fa,calcAttributionWidth:Ma,setEsriAttribution:Ca,_setGeometry:Sa,_getAttributionData:Ta,_updateMapAttribution:Aa,_findIdAttributeFromFeature:ya,_findIdAttributeFromResponse:va},Da=Gr.Class.extend({options:{proxy:!1,useCors:Zr},generateSetter:function(t,e){return Gr.Util.bind((function(e){return this.params[t]=e,this}),e)},initialize:function(t){if(t.request&&t.options?(this._service=t,Gr.Util.setOptions(this,t.options)):(Gr.Util.setOptions(this,t),this.options.url=xa(t.url)),this.params=Gr.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var i=this.setters[e];this[e]=this.generateSetter(i,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},apikey:function(t){return this.token(t)},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&Gr.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,i,n,o){var r=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?ia[t](r,i,n,o):ia.get.JSONP(r,i,n,o)}});var Oa=Da.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=(0,Gr.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSR=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(t,e){return this._cleanParams(),this.options.isModern||wa(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request((function(i,n){this._trapSQLerrors(i),t.call(e,i,n,n)}),this)):this.request((function(i,n){this._trapSQLerrors(i),t.call(e,i,n&&ba(n),n)}),this)},count:function(t,e){return this._cleanParams(),this.params.returnCountOnly=!0,this.request((function(e,i){t.call(this,e,i&&i.count,i)}),e)},ids:function(t,e){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request((function(e,i){t.call(this,e,i&&i.objectIds,i)}),e)},bounds:function(t,e){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request((function(i,n){n&&n.extent&&fa(n.extent)?t.call(e,i,fa(n.extent),n):(i={message:"Invalid Bounds"},t.call(e,i,null,n))}),e)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){var e=(0,Gr.point)(t);return this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&ea("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSR=4326;var e=Sa(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var Ia=function(t){return new Oa(t)},Ba=Da.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(t,e){return this.request((function(i,n){t.call(e,i,n&&ba(n),n)}),e)}});var Ra=function(t){return new Ba(t)},za=Da.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});var Fa=za.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=ga(t.getBounds()),i=t.getSize();return this.params.imageDisplay=[i.x,i.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=(0,Gr.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var i=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=i/t.getSize().y*e,this},run:function(t,e){return this.request((function(i,n){if(i)t.call(e,i,void 0,n);else{var o=ba(n);n.results=n.results.reverse();for(var r=0;r<o.features.length;r++){o.features[r].layerId=n.results[r].layerId}t.call(e,void 0,o,n)}}))},_setGeometryParams:function(t){var e=Sa(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});var ja=function(t){return new Fa(t)},Na=za.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=(0,Gr.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(t,e){return this.request((function(i,n){t.call(e,i,n&&this._responseToGeoJSON(n),n)}),this)},_responseToGeoJSON:function(t){var e=t.location,i=t.catalogItems,n=t.catalogItemVisibilities,o={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(o.pixel.properties.values=t.properties.Values),i&&i.features&&(o.catalogItems=ba(i),n&&n.length===o.catalogItems.features.length))for(var r=n.length-1;r>=0;r--)o.catalogItems.features[r].properties.catalogItemVisibility=n[r];return o}});var Ua=function(t){return new Na(t)},Ga=Gr.Evented.extend({options:{proxy:!1,useCors:Zr,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,Gr.Util.setOptions(this,t),this.options.url=xa(this.options.url)},get:function(t,e,i,n){return this._request("get",t,e,i,n)},post:function(t,e,i,n){return this._request("post",t,e,i,n)},request:function(t,e,i,n){return this._request("request",t,e,i,n)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,i,n,o){this.fire("requeststart",{url:this.options.url+e,params:i,method:t},!0);var r=this._createServiceCallback(t,e,i,n,o);if(this.options.token&&(i.token=this.options.token),this.options.requestParams&&Gr.Util.extend(i,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?ia[t](a,i,r,o):ia.get.JSONP(a,i,r,o)}this._requestQueue.push([t,e,i,n,o])},_createServiceCallback:function(t,e,i,n,o){return Gr.Util.bind((function(r,a){!r||499!==r.code&&498!==r.code||(this._authenticating=!0,this._requestQueue.push([t,e,i,n,o]),this.fire("authenticationrequired",{authenticate:Gr.Util.bind(this.authenticate,this)},!0),r.authenticate=Gr.Util.bind(this.authenticate,this)),n.call(o,r,a),r?this.fire("requesterror",{url:this.options.url+e,params:i,message:r.message,code:r.code,method:t},!0):this.fire("requestsuccess",{url:this.options.url+e,params:i,response:a,method:t},!0),this.fire("requestend",{url:this.options.url+e,params:i,method:t},!0)}),this)},_runQueue:function(){for(var t=this._requestQueue.length-1;t>=0;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});var Ha=Ga.extend({identify:function(){return ja(this)},find:function(){return Ra(this)},query:function(){return Ia(this)}});var Za=function(t){return new Ha(t)},Va=Ga.extend({query:function(){return Ia(this)},identify:function(){return Ua(this)}});var Wa=function(t){return new Va(t)},qa=Ga.extend({options:{idAttribute:"OBJECTID"},query:function(){return Ia(this)},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,e,i){for(var n=t.features?t.features:[t],o=n.length-1;o>=0;o--)delete n[o].id;return t=da(t),t=n.length>1?t:[t],this.post("addFeatures",{features:t},(function(t,n){var o=n&&n.addResults?n.addResults.length>1?n.addResults:n.addResults[0]:void 0;e&&e.call(i,t||n.addResults[0].error,o)}),i)},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,e,i){var n=t.features?t.features:[t];return t=da(t,this.options.idAttribute),t=n.length>1?t:[t],this.post("updateFeatures",{features:t},(function(t,n){var o=n&&n.updateResults?n.updateResults.length>1?n.updateResults:n.updateResults[0]:void 0;e&&e.call(i,t||n.updateResults[0].error,o)}),i)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,e,i){return this.post("deleteFeatures",{objectIds:t},(function(t,n){var o=n&&n.deleteResults?n.deleteResults.length>1?n.deleteResults:n.deleteResults[0]:void 0;e&&e.call(i,t||n.deleteResults[0].error,o)}),i)}});var $a=function(t){return new qa(t)},Ya="https:"!==window.location.protocol?"http:":"https:",Ka=Gr.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Ya+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Ya+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:Vr?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:Vr?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:Vr?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:Vr?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:Vr?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:Vr?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:Vr?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Ya+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Ya+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Ya+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Ya+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var i;if("object"==typeof t&&t.urlTemplate&&t.options)i=t;else{if("string"!=typeof t||!Ka.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');i=Ka.TILES[t]}var n=Gr.Util.extend(i.options,e);Gr.Util.setOptions(this,n),this.options.token&&-1===i.urlTemplate.indexOf("token=")&&(i.urlTemplate+="?token="+this.options.token),this.options.proxy&&(i.urlTemplate=this.options.proxy+"?"+i.urlTemplate),Gr.TileLayer.prototype.initialize.call(this,i.urlTemplate,n)},onAdd:function(t){Ca(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&Ta((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",Aa),Gr.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){Pa(t),t.off("moveend",Aa),Gr.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var t=this._map.createPane(this.options.pane);t.style.pointerEvents="none",t.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return t}});function Ja(t,e){return new Ka(t,e)}var Xa=Gr.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=ka(t=Gr.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&Object.keys(t.requestParams).length>0?Gr.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=Za(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),Gr.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return Gr.Util.template(this.tileUrl,Gr.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var i=document.createElement("img");return Gr.DomEvent.on(i,"load",Gr.Util.bind(this._tileOnLoad,this,e,i)),Gr.DomEvent.on(i,"error",Gr.Util.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?i.src=this.getTileUrl(t):this.once("lodmap",(function(){i.src=this.getTileUrl(t)}),this),i},onAdd:function(t){Ca(t),this._lodMap||this.metadata((function(e,i){if(!e&&i.spatialReference){var n=i.spatialReference.latestWkid||i.spatialReference.wkid;if(!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution())),t.options.crs!==Gr.CRS.EPSG3857||102100!==n&&3857!==n)t.options.crs&&t.options.crs.code&&t.options.crs.code.indexOf(n)>-1||ea("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var o=i.tileInfo.lods,r=Xa.MercatorZoomLevels,a=0;a<o.length;a++){var s=o[a];for(var l in r){var c=r[l];if(this._withinPercentage(s.resolution,c,this.options.zoomOffsetAllowance)){this._lodMap[l]=s.level;break}}}this.fire("lodmap")}}}),this),Gr.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){Pa(t),Gr.TileLayer.prototype.onRemove.call(this,t)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,i){return Math.abs(t/e-1)<i}});var Qa=Gr.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,Gr.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===Gr.CRS.EPSG3857?Gr.ImageOverlay.prototype._reset.call(this):Gr.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),ts=Gr.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:Zr,attribution:null,interactive:!1,alt:""},onAdd:function(t){Ca(t),this.options.zIndex&&(this.options.position=null),this._update=Gr.Util.throttle(this._update,this.options.updateInterval,this),t.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata((function(e,i){!e&&!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}),this)},onRemove:function(t){Pa(t),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=(0,Gr.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,i=this._currentImage.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._currentImage._image&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,e,i){if(this._map){if(i&&(t="data:"+i+";base64,"+t),!t)return;var n=new Qa(t,e,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),o=function(t){if(n.off("error",o,this),this._map){var i=t.target,r=this._currentImage;i._bounds.equals(e)&&i._bounds.equals(this._map.getBounds())?(this._currentImage=i,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),r&&this._map&&this._map.removeLayer(r),r&&r._map&&r._map.removeLayer(r)):this._map.removeLayer(i)}this.fire("load",{bounds:e})};n.once("error",(function(){this._map.removeLayer(n),this.fire("error"),n.off("load",o,this)}),this),n.once("load",o,this)}},_update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(!(this._animatingZoom||this._map._panTransition&&this._map._panTransition._inProgress))if(t>this.options.maxZoom||t<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var i=this._buildExportParams();Gr.Util.extend(i,this.options.requestParams),i?(this._requestExport(i,e),this.fire("loading",{bounds:e})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(t,e,i,n){if(t=(0,Gr.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var o=this._popupFunction(e,i,n);o&&this._popup.setLatLng(t).setContent(o).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),i=this._map.unproject(t.getTopRight()),n=this._map.options.crs.project(i),o=this._map.options.crs.project(e),r=(0,Gr.bounds)(n,o);return[r.getBottomLeft().x,r.getBottomLeft().y,r.getTopRight().x,r.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),i=this._map.unproject(t.getBottomLeft()),n=this._map.unproject(t.getTopRight()),o=this._map.latLngToLayerPoint(n).y,r=this._map.latLngToLayerPoint(i).y;return(o>0||r<e.y)&&(e.y=r-o),e.x+","+e.y}});ts.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=ka(t),this.service=Wa(t),this.service.addEventParent(this),Gr.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return Gr.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return Gr.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(t){var e=Gr.Util.bind((function(e,i,n){e||setTimeout(Gr.Util.bind((function(){this._renderPopup(t.latlng,e,i,n)}),this),300)}),this),i=this.identify().at(t.latlng);this.options.mosaicRule&&i.setMosaicRule(this.options.mosaicRule),i.run(e),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(e.token=this.service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("exportImage",t,(function(t,i){t||(this.options.token&&(i.href+="?token="+this.options.token),this.options.proxy&&(i.href=this.options.proxy+"?"+i.href),this._renderImage(i.href,e))}),this);else{t.f="image";var i=this.options.url+"exportImage"+Gr.Util.getParamString(t);this.options.proxy&&(i=this.options.proxy+"?"+i),this._renderImage(i,e)}}});ts.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=ka(t),this.service=Za(t),this.service.addEventParent(this),Gr.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(t){var e,i=Gr.Util.bind((function(e,i,n){e||setTimeout(Gr.Util.bind((function(){this._renderPopup(t.latlng,e,i,n)}),this),300)}),this);if((e=this.options.popup?this.options.popup.on(this._map).at(t.latlng):this.identify().on(this._map).at(t.latlng)).params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&"string"!=typeof this.options.layerDefs&&!e.params.layerDefs)for(var n in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(n)&&e.layerDef(n,this.options.layerDefs[n]);e.run(i),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(e.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;e.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(e.layerDefs="string"==typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(e.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(e.token=this.service.options.token),this.options.proxy&&(e.proxy=this.options.proxy),this.options.disableCache&&(e._ts=Date.now()),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("export",t,(function(t,i){t||(this.options.token&&i.href&&(i.href+="?token="+this.options.token),this.options.proxy&&i.href&&(i.href=this.options.proxy+"?"+i.href),i.href?this._renderImage(i.href,e):this._renderImage(i.imageData,e,i.contentType))}),this);else{t.f="image";var i=this.options.url+"export"+Gr.Util.getParamString(t);this.options.proxy&&(i=this.options.proxy+"?"+i),this._renderImage(i,e)}}});var es=Gr.Layer.extend({options:{cellSize:512,updateWhenIdle:Gr.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){Gr.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=Gr.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof Gr.Point?t:new Gr.Point(t,t)},_pruneCells:function(){if(this._map){var t,e;for(t in this._cells)(e=this._cells[t]).retain=e.current;for(t in this._cells)if((e=this._cells[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),a=i-1,s=new Gr.Point(+o,+r);s.z=+a;var l=this._cellCoordsToKey(s),c=this._cells[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>n&&this._retainParent(o,r,a,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new Gr.Point(o,r);a.z=i+1;var s=this._cellCoordsToKey(a),l=this._cells[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);e||this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_setView:function(t,e,i,n){var o=Math.round(e);n||(this._cellZoom=o,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneCells(),this._noPrune=!!i)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._cellSize=this.getCellSize(),n=this._cellZoom,o=this._map.getPixelWorldBounds(this._cellZoom);o&&(this._globalCellRange=this._pxBoundsToCellRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._cellZoom),o=e.project(t,this._cellZoom).floor(),r=e.getSize().divideBy(2*n);return new Gr.Bounds(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var n=this._getCelldPixelBounds(t),o=this._pxBoundsToCellRange(n),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new Gr.Bounds(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var c in this._cells){var h=this._cells[c].coords;h.z===this._cellZoom&&l.contains(new Gr.Point(h.x,h.y))||(this._cells[c].current=!1)}if(Math.abs(i-this._cellZoom)>1)this._setView(t,i);else{for(var u=o.min.y;u<=o.max.y;u++)for(var p=o.min.x;p<=o.max.x;p++){var d=new Gr.Point(p,u);if(d.z=this._cellZoom,this._isValidCell(d)){var m=this._cells[this._cellCoordsToKey(d)];m?m.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==a.length)for(this._loading||(this._loading=!0),p=0;p<a.length;p++){var f=this._cellCoordsToKey(a[p]),g=this._keyToCellCoords(f);this._activeCells[g]?this._reuseCell(a[p]):this._createCell(a[p])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalCellRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._cellCoordsToBounds(t);return(0,Gr.toLatLngBounds)(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,i=this.getCellSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_cellCoordsToBounds:function(t){var e=this._cellCoordsToNwSe(t),i=new Gr.LatLngBounds(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),i=new Gr.Point(+e[0],+e[1]);return i.z=+e[2],i},_removeCell:function(t){var e=this._cells[t];if(e){var i=this._keyToCellCoords(t),n=this._wrapCoords(i),o=this._cellCoordsToBounds(this._wrapCoords(i));e.current=!1,delete this._cells[t],this._activeCells[t]=e,this.cellLeave(o,n,t),this.fire("cellleave",{key:t,coords:n,bounds:o})}},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(n,i,e),this.fire("cellenter",{key:e,coords:i,bounds:n})},_createCell:function(t){var e=this._cellCoordsToKey(t),i=this._wrapCoords(t),n=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(n,i,e),this.fire("cellcreate",{key:e,coords:i,bounds:n}),this._cells[e]={coords:t,current:!0},Gr.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,i){var n=this._cellCoordsToKey(t);(i=this._cells[n])&&(i.loaded=+new Date,i.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new Gr.Point(this._wrapX?Gr.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?Gr.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new Gr.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function is(t){this.values=[].concat(t||[])}is.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},is.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,i,n=0,o=this.values.length-1;n<=o;)if(e=(n+o)/2|0,+(i=this.values[Math.round(e)]).value<+t)n=e+1;else{if(!(+i.value>+t))return e;o=e-1}return Math.abs(~o)},is.prototype.between=function(t,e){var i=this.getIndex(t),n=this.getIndex(e);if(0===i&&0===n)return[];for(;this.values[i-1]&&this.values[i-1].value===t;)i--;for(;this.values[n+1]&&this.values[n+1].value===e;)n++;return this.values[n]&&this.values[n].value===e&&this.values[n+1]&&n++,this.values.slice(i,n)},is.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},is.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},is.prototype.sort=function(){return this.values.sort((function(t,e){return+e.value-+t.value})).reverse(),this.dirty=!1,this};var ns=is,os=es.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(t){if(es.prototype.initialize.call(this,t),t=ka(t),t=Gr.Util.setOptions(this,t),this.service=$a(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,i=0;i<this.options.fields.length;i++)this.options.fields[i].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&ea("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new ns,this._endTimeIndex=new ns):this.options.timeField&&(this._timeIndex=new ns),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(t){return Ca(t),this.service.metadata((function(e,i){if(!e){var n=i.supportedQueryFormats,o=!1;(!1===this.service.options.isModern||this.options.fetchAllFeatures)&&(o=!0),!o&&n&&-1!==n.indexOf("geoJSON")&&(this.service.options.isModern=!0),i.objectIdField&&(this.service.options.idAttribute=i.objectIdField),!this.options.attribution&&t.attributionControl&&i.copyrightText&&(this.options.attribution=i.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}}),this),t.on("zoomend",this._handleZoomChange,this),es.prototype.onAdd.call(this,t)},onRemove:function(t){return Pa(t),t.off("zoomend",this._handleZoomChange,this),es.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(t,e,i,n){this._activeRequests++,n=n||0;var o=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:t},!0),this._buildQuery(t,n).run((function(r,a,s){s&&s.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===o&&(!r&&a&&a.features.length&&Gr.Util.requestAnimFrame(Gr.Util.bind((function(){this._addFeatures(a.features,e),this._postProcessFeatures(t)}),this)),r||!a||a.features.length||this._postProcessFeatures(t),r&&this._postProcessFeatures(t),i&&i.call(this,r,a),s&&(s.exceededTransferLimit||s.properties&&s.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(t,e,i,n+a.features.length))}),this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){if(e){var i=this._cacheKey(e);this._cache[i]=this._cache[i]||[]}for(var n=t.length-1;n>=0;n--){var o=t[n].id;-1===this._currentSnapshot.indexOf(o)&&this._currentSnapshot.push(o),void 0!==i&&-1===this._cache[i].indexOf(o)&&this._cache[i].push(o)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t,e){var i=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(e))&&(i=i.offset(e)),i.params.resultType="tile",this.options.requestParams&&Gr.Util.extend(i.params,this.options.requestParams),this.options.simplifyFactor&&i.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&i.between(this.options.from,this.options.to),i},setWhere:function(t,e,i){this.options.where=t&&t.length?t:"1=1";for(var n=[],o=[],r=0,a=null,s=Gr.Util.bind((function(s,l){if(s&&(a=s),l)for(var c=l.features.length-1;c>=0;c--)o.push(l.features[c].id);--r<=0&&this._visibleZoom()&&t===this.options.where&&(this._currentSnapshot=o,Gr.Util.requestAnimFrame(Gr.Util.bind((function(){this.removeLayers(n),this.addLayers(o),e&&e.call(i,a)}),this)))}),this),l=this._currentSnapshot.length-1;l>=0;l--)n.push(this._currentSnapshot[l]);for(var c in this._cache={},this._cells){r++;var h=this._keyToCellCoords(c),u=this._cellCoordsToBounds(h);this._requestFeatures(u,h,s)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e,i,n){var o=this.options.from,r=this.options.to,a=0,s=null,l=Gr.Util.bind((function(l){l&&(s=l),this._filterExistingFeatures(o,r,t,e),a--,i&&a<=0&&i.call(n,s)}),this);if(this.options.from=t,this.options.to=e,this._filterExistingFeatures(o,r,t,e),"server"===this.options.timeFilterMode)for(var c in this._cells){a++;var h=this._keyToCellCoords(c),u=this._cellCoordsToBounds(h);this._requestFeatures(u,h,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,i,n){var o=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,r=this._getFeaturesInTimeRange(i,n);if(r.indexOf)for(var a=0;a<r.length;a++){var s=o.indexOf(r[a]);s>=0&&o.splice(s,1)}Gr.Util.requestAnimFrame(Gr.Util.bind((function(){this.removeLayers(o),this.addLayers(r)}),this))},_getFeaturesInTimeRange:function(t,e){var i,n=[];if(this.options.timeField.start&&this.options.timeField.end){var o=this._startTimeIndex.between(t,e),r=this._endTimeIndex.between(t,e);i=o.concat(r)}else{if(!this._timeIndex)return ea("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];i=this._timeIndex.between(t,e)}for(var a=i.length-1;a>=0;a--)n.push(i[a].id);return n},_buildTimeIndexes:function(t){var e,i;if(this.options.timeField.start&&this.options.timeField.end){var n=[],o=[];for(e=t.length-1;e>=0;e--)i=t[e],n.push({id:i.id,value:new Date(i.properties[this.options.timeField.start])}),o.push({id:i.id,value:new Date(i.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(n),this._endTimeIndex.bulkAdd(o)}else{var r=[];for(e=t.length-1;e>=0;e--)i=t[e],r.push({id:i.id,value:new Date(i.properties[this.options.timeField])});this._timeIndex.bulkAdd(r)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),i=+this.options.to.valueOf();if("string"==typeof this.options.timeField){var n=+t.properties[this.options.timeField];return n>=e&&n<=i}if(this.options.timeField.start&&this.options.timeField.end){var o=+t.properties[this.options.timeField.start],r=+t.properties[this.options.timeField.end];return o>=e&&o<=i||r>=e&&r<=i||o<=e&&r>=i}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,i=this._cacheKey(e);this._cache[i]&&this.addLayers(this._cache[i])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(t){this._metadata?t(undefined,this._metadata):this.metadata(Gr.Util.bind((function(e,i){this._metadata=i,t(e,this._metadata)}),this))},addFeature:function(t,e,i){this.addFeatures(t,e,i)},addFeatures:function(t,e,i){this._getMetadata(Gr.Util.bind((function(n,o){if(n)e&&e.call(this,n,null);else{var r=t.features?t.features:[t];this.service.addFeatures(t,Gr.Util.bind((function(t,n){if(!t){for(var a=r.length-1;a>=0;a--)r[a].properties[o.objectIdField]=r.length>1?n[a].objectId:n.objectId,r[a].id=r.length>1?n[a].objectId:n.objectId;this._addFeatures(r)}e&&e.call(i,t,n)}),this))}}),this))},updateFeature:function(t,e,i){this.updateFeatures(t,e,i)},updateFeatures:function(t,e,i){var n=t.features?t.features:[t];this.service.updateFeatures(t,(function(t,o){if(!t){for(var r=n.length-1;r>=0;r--)this.removeLayers([n[r].id],!0);this._addFeatures(n)}e&&e.call(i,t,o)}),this)},deleteFeature:function(t,e,i){this.deleteFeatures(t,e,i)},deleteFeatures:function(t,e,i){return this.service.deleteFeatures(t,(function(t,n){var o=n.length?n:[n];if(!t&&o.length>0)for(var r=o.length-1;r>=0;r--)this.removeLayers([o[r].objectId],!0);e&&e.call(i,t,n)}),this)}});os.extend({options:{cacheLayers:!0},initialize:function(t){t.apikey&&(t.token=t.apikey),os.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return os.prototype.onRemove.call(this,t)},createNewLayer:function(t){var e=Gr.GeoJSON.geometryToLayer(t,this.options);return e&&(e.defaultOptions=e.options),e},_updateLayer:function(t,e){var i=[],n=this.options.coordsToLatLng||Gr.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":i=Gr.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(i);break;case"LineString":i=Gr.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,n),t.setLatLngs(i);break;case"MultiLineString":case"Polygon":i=Gr.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,n),t.setLatLngs(i);break;case"MultiPolygon":i=Gr.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,n),t.setLatLngs(i)}},createLayers:function(t){for(var e=t.length-1;e>=0;e--){var i,n=t[e],o=this._layers[n.id];!this._visibleZoom()||!o||this._map.hasLayer(o)||this.options.timeField&&!this._featureWithinTimeRange(n)||(this._map.addLayer(o),this.fire("addfeature",{feature:o.feature},!0)),o&&this.options.simplifyFactor>0&&(o.setLatLngs||o.setLatLng)&&this._updateLayer(o,n),o||((i=this.createNewLayer(n))?(i.feature=n,i.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(i.feature,i),this._layers[i.feature.id]=i,this.setFeatureStyle(i.feature.id,this.options.style),this.fire("createfeature",{feature:i.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(n))&&this._map.addLayer(i)):ea("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;e>=0;e--){var i=this._layers[t[e]];!i||this.options.timeField&&!this._featureWithinTimeRange(i.feature)||this._map.addLayer(i)}},removeLayers:function(t,e){for(var i=t.length-1;i>=0;i--){var n=t[i],o=this._layers[n];o&&(this.fire("removefeature",{feature:o.feature,permanent:e},!0),this._map.removeLayer(o)),o&&e&&delete this._layers[n]}},cellEnter:function(t,e){this._visibleZoom()&&!this._zooming&&this._map&&Gr.Util.requestAnimFrame(Gr.Util.bind((function(){var t=this._cacheKey(e),i=this._cellCoordsToKey(e),n=this._cache[t];this._activeCells[i]&&n&&this.addLayers(n)}),this))},cellLeave:function(t,e){this._zooming||Gr.Util.requestAnimFrame(Gr.Util.bind((function(){if(this._map){var t=this._cacheKey(e),i=this._cellCoordsToKey(e),n=this._cache[t],o=this._map.getBounds();if(!this._activeCells[i]&&n){for(var r=!0,a=0;a<n.length;a++){var s=this._layers[n[a]];s&&s.getBounds&&o.intersects(s.getBounds())&&(r=!1)}r&&this.removeLayers(n,!this.options.cacheLayers),!this.options.cacheLayers&&r&&(delete this._cache[t],delete this._cells[i],delete this._activeCells[i])}}}),this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature((function(t){this.resetFeatureStyle(t.feature.id)}),this),this},setStyle:function(t){return this.options.style=t,this.eachFeature((function(e){this.setFeatureStyle(e.feature.id,t)}),this),this},resetFeatureStyle:function(t){var e=this._layers[t],i=this._originalStyle||Gr.Path.prototype.options;return e&&(Gr.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,i)),this},setFeatureStyle:function(t,e){var i=this._layers[t];return"function"==typeof e&&(e=e(i.feature)),i.setStyle&&i.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var i=this._map.getBounds();for(var n in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[n].feature.id)&&("function"==typeof this._layers[n].getLatLng&&i.contains(this._layers[n].getLatLng())||"function"==typeof this._layers[n].getBounds&&i.intersects(this._layers[n].getBounds()))&&t.call(e,this._layers[n])}return this},eachFeature:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature((function(t){t.bringToBack&&t.bringToBack()}))},bringToFront:function(){this.eachFeature((function(t){t.bringToFront&&t.bringToFront()}))},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e=this._layers[t],i=e.feature;if(e&&e.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var n=this.options.pointToLayer(i,(0,Gr.latLng)(i.geometry.coordinates[1],i.geometry.coordinates[0])).options.icon;e.setIcon(n)}if(e&&e.setStyle&&this.options.pointToLayer){var o=this.options.pointToLayer(i,(0,Gr.latLng)(i.geometry.coordinates[1],i.geometry.coordinates[0])).options;this.setFeatureStyle(i.id,o)}e&&e.setStyle&&this.options.style&&this.resetStyle(i.id)}});i(5732),i(9627),i(7977);Hr().TileLayer.HERE=Hr().TileLayer.extend({options:{subdomains:"1234",minZoom:2,maxZoom:18,scheme:"normal.day",resource:"maptile",mapId:"newest",format:"png8",apiKey:"",appId:"",appCode:""},initialize:function(t){var e=(t=Hr().setOptions(this,t)).scheme.split(".")[0];if(t.tileResolution=256,Hr().Browser.retina&&(t.tileResolution=512),t.apiKey)var i=".maps.ls.hereapi.com",n="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?apiKey={apiKey}",o="/maptile/2.1/copyright/{mapId}?apiKey={apiKey}";else i=".maps.api.here.com",n="/{resource}/2.1/{resource}/{mapId}/{scheme}/{z}/{x}/{y}/{tileResolution}/{format}?app_id={appId}&app_code={appCode}",o="/maptile/2.1/copyright/{mapId}?app_id={appId}&app_code={appCode}";var r="base";"satellite"!=e&&"terrain"!=e&&"hybrid"!=e||(r="aerial"),-1!==t.scheme.indexOf(".traffic.")&&(r="traffic");var a="https://{s}."+r+i+n;this._attributionUrl=Hr().Util.template("https://1."+r+i+o,this.options),Hr().TileLayer.prototype.initialize.call(this,a,t),this._attributionText=""},onAdd:function(t){Hr().TileLayer.prototype.onAdd.call(this,t),this._attributionText="",this._attributionBBoxes||this._fetchAttributionBBoxes()},onRemove:function(t){Hr().TileLayer.prototype.onRemove.call(this,t),void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText),this._map.off("moveend zoomend resetview",this._findCopyrightBBox,this)},_fetchAttributionBBoxes:function(){var t=new XMLHttpRequest;t.onreadystatechange=Hr().bind((function(){4==t.readyState&&200==t.status&&this._parseAttributionBBoxes(JSON.parse(t.responseText))}),this),t.open("GET",this._attributionUrl,!0),t.send()},_parseAttributionBBoxes:function(t){if(this._map){for(var e=t[this.options.scheme.split(".")[0]]||t.normal,i=0;i<e.length;i++)if(e[i].boxes)for(var n=0;n<e[i].boxes.length;n++){var o=e[i].boxes[n];e[i].boxes[n]=Hr().latLngBounds([[o[0],o[1]],[o[2],o[3]]])}this._map.on("moveend zoomend resetview",this._findCopyrightBBox,this),this._attributionProviders=e,this._findCopyrightBBox()}},_findCopyrightBBox:function(){if(this._map){for(var t=this._attributionProviders,e=[],i=this._map.getZoom(),n=this._map.getBounds(),o=0;o<t.length;o++){if(t[o].minLevel<i&&t[o].maxLevel>i&&!t[o].boxes){e.push(t[o]);break}for(var r=0;r<t[o].boxes.length;r++){var a=t[o].boxes[r];if(n.overlaps(a)){e.push(t[o]);break}}}var s=['<a href="https://legal.here.com/terms/serviceterms/gb/">HERE maps</a>'];for(o=0;o<e.length;o++){var l=e[o];s.push('<abbr title="'+l.alt+'">'+l.label+"</abbr>")}var c="© "+s.join(", ")+". ";c!==this._attributionText&&void 0!==this._map.attributionControl&&(this._map.attributionControl.removeAttribution(this._attributionText),this._map.attributionControl.addAttribution(this._attributionText=c))}}}),Hr().tileLayer.here=function(t){return new(Hr().TileLayer.HERE)(t)},Hr().TileLayer.TomTom=Hr().TileLayer.extend({options:{apiKey:"",style:"main",subdomains:"abcd",minNativeZoom:0,maxNativeZoom:22},initialize:function(t){var e="https://{s}.api.tomtom.com/map/1/tile/basic/"+(t=Hr().setOptions(this,t)).style+"/{z}/{x}/{y}.png?key="+t.apiKey;Hr().TileLayer.prototype.initialize.call(this,e,t),this._copyright=Hr().DomUtil.create("div","tomtom-copyright"),this._copyrightClose=Hr().DomUtil.create("button","tomtom-copyright-close",this._copyright),this._copyrightContent=Hr().DomUtil.create("div","tomtom-copyright-content",this._copyright),Hr().DomEvent.on(this._copyrightClose,"click",(function(t){t.preventDefault(),t.stopPropagation(),this._hideCopyright()}),this),this._attributionText='<a class="tomtom-attribution" href="#">&copy; 1992 - '+(new Date).getFullYear()+" TomTom.</a>"},onAdd:function(t){Hr().TileLayer.prototype.onAdd.call(this,t),this._addAttribution(),this._map.on("click",this._hideCopyright,this)},onRemove:function(t){Hr().TileLayer.prototype.onRemove.call(this,t),this._hideCopyright(),this._removeAttribution(),this._map.off("click",this._hideCopyright,this)},_addAttribution:function(){if(void 0!==this._map.attributionControl){this._map.attributionControl.addAttribution(this._attributionText);var t=this._map.attributionControl.getContainer().querySelector(".tomtom-attribution");null!==t&&Hr().DomEvent.on(t,"click",(function(t){t.preventDefault(),t.stopPropagation(),this._showCopyright()}),this)}},_removeAttribution:function(){void 0!==this._map.attributionControl&&this._map.attributionControl.removeAttribution(this._attributionText)},_showCopyright:function(){var t=this._map.getContainer();null===t.querySelector(".tomtom-copyright")&&t.appendChild(this._copyright);var e,i,n,o,r=this._map.getBounds(),a=r.getNorthEast().wrap(),s=r.getSouthWest().wrap();s.lng<a.lng?(e=s.lng,i=a.lng):(e=a.lng,i=s.lng),s.lat<a.lat?(n=s.lat,o=a.lat):(n=a.lat,o=s.lat);var l="https://api.tomtom.com/map/1/copyrights/"+e+"/"+n+"/"+i+"/"+o+".json?key="+this.options.apiKey,c=new XMLHttpRequest;c.onreadystatechange=Hr().bind((function(){if(c.readyState===XMLHttpRequest.DONE&&200===c.status){for(var t=JSON.parse(c.responseText),e="<h4>General Copyrights:</h4>",i=0;i<t.generalCopyrights.length;i++)e+="<p>"+t.generalCopyrights[i]+"</p>";for(i=0;i<t.regions.length;i++){var n=t.regions[i];e+="<h4>"+n.country.label+":</h4>";for(var o=0;o<n.copyrights.length;o++)e+="<p>"+n.copyrights[o]+"</p>"}this._copyrightContent.innerHTML=e}}),this),c.open("GET",l,!0),c.send()},_hideCopyright:function(){this._copyright.remove()}}),Hr().tileLayer.tomTom=function(t,e){return new(Hr().TileLayer.TomTom)(t,e)};i(810),i(5830),i(8292),i(7244),i(687);function rs(t){return(rs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function as(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)}function ss(t){return 4!==(t=(t=t.replace(/[^0-9.,-]/g,"")).split(",")).length?null:(t.map(parseFloat),[[t[0],t[1]],[t[2],t[3]]])}function ls(t,e,i,n){return t.sort((function(t,o){var r,a;return"desc"===i?(r=o[e],a=t[e]):(r=t[e],a=o[e]),n?r-a:r.localeCompare(a,void 0,{numeric:!0,sensitivity:"base"})})),t}function cs(t,e){var i,n,o,r,a,s;return n=(i=Math.floor(t))%1e3,o=(i=Math.floor(i/1e3))%60,r=(i=Math.floor(i/60))%60,a=(i=Math.floor(i/60))%24,s=i=Math.floor(i/24),e?(n="",o+='"'):(n+='"',o+="."),t>6e4?r+="'":r="",t>36e5?a+=":":a="",t>864e5?s+=".":s="",s+a+r+o+n}function hs(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}Hr().Control.ResetView=Hr().Control.extend({options:{position:"topleft",onDemand:!1,coordinates:null,zoom:null,title:""},onAdd:function(t){var e=Hr().DomUtil.create("div","leaflet-control-reset-view leaflet-bar"),i=this.options;return i.onDemand&&(e.style.display="none",t.on("movestart",(function(){e.style.display="block"}))),null===i.coordinates&&(i.coordinates=t.getCenter()),null===i.zoom&&(i.zoom=t.getZoom()),this._createButton("",i.title,"leaflet-control-reset-view-button leaflet-bar-part",e,this._resetView),e},_createButton:function(t,e,i,n,o){var r=Hr().DomUtil.create("a",i,n);r.innerHTML=t,r.href="#",r.title=e,Hr().DomEvent.disableClickPropagation(r),Hr().DomEvent.on(r,"click",Hr().DomEvent.stop),Hr().DomEvent.on(r,"click",o,this),Hr().DomEvent.on(r,"click",this._refocusOnMap,this)},_resetView:function(){this._map.stop(),this.options.onDemand&&this._map.once("moveend",(function(){this._container.style.display="none"}),this),this._map.setView(this.options.coordinates,this.options.zoom,{animate:!0})}}),Hr().control.resetView=function(t){return new(Hr().Control.ResetView)(t)},Hr().Control.Filters=Hr().Control.extend({options:{mmp:null,collapsed:!0,position:"topright",buttons:!0,allText:"All",noneText:"None"},initialize:function(t){Hr().Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-filters",o=this._container=Hr().DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),Hr().DomEvent.disableClickPropagation(o),Hr().DomEvent.disableScrollPropagation(o),i&&(this._map.on("click",this.collapse,this),Hr().Browser.android||Hr().DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=Hr().DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Filters",Hr().Browser.touch?(Hr().DomEvent.on(r,"click",Hr().DomEvent.stop),Hr().DomEvent.on(r,"click",this.expand,this)):Hr().DomEvent.on(r,"focus",this.expand,this);var a=this._form=Hr().DomUtil.create("form",n+"-list",o);if(this.options.buttons){var s=Hr().DomUtil.create("div","mmp-control-filters-buttons",a),l=Hr().DomUtil.create("a",null,s);l.innerHTML=this.options.allText,l.href="#",l.title=this.options.allText,Hr().DomEvent.disableClickPropagation(l),Hr().DomEvent.on(l,"click",Hr().DomEvent.stop),Hr().DomEvent.on(l,"click",(function(){this._batchSelect(!0)}),this);var c=Hr().DomUtil.create("a",null,s);c.innerHTML=this.options.noneText,c.href="#",c.title=this.options.noneText,Hr().DomEvent.disableClickPropagation(c),Hr().DomEvent.on(c,"click",Hr().DomEvent.stop),Hr().DomEvent.on(c,"click",(function(){this._batchSelect(!1)}),this)}var h=[];Object.keys(e.settings.filtersDetails).forEach((function(t){void 0!==e.groups[t]&&h.push({index:e.settings.filtersDetails[t].index,id:t,icon:e.settings.filtersDetails[t].icon,name:e.settings.filtersDetails[t].name,count:Object.keys(e.groups[t].markers).length})})),h="id"===e.settings.filtersOrderBy?ls(h,"id",e.settings.filtersSortOrder,!0):"name"===e.settings.filtersOrderBy?ls(h,"name",e.settings.filtersSortOrder,!1):"count"===e.settings.filtersOrderBy?ls(h,"count",e.settings.filtersSortOrder,!0):ls(h,"index",e.settings.filtersSortOrder,!0);for(var u=0;u<h.length;u++){var p=Hr().DomUtil.create("label",null,a),d=Hr().DomUtil.create("input",n+"-selector",p);d.type="checkbox",d.value=h[u].id,void 0!==e.groups[h[u].id]&&e.groups[h[u].id].active&&(d.checked=!0);var m=Hr().DomUtil.create("span",null,p),f="";if(e.settings.filtersIcon)f+='<img class="mmp-filter-icon" src="'+(h[u].icon?mmpVars.iconsUrl+h[u].icon:mmpVars.pluginUrl+"images/leaflet/marker.png")+'" />';e.settings.filtersName&&(f+=h[u].name),e.settings.filtersCount&&(f+=" ["+h[u].count+"]"),m.innerHTML=f;var g=this;Hr().DomEvent.on(d,"click",(function(){void 0!==e.groups[this.value]&&(e.groups[this.value].active=this.checked),g._update(),t.fire("filterclick")}),d)}return i||this.expand(),o},expand:function(){Hr().DomUtil.addClass(this._container,"mmp-control-filters-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Hr().DomUtil.addClass(this._form,"mmp-control-filters-scrollbar"),this._form.style.height=t+"px"):Hr().DomUtil.removeClass(this._form,"mmp-control-filters-scrollbar"),this},collapse:function(){return Hr().DomUtil.removeClass(this._container,"mmp-control-filters-expanded"),this},_batchSelect:function(t){for(var e=this.options.mmp,i=this._container.getElementsByClassName("mmp-control-filters-selector"),n=i.length-1;n>=0;n--)i[n].checked=t,void 0!==e.groups[i[n].value]&&(e.groups[i[n].value].active=t);this._update(),this._map.fire("filterclick")},_update:function(){var t=this.options.mmp;if("map"===t.type&&t.settings.list)t.getList();else{var e=t.getActiveMarkers();t.drawMarkers(e)}t.drawGeoJson()}}),Hr().control.filters=function(t){return new(Hr().Control.Filters)(t)},Hr().Control.Gpx=Hr().Control.extend({options:{mmp:null,collapsed:!0,position:"topleft"},initialize:function(t){Hr().Util.setOptions(this,t)},onAdd:function(t){this._map=t;var e=this.options.mmp,i=this.options.collapsed,n="mmp-control-tracks",o=this._container=Hr().DomUtil.create("div",n);o.setAttribute("aria-haspopup",!0),Hr().DomEvent.disableClickPropagation(o),Hr().DomEvent.disableScrollPropagation(o),i&&(this._map.on("click",this.collapse,this),Hr().Browser.android||Hr().DomEvent.on(o,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=Hr().DomUtil.create("a",n+"-toggle",o);r.href="#",r.title="Tracks",Hr().Browser.touch?(Hr().DomEvent.on(r,"click",Hr().DomEvent.stop),Hr().DomEvent.on(r,"click",this.expand,this)):Hr().DomEvent.on(r,"focus",this.expand,this);var a,s=this._form=Hr().DomUtil.create("form",n+"-list",o);for(a=0;a<e.gpx.tracks.length;a++){var l=Hr().DomUtil.create("label",null,s),c=Hr().DomUtil.create("input",n+"-selector",l);c.type="radio",c.name="mmp-gpx-tracks",c.value=a,0===a&&(c.checked=!0),Hr().DomUtil.create("span",null,l).innerHTML=e.gpx.tracks[a].name?e.gpx.tracks[a].name:"Unnamed Track",Hr().DomEvent.on(c,"click",(function(){var i=parseInt(this.value);t._activeTrack=i,t.fitBounds(e.gpxTracks[i].getBounds(),{padding:[10,10]}),e.updateElevationChart(!0)}),c)}return i||this.expand(),o},expand:function(){Hr().DomUtil.addClass(this._container,"mmp-control-tracks-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(Hr().DomUtil.addClass(this._form,"mmp-control-tracks-scrollbar"),this._form.style.height=t+"px"):Hr().DomUtil.removeClass(this._form,"mmp-control-tracks-scrollbar"),this},collapse:function(){return Hr().DomUtil.removeClass(this._container,"mmp-control-tracks-expanded"),this}}),Hr().control.gpx=function(t){return new(Hr().Control.Gpx)(t)};i(4107),i(5356);var us=i(1639),ps=i.n(us);var ds=function(t,e,i,n,o,r,a,s){var l=this;this.querySelector=t,this.beforeSend=e,this.error=i,this.selected=n,this.provider=o,this.options=r,this.typinginterval=a,this.minChars=s,this.input,this.providers={algolia:{getUrl:function(t){var e=l.options.algolia,i="https://places-dsn.algolia.net/1/places/query?query="+t+"&hitsPerPage=10";return i+="&language="+e.language,e.countries&&(i+="&countries="+e.countries),i+="&aroundLatLngViaIP="+(e.aroundLatLngViaIP?"true":"false"),e.aroundLatLng&&(i+="&aroundLatLng="+e.aroundLatLng),i},beforeSend:function(t){var e=l.options.algolia;e.appId&&e.apiKey&&(t.setRequestHeader("X-Algolia-Application-Id",e.appId),t.setRequestHeader("X-Algolia-API-Key",e.apiKey))},formatResults:function(t){var e=[];if(!t.hits.length)return e;for(var i=0;i<t.hits.length;i++){var n=t.hits[i],o=n._highlightResult,r=l.options.algolia.language,a=n.administrative?n.administrative[0]:null,s=o.administrative?o.administrative[0].value:null,c=n.city?n.city[0]:null,h=o.city?o.city[0].value:null,u=n.country,p=o.country?o.country.value:null,d="";void 0!==n.locale_names[r]&&n.locale_names[r].length?d=n.locale_names[r][0]:void 0!==n.locale_names&&n.locale_names.length&&(d=n.locale_names[0]);var m="";void 0!==o.locale_names[r]&&o.locale_names[r].length?m=o.locale_names[r][0].value:void 0!==o.locale_names&&o.locale_names.length&&(m=o.locale_names[0].value);var f=n._tags,g=l.getUnifiedType(["country","city","address"],f),_=g.charAt(0).toUpperCase()+g.slice(1),v=(a?", "+a:"")+(c?", "+c:"")+(u?", "+u:""),y='<span class="ap-suggestion-icon ap-'+g+'" title="'+_+'"></span><span class="ap-name">'+m+'</span><span class="ap-address">'+((s?", "+s:"")+(h?", "+h:"")+(p?", "+p:""))+"</span>";e.push({value:d+v,formatted:y,lat:n._geoloc.lat,lng:n._geoloc.lng})}return e},footer:l.options.algolia.footer},locationiq:{getUrl:function(t){var e=l.options.locationiq,i="https://api.locationiq.com/v1/autocomplete.php?q="+t+"&normalizecity=1&limit=10";return e.apiKey&&(i+="&key="+e.apiKey),e.bounds&&(i+="&viewbox="+[e.lon1,e.lat1,e.lon2,e.lat2].join(",")),i+="&accept-language="+e.language},formatResults:function(t,e){var i=[];if(!t.length)return i;for(var n=0;n<t.length;n++){var o=t[n],r=o.address.country,a=o.address.city,s=o.address.housenumber,c=o.address.road,h=o.address.postcode,u=o.address.state,p=o.address.name||"",d=(c?", "+c+(s?" "+s:""):"")+(h?" "+h:"")+(a?", "+a:"")+(u?", "+u:"")+(r?", "+r:""),m=o.type.toLowerCase(),f=l.getUnifiedType(["country","state","city","address"],m),g=f.charAt(0).toUpperCase()+f.slice(1),_='<span class="ap-suggestion-icon ap-'+f+'" title="'+g+'"></span><span class="ap-name">'+p.replace(e,"<em>"+e+"</em>")+'</span><span class="ap-address">'+d.replace(e,"<em>"+e+"</em>")+"</span>";i.push({value:p+d,formatted:_,lat:parseFloat(o.lat),lng:parseFloat(o.lon)})}return i},footer:l.options.locationiq.footer},mapquest:{getUrl:function(t){var e=l.options.mapquest,i="https://www.mapquestapi.com/geocoding/v1/address?location="+t+"&maxResults=10";return e.api_key&&(i+="&key="+e.api_key),e.boundingBox&&(i+="&boundingBox="+[e.lat1,e.lon1,e.lat2,e.lon2].join(",")),i},formatResults:function(t,e){var i=[];if(!t.results[0].locations.length)return i;for(var n=0;n<t.results[0].locations.length;n++){var o=t.results[0].locations[n],r="";r+=void 0!==o.street&&o.street?o.street+", ":"",r+=void 0!==o.adminArea5&&o.adminArea5?o.adminArea5+", ":"",r+=void 0!==o.adminArea4&&o.adminArea4?o.adminArea4+", ":"",r+=void 0!==o.adminArea3&&o.adminArea3?o.adminArea3+", ":"",r+=void 0!==o.adminArea2&&o.adminArea2?o.adminArea2+", ":"",r+=void 0!==o.adminArea1&&o.adminArea1?o.adminArea1:"";var a=o.geocodeQuality.toLowerCase(),s=l.getUnifiedType(["country","city","address"],a),c=s.charAt(0).toUpperCase()+s.slice(1),h='<span class="ap-suggestion-icon ap-'+s+'" title="'+c+'"></span><span class="ap-name">'+r.replace(e,"<em>"+e+"</em>")+"</span>";i.push({value:r,formatted:h,lat:o.latLng.lat,lng:o.latLng.lng})}return i},footer:l.options.mapquest.footer},google:{getUrl:function(t){var e=l.options.google,i=mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&address="+t;return e.nonce&&(i+="&nonce="+e.nonce),i},formatResults:function(t,e){var i=[];if(!t.results.length)return i;for(var n=0;n<t.results.length;n++){var o=t.results[n],r=o.types,a=l.getUnifiedType(["country","locality","street_address"],r),s=a.charAt(0).toUpperCase()+a.slice(1),c='<span class="ap-suggestion-icon ap-'+a+'" title="'+s+'"></span><span class="ap-name">'+o.address.replace(e,"<em>"+e+"</em>")+"</span>";i.push({value:o.address,formatted:c,placeId:o.place_id})}return i},footer:l.options.google.footer},tomtom:{getUrl:function(t){var e=l.options.tomtom,i="https://api.tomtom.com/search/2/geocode/"+t+".JSON?limit=10";return e.apiKey&&(i+="&key="+e.apiKey),e.language&&(i+="&language="+e.language),e.countrySet&&(i+="&countrySet="+e.countrySet),e.lat&&(i+="&lat="+e.lat),e.lon&&(i+="&lon="+e.lon),e.radius&&(i+="&radius="+e.radius),i},formatResults:function(t,e){var i=[];if(!t.results.length)return i;for(var n=0;n<t.results.length;n++){var o=t.results[n],r=o.address.freeformAddress;r+=r!==o.address.country?", "+o.address.country:"";var a=o.type,s=(a="Geography"===a?"Municipality"===o.entityType?"city":"Country"===o.entityType?"country":"address":"address").charAt(0).toUpperCase()+a.slice(1),l='<span class="ap-suggestion-icon ap-'+a+'" title="'+s+'"></span><span class="ap-name">'+r.replace(e,"<em>"+e+"</em>")+"</span>";i.push({value:r,formatted:l,lat:o.position.lat,lng:o.position.lon})}return i},footer:l.options.tomtom.footer}},this.init=function(){l.input=ps()(l.querySelector,{minLength:l.minChars,hint:!1,autoselect:!0,openOnFocus:!1,debug:!1},[{source:function(e,i){var n=l.providers[l.provider],o=document.getElementById(t.replace("#",""));Hr().DomUtil.removeClass(o,"results-error"),Hr().DomUtil.removeClass(o,"results-loading"),l.beforeSend(),l.xhr({type:"GET",url:n.getUrl(e),beforeSend:n.beforeSend}).then((function(t){if("GOOGLE_ERROR"===(t=JSON.parse(t)).status)return Hr().DomUtil.addClass(o,"results-error"),void l.error(""+t.results.error_message);var r=n.formatResults(t,e);i(r)})).catch((function(t){Hr().DomUtil.addClass(o,"results-error"),l.error(""+t)})).finally((function(){Hr().DomUtil.removeClass(o,"results-loading")}))},templates:{suggestion:function(t){return t.formatted},footer:l.providers[l.provider].footer,header:'<div id="geocoding-results-header-div">'+l.options.header+'</div><div id="geocoding-results-header-image-div"><img src="'+mmpVars.pluginUrl+'images/geocoding/icon-key-enter.png" /></div><div style="clear:both; border-bottom:1px solid #ccc;"></div>'},debounce:l.typinginterval}]).on("autocomplete:selected",(function(t,e){e.placeId?l.xhr({type:"GET",url:mmpVars.baseUrl+"index.php?mapsmarkerpro=google-places&place_id="+e.placeId+"&nonce="+l.options.google.nonce}).then((function(t){"OK"===(t=JSON.parse(t)).status&&l.selected(t.results.geometry.location.lat,t.results.geometry.location.lng)})).catch((function(){})):l.selected(e.lat,e.lng)}))},this.reload=function(){l.input.autocomplete.destroy(),l.init()},this.getUnifiedType=function(t,e){for(var i=0;i<t.length;i++){var n=t[i];if(-1!==e.indexOf(n))break}switch(n){case"address":case"street_address":return"address";case"city":case"locality":case"venue":return"city";case"state":case"country":return"country";default:return"address"}},this.xhr=function(t){return new Promise((function(e,i){var n=new XMLHttpRequest;if(n.open(t.type,t.url,!0),n.onload=function(){200===n.status?e(n.responseText):n.status&&n.statusText?i(n.status+" ("+n.statusText+")"):i("Unknown error")},n.onerror=function(){i("AJAX request failed")},t.beforeSend&&t.beforeSend(n),t.data){var o=new FormData;Object.keys(t.data).forEach((function(e){o.append(e,t.data[e])})),n.send(o)}else n.send(null)}))}};function ms(t){return(ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gs(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _s(t,e,i){return(_s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(t,e,i||t)}function vs(t,e){return(vs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ys(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=xs(t);if(e){var o=xs(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return bs(this,i)}}function bs(t,e){return!e||"object"!==ms(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xs(t){return(xs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ks(t){var e=this;this.uid=t.uid,this.type=t.type,this.id=t.id,this.lazy=t.lazy,this.customMarkers=t.markers,this.settings=t.overrides||{},this.edit=t.edit||!1,this.highlight=t.highlight||null,this.containers={},this.map={},this.groups={},this.markers={},this.markerGroup={},this.geoJson={},this.geoJsonGroup={},this.tooltips={},this.basemaps={},this.minimaps={},this.overlays={},this.controls={},this.gpx={},this.gpxChart={},this.gpxTracks={},this.gpxWaypoints={},this.chartLayers={},this.listeners={},this.list={page:1,term:null,sort:null,order:null,lat:null,lng:null,radius:0,located:!1,geocoding:{},circle:{}},this.on=function(t,i){e.listeners[t]instanceof Array||(e.listeners[t]=[]),-1===e.listeners[t].indexOf(i)&&e.listeners[t].push(i)},this.off=function(t,i){if(e.listeners[t]instanceof Array){var n=e.listeners[t].indexOf(i);-1!==n&&e.listeners[t].splice(n,1)}},this.fire=function(t,i){if(e.listeners[t]instanceof Array)for(var n=0;n<e.listeners[t].length;n++)e.listeners[t][n].call(e,i)},this.checkInvalidateSize=function(){var t=as(e.containers.main);!e.mapVisible&&t&&(e.map.invalidateSize(),void 0!==e.controls.minimap&&e.controls.minimap._miniMap.invalidateSize()),e.mapVisible=t},this.formatGpxValue=function(t,e,i){if(isNaN(t))return"N/A";var n,o,r,a,s;switch("dist"===e?(n=1.609344,o=" km",r=" mi"):(n=.3048,o=" m",r=" ft"),"imperial"===i||"imperial-metric"===i?(a=t*n,s=t):(a=t,s=t/n),a=hs(a,2)+o,s=hs(s,2)+r,i){case"imperial":return s;case"metric-imperial":return a+" ("+s+")";case"imperial-metric":return s+" ("+a+")";default:return a}},this.addLoading=function(t){if(!t.getElementsByClassName("mmp-loading-spinner").length){var e=Hr().DomUtil.create("div","mmp-loading-spinner"),i=Hr().DomUtil.create("div","rect-wrap");e.appendChild(i);for(var n=1;n<=5;n++){var o=Hr().DomUtil.create("div","rect"+n);i.appendChild(o)}t.appendChild(e)}},this.removeLoading=function(t){for(var e=t.getElementsByClassName("mmp-loading-spinner"),i=0;i<e.length;i++)e[i].remove()},this.showMapModal=function(t,i){void 0!==e.containers.mapModal&&e.containers.mapModal.remove(),e.containers.mapModal=Hr().DomUtil.create("div","mmp-map-modal"),e.containers.mapModal.addEventListener("click",(function(t){t.target===this&&this.remove()}));var n=Hr().DomUtil.create("div","mmp-map-modal-content",e.containers.mapModal),o=Hr().DomUtil.create("span","mmp-map-modal-close",n);o.innerHTML="&times;",o.addEventListener("click",(function(t){t.target===this&&e.containers.mapModal.remove()}));var r=Hr().DomUtil.create("div","mmp-map-modal-header",n);Hr().DomUtil.create("p","mmp-map-modal-title",r).innerHTML=t;var a=Hr().DomUtil.create("div","mmp-map-modal-body",n);"string"==typeof i?Hr().DomUtil.create("p","mmp-map-modal-message",a).innerHTML=i:a.appendChild(i);e.containers.map.appendChild(e.containers.mapModal)},this.getDirectionsLink=function(t,i,n,o){var r=e.settings,a="";switch(t){case"googlemaps":a="https://www.google.com/maps?daddr="+(o||i+","+n),a+="&t="+r.directionsGoogleType,a+="&layer="+(r.directionsGoogleTraffic?"1":"0"),a+="&doflg="+r.directionsGoogleUnits,r.directionsGoogleAvoidHighways&&(a+="&dirflg=h"),r.directionsGoogleAvoidTolls&&(a+="&dirflg=t"),r.directionsGooglePublicTransport&&(a+="&dirflg=r"),r.directionsGoogleWalking&&(a+="&dirflg=w"),r.directionsGoogleLanguage&&(a+="&hl="+r.directionsGoogleLanguage),a+="&om="+(r.directionsGoogleOverview?"1":"0");break;case"ors":a="https://classic-maps.openrouteservice.org/directions?a=null,null,"+i+","+n,a+="&b="+("Bicycle"===r.directionsOrsType?"1a":"Pedestrian"===r.directionsOrsType?"2":"HeavyVehicle"===r.directionsOrsType?"4a":"0"),a+="&c="+("Shortest"===r.directionsOrsRoute?"1":"0");break;case"bingmaps":a="https://www.bing.com/maps/default.aspx?v=2&rtp=pos___e_~pos."+i+"_"+n+(o?"_"+o:"")}return a},this.getApiLink=function(t,i,n){n=n||{},!mmpVars.language||"geojson"!==t&&"kml"!==t&&"georss"!==t||(n.lang=mmpVars.language);var o=mmpVars.apiUrl;switch(t){case"editMap":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+i;break;case"editMarker":o=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+i;break;case"fs":o+="fullscreen/"+i+"/";break;case"gpx":o=mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+e.settings.gpxUrl;break;case"geojson":o+="export/geojson/"+i+"/";break;case"kml":o+="export/kml/"+i+"/";break;case"georss":o+="export/georss/"+i+"/"}return Object.keys(n).length&&(o+="?",Object.keys(n).forEach((function(t){o+=t+"="+n[t]+"&"})),o=o.slice(0,-1)),o},this.addApiLink=function(t,e,i,n){var o=Hr().DomUtil.create("a","mmp-api-icon "+i,n);o.href=t,o.rel="nofollow",o.target="_blank",o.title=e},this.addShareLink=function(t,i){var n=Hr().DomUtil.create("i","mmp-api-icon mmp-api-icon-share",i);n.title=mmpL10n.api.share,n.addEventListener("click",(function(){e.containers.main.scrollIntoView(),e.openShareModal(t)}))},this.openShareModal=function(t){var i,n=e.settings;i=n.apiFullscreen&&"fs"===n.shareUrl?e.getApiLink("fs",e.id,{marker:t}):mmpVars.page+"?markerid="+t;var o=Hr().DomUtil.create("div",null);n.shareFacebook&&o.appendChild(e.getShareLink("facebook",i,n.shareText)),n.shareTwitter&&o.appendChild(e.getShareLink("twitter",i,n.shareText)),n.shareLinkedIn&&o.appendChild(e.getShareLink("linkedin",i,n.shareText)),n.shareWhatsApp&&o.appendChild(e.getShareLink("whatsapp",i,n.shareText)),n.shareEmail&&o.appendChild(e.getShareLink("email",i,n.shareText));var r=Hr().DomUtil.create("div","mmp-share-modal-url",o),a=Hr().DomUtil.create("input",null,r);a.setAttribute("type","text"),a.setAttribute("value",i),a.addEventListener("click",(function(){this.trigger("select")})),e.showMapModal(mmpL10n.api.share,o)},this.getShareLink=function(t,e,i){e=encodeURIComponent(e),i=encodeURIComponent(i);var n=Hr().DomUtil.create("a","mmp-share-button-link");n.setAttribute("target","_blank"),n.setAttribute("rel","noopener");var o=Hr().DomUtil.create("div","mmp-share-button",n),r=Hr().DomUtil.create("div","mmp-share-button-icon",o),a=Hr().SVG.create("svg");a.setAttribute("viewBox","0 0 24 24"),r.appendChild(a);var s=Hr().SVG.create("path");switch(a.appendChild(s),t){case"facebook":n.setAttribute("href","https://www.facebook.com/sharer.php?u="+e),Hr().DomUtil.addClass(o,"mmp-share-button-facebook"),s.setAttribute("d","M18.77 7.46H14.5v-1.9c0-.9.6-1.1 1-1.1h3V.5h-4.33C10.24.5 9.5 3.44 9.5 5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4z");break;case"twitter":n.setAttribute("href","https://twitter.com/share?text="+i+"&url="+e+"&via=mapsmarker"),Hr().DomUtil.addClass(o,"mmp-share-button-twitter"),s.setAttribute("d","M23.44 4.83c-.8.37-1.5.38-2.22.02.93-.56.98-.96 1.32-2.02-.88.52-1.86.9-2.9 1.1-.82-.88-2-1.43-3.3-1.43-2.5 0-4.55 2.04-4.55 4.54 0 .36.03.7.1 1.04-3.77-.2-7.12-2-9.36-4.75-.4.67-.6 1.45-.6 2.3 0 1.56.8 2.95 2 3.77-.74-.03-1.44-.23-2.05-.57v.06c0 2.2 1.56 4.03 3.64 4.44-.67.2-1.37.2-2.06.08.58 1.8 2.26 3.12 4.25 3.16C5.78 18.1 3.37 18.74 1 18.46c2 1.3 4.4 2.04 6.97 2.04 8.35 0 12.92-6.92 12.92-12.93 0-.2 0-.4-.02-.6.9-.63 1.96-1.22 2.56-2.14z");break;case"linkedin":n.setAttribute("href","https://www.linkedin.com/shareArticle?title="+i+"&url="+e),Hr().DomUtil.addClass(o,"mmp-share-button-linkedin"),s.setAttribute("d","M6.5 21.5h-5v-13h5v13zM4 6.5C2.5 6.5 1.5 5.3 1.5 4s1-2.4 2.5-2.4c1.6 0 2.5 1 2.6 2.5 0 1.4-1 2.5-2.6 2.5zm11.5 6c-1 0-2 1-2 2v7h-5v-13h5V10s1.6-1.5 4-1.5c3 0 5 2.2 5 6.3v6.7h-5v-7c0-1-1-2-2-2z");break;case"whatsapp":Hr().Browser.mobile?n.setAttribute("href","whatsapp://send?text="+i+" "+e):n.setAttribute("href","https://api.whatsapp.com/send?text="+i+" "+e),Hr().DomUtil.addClass(o,"mmp-share-button-whatsapp"),s.setAttribute("d","M20.1 3.9C17.9 1.7 15 .5 12 .5 5.8.5.7 5.6.7 11.9c0 2 .5 3.9 1.5 5.6L.6 23.4l6-1.6c1.6.9 3.5 1.3 5.4 1.3 6.3 0 11.4-5.1 11.4-11.4-.1-2.8-1.2-5.7-3.3-7.8zM12 21.4c-1.7 0-3.3-.5-4.8-1.3l-.4-.2-3.5 1 1-3.4L4 17c-1-1.5-1.4-3.2-1.4-5.1 0-5.2 4.2-9.4 9.4-9.4 2.5 0 4.9 1 6.7 2.8 1.8 1.8 2.8 4.2 2.8 6.7-.1 5.2-4.3 9.4-9.5 9.4zm5.1-7.1c-.3-.1-1.7-.9-1.9-1-.3-.1-.5-.1-.7.1-.2.3-.8 1-.9 1.1-.2.2-.3.2-.6.1s-1.2-.5-2.3-1.4c-.9-.8-1.4-1.7-1.6-2-.2-.3 0-.5.1-.6s.3-.3.4-.5c.2-.1.3-.3.4-.5.1-.2 0-.4 0-.5C10 9 9.3 7.6 9 7c-.1-.4-.4-.3-.5-.3h-.6s-.4.1-.7.3c-.3.3-1 1-1 2.4s1 2.8 1.1 3c.1.2 2 3.1 4.9 4.3.7.3 1.2.5 1.6.6.7.2 1.3.2 1.8.1.6-.1 1.7-.7 1.9-1.3.2-.7.2-1.2.2-1.3-.1-.3-.3-.4-.6-.5z");break;case"email":i?n.setAttribute("href","mailto:?subject="+i+"&body="+e):n.setAttribute("href","mailto:?body="+e),n.setAttribute("target","_self"),Hr().DomUtil.addClass(o,"mmp-share-button-email"),s.setAttribute("d","M22 4H2C.9 4 0 4.9 0 6v12c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM7.25 14.43l-3.5 2c-.08.05-.17.07-.25.07-.17 0-.34-.1-.43-.25-.14-.24-.06-.55.18-.68l3.5-2c.24-.14.55-.06.68.18.14.24.06.55-.18.68zm4.75.07c-.1 0-.2-.03-.27-.08l-8.5-5.5c-.23-.15-.3-.46-.15-.7.15-.22.46-.3.7-.14L12 13.4l8.23-5.32c.23-.15.54-.08.7.15.14.23.07.54-.16.7l-8.5 5.5c-.08.04-.17.07-.27.07zm8.93 1.75c-.1.16-.26.25-.43.25-.08 0-.17-.02-.25-.07l-3.5-2c-.24-.13-.32-.44-.18-.68s.44-.32.68-.18l3.5 2c.24.13.32.44.18.68z");break;default:return null}return n},this.getActiveMarkers=function(){var t=[];return Object.keys(e.groups).forEach((function(i){e.groups[i].active&&Object.keys(e.groups[i].markers).forEach((function(n){-1===t.indexOf(e.groups[i].markers[n])&&t.push(e.groups[i].markers[n])}))})),t},this.checkPopupSize=function(t){var i=e.settings;e.containers.map.offsetWidth<i.popupMaxWidth?(t.options.minWidth=e.containers.map.offsetWidth-50,t.options.maxWidth=e.containers.map.offsetWidth-50):(t.options.minWidth=i.popupMinWidth,t.options.maxWidth=i.popupMaxWidth),e.containers.map.offsetHeight<i.popupMaxHeight?t.options.maxHeight=e.containers.map.offsetHeight-50:t.options.maxHeight=i.popupMaxHeight,t.update()},this.loadPopup=function(t,i){return new Promise((function(n,o){var r=t.getPopup();if(void 0!==r)if(i||!r.getContent()){var a=Hr().DomUtil.create("div","mmp-popup");Hr().DomUtil.create("img","mmp-popup-loading",a).src=mmpVars.pluginUrl+"images/paging-ajax-loader.gif",r.setContent(a);var s="";new Promise((function(i,n){t instanceof Hr().Marker?t.popup?(s=e.getMarkerPopup(t),i()):e.getPopups(t.id).then((function(){s=e.getMarkerPopup(t),i()})).catch((function(){n()})):t instanceof Hr().Path?(s=e.getGeoJsonPopup(t),i()):n()})).then((function(){var t=s.getElementsByTagName("img"),i=Array.prototype.slice.call(t);Promise.all(i.map(e.imgLoaded)).then((function(){r.setContent(s),n(r)}))})).catch((function(){o()}))}else n(r);else o()}))},this.getMarkerPopup=function(t){var i=e.settings,n=Hr().DomUtil.create("div","mmp-popup");if(n.id="mmp-popup-"+t.id,i.popupMarkername&&t.name){var o=Hr().DomUtil.create("div","mmp-popup-name",n);o.innerHTML=t.name,o.style.borderBottom="1px solid #f0f0e7"}t.popup&&(Hr().DomUtil.create("div","mmp-popup-text",n).innerHTML=t.popup);if(t.address&&i.popupAddress||i.popupCoordinates||i.popupDirections||i.popupShare){var r=Hr().DomUtil.create("div","mmp-popup-location",n);if(r.style.borderTop="1px solid #f0f0e7",i.popupShare&&e.addShareLink(t.id,r),t.address&&i.popupAddress)Hr().DomUtil.create("span","mmp-popup-location-address",r).innerHTML+=t.address;if(i.popupCoordinates){var a=Hr().DomUtil.create("span","mmp-popup-location-coordinates",r);t.address&&i.popupAddress?a.innerHTML+=" ("+t.getLatLng().lat+", "+t.getLatLng().lng+")":a.innerHTML+=t.getLatLng().lat+", "+t.getLatLng().lng}if(i.popupDirections){var s=Hr().DomUtil.create("span","mmp-popup-location-directions",r);(t.address&&i.popupAddress||i.popupCoordinates)&&(s.innerHTML+=" ");var l=Hr().DomUtil.create("a",null,s);l.href=e.getDirectionsLink(i.directionsProvider,t.getLatLng().lat,t.getLatLng().lng,t.address),l.target="_blank",l.title=mmpL10n.api.dir,l.innerHTML="("+mmpL10n.popup.directions+")"}}return n},this.getGeoJsonPopup=function(t){var i=e.settings,n=Hr().DomUtil.create("div","mmp-popup");if(i.popupMarkername&&t.options.name){var o=Hr().DomUtil.create("div","mmp-popup-name",n);o.innerHTML=t.options.name,o.style.borderBottom="1px solid #f0f0e7"}t.options.popup&&(Hr().DomUtil.create("div","mmp-popup-text",n).innerHTML=t.options.popup);return n},this.imgLoaded=function(t){return new Promise((function(e){t.addEventListener("load",e),t.addEventListener("error",e),t.loading&&"lazy"===t.loading&&(t.loading="eager")}))},this.updatePopups=function(){var t=e.settings;Object.keys(e.markers).forEach((function(i){var n=e.markers[i],o=n.getPopup();void 0!==o&&(o.setContent(""),o.options.minWidth=t.popupMinWidth,o.options.maxWidth=t.popupMaxWidth,o.options.maxHeight=t.popupMaxHeight,o.isOpen()&&e.updatePopup(n))}))},this.updatePopup=function(t,i){var n=e.settings,o=t.getPopup();!o&&t.popup?t.bindPopup("",e.popup):o&&!t.popup&&(t.closePopup(),t.unbindPopup()),e.loadPopup(t,i).then((function(t){e.checkPopupSize(t),n.popupCenterOnMap&&e.centerPopup(t)})).catch((function(){}))},this.centerPopup=function(t){if(t.isOpen()){var i=t.getLatLng(),n=e.map.project(i),o=t._container.clientHeight;n.y-=o/2;var r=e.map.unproject(n);e.map.panTo(r,{animate:!0})}},this.highlightMarker=function(t,i,n){if(t.link)e.openLink(t.link,t.blank);else{i&&e.containers.main.scrollIntoView();var o=function(t,i){if(i)t.isPopupOpen()?e.updatePopup(t):t.openPopup();else{var n=t.getLatLng();e.map.setView(n)}};e.settings.clustering?e.markerGroup.zoomToShowLayer(t,(function(){o(t,n)})):o(t,n)}},this.openLink=function(t,e){var i="1"===e?"_blank":"_self";window.open(t,i)},this.editMarker=function(t){if(void 0!==t.relatedTarget.id){var i=e.getApiLink("editMarker",t.relatedTarget.id);e.openLink(i,"1")}},this.logError=function(t){console.error("[Maps Marker Pro] "+t)},this.xhr=function(t){return new Promise((function(e,i){var n=new XMLHttpRequest;if(n.open(t.type,t.url,!0),n.onload=function(){200===n.status?e(n.responseText):i(n.status+" "+n.statusText)},n.onerror=function(){i("AJAX request failed")},t.data){var o=new FormData;Object.keys(t.data).forEach((function(e){o.append(e,t.data[e])})),n.send(o)}else n.send(null)}))},this.main=function(){e.containers.main=document.getElementById("maps-marker-pro-"+e.uid),e.containers.main?e.lazy?"function"==typeof IntersectionObserver?new IntersectionObserver(e.lazyLoadHandler,{root:null,rootMargin:"0px",threshold:0}).observe(e.containers.main):e.lazyLoadHandlerFallback():e.load():"function"==typeof MutationObserver?new MutationObserver(e.deferredLoadHandler).observe(document.body,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):e.logError("Unable to find map container")},this.load=function(){if(e.addLoading(e.containers.main),"function"==typeof URL){var t=new URL(window.location.href),i=parseInt(t.searchParams.get("marker"));isNaN(i)||(e.urlHighlight=i);var n=parseInt(t.searchParams.get("markerid"));isNaN(n)||(e.urlHighlight=n)}for(var o=document.getElementsByClassName("mmp-highlight"),r=0;r<o.length;r++){var a=o[r].dataset;a.uid&&a.uid!==e.uid||(a.map&&a.map!==e.id||o[r].addEventListener("click",(function(t){t.preventDefault(),t.stopPropagation();var i=this.dataset,n=i.marker||null,o=!i.scroll||"false"!==i.scroll,r=!i.open||"false"!==i.open;n&&void 0!==e.markers[n]&&e.highlightMarker(e.markers[n],o,r)})))}for(var s=0;s<ks.callbacks.length;s++){var l=ks.callbacks[s];"function"==typeof l&&l(e)}e.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_settings",type:e.type,id:e.id,lang:mmpVars.language,edit:e.edit}}).then((function(t){if(!(t=JSON.parse(t)).success)return e.containers.main.innerHTML=t.response,void Hr().DomUtil.addClass(e.containers.main,"mmp-map-error");var i=t.response;Object.keys(e.settings).forEach((function(t){i[t]=e.settings[t]})),e.settings=i,i.callback&&"function"==typeof window[i.callback]&&window[i.callback](e),e.fire("settingsloaded",e.settings),e.init()})).catch((function(t){e.containers.main.innerHTML="Error: the map with ID "+e.id+" could not be loaded. Please contact the site owner.",Hr().DomUtil.addClass(e.containers.main,"mmp-map-error"),e.logError("Error loading settings ("+t+")"),console.log(t.stack)}))},this.init=function(){e.containers.mapWrap=document.getElementById("mmp-map-wrap-"+e.uid),e.containers.mapWrap||(e.containers.mapWrap=Hr().DomUtil.create("div","mmp-map-wrap",e.containers.main),e.containers.mapWrap.id="mmp-map-wrap-"+e.uid),e.loadPanel(),e.loadMap(),e.loadChart(),e.loadList(),e.setLayout(),window.addEventListener("resize",e.setLayoutThrottled),"function"==typeof IntersectionObserver?new IntersectionObserver(e.visibilityDetectionHandler,{root:null,rootMargin:"0px",threshold:0}).observe(e.containers.main):e.visibilityDetectionHandlerFallback(),e.loadBasemaps(),e.loadOverlays(),e.loadResources().then((function(){e.removeLoading(e.containers.main),e.loadControls(),e.urlHighlight&&void 0!==e.markers[e.urlHighlight]?e.highlightMarker(e.markers[e.urlHighlight],!0,!0):e.highlight&&void 0!==e.markers[e.highlight]&&e.highlightMarker(e.markers[e.highlight],!1,!0)})).catch((function(t){e.logError("Error loading map ("+t+")")}))},this.setLayout=function(){var t=e.settings;e.containers.main.style.width=t.width+t.widthUnit,e.containers.map.style.height=t.height+t.heightUnit,t.responsive&&"px"===t.widthUnit&&("100%"!==e.containers.main.style.width&&e.containers.main.parentNode.offsetWidth<t.width?e.containers.main.style.width="100%":"100%"===e.containers.main.style.width&&e.containers.main.parentNode.offsetWidth>t.width&&(e.containers.main.style.width=t.width+"px")),void 0!==e.containers.list&&(t.list>0?1===t.list||-1===e.containers.main.style.width.indexOf("px")&&e.containers.main.offsetWidth<t.listWidth+t.listBreakpoint?(Hr().DomUtil.removeClass(e.containers.main,"mmp-list-right"),Hr().DomUtil.removeClass(e.containers.main,"mmp-list-left"),Hr().DomUtil.addClass(e.containers.main,"mmp-list-below")):(Hr().DomUtil.removeClass(e.containers.main,"mmp-list-below"),2===t.list?(Hr().DomUtil.removeClass(e.containers.main,"mmp-list-left"),Hr().DomUtil.addClass(e.containers.main,"mmp-list-right")):3===t.list&&(Hr().DomUtil.removeClass(e.containers.main,"mmp-list-right"),Hr().DomUtil.addClass(e.containers.main,"mmp-list-left"))):(Hr().DomUtil.removeClass(e.containers.main,"mmp-list-below"),Hr().DomUtil.removeClass(e.containers.main,"mmp-list-right"),Hr().DomUtil.removeClass(e.containers.main,"mmp-list-left"))),e.map.invalidateSize()},this.setLayoutThrottled=Hr().Util.throttle(e.setLayout,200,this),this.loadPanel=function(){var t=e.settings;if(e.containers.panel=document.getElementById("mmp-panel-"+e.uid),t.panel){var i=Hr().DomUtil.create("div","mmp-panel");i.id="mmp-panel-"+e.uid,i.style.backgroundColor=t.panelColor,Hr().DomUtil.create("div","mmp-panel-text",i).innerHTML=t.name;var n=Hr().DomUtil.create("div","mmp-panel-api",i);"map"===e.type&&(t.panelEdit&&e.addApiLink(e.getApiLink("editMap",e.id),mmpL10n.api.editMap,"mmp-api-icon-edit",n),t.apiFullscreen&&t.panelFs&&e.addApiLink(e.getApiLink("fs",e.id),mmpL10n.api.fs,"mmp-api-icon-fullscreen",n),t.panelGpx&&t.gpxUrl&&e.addApiLink(e.getApiLink("gpx",e.id),mmpL10n.gpx.metaDownload,"mmp-api-icon-gpx",n),t.apiExport&&t.panelGeoJson&&e.addApiLink(e.getApiLink("geojson",e.id),mmpL10n.api.geoJson,"mmp-api-icon-geojson",n),t.apiExport&&t.panelKml&&e.addApiLink(e.getApiLink("kml",e.id),mmpL10n.api.kml,"mmp-api-icon-kml",n),t.apiExport&&t.panelGeoRss&&e.addApiLink(e.getApiLink("georss",e.id),mmpL10n.api.geoRss,"mmp-api-icon-georss",n)),e.containers.panel?e.containers.panel.parentNode.replaceChild(i,e.containers.panel):e.containers.mapWrap.insertBefore(i,e.containers.map),e.containers.panel=i,e.fire("panelloaded",e.map)}else e.containers.panel&&(e.containers.panel.remove(),e.containers.panel=null)},this.loadMap=function(){var t=e.settings;"function"==typeof e.map.remove&&e.map.remove(),e.map={};var i=Hr().DomUtil.create("div","mmp-map");i.id="mmp-map-"+e.uid,i.style.height=t.height+t.heightUnit,e.containers.map=document.getElementById("mmp-map-"+e.uid),e.containers.map?e.containers.map.parentNode.replaceChild(i,e.containers.map):e.containers.mapWrap.insertBefore(i,e.containers.chartWrap),e.containers.map=i,e.map=Hr().map(e.containers.map,{center:[t.lat,t.lng],zoom:t.zoom,minZoom:t.minZoom,maxZoom:t.maxZoom,zoomSnap:t.zoomStep,zoomDelta:t.zoomStep,maxBounds:ss(t.maxBounds),maxBoundsViscosity:1,gestureHandling:t.gestureHandling,dragging:t.dragging,inertia:t.inertia,inertiaDeceleration:t.inertiaDeceleration,inertiaMaxSpeed:t.inertiaMaxSpeed,keyboard:t.keyboard,keyboardPanDelta:t.keyboardPanDelta,scrollWheelZoom:t.scrollWheelZoom,doubleClickZoom:t.doubleClickZoom,touchZoom:t.touchZoom,boxzoom:t.boxzoom,bounceAtZoomLimits:t.bounceAtZoomLimits,worldCopyJump:t.worldCopyJump,attributionControl:!1,zoomControl:!1,closePopupOnClick:t.popupAutoClose,contextmenu:!0}),e.map._activeTrack=0,e.fire("maploaded",e.map)},this.loadChart=function(){var t=e.settings;if("function"==typeof e.gpxChart.destroy&&e.gpxChart.destroy(),e.gpxChart={},e.containers.chartWrap=document.getElementById("mmp-chart-wrap-"+e.uid),t.gpxUrl&&t.gpxChart){var i=Hr().DomUtil.create("div","mmp-gpx-chart-wrap");i.id="mmp-chart-wrap-"+e.uid,i.style.height=t.gpxChartHeight+"px",i.style.position="relative",i.style.minWidth=0;var n=Hr().DomUtil.create("canvas","mmp-gpx-chart",i);n.id="mmp-gpx-chart-"+e.uid,e.containers.chartWrap?e.containers.chartWrap.parentNode.replaceChild(i,e.containers.chartWrap):e.containers.mapWrap.appendChild(i),e.containers.chartWrap=i,e.containers.chart=n,e.fire("chartloaded",e.gpxChart)}else e.containers.chartWrap&&(e.containers.chartWrap.remove(),e.containers.chartWrap=null,e.containers.chart=null)},this.loadList=function(){var t=e.settings;if(e.containers.list=document.getElementById("mmp-list-"+e.uid),"map"===e.type&&t.list){var i=Hr().DomUtil.create("div","mmp-list");if(i.id="mmp-list-"+e.uid,i.style.flexBasis=t.listWidth+"px",e.list.sort=t.listOrderBy,e.list.order=t.listSortOrder,t.listSearch){var n=Hr().DomUtil.create("div","mmp-list-header",i),o=Hr().DomUtil.create("div","mmp-list-header-left",n),r=Hr().DomUtil.create("div","mmp-list-search-wrap",o),a=Hr().DomUtil.create("input","mmp-list-search",r);a.id="list-search-"+e.uid,a.type="text",a.placeholder=mmpL10n.list.search;var s=Hr().DomUtil.create("div","mmp-list-search-clear",r);s.style.display="none",s.addEventListener("click",(function(){var t=document.getElementById("list-search-"+e.uid);t&&(t.value=""),this.style.display="none",e.getList({page:1,term:null})}));var l=Hr().DomUtil.create("div","mmp-list-header-right",n),c=Hr().DomUtil.create("select","mmp-list-sort",l),h=[];t.listOrderById&&h.push("id"),t.listOrderByName&&h.push("name"),t.listOrderByAddress&&h.push("address"),t.listOrderByDistance&&h.push("distance"),t.listOrderByIcon&&h.push("icon"),t.listOrderByCreated&&h.push("created_on"),t.listOrderByUpdated&&h.push("updated_on");for(var u=0;u<h.length;u++){var p=Hr().DomUtil.create("option",null,c);p.value=h[u],h[u]===t.listOrderBy&&(p.defaultSelected=!0),p.innerHTML=mmpL10n.list[h[u]]}a.addEventListener("keyup",(function(t){this.value?s.style.display="inline-block":s.style.display="none",13===t.which&&e.getList({page:1,term:this.value})})),c.addEventListener("change",(function(){e.getList({page:1,sort:this.value})})),Hr().DomUtil.create("i","mmp-list-order mmp-"+t.listSortOrder,l).addEventListener("click",(function(){var t=Hr().DomUtil.hasClass(this,"mmp-desc")?"asc":"desc";Hr().DomUtil.removeClass(this,"mmp-asc"),Hr().DomUtil.removeClass(this,"mmp-desc"),Hr().DomUtil.addClass(this,"mmp-"+t),e.getList({page:1,order:t})}))}if(t.listLocation){var d=Hr().DomUtil.create("div","mmp-list-header",i),m=Hr().DomUtil.create("div","mmp-list-header-left",d),f=Hr().DomUtil.create("div","mmp-list-search-wrap",m),g=Hr().DomUtil.create("input","mmp-list-location",f);g.id="list-address-"+e.uid,g.type="text",g.placeholder=mmpL10n.list.location,g.addEventListener("keyup",(function(){this.value?_.style.display="inline-block":_.style.display="none"}));var _=Hr().DomUtil.create("div","mmp-list-location-clear",f);_.style.display="none",_.addEventListener("click",(function(){var t=document.getElementById("list-address-"+e.uid);t&&(Hr().DomUtil.removeClass(t,"results-loading"),Hr().DomUtil.removeClass(t,"results-error"),t.value=""),this.style.display="none",e.list.located||e.getList({page:1,lat:null,lng:null})}));var v=Hr().DomUtil.create("div","mmp-list-header-right",d),y=Hr().DomUtil.create("select","mmp-list-radius",v),b=[0,5,10,15,20,25,50,100,200,500];for(u=0;u<b.length;u++){var x=Hr().DomUtil.create("option",null,y);x.value=b[u],b[u]<=0?x.innerHTML=mmpL10n.list.noLimit:"imperial"===t.listDistanceUnit?x.innerHTML=b[u]+" mi":"metric-imperial"===t.listDistanceUnit?x.innerHTML=b[u]+" km ("+(b[u]/1.609344).toFixed(t.listDistancePrecision)+" mi)":"imperial-metric"===t.listDistanceUnit?x.innerHTML=b[u]+" mi ("+(1.609344*b[u]).toFixed(t.listDistancePrecision)+" km)":x.innerHTML=b[u]+" km"}y.addEventListener("change",(function(){e.getList({page:1,radius:y.value})}))}e.containers.listBody=Hr().DomUtil.create("div","mmp-list-body",i),e.containers.listFooter=Hr().DomUtil.create("div","mmp-list-footer",i),e.containers.list?e.containers.list.parentNode.replaceChild(i,e.containers.list):e.containers.main.appendChild(i),e.containers.list=i,e.list.geocoding=new ds("#list-address-"+e.uid,(function(){}),(function(t){e.showMapModal(mmpL10n.list.locationError,t)}),(function(t,i){void 0!==e.controls.locate&&e.controls.locate.stop(),e.getList({page:1,lat:t,lng:i})}),e.settings.listGeocodingProvider,mmpGeocoding,400,3),e.list.geocoding.init()}else e.containers.list&&(e.containers.list.remove(),e.containers.list=null)},this.loadBasemaps=function(){var t=e.settings;Object.keys(e.basemaps).forEach((function(t){e.map.removeLayer(e.basemaps[t])})),e.basemaps={},e.minimaps={};for(var i=0;i<t.basemaps.length;i++){var n=t.basemaps[i];if(1===n.type){if(n.options.bounds&&"string"==typeof n.options.bounds){var o=ss(n.options.bounds);n.options.rasterTiles?n.options.bounds=[e.map.unproject(Hr().point(o[0][1],o[0][0]),n.options.maxNativeZoom),e.map.unproject(Hr().point(o[1][1],o[1][0]),n.options.maxNativeZoom)]:n.options.bounds=o}n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=void 0===n.options.errorTiles&&t.errorTiles||n.options.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,n.wms?(e.basemaps[n.name]=Hr().tileLayer.wms(n.url,n.options),e.minimaps[n.name]=Hr().tileLayer.wms(n.url,n.options)):(e.basemaps[n.name]=Hr().tileLayer(n.url,n.options),e.minimaps[n.name]=Hr().tileLayer(n.url,n.options))}else if(2===n.type&&t.googleApiKey)n.options.styles=t.basemapGoogleStyles,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.edgeBufferTiles=0,e.basemaps[n.name]=new(Hr().gridLayer.googleMutant)(n.options),e.minimaps[n.name]=new(Hr().gridLayer.googleMutant)(n.options);else if(3===n.type&&t.bingApiKey)n.options.bingMapsKey=t.bingApiKey,n.options.culture=t.basemapBingCulture,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=t.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,e.basemaps[n.name]=Hr().tileLayer.bing(n.options),e.minimaps[n.name]=Hr().tileLayer.bing(n.options);else if(4===n.type&&(t.hereApiKey||t.hereAppId&&t.hereAppCode))n.options.apiKey=t.hereApiKey,n.options.appId=t.hereAppId,n.options.appCode=t.hereAppCode,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=t.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,e.basemaps[n.name]=Hr().tileLayer.here(n.options),e.minimaps[n.name]=Hr().tileLayer.here(n.options);else if(5===n.type&&t.tomApiKey)n.options.apiKey=t.tomApiKey,n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=t.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,e.basemaps[n.name]=Hr().tileLayer.tomTom(n.options),e.minimaps[n.name]=Hr().tileLayer.tomTom(n.options);else{if(6!==n.type)continue;n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=void 0===n.options.errorTiles&&t.errorTiles||n.options.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,n.labels?(e.basemaps[n.name]=Hr().layerGroup([Ja(n.key,n.options),Ja(n.labels,n.options)]),e.minimaps[n.name]=Hr().layerGroup([Ja(n.key,n.options),Ja(n.labels,n.options)])):(e.basemaps[n.name]=Ja(n.key,n.options),e.minimaps[n.name]=Ja(n.key,n.options))}e.basemaps[n.name].mmp_id=n.id,e.minimaps[n.name].mmp_id=n.id}var r=Object.keys(e.basemaps);if(r.length){var a=r[0];for(i=0;i<r.length;i++){var s=r[i];if(e.basemaps[s].mmp_id===t.basemapDefault){a=s;break}}e.basemaps[a].addTo(e.map)}e.fire("basemapsloaded",e.basemaps)},this.loadOverlays=function(){var t=e.settings;Object.keys(e.overlays).forEach((function(t){e.map.removeLayer(e.overlays[t])})),e.overlays={};for(var i=0;i<t.overlays.length;i++){var n=t.overlays[i];if(n.options.bounds&&"string"==typeof n.options.bounds){var o=ss(n.options.bounds);n.options.rasterTiles?n.options.bounds=[e.map.unproject(Hr().point(o[0][1],o[0][0]),n.options.maxNativeZoom),e.map.unproject(Hr().point(o[1][1],o[1][0]),n.options.maxNativeZoom)]:n.options.bounds=o}n.options.minZoom=t.minZoom,n.options.maxZoom=t.maxZoom,n.options.errorTileUrl=void 0===n.options.errorTiles||n.options.errorTiles?t.errorTileUrl:null,n.options.edgeBufferTiles=t.basemapEdgeBufferTiles,n.wms?e.overlays[n.name]=Hr().tileLayer.wms(n.url,n.options):e.overlays[n.name]=Hr().tileLayer(n.url,n.options),-1!==t.overlaysActive.indexOf(n.id)&&e.overlays[n.name].addTo(e.map)}e.fire("overlaysloaded",e.overlays)},this.loadResources=function(){var t=e.settings;return e.groups={},e.groups[e.id]={active:!0,markers:{}},Object.keys(t.filtersDetails).forEach((function(i){e.groups[i]={active:t.filtersDetails[i].active,markers:{}}})),Promise.all([e.getMarkers().then((function(i){if(e.addMarkers(i),"map"===e.type&&t.list)return e.getList();e.drawMarkers()})).catch((function(){return Promise.reject()})),e.getGeoJson(),e.getGpx()])},this.drawMarkers=function(t){t=t||e.getActiveMarkers();var i=e.settings;if("function"==typeof e.markerGroup.remove&&e.markerGroup.remove(),e.markerGroup={},i.clustering?e.markerGroup=Hr().markerClusterGroup({showCoverageOnHover:i.showCoverageOnHover,disableClusteringAtZoom:i.disableClusteringAtZoom||null,maxClusterRadius:i.maxClusterRadius,singleMarkerMode:i.singleMarkerMode,spiderfyDistanceMultiplier:i.spiderfyDistanceMultiplier,chunkedLoading:!1}):e.markerGroup=Hr().featureGroup(),e.markerGroup.addTo(e.map),i.clustering)e.markerGroup.addLayers(t);else for(var n=0;n<t.length;n++)e.markerGroup.hasLayer(t[n])||e.markerGroup.addLayer(t[n])},this.getMarkers=function(){var t=[];return e.settings.filtersAllMarkers||(t.push(e.id),Object.keys(e.settings.filtersDetails).forEach((function(e){t.push(e)}))),e.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_markers",type:e.type,id:t,custom:e.customMarkers,lang:mmpVars.language}}).then((function(t){return JSON.parse(t)})).catch((function(t){return e.logError("Error loading markers ("+t+")"),Promise.reject()}))},this.addMarkers=function(t){var i=e.settings;"function"==typeof e.markerGroup.remove&&e.markerGroup.remove(),e.markers={},e.markerGroup={},e.tooltip={direction:i.tooltipDirection,permanent:i.tooltipPermanent,sticky:i.tooltipSticky,opacity:i.tooltipOpacity},e.popup={minWidth:i.popupMinWidth,maxWidth:i.popupMaxWidth,maxHeight:i.popupMaxHeight,autoPan:!i.popupCenterOnMap,closeButton:i.popupCloseButton,autoClose:i.popupAutoClose};for(var n=0;n<t.length;n++){var o=t[n];if(e.markers[o.id]=Hr().marker([o.lat,o.lng],{pmIgnore:!0,contextmenu:i.listEdit,contextmenuItems:[{text:mmpL10n.api.editMarker,icon:mmpVars.pluginUrl+"images/icons/map-edit.png",callback:e.editMarker}],icon:Hr().icon({iconUrl:o.icon?mmpVars.iconsUrl+o.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor,className:"mmp-marker-icon mmp-marker-icon-"+o.id}),opacity:i.markerOpacity}),e.markers[o.id].id=o.id,e.markers[o.id].name=o.name,e.markers[o.id].address=o.address,e.markers[o.id].popup=o.popup,e.markers[o.id].link=o.link,e.markers[o.id].blank=o.blank,e.markers[o.id].icon=o.icon,e.markers[o.id].created=o.created,e.markers[o.id].updated=o.updated,e.markers[o.id].edit=o.edit,o.name&&(e.tooltips[o.id]=o.name,!i.tooltip||!i.tooltipPermanent&&Hr().Browser.mobile||e.markers[o.id].bindTooltip(e.tooltips[o.id],e.tooltip)),o.link?(e.markers[o.id].on("click",(function(){e.openLink(this.link,this.blank)})),e.markers[o.id].on("keypress",(function(t){13===t.which&&e.openLink(this.link,this.blank)}))):(!1!==o.popup||o.address&&i.popupAddress||i.popupCoordinates||i.popupDirections)&&e.markers[o.id].bindPopup("",e.popup),e.markers[o.id].on("popupopen",e.openPopupHandler),i.popupOpenOnHover?e.markers[o.id].on("mouseover",e.openOnHoverHandler):e.markers[o.id].off("mouseover",e.openOnHoverHandler),"map"!==e.type||i.filtersAllMarkers)e.groups[e.id].markers[o.id]=e.markers[o.id];else for(var r=0;r<o.maps.length;r++)void 0!==e.groups[o.maps[r]]&&(e.groups[o.maps[r]].markers[o.id]=e.markers[o.id])}e.fire("markersloaded",e.markers)},this.getGeoJson=function(){var t=[e.id];return!e.settings.filtersAllMarkers&&e.settings.filtersGeoJson&&Object.keys(e.settings.filtersDetails).forEach((function(e){t.push(e)})),e.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_geojson",type:e.type,id:t,lang:mmpVars.language}}).then((function(t){var i=JSON.parse(t);e.addGeoJson(i)})).catch((function(t){e.logError("Error loading GeoJSON ("+t+")")}))},this.parseGeoJson=function(t){return Hr().geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return Hr().circle(e,t.properties.radius)},style:function(t){if(!t.properties)return{};var e={};return Object.keys(t.properties).forEach((function(i){switch(i){case"weight":e[i]=parseInt(t.properties[i]);break;case"opacity":case"fillOpacity":e[i]=parseFloat(t.properties[i]);break;default:e[i]=t.properties[i]}})),e},onEachFeature:function(t,i){i.options.popup&&i.bindPopup("",e.popup),i.on("popupopen",e.openPopupHandler)}})},this.addGeoJson=function(t){"function"==typeof e.geoJsonGroup.remove&&e.geoJsonGroup.remove(),e.geoJson={},e.geoJsonGroup={},e.geoJson[e.id]=Hr().geoJSON(),t&&(Object.keys(t).forEach((function(i){void 0===t[i].features?e.geoJson[i]=Hr().geoJSON():e.geoJson[i]=e.parseGeoJson(t[i])})),e.drawGeoJson(),e.fire("geojsonloaded",e.geoJson))},this.drawGeoJson=function(){"function"==typeof e.geoJsonGroup.remove&&e.geoJsonGroup.remove(),e.geoJsonGroup=Hr().featureGroup(),e.geoJsonGroup.addTo(e.map),Object.keys(e.groups).forEach((function(t){e.groups[t].active&&void 0!==e.geoJson[t]&&e.geoJsonGroup.addLayer(e.geoJson[t])}))},this.getPopups=function(t){return e.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_marker_popups",id:t,lang:mmpVars.language}}).then((function(t){t=JSON.parse(t);for(var i=0;i<t.length;i++){var n=t[i];e.markers[n.id].popup=n.popup}})).catch((function(t){e.logError("Error retrieving popups ("+t+")")}))},this.getList=function(t){t=t||{};var i=e.settings;if("map"===e.type&&i.list){for(var n=["page","term","sort","order","lat","lng","radius"],o=0;o<n.length;o++){var r=n[o];void 0!==t[r]&&(e.list[r]=t[r])}var a=[];return i.filtersAllMarkers||Object.keys(e.groups).forEach((function(t){e.groups[t].active&&a.push(t)})),e.xhr({type:"POST",url:mmpVars.ajaxurl,data:{action:"mmp_map_marker_list",id:a,page:e.list.page,term:e.list.term||"",sort:e.list.sort,order:e.list.order,lat:e.list.lat||"",lng:e.list.lng||"",radius:"imperial"===i.listDistanceUnit||"imperial-metric"===i.listDistanceUnit?1609.344*e.list.radius:1e3*e.list.radius}}).then((function(t){t=JSON.parse(t);for(var i=[],n=0;n<t.length;n++)void 0!==e.markers[t[n]]&&i.push(e.markers[t[n]]);e.updateCircle(),e.showList(i),e.drawMarkers(i)})).catch((function(t){return e.logError("Error retrieving marker list ("+t+")"),Promise.reject()}))}},this.showList=function(t){var i=e.settings,n=t.length>i.listLimit?i.listLimit:t.length,o=Math.ceil(t.length/i.listLimit);e.list.page=e.list.page>o?o:e.list.page,e.list.page<=0&&(e.list.page=1);for(var r=e.list.page===o?t.length:n*e.list.page,a=[],s=(e.list.page-1)*n;s<r;s++)null===t[s].popup&&a.push(t[s].id);a.length?e.getPopups(a).then((function(){e.renderList(t)})).catch((function(){})):e.renderList(t)},this.renderList=function(t){var i=e.settings;e.containers.listBody.innerHTML="";var n=t.length>i.listLimit?i.listLimit:t.length,o=Math.ceil(t.length/i.listLimit);e.list.page=e.list.page>o?o:e.list.page,e.list.page<=0&&(e.list.page=1);for(var r=e.list.page===o?t.length:n*e.list.page,a=(e.list.page-1)*n;a<r;a++){var s=Hr().DomUtil.create("div","mmp-list-row",e.containers.listBody);if(i.listIcon){var l=Hr().DomUtil.create("div","mmp-list-row-icon",s),c=Hr().DomUtil.create("div","mmp-list-icon",l),h=Hr().DomUtil.create("img",null,c);t[a].icon?h.src=mmpVars.iconsUrl+t[a].icon:h.src=mmpVars.pluginUrl+"images/leaflet/marker.png",h.style.width=i.iconSize[0]+"px",h.style.height=i.iconSize[1]+"px"}var u=Hr().DomUtil.create("div","mmp-list-row-info",s),p=Hr().DomUtil.create("div","mmp-list-row-header",u);if(i.listName){var d=Hr().DomUtil.create("div","mmp-list-name",p);d.innerHTML=t[a].name,"none"!==i.listAction&&(d.tabIndex=0,function(n){var o="popup"===i.listAction;Hr().DomEvent.on(d,"click",(function(){e.highlightMarker(t[n],e.containers.main.getBoundingClientRect().top<0,o)})),Hr().DomEvent.on(d,"keypress",(function(i){13===i.which&&e.highlightMarker(t[n],e.containers.main.getBoundingClientRect().top<0,o)}))}(a))}var m,f,g=Hr().DomUtil.create("div","mmp-list-api",p);if(t[a].edit&&e.addApiLink(e.getApiLink("editMarker",t[a].id),mmpL10n.api.editMarker,"mmp-api-icon-edit",g),i.listDir)m=e.getDirectionsLink(i.directionsProvider,t[a].getLatLng().lat,t[a].getLatLng().lng,t[a].address),"googlemaps"===i.directionsProvider?f=i.directionsGoogleWalking?"walk":"car":"ors"===i.directionsProvider?f="Bicycle"===i.directionsOrsType?"bicycle":"Pedestrian"===i.directionsOrsType?"walk":"car":"bingmaps"===i.directionsProvider&&(f="car"),e.addApiLink(m,mmpL10n.api.dir,"mmp-api-icon-"+f,g);i.apiFullscreen&&i.listFs&&e.addApiLink(e.getApiLink("fs",e.id,{marker:t[a].id}),mmpL10n.api.fs,"mmp-api-icon-fullscreen",g),i.listShare&&e.addShareLink(t[a].id,g);var _=Hr().DomUtil.create("div","mmp-list-row-body",u);if(i.listPopup&&t[a].popup)Hr().DomUtil.create("div","mmp-list-popup",_).innerHTML=t[a].popup;var v=Hr().DomUtil.create("div","mmp-list-row-footer",u);if(i.listAddress&&t[a].address)Hr().DomUtil.create("span","mmp-list-address",v).innerHTML=t[a].address;if(i.listCoordinates){var y=Hr().DomUtil.create("span","mmp-list-coordinates",v);t[a].address&&i.listAddress?y.innerHTML+=" ("+t[a].getLatLng().lat+", "+t[a].getLatLng().lng+")":y.innerHTML+=t[a].getLatLng().lat+", "+t[a].getLatLng().lng}if(i.listDistance&&null!==e.list.lat&&null!==e.list.lng){var b=Hr().latLng(e.list.lat,e.list.lng),x=t[a].getLatLng(),k=Hr().latLng(b).distanceTo(x),w=Hr().DomUtil.create("div","mmp-list-distance",g);"imperial"===i.listDistanceUnit?w.innerHTML=(k/1609.344).toFixed(i.listDistancePrecision)+" mi":"metric-imperial"===i.listDistanceUnit?w.innerHTML=(k/1e3).toFixed(i.listDistancePrecision)+" km ("+(k/1609.344).toFixed(i.listDistancePrecision)+" mi)":"imperial-metric"===i.listDistanceUnit?w.innerHTML=(k/1609.344).toFixed(i.listDistancePrecision)+" mi ("+(k/1e3).toFixed(i.listDistancePrecision)+" km)":w.innerHTML=(k/1e3).toFixed(i.listDistancePrecision)+" km"}}e.containers.listFooter.innerHTML="";var L=Hr().DomUtil.create("div","mmp-list-count",e.containers.listFooter);if(0===t.length?L.innerHTML=mmpL10n.list.noResults:1===t.length?L.innerHTML=mmpL10n.list.oneResult:L.innerHTML=t.length+" "+mmpL10n.list.results,t.length>i.listLimit){var M=Hr().DomUtil.create("div","mmp-list-nav",e.containers.listFooter),C=Hr().DomUtil.create("button",null,M);C.innerHTML="&laquo;",C.addEventListener("click",(function(){e.list.page=1,e.showList(t)}));var P=Hr().DomUtil.create("button",null,M);P.innerHTML="&lsaquo;",P.addEventListener("click",(function(){e.list.page=1===e.list.page?1:e.list.page-1,e.showList(t)}));var S=Hr().DomUtil.create("button",null,M);S.innerHTML="&rsaquo;",S.addEventListener("click",(function(){e.list.page=e.list.page===o?o:e.list.page+1,e.showList(t)}));var T=Hr().DomUtil.create("button",null,M);T.innerHTML="&raquo;",T.addEventListener("click",(function(){e.list.page=o,e.showList(t)}));var A=Hr().DomUtil.create("div","mmp-list-page",e.containers.listFooter),E=Hr().DomUtil.create("input",null,A);E.type="text",E.value=e.list.page,A.appendChild(document.createTextNode(" / "+o)),A.addEventListener("keyup",(function(i){13===i.which&&(e.list.page=Math.abs(parseInt(E.value)),e.showList(t))}))}},this.updateCircle=function(){var t=e.settings;if("function"==typeof e.list.circle.remove&&(e.list.circle.remove(),e.list.circle={}),null!==e.list.lat&&null!==e.list.lng){var i=Hr().latLng([e.list.lat,e.list.lng]);if(e.list.radius<=0)e.map.panTo(i);else{var n=e.list.radius;"imperial"===t.listDistanceUnit||"imperial-metric"===t.listDistanceUnit?n*=1609.344:n*=1e3,t.listGeocodingDrawCircle&&(e.list.circle=Hr().circle(i,{pmIgnore:!0,interactive:!1,radius:n,stroke:t.listGeocodingStroke,color:t.listGeocodingColor,weight:t.listGeocodingWeight,fill:t.listGeocodingFill,fillColor:t.listGeocodingFillColor,fillOpacity:t.listGeocodingFillOpacity}).addTo(e.map)),e.map.fitBounds(i.toBounds(2*n))}}},this.loadControls=function(){var t=e.settings;if(void 0!==e.controls.locate&&e.controls.locate.stop(),Object.keys(e.controls).forEach((function(t){e.controls[t].remove()})),e.controls={},e.controls.attribution=Hr().control.attribution({position:t.attributionPosition,prefix:t.attributionPrefix}),e.controls.attribution.mmpIndex=t.attributionIndex,e.controls.attribution._esriAttributionAdded=!0,"hidden"!==t.geocodingControlPosition&&(e.controls.geocoding=Hr().control.mmpGeocoding({mmp:e,collapsed:"collapsed"===t.geocodingControlCollapsed||"collapsed-mobile"===t.geocodingControlCollapsed&&Hr().Browser.mobile,position:t.geocodingControlPosition,provider:t.geocodingControlProvider,options:mmpGeocoding,titleText:mmpL10n.control.geocodingTitle,errorText:mmpL10n.control.geocodingError}),e.controls.geocoding.mmpIndex=t.geocodingControlIndex),"hidden"!==t.zoomControlPosition&&(e.controls.zoom=Hr().control.zoom({position:t.zoomControlPosition,zoomInTitle:mmpL10n.control.zoomIn,zoomOutTitle:mmpL10n.control.zoomOut}),e.controls.zoom.mmpIndex=t.zoomControlIndex),"hidden"!==t.fullscreenPosition&&(e.controls.fullscreen=Hr().control.fullscreen({position:t.fullscreenPosition,title:{false:mmpL10n.control.fullscreenFalse,true:mmpL10n.control.fullscreenTrue}}),e.controls.fullscreen.mmpIndex=t.fullscreenIndex),"hidden"!==t.resetPosition&&(e.controls.reset=Hr().control.resetView({position:t.resetPosition,onDemand:t.resetOnDemand,title:mmpL10n.control.reset}),e.controls.reset.mmpIndex=t.resetIndex),"hidden"!==t.locatePosition&&(e.controls.locate=Hr().control.locate({locateOptions:{enableHighAccuracy:!0},position:t.locatePosition,drawCircle:t.locateDrawCircle,drawMarker:t.locateDrawMarker,setView:t.locateSetView,keepCurrentZoomLevel:t.locateKeepCurrentZoomLevel,clickBehavior:{inView:t.locateClickBehaviorInView,outOfView:t.locateClickBehaviorOutOfView},icon:"icon-pin",iconLoading:"icon-spinner",metric:t.locateMetric,showPopup:t.locateShowPopup,strings:{title:mmpL10n.control.locateTitle,metersUnit:mmpL10n.control.locateMetersUnit,feetUnit:mmpL10n.control.locateFeetUnit,popup:mmpL10n.control.locatePopup,outsideMapBoundsMsg:mmpL10n.control.locateOutsideMapBoundsMsg},onLocationError:function(t){var i=mmpL10n.control.locateErrorUnknown;1===t.code?i=mmpL10n.control.locateErrorDenied:2===t.code?i=mmpL10n.control.locateErrorUnavailable:3===t.code&&(i=mmpL10n.control.locateErrorTimeout),e.showMapModal(mmpL10n.control.locateError,i)},onLocationOutsideMapBounds:function(t){t.stop(),e.showMapModal(mmpL10n.control.locateError,t.options.strings.outsideMapBoundsMsg)}}),e.controls.locate.mmpIndex=t.locateIndex),"hidden"!==t.measurePosition&&(e.controls.measure=Hr().control.polylineMeasure({position:t.measurePosition,unit:"imperial"===t.measureUnit?"landmiles":"metres",showBearings:t.measureShowBearings,distanceShowSameUnit:!1,clearMeasurementsOnStop:t.measureClearMeasurementsOnStop,showClearControl:t.measureShowClearControl,showUnitControl:t.measureShowUnitControl,measureControlTitleOn:mmpL10n.control.measureOn,measureControlTitleOff:mmpL10n.control.measureOff,bearingTextIn:mmpL10n.control.measureIn,bearingTextOut:mmpL10n.control.measureOut,clearControlTitle:mmpL10n.control.measureClear,unitControlTitle:{text:mmpL10n.control.measureChangeUnits,metres:mmpL10n.control.measureMeters,landmiles:mmpL10n.control.measureMiles,nauticalmiles:mmpL10n.control.measureNauticalMiles},tooltipTextFinish:mmpL10n.control.measureFinish+"<br />",tooltipTextDelete:mmpL10n.control.measureDelete,tooltipTextMove:mmpL10n.control.measureMove+"<br />",tooltipTextResume:"<br />"+mmpL10n.control.measureResume,tooltipTextAdd:mmpL10n.control.measureAdd}),e.controls.measure.mmpIndex=t.measureIndex),"hidden"!==t.scalePosition&&(e.controls.scale=Hr().control.scale({position:t.scalePosition,maxWidth:t.scaleMaxWidth,metric:t.scaleMetric,imperial:t.scaleImperial}),e.controls.scale.mmpIndex=t.scaleIndex),"hidden"!==t.layersPosition&&(Object.keys(e.basemaps).length>1||Object.keys(e.overlays).length)&&(e.controls.layers=Hr().control.layers(null,null,{position:t.layersPosition,collapsed:"collapsed"===t.layersCollapsed||"collapsed-mobile"===t.layersCollapsed&&Hr().Browser.mobile}),Object.keys(e.basemaps).forEach((function(t){e.controls.layers.addBaseLayer(e.basemaps[t],t)})),Object.keys(e.overlays).forEach((function(t){e.controls.layers.addOverlay(e.overlays[t],t)})),e.controls.layers.mmpIndex=t.layersIndex),"hidden"!==t.filtersPosition&&"map"===e.type&&Object.keys(t.filtersDetails).length&&!t.filtersAllMarkers&&(e.controls.filters=Hr().control.filters({mmp:e,position:t.filtersPosition,collapsed:"collapsed"===t.filtersCollapsed||"collapsed-mobile"===t.filtersCollapsed&&Hr().Browser.mobile,buttons:t.filtersButtons,allText:mmpL10n.control.filtersAll,noneText:mmpL10n.control.filtersNone}),e.controls.filters.mmpIndex=t.filtersIndex),"hidden"!==t.gpxControlPosition&&void 0!==e.gpx.tracks&&e.gpx.tracks.length>1&&(e.controls.gpx=Hr().control.gpx({mmp:e,collapsed:"collapsed"===t.gpxControlCollapsed||"collapsed-mobile"===t.gpxControlCollapsed&&Hr().Browser.mobile,position:t.gpxControlPosition}),e.controls.gpx.mmpIndex=t.gpxControlIndex),"hidden"!==t.minimapPosition&&Object.keys(e.minimaps).length){var i=Hr().tileLayer("");Object.keys(e.basemaps).forEach((function(t){e.map.hasLayer(e.basemaps[t])&&(i=e.minimaps[t])})),e.controls.minimap=new(Hr().Control.MiniMap)(i,{position:t.minimapPosition,width:t.minimapWidth,height:t.minimapHeight,collapsedWidth:t.minimapCollapsedWidth,collapsedHeight:t.minimapCollapsedHeight,zoomLevelOffset:t.minimapZoomLevelOffset,zoomLevelFixed:t.minimapZoomLevelFixed||null,toggleDisplay:!0,autoToggleDisplay:!1,minimized:"collapsed"===t.minimapMinimized||"collapsed-mobile"===t.minimapMinimized&&Hr().Browser.mobile,strings:{hideText:mmpL10n.control.minimapHideText,showText:mmpL10n.control.minimapShowText},mapOptions:{attributionControl:!1}}),e.controls.minimap.mmpIndex=t.minimapIndex}var n=[];Object.keys(e.controls).forEach((function(t){n.push(e.controls[t])})),n.sort((function(t,e){return t.mmpIndex-e.mmpIndex}));for(var o=0;o<n.length;o++)n[o].addTo(e.map);Object.keys(e.basemaps).forEach((function(t){var i=e.basemaps[t];e.map.hasLayer(i)&&(i instanceof Hr().TileLayer.HERE?i._findCopyrightBBox():i instanceof Hr().TileLayer.TomTom?i._addAttribution():i instanceof Ka&&Ea._updateMapAttribution({target:e.map}))})),t.attributionCondensed&&(Hr().DomUtil.removeClass(e.controls.attribution.getContainer(),"leaflet-control-attribution"),Hr().DomUtil.addClass(e.controls.attribution.getContainer(),"mmp-control-attribution")),void 0!==e.controls.minimap?e.map.on("baselayerchange",e.updateMinimapHandler):e.map.off("baselayerchange",e.updateMinimapHandler),void 0!==e.controls.locate?(e.map.on("locationfound",e.updateLocationHandler),e.map.on("locatedeactivate",e.locateDeactivateHandler),!e.settings.locateAutostart||e.urlHighlight||e.highlight||e.controls.locate.start()):(e.map.off("locationfound",e.updateLocationHandler),e.map.off("locatedeactivate",e.locateDeactivateHandler)),e.fire("controlsloaded",e.controls)},this.getGpx=function(){var t=e.settings;return t.gpxUrl?e.xhr({type:"GET",url:t.gpxUrl}).then((function(t){if(e.gpx=new o,e.gpx.parse(t),!e.gpx.tracks.length){for(var i=0;i<e.gpx.routes.length;i++){var n=e.gpx.routes[i];n.segments=[{points:n.points,extensions:n.extensions,time:n.time,distance:n.distance,elevation:n.elevation}],e.gpx.tracks.push(n)}e.gpx.routes=[]}e.addGpx()})).catch((function(t){e.logError("Error loading GPX ("+t+")")})):Promise.resolve()},this.addGpx=function(){var t=e.settings;if(void 0!==e.gpxGroup&&"function"==typeof e.gpxGroup.remove&&e.gpxGroup.remove(),e.gpxGroup=Hr().featureGroup(),e.gpxTracks={},e.map._activeTrack=0,void 0!==e.gpx.tracks&&e.gpx.tracks.length){for(var i=[],n=0;n<e.gpx.tracks.length;n++)for(var o=e.gpx.tracks[n],r=0;r<o.segments.length;r++){var a=o.segments[r];i[n]=Hr().polyline([],{pmIgnore:!0,interactive:!0,smoothFactor:t.gpxTrackSmoothFactor,color:o.extensions.color||a.extensions.color||t.gpxTrackColor,weight:parseInt(o.extensions.weight||a.extensions.weight||t.gpxTrackWeight),opacity:parseFloat(o.extensions.opacity||a.extensions.opacity||t.gpxTrackOpacity)});for(var s=0;s<a.points.length;s++){var l=a.points[s].lat,c=a.points[s].lon;i[n].addLatLng([l,c])}i[n].addTo(e.gpxGroup)}e.gpxTracks=i}e.setTrackIcons(),e.setIntervalMarkers(),e.setTrackMeta(),e.setWaypoints(),e.gpxGroup.addTo(e.map),e.fire("gpxloaded",e.gpxTracks),e.loadChart(),e.addElevationChart()},this.getGpxName=function(t){return!(void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].name)&&e.gpx.tracks[t].name},this.getGpxStartTime=function(t){return!(void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].time.start)&&new Date(e.gpx.tracks[t].time.start).toUTCString()},this.getGpxEndTime=function(t){return!(void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].time.end)&&new Date(e.gpx.tracks[t].time.end).toUTCString()},this.getGpxTimeTotal=function(t,i){return!(void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].time.total)&&cs(e.gpx.tracks[t].time.total,i)},this.getGpxTimeMoving=function(t,i){return!(void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].time.moving)&&cs(e.gpx.tracks[t].time.moving,i)},this.getGpxDistance=function(t,i){if(i=i||"metric",void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].distance.total)return!1;switch(i){case"imperial":return(e.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi";case"metric-imperial":return(e.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km ("+(e.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi)";case"imperial-metric":return(e.gpx.tracks[t].distance.total/1609.344).toFixed(2)+" mi ("+(e.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km)";default:return(e.gpx.tracks[t].distance.total/1e3).toFixed(2)+" km"}},this.getGpxPace=function(t,i,n){if(i=i||"metric",void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].time.moving||!e.gpx.tracks[t].distance.total)return!1;switch(i){case"imperial":return cs(e.gpx.tracks[t].time.moving/(e.gpx.tracks[t].distance.total/1609.344),n)+"/mi";case"metric-imperial":return cs(e.gpx.tracks[t].time.moving/(e.gpx.tracks[t].distance.total/1e3),n)+"/km ("+cs(e.gpx.tracks[t].time.moving/(e.gpx.tracks[t].distance.total/1609.344),n)+"/mi)";case"imperial-metric":return cs(e.gpx.tracks[t].time.moving/(e.gpx.tracks[t].distance.total/1609.344),n)+"/mi ("+cs(e.gpx.tracks[t].time.moving/(e.gpx.tracks[t].distance.total/1e3),n)+"/km)";default:return cs(e.gpx.tracks[t].time.moving/(e.gpx.tracks[t].distance.total/1e3),n)+"/km"}},this.getGpxHeartRate=function(t){return!(void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].heartRate.avg)&&e.gpx.tracks[t].heartRate.avg.toFixed(0)+" bpm"},this.getGpxElevation=function(t,i){if(i=i||"metric",void 0===e.gpx.tracks[t]||!e.gpx.tracks[t].elevation.gain&&!e.gpx.tracks[t].elevation.loss)return!1;var n=e.gpx.tracks[t].elevation.gain-e.gpx.tracks[t].elevation.loss;switch(i){case"imperial":return"+"+(e.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(e.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(n/.3048).toFixed(0)+" ft";case"metric-imperial":return"+"+e.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+e.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+n.toFixed(0)+" m (+"+(e.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(e.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(n/.3048).toFixed(0)+" ft)";case"imperial-metric":return"+"+(e.gpx.tracks[t].elevation.gain/.3048).toFixed(0)+" ft -"+(e.gpx.tracks[t].elevation.loss/.3048).toFixed(0)+" ft &Delta; "+(n/.3048).toFixed(0)+" ft (+"+e.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+e.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+n.toFixed(0)+" m)";default:return"+"+e.gpx.tracks[t].elevation.gain.toFixed(0)+" m -"+e.gpx.tracks[t].elevation.loss.toFixed(0)+" m &Delta; "+n.toFixed(0)+" m"}},this.setTrackStyle=function(){var t=e.settings;Object.keys(e.gpxTracks).forEach((function(i){e.gpxTracks[i].setStyle({color:t.gpxTrackColor,weight:t.gpxTrackWeight,opacity:t.gpxTrackOpacity})}))},this.setTrackIcons=function(){var t=e.settings;void 0!==e.gpx.tracks&&Object.keys(e.gpx.tracks).forEach((function(i){if(void 0!==e.gpx.tracks[i].startIcon&&e.gpx.tracks[i].startIcon&&e.gpx.tracks[i].startIcon.remove(),void 0!==e.gpx.tracks[i].endIcon&&e.gpx.tracks[i].endIcon&&e.gpx.tracks[i].endIcon.remove(),t.gpxShowStartIcon&&(e.gpx.tracks[i].startIcon=Hr().marker([e.gpx.tracks[i].points[0].lat,e.gpx.tracks[i].points[0].lon],{pmIgnore:!0,interactive:!1,icon:Hr().icon({iconUrl:t.gpxStartIcon?mmpVars.iconsUrl+t.gpxStartIcon:mmpVars.pluginUrl+"images/leaflet/gpx-start.png",iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor,shadowUrl:t.shadowUrl,shadowSize:t.shadowSize,shadowAnchor:t.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-start"})}).addTo(e.gpxGroup)),t.gpxShowEndIcon){var n=e.gpx.tracks[i].points.length-1;e.gpx.tracks[i].endIcon=Hr().marker([e.gpx.tracks[i].points[n].lat,e.gpx.tracks[i].points[n].lon],{pmIgnore:!0,interactive:!1,icon:Hr().icon({iconUrl:t.gpxEndIcon?mmpVars.iconsUrl+t.gpxEndIcon:mmpVars.pluginUrl+"images/leaflet/gpx-end.png",iconSize:t.iconSize,iconAnchor:t.iconAnchor,popupAnchor:t.popupAnchor,shadowUrl:t.shadowUrl,shadowSize:t.shadowSize,shadowAnchor:t.shadowAnchor,className:"mmp-gpx-icon mmp-gpx-icon-end"})}).addTo(e.gpxGroup)}}))},this.setIntervalMarkers=function(){var t=e.settings;if(void 0!==e.gpx.tracks&&(Object.keys(e.gpx.tracks).forEach((function(t){if(void 0!==e.gpx.tracks[t].intervalMarkers&&e.gpx.tracks[t].intervalMarkers.length)for(var i=e.gpx.tracks[t].intervalMarkers,n=0;n<i.length;n++)i[n].remove()})),t.gpxIntervalMarkers))for(var i="imperial"===t.gpxMetaUnits||"imperial-metric"===t.gpxMetaUnits?1609.344:1e3,n=e.gpx.tracks,o=0;o<n.length;o++){n[o].intervalMarkers=[];for(var r=1,a=n[o].points,s=0;s<a.length;s++){var l=a[s];if(l.dist>=r*i){var c=Hr().marker([l.lat,l.lon],{pmIgnore:!0,interactive:!1,icon:Hr().divIcon({className:"mmp-interval-marker",html:"<span>"+r+"</span>"})}).addTo(e.map);n[o].intervalMarkers.push(c),r++}}}},this.setTrackMeta=function(){var t=e.settings;Object.keys(e.gpxTracks).forEach((function(i){if(!t.gpxMeta)return e.gpxTracks[i].closePopup(),void e.gpxTracks[i].unbindPopup();for(var n=Hr().DomUtil.create("div","mmp-gpx-meta"),o=[{show:t.gpxMetaName,title:mmpL10n.gpx.metaName,value:e.getGpxName(i)},{show:t.gpxMetaStart,title:mmpL10n.gpx.metaStart,value:e.getGpxStartTime(i)},{show:t.gpxMetaEnd,title:mmpL10n.gpx.metaEnd,value:e.getGpxEndTime(i)},{show:t.gpxMetaTotal,title:mmpL10n.gpx.metaTotal,value:e.getGpxTimeTotal(i)},{show:t.gpxMetaMoving,title:mmpL10n.gpx.metaMoving,value:e.getGpxTimeMoving(i)},{show:t.gpxMetaDistance,title:mmpL10n.gpx.metaDistance,value:e.getGpxDistance(i,t.gpxMetaUnits)},{show:t.gpxMetaPace,title:mmpL10n.gpx.metaPace,value:e.getGpxPace(i,t.gpxMetaUnits)},{show:t.gpxMetaHeartRate,title:mmpL10n.gpx.metaHeartRate,value:e.getGpxHeartRate(i)},{show:t.gpxMetaElevation,title:mmpL10n.gpx.metaElevation,value:e.getGpxElevation(i,t.gpxMetaUnits)}],r=0;r<o.length;r++)!o[r].show||t.gpxMetaHideMissing&&!1===o[r].value||(!1===o[r].value&&(o[r].value="N/A"),n.innerHTML+="<strong>"+o[r].title+":</strong> "+o[r].value+"<br />");t.gpxMetaDownload&&(n.innerHTML+='<a href="'+mmpVars.baseUrl+"index.php?mapsmarkerpro=download_gpx&url="+e.settings.gpxUrl+'"><img src="'+mmpVars.pluginUrl+'images/icons/download-gpx.png" /> '+mmpL10n.gpx.metaDownload+"</a><br />"),t.gpxMetaDesc&&e.gpx.tracks[i].desc&&(n.innerHTML&&(n.innerHTML+="<br />"),n.innerHTML+=e.gpx.tracks[i].desc),void 0!==e.gpxTracks[i].getPopup()&&e.gpxTracks[i].getPopup()?e.gpxTracks[i].setPopupContent(n):e.gpxTracks[i].bindPopup(n)}))},this.setWaypoints=function(){var t,i=e.settings;for(t=0;t<e.gpxWaypoints.length;t++)e.gpxWaypoints[t].remove();if(e.gpxWaypoints=[],i.gpxWaypoints&&void 0!==e.gpx.waypoints)for(t=0;t<e.gpx.waypoints.length;t++){var n=Hr().circleMarker([e.gpx.waypoints[t].lat,e.gpx.waypoints[t].lon],{interactive:!0,radius:i.gpxWaypointsRadius,stroke:i.gpxWaypointsStroke,color:i.gpxWaypointsColor,weight:i.gpxWaypointsWeight,fillColor:i.gpxWaypointsFillColor,fillOpacity:i.gpxWaypointsFillOpacity}).addTo(e.gpxGroup);if(e.gpx.waypoints[t].name&&n.bindTooltip(e.gpx.waypoints[t].name),e.gpx.waypoints[t].desc){var o=Hr().DomUtil.create("div","mmp-gpx-waypoint");o.innerHTML=e.gpx.waypoints[t].desc,n.bindPopup(o)}e.gpxWaypoints.push(n)}},this.setWaypointStyle=function(){for(var t=e.settings,i=0;i<e.gpxWaypoints.length;i++)e.gpxWaypoints[i].setStyle({radius:t.gpxWaypointsRadius,stroke:t.gpxWaypointsStroke,color:t.gpxWaypointsColor,weight:t.gpxWaypointsWeight,fillColor:t.gpxWaypointsFillColor,fillOpacity:t.gpxWaypointsFillOpacity})},this.generateChartData=function(){var t,i;"imperial"===e.settings.gpxChartUnits||"imperial-metric"===e.settings.gpxChartUnits?(t=1609.433,i=.3048):(t=1e3,i=1);var n=isNaN(parseFloat(e.settings.gpxChartYOffset))?0:parseFloat(e.settings.gpxChartYOffset);return e.gpx.tracks[e.map._activeTrack].points.map((function(e){return{x:e.dist/t,y:e.ele/i+n}}))},this.updateElevationChart=function(t){var i=e.settings;if(e.gpxChart instanceof ho){if(t){var n=e.generateChartData();e.gpxChart.data.datasets[0].data=n,e.gpxChart.options.scales.x.max=n[n.length-1].x}e.gpxChart.data.datasets[0].borderWidth=i.gpxChartLineWidth,e.gpxChart.data.datasets[0].borderColor=i.gpxChartLineColor,e.gpxChart.data.datasets[0].fill=!!i.gpxChartFill&&"origin",e.gpxChart.data.datasets[0].backgroundColor=i.gpxChartFillColor,e.gpxChart.options.scales.y.grid.color=i.gpxChartGridLinesColor,e.gpxChart.options.scales.y.min=isNaN(parseInt(i.gpxChartYMin))?void 0:parseInt(i.gpxChartYMin),e.gpxChart.options.scales.y.max=isNaN(parseInt(i.gpxChartYMax))?void 0:parseInt(i.gpxChartYMax),e.gpxChart.options.scales.y.reverse=i.gpxChartReverseY,e.gpxChart.options.scales.y.ticks.color=i.gpxChartTicksFontColor,e.gpxChart.options.scales.x.grid.color=i.gpxChartGridLinesColor,e.gpxChart.options.scales.x.reverse=i.gpxChartReverseX,e.gpxChart.options.scales.x.ticks.color=i.gpxChartTicksFontColor,e.gpxChart.options.chartArea.backgroundColor=i.gpxChartBgColor,e.gpxChart.options.plugins.tooltip.backgroundColor=i.gpxChartTooltipBgColor,e.gpxChart.options.plugins.tooltip.bodyColor=i.gpxChartTooltipFontColor,e.gpxChart.options.indicator.lineWidth=i.gpxChartIndicatorLineWidth,e.gpxChart.options.indicator.lineColor=i.gpxChartIndicatorLineColor,e.gpxChart.update()}},this.updateElevationChartThrottled=Hr().Util.throttle(e.updateElevationChart,100,this),this.addElevationChart=function(){var t=e.settings;if(e.settings.gpxChart&&void 0!==e.gpx.tracks&&e.gpx.tracks.length){void 0===e.containers.chartWrap&&e.loadChart();var i=e.generateChartData(),n=function(i){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vs(t,e)}(s,i);var n,o,r,a=ys(s);function s(){return fs(this,s),a.apply(this,arguments)}return n=s,(o=[{key:"draw",value:function(){if(_s(xs(s.prototype),"draw",this).call(this,arguments),this.chart.tooltip._active&&this.chart.tooltip._active.length&&void 0!==this.chart.scales.y){var i=this.chart.ctx,n=e.map._activeTrack,o=this.chart.tooltip.dataPoints[0],r=o.dataIndex,a=o.element.x,l=this.chart.scales.y.top,c=this.chart.scales.y.bottom;this.chart.config.options.indicator&&this.chart.config.options.indicator.lineWidth&&this.chart.config.options.indicator.lineColor&&(i.save(),i.beginPath(),i.moveTo(a,l),i.lineTo(a,c),i.lineWidth=this.chart.config.options.indicator.lineWidth,i.strokeStyle=this.chart.config.options.indicator.lineColor,i.stroke(),i.restore()),t.gpxChartLocator&&void 0!==e.chartLayers.locator&&(e.chartLayers.locator.setLatLng([e.gpx.tracks[n].points[r].lat,e.gpx.tracks[n].points[r].lon]),e.map.hasLayer(e.chartLayers.locator)||e.chartLayers.locator.addTo(e.map))}else void 0!==e.chartLayers.locator&&e.map.hasLayer(e.chartLayers.locator)&&e.chartLayers.locator.remove()}}])&&gs(n.prototype,o),r&&gs(n,r),s}(Hi);n.id="scatterIndicator",n.defaults=Hi.defaults,ho.register(Ao,So,Hi,br,n,er,mr),e.gpxChart=new ho("mmp-gpx-chart-"+e.uid,{plugins:[{beforeDraw:function(t){if(t.config.options.chartArea&&t.config.options.chartArea.backgroundColor){var e=t.ctx,i=t.chartArea;e.save(),e.fillStyle=t.config.options.chartArea.backgroundColor,e.fillRect(i.left,i.top,i.right-i.left,i.bottom-i.top),e.restore()}}},{afterDraw:function(t){if(!t.data.datasets[0].data.filter((function(t){return!isNaN(t.y)})).length){var e=t.ctx,i=t.width,n=t.height;t.clear(),e.save(),e.fillStyle="rgba(0, 0, 0, 1)",e.textAlign="center",e.textBaseline="middle",e.fillText(mmpL10n.gpx.noElevationData,i/2,n/2),e.restore()}}}],type:"scatterIndicator",data:{datasets:[{data:i,pointRadius:0,showLine:!0,spanGaps:!0,borderCapStyle:"round",borderWidth:t.gpxChartLineWidth,borderColor:t.gpxChartLineColor,fill:!!t.gpxChartFill&&"origin",backgroundColor:t.gpxChartFillColor}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:0},layout:{padding:{top:10}},scales:{x:{grid:{color:t.gpxChartGridLinesColor},ticks:{callback:function(i){return e.formatGpxValue(i,"dist",t.gpxChartUnits)},autoSkip:!1,color:t.gpxChartTicksFontColor},min:0,max:i[i.length-1].x,reverse:t.gpxChartReverseX},y:{grid:{color:t.gpxChartGridLinesColor},ticks:{callback:function(i){return e.formatGpxValue(i,"ele",t.gpxChartUnits)},color:t.gpxChartTicksFontColor},min:isNaN(parseInt(t.gpxChartYMin))?void 0:parseInt(t.gpxChartYMin),max:isNaN(parseInt(t.gpxChartYMax))?void 0:parseInt(t.gpxChartYMax),reverse:t.gpxChartReverseY}},chartArea:{backgroundColor:t.gpxChartBgColor},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(i){var n=i.dataIndex,o=i.dataset.data[n].y,r=i.dataset.data[n].x;return[mmpL10n.gpx.metaElevation+": "+e.formatGpxValue(o,"ele",t.gpxChartUnits),mmpL10n.gpx.metaDistance+": "+e.formatGpxValue(r,"dist",t.gpxChartUnits)]}},animation:{duration:250},mode:"index",intersect:!1,displayColors:!1,backgroundColor:t.gpxChartTooltipBgColor,bodyColor:t.gpxChartTooltipFontColor}},indicator:{lineWidth:t.gpxChartIndicatorLineWidth,lineColor:t.gpxChartIndicatorLineColor}}}),void 0!==e.chartLayers&&Object.keys(e.chartLayers).forEach((function(t){e.chartLayers[t].remove()})),e.chartLayers={},e.chartLayers.locator=Hr().circleMarker([0,0]),e.setChartStyle()}},this.setChartStyle=function(){var t=e.settings;t.gpxChart&&void 0!==e.chartLayers&&(Object.keys(e.chartLayers).forEach((function(t){e.chartLayers[t].remove()})),e.chartLayers.locator.setStyle({interactive:!1,radius:t.gpxChartLocatorRadius,stroke:t.gpxChartLocatorStroke,color:t.gpxChartLocatorColor,weight:t.gpxChartLocatorWeight,fillColor:t.gpxChartLocatorFillColor,fillOpacity:t.gpxChartLocatorFillOpacity}))},this.fitVisibleMarkers=function(){var t=e.markerGroup.getBounds();t.isValid()&&e.map.fitBounds(t)},this.fitGeoJson=function(t){var i=e.geoJson[e.id].getLayer(t);if(void 0!==i){var n=i.getBounds();n.isValid()&&e.map.fitBounds(n)}},this.deferredLoadHandler=function(t,i){t.forEach((function(t){if("childList"===t.type&&t.addedNodes.length)for(var n=0;n<t.addedNodes.length;n++){if(t.addedNodes[n].id==="maps-marker-pro-"+e.uid)return i.disconnect(),void e.main()}}))},this.lazyLoadHandler=function(t,i){for(var n=0;n<t.length;n++){var o=t[n];if(o.target===e.containers.main&&o.isIntersecting)return i.disconnect(),void e.load()}},this.lazyLoadHandlerFallback=function(){if(!(as(e.containers.main)&&(t=e.containers.main,i=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth,i.left<=o&&i.right>=0&&i.top<=n&&i.bottom>=0)))return setTimeout(e.lazyLoadHandlerFallback,250);var t,i,n,o;e.load()},this.visibilityDetectionHandler=function(t){for(var i=0;i<t.length;i++){t[i].target===e.containers.main&&e.checkInvalidateSize()}},this.visibilityDetectionHandlerFallback=function(){e.checkInvalidateSize(),setTimeout(e.visibilityDetectionHandlerFallback,250)},this.openPopupHandler=function(t){var i=e.settings,n=t.target.getPopup();void 0!==n&&e.loadPopup(t.target).then((function(){e.checkPopupSize(n),i.popupCenterOnMap&&e.centerPopup(n),e.fire("popupopen",n)})).catch((function(){}))},this.openOnHoverHandler=function(t){t.target.openPopup()},this.updateListHandler=function(){e.getList()},this.updateMinimapHandler=function(t){e.controls.minimap.changeLayer(e.minimaps[t.name])},this.updateLocationHandler=function(t){if(!e.list.located){e.list.located=!0;var i=document.getElementById("list-address-"+e.uid);i&&(i.value="",i.dispatchEvent(new Event("keyup"))),e.getList({lat:t.latitude,lng:t.longitude})}},this.locateDeactivateHandler=function(){e.list.located&&(e.list.located=!1,e.getList({lat:null,lng:null}))},this.main()}Hr().Control.MmpGeocoding=Hr().Control.extend({options:{mmp:null,collapsed:!0,position:"topleft",provider:"algolia",options:{},typingInterval:400,minChars:3,titleText:"",errorText:""},onAdd:function(t){this._map=t;var e=this.options,i="leaflet-control-mmp-geocoding",n=Hr().DomUtil.create("div",i);Hr().DomEvent.disableClickPropagation(n);var o=Hr().DomUtil.create("div",i+"-input-container",n),r=Hr().DomUtil.create("input",i+"-input",o);r.id=i+"-input-"+e.mmp.uid,r.type="text",r.title=e.titleText,r.placeholder=e.titleText,Hr().DomEvent.on(r,"keyup",this._onKeyUp,this);var a=this._clearButton=Hr().DomUtil.create("div",i+"-clear",o);return a.style.display="none",Hr().DomEvent.on(a,"click",this.clear,this),e.collapsed&&(Hr().DomEvent.on(r,"focus",this.expand,this),Hr().DomEvent.on(r,"blur",this.collapse,this)),this._geocoding=new ds("#"+i+"-input-"+e.mmp.uid,this._beforeSend.bind(this),this._onError.bind(this),this._onSelected.bind(this),e.provider,e.options,e.typingInterval,e.minChars),n},addTo:function(t){return Hr().Control.prototype.addTo.call(this,t),this._geocoding.init(),this.options.collapsed||this.expand(),this},expand:function(){Hr().DomUtil.addClass(this._container,"leaflet-control-mmp-geocoding-expanded")},collapse:function(){this.clear(),Hr().DomUtil.removeClass(this._container,"leaflet-control-mmp-geocoding-expanded")},clear:function(){this._geocoding.input.autocomplete.setVal(),this._clearButton.style.display="none"},_onKeyUp:function(){this._geocoding.input.autocomplete.getVal()?this._clearButton.style.display="inline-block":this._clearButton.style.display="none"},_beforeSend:function(){},_onError:function(t){this.options.mmp.showMapModal(this.options.errorText,t)},_onSelected:function(t,e){var i=this.options.mmp;void 0!==i.controls.locate&&i.controls.locate.stop(),this._map.setView([t,e]),this._geocoding.input.blur()}}),Hr().control.mmpGeocoding=function(t){return new(Hr().Control.MmpGeocoding)(t)},ks.callbacks=[],ks.init=function(){Object.keys(window.mapsMarkerPro).forEach((function(t){window.mapsMarkerPro[t]instanceof ks||(window.mapsMarkerPro[t]=new ks(window.mapsMarkerPro[t]))}))};var ws=ks;i(5911),i(686),i(4607);var Ls=function(){!function(t){var e=t("#mapSettings").serialize(),i=wp.media({title:mmpAdminL10n.map.chooseGpx,button:{text:mmpAdminL10n.map.choose},library:{type:["application/gpx","application/gpx+xml"]},multiple:!1}),n=new ds("#address",(function(){t("#geocodingError").empty()}),(function(e){t("#geocodingError").html(e)}),(function(e,i){mmpAdmin.map.panTo([e,i]),t("#lat").val(e.toFixed(6)),t("#lng").val(i.toFixed(6))}),t("#geocodingProvider").val(),mmpGeocoding,400,3);function o(){var e=t("#advancedSettings").prop("checked");t(".mmp-advanced").each((function(){e?t(this).show():t(this).hide()}))}function r(){t("#filtersAllMarkers").prop("checked")?t("#filtersWrap").hide():t("#filtersWrap").show()}function a(){var t=P();mmpAdmin.loadResources().then((function(){mmpAdmin.geoJson[mmpAdmin.id]=mmpAdmin.parseGeoJson(t),mmpAdmin.drawGeoJson(),mmpAdmin.loadControls(),S()}))}function s(t){mmpAdmin.settings.panelColor=t,mmpAdmin.loadPanel()}function l(t){mmpAdmin.settings.listGeocodingColor=t,mmpAdmin.updateCircle()}function c(t){mmpAdmin.settings.listGeocodingFillColor=t,mmpAdmin.updateCircle()}function h(t){mmpAdmin.settings.gpxTrackColor=t,mmpAdmin.setTrackStyle()}function u(t){mmpAdmin.settings.gpxWaypointsColor=t,mmpAdmin.setWaypointStyle()}function p(t){mmpAdmin.settings.gpxWaypointsFillColor=t,mmpAdmin.setWaypointStyle()}function d(t){mmpAdmin.settings.gpxChartLocatorColor=t,mmpAdmin.setChartStyle()}function m(t){mmpAdmin.settings.gpxChartLocatorFillColor=t,mmpAdmin.setChartStyle()}function f(e){var i=mmpAdmin.settings.availableBasemaps[e];if(void 0!==i){var n=t('<li class="mmp-basemap" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="basemaps[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="radio" name="basemapDefault" value="'+e+'" />');s.on("change",(function(){mmpAdmin.settings.basemapDefault=t(this).val().toString(),mmpAdmin.loadBasemaps(),mmpAdmin.loadControls()})),s.prop("checked",e===mmpAdmin.settings.basemapDefault),o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i.name+'" disabled="disabled" />');o.append(" ").append(l);var c=t('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');c.on("click",(function(){t(this).parent().parent().remove(),g(),_()})),o.append(" ").append(c),t("#basemapList").append(n)}}function g(){var e=[];t(".mmp-basemap").each((function(){e.push(t(this).data("id").toString())}));var i=t("#basemapsList");i.empty(),Object.keys(mmpAdmin.settings.availableBasemaps).forEach((function(n){if(-1===e.indexOf(n)){var o=mmpAdmin.settings.availableBasemaps[n],r=t('<option value="'+n+'">'+o.name+"</option>");i.append(r)}})),t("#basemapsList option").length?t("#basemapsAdd").prop("disabled",!1):t("#basemapsAdd").prop("disabled",!0)}function _(){mmpAdmin.settings.basemaps=[],t("#basemapList li").each((function(){var e=t(this).data("id").toString(),i=mmpAdmin.settings.availableBasemaps[e];void 0!==i&&mmpAdmin.settings.basemaps.push(i)})),mmpAdmin.loadBasemaps(),mmpAdmin.loadControls()}function v(e){var i=mmpAdmin.settings.availableOverlays[e];if(void 0!==i){var n=t('<li class="mmp-overlay" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="overlays[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="checkbox" name="overlaysActive[]" value="'+e+'" />');s.on("change",(function(){mmpAdmin.settings.overlaysActive=[],t('input[name="overlaysActive[]"]:checked').each((function(){mmpAdmin.settings.overlaysActive.push(t(this).val().toString())})),mmpAdmin.loadOverlays(),mmpAdmin.loadControls()})),s.prop("checked",-1!==mmpAdmin.settings.overlaysActive.indexOf(e)),o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i.name+'" disabled="disabled" />');o.append(" ").append(l);var c=t('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');c.on("click",(function(){t(this).parent().parent().remove(),y(),b()})),o.append(" ").append(c),t("#overlayList").append(n)}}function y(){var e=[];t(".mmp-overlay").each((function(){e.push(t(this).data("id").toString())}));var i=t("#overlaysList");i.empty(),Object.keys(mmpAdmin.settings.availableOverlays).forEach((function(n){if(-1===e.indexOf(n)){var o=mmpAdmin.settings.availableOverlays[n],r=t('<option value="'+n+'">'+o.name+"</option>");i.append(r)}})),t("#overlaysList option").length?t("#overlaysAdd").prop("disabled",!1):t("#overlaysAdd").prop("disabled",!0)}function b(){mmpAdmin.settings.overlays=[],t("#overlayList li").each((function(){var e=t(this).data("id").toString(),i=mmpAdmin.settings.availableOverlays[e];void 0!==i&&mmpAdmin.settings.overlays.push(i)})),mmpAdmin.loadOverlays(),mmpAdmin.loadControls()}function x(e,i){var n=void 0===i.active||!!i.active,o=i.icon||"",r=i.name||"",s=t('<li class="mmp-filter" data-id="'+e+'"></li>'),l=t("<div></div>");s.append(l);var c=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');l.append(c);var h=t('<label class="mmp-align-middle"><div class="switch"><input type="checkbox" name="filtersList['+e+'][active]"'+(n?' checked="checked"':"")+' /><span class="slider"></span></div></label>');t("input",h).on("change",(function(){var e=t(this).closest("li").data("id"),i=t(this).prop("checked");t(".mmp-control-filters-selector[value="+e+"]").prop("checked",i),void 0!==mmpAdmin.groups[e]&&(mmpAdmin.groups[e].active=i),mmpAdmin.drawMarkers(),mmpAdmin.drawGeoJson()})),l.append(" ").append(h);var u=t('<input type="hidden" name="filtersList['+e+'][icon]" value="'+o+'" />');l.append(u);var p=o?mmpVars.iconsUrl+o:mmpVars.pluginUrl+"images/leaflet/marker.png",d=t('<img class="mmp-filter-icon mmp-align-middle" src="'+p+'" />');d.on("click",(function(){t("#iconTarget").val(t(this).parent().parent().data("id")),t("#icons").show()})),l.append(" ").append(d);var m=t('<input type="text" class="mmp-align-middle" name="filtersList['+e+'][name]" value="'+r+'" />');m.on("change",(function(){w(),mmpAdmin.loadControls()})),l.append(" ").append(m);var f=t('<i class="dashicons dashicons-no mmp-remove-filter"></i>');f.on("click",(function(){t(this).parent().parent().remove(),k(),w(),a()})),l.append(" ").append(f),t("#filterList").append(s)}function k(){var e=[];t(".mmp-filter").each((function(){e.push(t(this).data("id"))})),t("#filtersMapList option").each((function(){var i=t(this).val()==mmpAdmin.id||-1!==t.inArray(parseInt(t(this).val()),e);t(this).prop("disabled",i)}));var i=!1;t("#filtersMapList option").each((function(){if(!t(this).prop("disabled"))return i=!0,t(this).prop("selected",!0),!1})),i?t("#filtersAdd").prop("disabled",!1):(t("#filtersAdd").prop("disabled",!0),t("#filtersMapList option").prop("selected",!1)),t("#filtersMapList").select2({width:"300px"})}function w(){var e={};t("#filterList li").each((function(i){var n=t(this).data("id");e[n]={index:i,active:t('input[name="filtersList['+n+'][active]"]').prop("checked"),name:t('input[name="filtersList['+n+'][name]"]').val(),icon:t('input[name="filtersList['+n+'][icon]"]').val()}})),mmpAdmin.settings.filtersDetails=e}function L(){mmpAdmin.settings.gpxStartIcon=t("#gpxStartIcon").val(),mmpAdmin.settings.gpxEndIcon=t("#gpxEndIcon").val(),mmpAdmin.setTrackIcons()}function M(e){void 0!==mmpAdmin.map.pm&&(e?(mmpAdmin.settings.filtersGeoJson=!1,a(),mmpAdmin.map.pm.addControls({position:"topleft",drawMarker:!1,drawCircleMarker:!1})):(mmpAdmin.settings.filtersGeoJson=t("#filtersGeoJson").prop("checked"),a(),mmpAdmin.map.pm.removeControls()))}function C(){void 0!==mmpAdmin.map.pm&&mmpAdmin.map.pm.setPathOptions({stroke:t("#drawStroke").prop("checked"),color:t("#drawStrokeColor").val(),weight:parseInt(t("#drawStrokeWeight").val()),opacity:parseFloat(t("#drawStrokeOpacity").val()),lineCap:t("#drawLineCap").val(),lineJoin:t("#drawLineJoin").val(),fill:t("#drawFill").prop("checked"),fillColor:t("#drawFillColor").val(),fillOpacity:parseFloat(t("#drawFillOpacity").val()),fillRule:t("#drawFillRule").val()})}function P(){var t={type:"FeatureCollection",features:[]};return mmpAdmin.geoJson[mmpAdmin.id].eachLayer((function(e){var i=e.toGeoJSON();if((!(e instanceof Hr().Polyline)||i.geometry.coordinates.length)&&(!(e instanceof Hr().Polygon)||i.geometry.coordinates.length&&i.geometry.coordinates[0].length&&null!==i.geometry.coordinates[0][0])){void 0===i.properties&&(i.properties={}),e instanceof Hr().Circle?i.properties.radius=e.getRadius():e instanceof Hr().Rectangle&&(i.properties.rectangle=!0);for(var n=["name","stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule","popup"],o=0;o<n.length;o++)void 0!==e.options[n[o]]&&(i.properties[n[o]]=e.options[n[o]]);t.features.push(i)}})),t}function S(){t("#geoJson").empty(),t("#shapesSelectAll").prop("checked",!1),mmpAdmin.geoJson[mmpAdmin.id].eachLayer(A),t('input[name="shapesSelected[]"]').length?t("#shapesList").show():t("#shapesList").hide(),t('input[name="shapesSelected[]"]').on("change",(function(){var e=!0;t('input[name="shapesSelected[]"]').each((function(i,n){e=e&&t(n).prop("checked")})),t("#shapesSelectAll").prop("checked",e)}))}function T(t){var e=!1;return t instanceof Hr().Circle?e="Circle":t instanceof Hr().Rectangle?e="Rectangle":t instanceof Hr().Polygon?e="Polygon":t instanceof Hr().Polyline&&(e="Polyline"),e}function A(e){var i=Hr().stamp(e),n=T(e),o=t('<li class="mmp-shape" data-id="'+i+'"></li>'),r=t("<div></div>");o.append(r);var a=t('<input type="checkbox" name="shapesSelected[]" value="'+i+'" />');r.append(a);var s=t('<img class="mmp-align-middle" src="'+mmpVars.pluginUrl+"images/icons/geojson-"+n.toLowerCase()+'.png" />');r.append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+e.options.name+'" />');l.on("change",(function(){var e=t(this).parent().parent().data("id"),i=mmpAdmin.geoJson[mmpAdmin.id].getLayer(e);void 0!==i&&(i.options.name=t(this).val(),mmpAdmin.updatePopup(i,!0))})),r.append(" ").append(l);var c=t('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/jump-to.png" />');c.on("click",(function(){mmpAdmin.fitGeoJson(i)})),r.append(" ").append(c);var h=t('<img class="mmp-align-middle mmp-clickable" src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');h.on("click",(function(){I(),t("#shapeId").val(i);var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&(O(e.options),t("#shapeBackup").val(JSON.stringify(D())),t("#editShape").appendTo(t(this).parent()),t("#editShape").slideDown(500))})),r.append(" ").append(h),t("#geoJson").append(o)}function E(){var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&e.setStyle(D())}function D(){return{stroke:t("#editDrawStroke").prop("checked"),color:t("#editDrawStrokeColor").val(),weight:parseInt(t("#editDrawStrokeWeight").val()),opacity:parseFloat(t("#editDrawStrokeOpacity").val()),lineCap:t("#editDrawLineCap").val(),lineJoin:t("#editDrawLineJoin").val(),fill:t("#editDrawFill").prop("checked"),fillColor:t("#editDrawFillColor").val(),fillOpacity:parseFloat(t("#editDrawFillOpacity").val()),fillRule:t("#editDrawFillRule").val(),popup:t("#editDrawPopup").val()}}function O(e){t("#editDrawStroke").prop("checked",e.stroke),t("#editDrawStrokeColor").spectrum("set",e.color),t("#editDrawStrokeWeight").val(e.weight),t("#editDrawStrokeOpacity").val(e.opacity),t('#editDrawLineCap option[value="'+e.lineCap+'"]').prop("selected",!0),t('#editDrawLineJoin option[value="'+e.lineJoin+'"]').prop("selected",!0),t("#editDrawFill").prop("checked",e.fill),t("#editDrawFillColor").spectrum("set",e.fillColor),t("#editDrawFillOpacity").val(e.fillOpacity),t('#editDrawFillRule option[value="'+e.fillRule+'"]').prop("selected",!0),t("#editDrawPopup").val(e.popup)}function I(){var e=t("#shapeBackup").val();e&&(O(JSON.parse(e)),E(),t("#shapeBackup").val(""))}function B(t){void 0!==t[0]&&mmpAdmin.map.fitBounds(t[0].getBounds(),{padding:[10,10]})}i.on("select",(function(){var e=i.state().get("selection").first().toJSON();t("#gpxUrl").val(e.url),t("#updateGpx").trigger("click")})),mmpAdmin.on("settingsloaded",(function(e){t("#filterList").empty(),Object.keys(e.filtersDetails).forEach((function(t){x(t,e.filtersDetails[t])})),k(),w(),t("#basemapList").empty();for(var i=0;i<e.basemaps.length;i++)f(e.basemaps[i].id);g(),t("#overlayList").empty();for(i=0;i<e.overlays.length;i++)v(e.overlays[i].id);y()})),mmpAdmin.on("basemapsloaded",(function(e){t("input[name=basemapDefault]:checked").length||t.each(e,(function(e,i){if(mmpAdmin.map.hasLayer(i))return mmpAdmin.settings.basemapDefault=i.mmp_id,t('input[name=basemapDefault][value="'+i.mmp_id+'"]').prop("checked",!0),!1}))})),mmpAdmin.on("maploaded",(function(){mmpAdmin.map.on("moveend",(function(){t("#lat").val(mmpAdmin.map.getCenter().lat.toFixed(6)),t("#lng").val(mmpAdmin.map.getCenter().lng.toFixed(6))})),mmpAdmin.map.on("zoomend",(function(){t("#zoom").val(mmpAdmin.map.getZoom().toFixed(1))})),mmpAdmin.on("controlsloaded",(function(){e=t("#mapSettings").serialize(),t(".leaflet-control-layers-base .leaflet-control-layers-selector").on("change",(function(){t(".mmp-basemap").each((function(e,i){var n=t("input[type=text]",i).val();if(mmpAdmin.map.hasLayer(mmpAdmin.basemaps[n]))return t("input[type=radio]",i).prop("checked",!0),!1}))})),t(".leaflet-control-layers-overlays .leaflet-control-layers-selector").on("change",(function(){t(".mmp-overlay").each((function(e,i){var n=t("input[type=text]",i).val(),o=mmpAdmin.map.hasLayer(mmpAdmin.overlays[n]);t("input[type=checkbox]",i).prop("checked",o)}))})),t(".mmp-control-filters-selector").on("change",(function(){var e=t(this).val(),i=t(this).prop("checked");t('input[name="filtersList['+e+'][active]"]').prop("checked",i)}))})),mmpAdmin.map.on("pm:create",(function(e){I(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings"));var i=T(e.layer).toLowerCase();e.layer.options.name=mmpAdminL10n.geoJson[i],mmpAdmin.geoJson[mmpAdmin.id].addLayer(e.layer),S()})),mmpAdmin.map.on("pm:remove",(function(e){I(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),mmpAdmin.geoJson[mmpAdmin.id].removeLayer(e.layer),S()})),mmpAdmin.map.on("pm:cut",(function(e){I(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),mmpAdmin.geoJson[mmpAdmin.id].removeLayer(e.originalLayer),e.layer.options.name=e.originalLayer.options.name||"",mmpAdmin.geoJson[mmpAdmin.id].addLayer(e.layer),S()})),r(),C()})),mmpAdmin.on("geojsonloaded",(function(){S()})),t("#chooseGpx").on("click",(function(){i.open()})),t("#tabMap, #tabLayers, #tabControl, #tabMarker, #tabFilter, #tabList, #tabShare, #tabInteraction, #tabGpx, #tabDraw").on("click",(function(){!function(e){var i=t(".mmp-tablink.active").first().attr("id");t(".mmp-tab").each((function(){t(this).hide()})),t(".mmp-tablink").each((function(){t(this).removeClass("active")})),t("#mmp-"+e.attr("id")+"-settings").show(),e.addClass("active");var n="tabDraw"===e.attr("id");n&&"tabDraw"!==i?M(!0):n||"tabDraw"!==i||M(!1)}(t(this))})),t("#tabMap").trigger("click"),t("#advancedSettings").on("change",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_advanced_map_settings_state",nonce:t("#nonce").val(),state:t("#advancedSettings").prop("checked")?1:0},beforeSend:o})})),t("#deleteMap").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:t("#nonce").val(),con:0,id:t("#id").val()}}).done((function(i){if(i.success){if(!confirm(i.response.message))return;t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:t("#nonce").val(),con:1,id:i.response.id}}).done((function(i){i.success&&(e=t("#mapSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_maps")}))}}))})),t("#panelColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1),t("#panel").prop("checked",!0),t("#panel").trigger("change")},move:function(t){s(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),s(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?s(e.toHexString("hex3")):s(t(this).val())}}),t("#gpxTrackColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){h(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),h(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?h(e.toHexString("hex3")):h(t(this).val())}}),t("#gpxWaypointsColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1),t("#gpxWaypoints").prop("checked",!0),t("#gpxWaypoints").trigger("change"),t("#gpxWaypointsStroke").prop("checked",!0),t("#gpxWaypointsStroke").trigger("change")},move:function(t){u(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),u(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?u(e.toHexString("hex3")):u(t(this).val())}}),t("#gpxWaypointsFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1),t("#gpxWaypoints").prop("checked",!0),t("#gpxWaypoints").trigger("change")},move:function(t){p(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),p(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?p(e.toHexString("hex3")):p(t(this).val())}}),t("#mapSettings").on("submit",(function(i){i.preventDefault(),i.stopPropagation(),t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map",settings:t("#mapSettings").serialize(),geoJson:JSON.stringify(P())},beforeSend:function(){var e;e=t("#save"),t("#save").prop("disabled",!0),t(e).addClass("mmp-button-loading")}}).done((function(i){i.success?(e=t("#mapSettings").serialize(),"new"===t("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+i.response.id):t('<div class="notice notice-success"><p>'+i.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){t(this).remove()}))):t('<div class="notice notice-error"><p>'+i.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})).always((function(){var e;e=t("#save"),t(e).removeClass("mmp-button-loading"),t("#save").prop("disabled",!1)}))})),t("#saveDefaultsLink").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t(this).hide(),t(".mmp-save-defaults").show()})),t("#saveDefaultsConfirm").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map_defaults",settings:t("#mapSettings").serialize()},beforeSend:function(){t("#saveDefaultsConfirm").prop("disabled",!0),t("#saveDefaultsCancel").prop("disabled",!0),t(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always((function(){t(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),t(".mmp-save-defaults").fadeOut(500,(function(){t("#saveDefaultsConfirm").prop("disabled",!1),t("#saveDefaultsCancel").prop("disabled",!1),t("#saveDefaultsLink").show()}))}))})),t("#saveDefaultsCancel").on("click",(function(){t(".mmp-save-defaults").hide(),t("#saveDefaultsLink").show()})),t("#fitMarkers").on("click",(function(){mmpAdmin.fitVisibleMarkers()})),t("#name").on("change",(function(){mmpAdmin.settings.name=t(this).val().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),mmpAdmin.loadPanel()})),t("#width, input[name=widthUnit], #height, input[name=heightUnit]").on("change",(function(){t("#widthUnitPct").prop("checked")&&t("#width").val()>100&&t("#width").val(100),mmpAdmin.settings.width=parseInt(t("#width").val()),mmpAdmin.settings.widthUnit=t("input[name=widthUnit]:checked").val(),mmpAdmin.settings.height=parseInt(t("#height").val()),mmpAdmin.settings.heightUnit=t("input[name=heightUnit]:checked").val(),mmpAdmin.setLayout()})),t("#lat, #lng").on("change",(function(){var e=parseFloat(t("#lat").val()),i=parseFloat(t("#lng").val());mmpAdmin.map.panTo([e,i])})),t("#zoom, #minZoom, #maxZoom, #zoomStep").on("change",(function(){mmpAdmin.map.options.minZoom=parseFloat(t("#minZoom").val()),mmpAdmin.map.options.maxZoom=parseFloat(t("#maxZoom").val()),mmpAdmin.map.options.zoomSnap=parseFloat(t("#zoomStep").val()),mmpAdmin.map.options.zoomDelta=parseFloat(t("#zoomStep").val()),mmpAdmin.map.setZoom(parseFloat(t("#zoom").val()))})),t("#maxBounds").on("change",(function(){mmpAdmin.map.setMaxBounds(ss(t("#maxBounds").val()))})),t("#restrictView").on("click",(function(){var e;t("#minZoom").val(mmpAdmin.map.getZoom()),mmpAdmin.map.options.minZoom=parseFloat(t("#minZoom").val()),t("#maxBounds").val([(e=mmpAdmin.map.getBounds()).getSouth(),e.getWest(),e.getNorth(),e.getEast()].join(",")),mmpAdmin.map.setMaxBounds(ss(t("#maxBounds").val()))})),t("#panel").on("change",(function(){mmpAdmin.settings.panel=t(this).prop("checked"),mmpAdmin.loadPanel()})),t("#panelFs, #panelGpx, #panelGeoJson, #panelKml, #panelGeoRss").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadPanel()})),t("#basemapList").sortable({handle:".mmp-handle",update:_}),t("#basemapsAdd").on("click",(function(){f(t("#basemapsList").val()),g(),_()})),t("#overlayList").sortable({handle:".mmp-handle",update:b}),t("#overlaysAdd").on("click",(function(){v(t("#overlaysList").val()),y(),b()})),t("input[name=attributionPosition], #attributionIndex, #attributionCondensed").on("change",(function(){mmpAdmin.settings.attributionPosition=t("input[name=attributionPosition]:checked").val(),mmpAdmin.settings.attributionIndex=t("#attributionIndex").val(),mmpAdmin.settings.attributionCondensed=t("#attributionCondensed").prop("checked"),mmpAdmin.loadControls()})),t("input[name=geocodingControlPosition], #geocodingControlIndex, #geocodingControlCollapsed").on("change",(function(){mmpAdmin.settings.geocodingControlPosition=t("input[name=geocodingControlPosition]:checked").val(),mmpAdmin.settings.geocodingControlIndex=t("#geocodingControlIndex").val(),mmpAdmin.settings.geocodingControlCollapsed=t("#geocodingControlCollapsed").val(),mmpAdmin.loadControls()})),t("#geocodingControlProvider").on("change",(function(){mmpAdmin.settings.geocodingControlProvider=t("#geocodingControlProvider").val(),mmpAdmin.controls.geocoding._geocoding.provider=t("#geocodingControlProvider").val(),"function"==typeof mmpAdmin.controls.geocoding._geocoding.reload&&mmpAdmin.controls.geocoding._geocoding.reload()})),t("input[name=zoomControlPosition], #zoomControlIndex").on("change",(function(){mmpAdmin.settings.zoomControlPosition=t("input[name=zoomControlPosition]:checked").val(),mmpAdmin.settings.zoomControlIndex=t("#zoomControlIndex").val(),mmpAdmin.loadControls()})),t("input[name=fullscreenPosition], #fullscreenIndex").on("change",(function(){mmpAdmin.settings.fullscreenPosition=t("input[name=fullscreenPosition]:checked").val(),mmpAdmin.settings.fullscreenIndex=t("#fullscreenIndex").val(),mmpAdmin.loadControls()})),t("input[name=resetPosition], #resetIndex, #resetOnDemand").on("change",(function(){mmpAdmin.settings.resetPosition=t("input[name=resetPosition]:checked").val(),mmpAdmin.settings.resetIndex=t("#resetIndex").val(),mmpAdmin.settings.resetOnDemand=t("#resetOnDemand").prop("checked"),mmpAdmin.loadControls()})),t("input[name=locatePosition], #locateIndex").on("change",(function(){mmpAdmin.settings.locatePosition=t("input[name=locatePosition]:checked").val(),mmpAdmin.settings.locateIndex=t("#locateIndex").val(),mmpAdmin.loadControls()})),t("input[name=measurePosition], #measureIndex").on("change",(function(){mmpAdmin.settings.measurePosition=t("input[name=measurePosition]:checked").val(),mmpAdmin.settings.measureIndex=t("#measureIndex").val(),void 0!==mmpAdmin.controls.measure&&mmpAdmin.controls.measure._clearAllMeasurements(),mmpAdmin.loadControls()})),t("#measureUnit, #measureShowBearings, #measureClearMeasurementsOnStop, #measureShowClearControl, #measureShowUnitControl").on("change",(function(){mmpAdmin.settings.measureUnit=t("#measureUnit").val(),mmpAdmin.settings.measureShowBearings=t("#measureShowBearings").prop("checked"),mmpAdmin.settings.measureClearMeasurementsOnStop=t("#measureClearMeasurementsOnStop").prop("checked"),mmpAdmin.settings.measureShowClearControl=t("#measureShowClearControl").prop("checked"),mmpAdmin.settings.measureShowUnitControl=t("#measureShowUnitControl").prop("checked"),void 0!==mmpAdmin.controls.measure&&mmpAdmin.controls.measure._clearAllMeasurements(),mmpAdmin.loadControls()})),t("input[name=scalePosition], #scaleIndex").on("change",(function(){mmpAdmin.settings.scalePosition=t("input[name=scalePosition]:checked").val(),mmpAdmin.settings.scaleIndex=t("#scaleIndex").val(),mmpAdmin.loadControls()})),t("#scaleMaxWidth, #scaleMetric, #scaleImperial").on("change",(function(){mmpAdmin.settings.scaleMaxWidth=t("#scaleMaxWidth").val(),mmpAdmin.settings.scaleMetric=t("#scaleMetric").prop("checked"),mmpAdmin.settings.scaleImperial=t("#scaleImperial").prop("checked"),mmpAdmin.loadControls()})),t("input[name=layersPosition], #layersIndex, #layersCollapsed").on("change",(function(){mmpAdmin.settings.layersPosition=t("input[name=layersPosition]:checked").val(),mmpAdmin.settings.layersIndex=t("#layersIndex").val(),mmpAdmin.settings.layersCollapsed=t("#layersCollapsed").val(),mmpAdmin.loadControls()})),t("input[name=filtersPosition], #filtersIndex, #filtersCollapsed, #filtersOrderBy, #filtersSortOrder").on("change",(function(){t("#filtersSortOrder").prop("disabled","custom"===t("#filtersOrderBy").val()),mmpAdmin.settings.filtersPosition=t("input[name=filtersPosition]:checked").val(),mmpAdmin.settings.filtersIndex=t("#filtersIndex").val(),mmpAdmin.settings.filtersCollapsed=t("#filtersCollapsed").val(),mmpAdmin.settings.filtersOrderBy=t("#filtersOrderBy").val(),mmpAdmin.settings.filtersSortOrder=t("#filtersSortOrder").val(),mmpAdmin.loadControls()})),t("input[name=gpxControlPosition], #gpxControlIndex, #gpxControlCollapsed").on("change",(function(){mmpAdmin.settings.gpxControlPosition=t("input[name=gpxControlPosition]:checked").val(),mmpAdmin.settings.gpxControlIndex=t("#gpxControlIndex").val(),mmpAdmin.settings.gpxControlCollapsed=t("#gpxControlCollapsed").val(),mmpAdmin.loadControls()})),t("#filtersButtons, #filtersIcon, #filtersName, #filtersCount").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadControls()})),t("input[name=minimapPosition], #minimapIndex, #minimapWidth, #minimapHeight, #minimapCollapsedWidth, #minimapCollapsedHeight, #minimapZoomLevelOffset, #minimapZoomLevelFixed, #minimapMinimized").on("change",(function(){mmpAdmin.settings.minimapPosition=t("input[name=minimapPosition]:checked").val(),mmpAdmin.settings.minimapIndex=t("#minimapIndex").val(),mmpAdmin.settings.minimapWidth=t("#minimapWidth").val(),mmpAdmin.settings.minimapHeight=t("#minimapHeight").val(),mmpAdmin.settings.minimapCollapsedWidth=t("#minimapCollapsedWidth").val(),mmpAdmin.settings.minimapCollapsedHeight=t("#minimapCollapsedHeight").val(),mmpAdmin.settings.minimapZoomLevelOffset=parseFloat(t("#minimapZoomLevelOffset").val()),mmpAdmin.settings.minimapZoomLevelFixed=parseFloat(t("#minimapZoomLevelFixed").val())||null,mmpAdmin.settings.minimapMinimized=t("#minimapMinimized").val(),mmpAdmin.loadControls()})),t("#filtersAllMarkers").on("change",(function(){mmpAdmin.settings.filtersAllMarkers=t(this).prop("checked"),r(),a()})),t("#filtersGeoJson").on("change",(function(){mmpAdmin.settings.filtersGeoJson=t(this).prop("checked"),a()})),t("#filterList").sortable({handle:".mmp-handle",update:function(){w(),mmpAdmin.loadControls()}}),t(".mmp-gpx-start-icon").on("click",(function(){t("#iconTarget").val("gpx-start"),t("#icons").show()})),t(".mmp-gpx-end-icon").on("click",(function(){t("#iconTarget").val("gpx-end"),t("#icons").show()})),t("#iconsList img").on("click",(function(){var e=t("#iconTarget").val(),i=t(this).attr("src"),n=t(this).data("icon");"gpx-start"===e?(t("#gpxStartIcon").val(n),t(".mmp-gpx-start-icon").attr("src",i),L()):"gpx-end"===e?(t("#gpxEndIcon").val(n),t(".mmp-gpx-end-icon").attr("src",i),L()):(t('input[name="filtersList['+e+'][icon]"]').val(n),t('.mmp-filter[data-id="'+e+'"] .mmp-filter-icon').attr("src",i),w(),mmpAdmin.loadControls()),t("#icons").hide()})),t("#filtersAdd").on("click",(function(){var e=t("#filtersMapList option:checked").text().replace(/\[(.+)\] /,"").replace(/ \((.+)\)$/,"");x(t("#filtersMapList").val(),{name:e}),k(),w(),a()})),k(),t(".mmp-remove-filter").on("click",(function(){t(this).parent().parent().remove(),k(),w()})),t("#markerOpacity").on("change",(function(){Object.keys(mmpAdmin.markers).forEach((function(e){mmpAdmin.markers[e].setOpacity(parseFloat(t("#markerOpacity").val()))}))})),t("#tooltip").on("change",(function(){var e=t(this).prop("checked");Object.keys(mmpAdmin.markers).forEach((function(t){mmpAdmin.markers[t].unbindTooltip(),e&&void 0!==mmpAdmin.tooltips[t]&&mmpAdmin.markers[t].bindTooltip(mmpAdmin.tooltips[t],mmpAdmin.tooltip)}))})),t("#tooltipDirection, #tooltipPermanent, #tooltipSticky, #tooltipOpacity").on("change",(function(){mmpAdmin.tooltip.direction=t("#tooltipDirection").val(),mmpAdmin.tooltip.permanent=t("#tooltipPermanent").prop("checked"),mmpAdmin.tooltip.sticky=t("#tooltipSticky").prop("checked"),mmpAdmin.tooltip.opacity=parseFloat(t("#tooltipOpacity").val()),t("#tooltip").trigger("change")})),t("#popupCenterOnMap, #popupMarkername, #popupAddress, #popupCoordinates, #popupDirections, #popupShare, #popupMinWidth, #popupMaxWidth, #popupMaxHeight").on("change",(function(){mmpAdmin.settings.popupCenterOnMap=t("#popupCenterOnMap").prop("checked"),mmpAdmin.settings.popupMarkername=t("#popupMarkername").prop("checked"),mmpAdmin.settings.popupAddress=t("#popupAddress").prop("checked"),mmpAdmin.settings.popupCoordinates=t("#popupCoordinates").prop("checked"),mmpAdmin.settings.popupDirections=t("#popupDirections").prop("checked"),mmpAdmin.settings.popupShare=t("#popupShare").prop("checked"),mmpAdmin.settings.popupMinWidth=parseInt(t("#popupMinWidth").val()),mmpAdmin.settings.popupMaxWidth=parseInt(t("#popupMaxWidth").val()),mmpAdmin.settings.popupMaxHeight=parseInt(t("#popupMaxHeight").val()),mmpAdmin.updatePopups()})),t("#showCoverageOnHover, #spiderfyDistanceMultiplier").on("change",(function(){mmpAdmin.settings.clustering&&(mmpAdmin.markerGroup.remove(),mmpAdmin.markerGroup.options.showCoverageOnHover=t("#showCoverageOnHover").prop("checked"),mmpAdmin.markerGroup.options.spiderfyDistanceMultiplier=parseFloat(t("#spiderfyDistanceMultiplier").val()),mmpAdmin.markerGroup.addTo(mmpAdmin.map))})),t("#list, #listWidth, #listBreakpoint").on("change",(function(){var e=mmpAdmin.settings.list,i=parseInt(t("#list").val());mmpAdmin.settings.list=i;var n=parseInt(t("#listWidth").val());mmpAdmin.settings.listWidth=n,mmpAdmin.containers.list&&(mmpAdmin.containers.list.style.flexBasis=n+"px"),mmpAdmin.settings.listBreakpoint=parseInt(t("#listBreakpoint").val()),mmpAdmin.setLayout(),(0===e&&i>0||e>0&&0===i)&&(mmpAdmin.loadList(),mmpAdmin.getList(),mmpAdmin.setLayout())})),t("#listSearch, #listIcon, #listName, #listPopup, #listAddress, #listCoordinates, #listDistance").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listDir, #listFs, #listShare").on("change",(function(){mmpAdmin.settings.listDir=t("#listDir").prop("checked"),mmpAdmin.settings.listFs=t("#listFs").prop("checked"),mmpAdmin.settings.listShare=t("#listShare").prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listDistanceUnit, #listDistancePrecision, #listOrderBy, #listSortOrder, #listLimit, #listAction").on("change",(function(){mmpAdmin.settings.listDistanceUnit=t("#listDistanceUnit").val(),mmpAdmin.settings.listDistancePrecision=parseInt(t("#listDistancePrecision").val()),mmpAdmin.settings.listOrderBy=t("#listOrderBy").val(),mmpAdmin.settings.listSortOrder=t("#listSortOrder").val(),mmpAdmin.settings.listLimit=parseInt(t("#listLimit").val()),mmpAdmin.settings.listAction=t("#listAction").val(),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listOrderById, #listOrderByName, #listOrderByAddress, #listOrderByDistance, #listOrderByIcon, #listOrderByCreated, #listOrderByUpdated").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listLocation").on("change",(function(){mmpAdmin.settings.listLocation=t(this).prop("checked"),mmpAdmin.loadList(),mmpAdmin.getList()})),t("#listGeocodingProvider").on("change",(function(){mmpAdmin.settings.listGeocodingProvider=t("#listGeocodingProvider").val(),mmpAdmin.list.geocoding.provider=t("#listGeocodingProvider").val(),"function"==typeof mmpAdmin.list.geocoding.reload&&mmpAdmin.list.geocoding.reload()})),t("#listGeocodingDrawCircle").on("change",(function(){mmpAdmin.settings.listGeocodingDrawCircle=t(this).prop("checked"),mmpAdmin.updateCircle()})),t("#listGeocodingStroke").on("change",(function(){mmpAdmin.settings.listGeocodingStroke=t(this).prop("checked"),mmpAdmin.updateCircle()})),t("#listGeocodingWeight").on("change",(function(){mmpAdmin.settings.listGeocodingWeight=parseInt(t(this).val()),mmpAdmin.updateCircle()})),t("#listGeocodingColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){l(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),l(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?l(e.toHexString("hex3")):l(t(this).val())}}),t("#listGeocodingFill").on("change",(function(){mmpAdmin.settings.listGeocodingFill=t(this).prop("checked"),mmpAdmin.updateCircle()})),t("#listGeocodingFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){c(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),c(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?c(e.toHexString("hex3")):c(t(this).val())}}),t("#listGeocodingFillOpacity").on("change",(function(){mmpAdmin.settings.listGeocodingFillOpacity=parseFloat(t(this).val()),mmpAdmin.updateCircle()})),t("#shareUrl, #shareText, #shareFacebook, #shareTwitter, #shareLinkedIn, #shareWhatsApp, #shareEmail").on("change",(function(){mmpAdmin.settings.shareUrl=t("#shareUrl").val(),mmpAdmin.settings.shareText=t("#shareText").val(),mmpAdmin.settings.popupShare=t("#popupShare").prop("checked"),mmpAdmin.settings.listShare=t("#listShare").prop("checked"),mmpAdmin.settings.shareFacebook=t("#shareFacebook").prop("checked"),mmpAdmin.settings.shareTwitter=t("#shareTwitter").prop("checked"),mmpAdmin.settings.shareLinkedIn=t("#shareLinkedIn").prop("checked"),mmpAdmin.settings.shareWhatsApp=t("#shareWhatsApp").prop("checked"),mmpAdmin.settings.shareEmail=t("#shareEmail").prop("checked")})),t("#responsive").on("change",(function(){mmpAdmin.settings.responsive=t(this).prop("checked"),mmpAdmin.setLayout()})),t("#boxZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.boxZoom.enable():mmpAdmin.map.boxZoom.disable()})),t("#doubleClickZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.doubleClickZoom.enable():mmpAdmin.map.doubleClickZoom.disable()})),t("#dragging").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.dragging.enable():mmpAdmin.map.dragging.disable()})),t("#inertia, #inertiaDeceleration, #inertiaMaxSpeed").on("change",(function(){mmpAdmin.map.options.inertia=t("#inertia").prop("checked"),mmpAdmin.map.options.inertiaDeceleration=parseInt(t("#inertiaDeceleration").val()),mmpAdmin.map.options.inertiaMaxSpeed=parseInt(t("#inertiaMaxSpeed").val())})),t("#keyboard").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.keyboard.enable():mmpAdmin.map.keyboard.disable()})),t("#scrollWheelZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.scrollWheelZoom.enable():mmpAdmin.map.scrollWheelZoom.disable()})),t("#touchZoom").on("change",(function(){t(this).prop("checked")?mmpAdmin.map.touchZoom.enable():mmpAdmin.map.touchZoom.disable()})),t("#updateGpx").on("click",(function(){var e=t("#gpxUrl").val();mmpAdmin.settings.gpxUrl=e,e?(mmpAdmin.on("gpxloaded",B),mmpAdmin.getGpx().then(mmpAdmin.loadControls)):(mmpAdmin.off("gpxloaded",B),mmpAdmin.gpx={},mmpAdmin.addGpx(),mmpAdmin.loadControls())})),t("#gpxShowStartIcon, #gpxShowEndIcon").on("change",(function(){mmpAdmin.settings.gpxShowStartIcon=t("#gpxShowStartIcon").prop("checked"),mmpAdmin.settings.gpxShowEndIcon=t("#gpxShowEndIcon").prop("checked"),mmpAdmin.setTrackIcons()})),t("#gpxIntervalMarkers").on("change",(function(){mmpAdmin.settings.gpxIntervalMarkers=t(this).prop("checked"),mmpAdmin.setIntervalMarkers()})),t("#gpxTrackWeight").on("change",(function(){mmpAdmin.settings.gpxTrackWeight=parseInt(t(this).val()),mmpAdmin.setTrackStyle()})),t("#gpxTrackOpacity").on("change",(function(){mmpAdmin.settings.gpxTrackOpacity=parseFloat(t(this).val()),mmpAdmin.setTrackStyle()})),t("#gpxMeta, #gpxMetaUnits, #gpxMetaHideMissing").on("change",(function(){mmpAdmin.settings.gpxMeta=t("#gpxMeta").prop("checked"),mmpAdmin.settings.gpxMetaUnits=t("#gpxMetaUnits").val(),mmpAdmin.settings.gpxMetaHideMissing=t("#gpxMetaHideMissing").prop("checked"),mmpAdmin.setTrackMeta()})),t("#gpxMetaName, #gpxMetaDesc, #gpxMetaStart, #gpxMetaEnd, #gpxMetaTotal, #gpxMetaMoving, #gpxMetaDistance, #gpxMetaPace, #gpxMetaHeartRate, #gpxMetaElevation, #gpxMetaDownload").on("change",(function(){mmpAdmin.settings[t(this).attr("id")]=t(this).prop("checked"),mmpAdmin.setTrackMeta()})),t("#gpxWaypoints").on("change",(function(){mmpAdmin.settings.gpxWaypoints=t(this).prop("checked"),mmpAdmin.setWaypoints()})),t("#gpxWaypointsRadius").on("change",(function(){mmpAdmin.settings.gpxWaypointsRadius=parseInt(t(this).val()),mmpAdmin.setWaypointStyle()})),t("#gpxWaypointsStroke").on("change",(function(){mmpAdmin.settings.gpxWaypointsStroke=t(this).prop("checked"),mmpAdmin.setWaypointStyle()})),t("#gpxWaypointsWeight").on("change",(function(){mmpAdmin.settings.gpxWaypointsWeight=parseInt(t(this).val()),mmpAdmin.setWaypointStyle()})),t("#gpxWaypointsFillOpacity").on("change",(function(){mmpAdmin.settings.gpxWaypointsFillOpacity=parseFloat(t(this).val()),mmpAdmin.setWaypointStyle()})),t("#gpxChart").on("change",(function(){mmpAdmin.settings.gpxChart=t(this).prop("checked"),mmpAdmin.loadChart(),mmpAdmin.addElevationChart()})),t("#gpxChartUnits, #gpxChartYOffset").on("change",(function(){mmpAdmin.settings.gpxChartUnits=t(this).val(),mmpAdmin.settings.gpxChartYOffset=t("#gpxChartYOffset").val(),mmpAdmin.updateElevationChart(!0)})),t("#gpxChartHeight").on("change",(function(){var e=parseInt(t(this).val());mmpAdmin.settings.gpxChartHeight=e,mmpAdmin.containers.chartWrap&&(mmpAdmin.containers.chartWrap.style.height=e+"px")})),t("#gpxChartReverseX, #gpxChartReverseY").on("change",(function(){mmpAdmin.settings.gpxChartReverseX=t("#gpxChartReverseX").prop("checked"),mmpAdmin.settings.gpxChartReverseY=t("#gpxChartReverseY").prop("checked"),mmpAdmin.updateElevationChart()})),t("#gpxChartYMin, #gpxChartYMax").on("change",(function(){mmpAdmin.settings.gpxChartYMin=t("#gpxChartYMin").val(),mmpAdmin.settings.gpxChartYMax=t("#gpxChartYMax").val(),mmpAdmin.updateElevationChart()})),t("#gpxChartBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartBgColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartBgColor=e.toRgbString():mmpAdmin.settings.gpxChartBgColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartGridLinesColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartGridLinesColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartGridLinesColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartGridLinesColor=e.toRgbString():mmpAdmin.settings.gpxChartGridLinesColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartTicksFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartTicksFontColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartTicksFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartTicksFontColor=e.toRgbString():mmpAdmin.settings.gpxChartTicksFontColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartLineWidth").on("change",(function(){mmpAdmin.settings.gpxChartLineWidth=parseInt(t(this).val()),mmpAdmin.updateElevationChartThrottled()})),t("#gpxChartLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartLineColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartLineColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartLineColor=e.toRgbString():mmpAdmin.settings.gpxChartLineColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartFill").on("change",(function(){mmpAdmin.settings.gpxChartFill=t(this).prop("checked"),mmpAdmin.updateElevationChartThrottled()})),t("#gpxChartFillColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartFillColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartFillColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartFillColor=e.toRgbString():mmpAdmin.settings.gpxChartFillColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartTooltipBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartTooltipBgColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartTooltipBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartTooltipBgColor=e.toRgbString():mmpAdmin.settings.gpxChartTooltipBgColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartTooltipFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartTooltipFontColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartTooltipFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartTooltipFontColor=e.toRgbString():mmpAdmin.settings.gpxChartTooltipFontColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartIndicatorLineWidth").on("change",(function(){mmpAdmin.settings.gpxChartIndicatorLineWidth=parseInt(t(this).val()),mmpAdmin.updateElevationChartThrottled()})),t("#gpxChartIndicatorLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){mmpAdmin.settings.gpxChartIndicatorLineColor=t.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){t(this).data("changed",!0),mmpAdmin.settings.gpxChartIndicatorLineColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){t(this).data("changed")?mmpAdmin.settings.gpxChartIndicatorLineColor=e.toRgbString():mmpAdmin.settings.gpxChartIndicatorLineColor=t(this).val(),mmpAdmin.updateElevationChartThrottled()}}),t("#gpxChartLocator").on("change",(function(){mmpAdmin.settings.gpxChartLocator=t(this).prop("checked")})),t("#gpxChartLocatorRadius").on("change",(function(){mmpAdmin.settings.gpxChartLocatorRadius=parseInt(t(this).val()),mmpAdmin.setChartStyle()})),t("#gpxChartLocatorStroke").on("change",(function(){mmpAdmin.settings.gpxChartLocatorStroke=t(this).prop("checked"),mmpAdmin.setChartStyle()})),t("#gpxChartLocatorColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){d(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),d(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?d(e.toHexString("hex3")):d(t(this).val())}}),t("#gpxChartLocatorWeight").on("change",(function(){mmpAdmin.settings.gpxChartLocatorWeight=parseInt(t(this).val()),mmpAdmin.setChartStyle()})),t("#gpxChartLocatorFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t(this).data("changed",!1)},move:function(t){m(t.toHexString("hex3"))},change:function(e){t(this).data("changed",!0),m(e.toHexString("hex3"))},hide:function(e){t(this).data("changed")?m(e.toHexString("hex3")):m(t(this).val())}}),t("#gpxChartLocatorFillOpacity").on("change",(function(){mmpAdmin.settings.gpxChartLocatorFillOpacity=parseFloat(t(this).val()),mmpAdmin.setChartStyle()})),t("#addGeoJson").on("click",(function(){t("#geoJsonModal").slideDown(500)})),t("#geoJsonCancel").on("click",(function(){t(".mmp-json-error").remove(),t("#geoJsonText").val(""),t("#geoJsonModal").slideUp(500)})),t("#geoJsonSave").on("click",(function(){t(".mmp-json-error").remove();var e=function(t){try{var e=JSON.parse(t);if(e&&"object"===rs(e))return e}catch(t){return!1}return!1}(t("#geoJsonText").val());if(!1!==e){try{!function(t){Hr().geoJSON(t,{pointToLayer:function(t,e){if(t.properties.radius)return Hr().circle(e,t.properties.radius)},style:function(t){for(var e=D(),i=["stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule"],n=0;n<i.length;n++){var o=i[n];if(void 0!==t.properties[o])switch(o){case"weight":e[o]=parseInt(t.properties[o]);break;case"opacity":case"fillOpacity":e[o]=parseFloat(t.properties[o]);break;default:e[o]=t.properties[o]}}return e},onEachFeature:function(t,e){var i=T(e);!1!==i&&(e.options.name=t.properties.name||mmpAdminL10n.geoJson[i.toLowerCase()],e.options.popup=t.properties.popup||"",e.addTo(mmpAdmin.map),e.addTo(mmpAdmin.geoJson[mmpAdmin.id]))}}),S()}(e)}catch(e){return void t('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidGeoJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,(function(){t(this).remove()}))}t("#geoJsonText").val(""),t("#geoJsonModal").slideUp(500)}else t('<div class="notice notice-error mmp-json-error"><p>'+mmpAdminL10n.map.invalidJson+"</p></div>").prependTo("#geoJsonModal").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})),t("#drawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#drawStroke").prop("checked",!0),t("#drawStroke").trigger("change")},change:function(e){t("#drawStrokeColor").val(e.toHexString("hex3")),C()}}),t("#editDrawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#editDrawStroke").prop("checked",!0),t("#editDrawStroke").trigger("change")},move:function(e){t("#editDrawStrokeColor").val(e.toHexString("hex3")),E()},change:function(e){t("#editDrawStrokeColor").val(e.toHexString("hex3")),E()},hide:function(e){t("#editDrawStrokeColor").val(e.toHexString("hex3")),E()}}),t("#drawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#drawFill").prop("checked",!0),t("#drawFill").trigger("change")},change:function(e){t("#drawFillColor").val(e.toHexString("hex3")),C()}}),t("#editDrawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){t("#editDrawFill").prop("checked",!0),t("#editDrawFill").trigger("change")},move:function(e){t("#editDrawFillColor").val(e.toHexString("hex3")),E()},change:function(e){t("#editDrawFillColor").val(e.toHexString("hex3")),E()},hide:function(e){t("#editDrawFillColor").val(e.toHexString("hex3")),E()}}),t("#drawStroke, #drawStrokeWeight, #drawStrokeOpacity, #drawLineCap, #drawLineJoin, #drawFill, #drawFillOpacity, #drawFillRule").on("change",(function(){C()})),t("#editDrawStroke, #editDrawStrokeWeight, #editDrawStrokeOpacity, #editDrawLineCap, #editDrawLineJoin, #editDrawFill, #editDrawFillOpacity, #editDrawFillRule").on("change",(function(){E()})),t("#editDrawCancel").on("click",(function(){I(),t("#editShape").slideUp(500)})),t("#editDrawSave").on("click",(function(){E();var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&(e.options.popup=t("#editDrawPopup").val(),mmpAdmin.updatePopup(e,!0)),t("#shapeBackup").val(""),t("#editShape").slideUp(500)})),t("#editDrawDelete").on("click",(function(){I();var e=mmpAdmin.geoJson[mmpAdmin.id].getLayer(t("#shapeId").val());void 0!==e&&(t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),mmpAdmin.geoJson[mmpAdmin.id].removeLayer(e),S())})),t("#shapesSelectAll").on("click",(function(){t('input[name="shapesSelected[]"]').each((function(e,i){t(i).prop("checked",t("#shapesSelectAll").prop("checked"))}))})),t("#shapesDeleteSelected").on("click",(function(){I(),t("#editShape").hide(),t("#editShape").appendTo(t("#mmp-tabDraw-settings")),t('input[name="shapesSelected[]"]:checked').each((function(e,i){mmpAdmin.geoJson[mmpAdmin.id].removeLayer(t(i).val())})),S()})),t(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(e){e.target===this&&t("#icons").hide()})),t("#geocodingProvider").on("change",(function(){n.provider=t("#geocodingProvider").val(),n.reload()})),t(".mmp-shortcode").on("click",(function(){t(this).trigger("select")})),o(),n.init(),window.onbeforeunload=function(){return e!==t("#mapSettings").serialize()?"":null},localStorage.getItem("saved")&&(t('<div class="notice notice-success"><p>'+mmpAdminL10n.map.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){t(this).remove()})),localStorage.removeItem("saved")),t("#save").prop("disabled",!1)}(jQuery)},Ms=i(6192),Cs=i.n(Ms);var Ps=function(){!function(t){function e(e){t("#pagination_top button, #pagination_bottom button").prop("disabled",e),t("#page_top, #page_bottom").prop("disabled",e),t("#perpage_top, #perpage_bottom").prop("disabled",e),t("#search_top, #search_bottom").prop("disabled",e)}function i(n,o,r,a,s){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_map_list",nonce:t("#mapListNonce").val(),page:n,limit:o,search:r,sort:a,order:s},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0),t("#map_list").empty(),t("#map_list").addClass("mmp-page-loading")}}).done((function(n){t("#mapcount_top, #mapcount_bottom").html(n.total),t("#previous_top, #previous_bottom").val(n.page-1),t("#next_top, #next_bottom").val(n.page+1),t("#last_top, #last_bottom").val(Math.ceil(n.total/n.limit)),t("#page_top, #page_bottom").val(n.page),t("#pagecount_top, #pagecount_bottom").html(Math.ceil(n.total/n.limit)),t("#perpage_top, #perpage_bottom").val(n.limit),t("#search_top, #search_botom").val(n.search),t("#map_list").html(n.html),t('.mmp-sortable[data-orderby="'+n.sort+'"]').addClass("mmp-sorted-"+n.order),t("#selectAll").on("click",(function(){t('input[name="selected[]"]').each((function(e,i){t(i).prop("checked",t("#selectAll").prop("checked"))}))})),t('input[name="selected[]"]').on("change",(function(){var e=!0;t('input[name="selected[]"]').each((function(i,n){e=e&&t(n).prop("checked")})),t("#selectAll").prop("checked",e)})),t(".mmp-sortable").on("click",(function(e){e.preventDefault(),e.stopPropagation();var n=t("#sortorder").val();n=t("#orderby").val()===t(this).data("orderby")&&"asc"===n?"desc":"asc",t("#sortorder").val(n),t("#orderby").val(t(this).data("orderby")),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})),t(".mmp-table td:nth-child(3)").on("mouseenter",(function(){t(".mmp-action",t(this)).css("visibility","visible")})),t(".mmp-table td:nth-child(3)").on("mouseleave",(function(){t(".mmp-action",t(this)).css("visibility","hidden")})),t(".mmp-delete").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:t("#mapListNonce").val(),con:0,id:t(this).data("id")},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(n){if(n.success){if(!confirm(n.data.message))return;t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:t("#mapListNonce").val(),con:1,id:n.data.id},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(e){e.success&&i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))}})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))})),t(".mmp-shortcode").on("click",(function(){t(this).trigger("select")})),t(".mmp-qrcode-link").on("click",(function(e){e.preventDefault(),e.stopPropagation();var i=Cs()(0,"H"),n=t(this).data("url");i.addData(n),i.make();var o=i.createDataURL(8,0),r=t(this).data("id"),a=t("#qrcode_"+r),s=t('<a href="'+o+'" download="qr-code-map-'+r+'.gif"><img src="'+o+'" /></a>');a.html(s),t("img",a).trigger("click")}))})).always((function(){e(!1),t("input[name=bulkAction]").prop("checked",!1),t("#map_list").removeClass("mmp-page-loading")}))}t("input[name=bulkAction]").on("change",(function(){t("#bulkActionSubmit").prop("disabled",!1)})),t("#pagination_top button").on("click",(function(){i(t(this).val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#pagination_bottom button").on("click",(function(){i(t(this).val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_top, #perpage_top").on("change",(function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_bottom, #perpage_bottom").on("change",(function(){i(t("#page_bottom").val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_top").on("change",(function(){i(1,t("#perpage_top").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_bottom").on("change",(function(){i(1,t("#perpage_bottom").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#mapList").on("submit",(function(n){var o;switch(n.preventDefault(),n.stopPropagation(),t("input[name=bulkAction]:checked").val()){case"duplicate":o=mmpAdminL10n.maps.bulkDuplicate;break;case"duplicate-assign":o=mmpAdminL10n.maps.bulkDuplicateAssign;break;case"delete":o=mmpAdminL10n.maps.bulkDelete;break;case"delete-assign":o=mmpAdminL10n.maps.bulkDeleteAssign.replace("{map}",t("#assignTarget").val());break;case"delete-delete":o=mmpAdminL10n.maps.bulkDeleteDelete;break;default:return}confirm(o)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_maps",nonce:t("#bulkNonce").val(),data:t("#mapList").serialize()},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("input[name=bulkAction]").prop("checked",!1)}))})),t("#mmp-maps-screen-options-apply").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_maps_screen_options",nonce:t("#screenoptionnonce").val(),hiddenColumns:t(".mmp-maps-column").not(":checked").map((function(){return this.value})).get(),perPage:t("#mmp-maps-per-page").val()},beforeSend:function(){e(!0)}}).done((function(){t("#show-settings-link").trigger("click"),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1)}))})),i()}(jQuery)};const Ss=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Ts={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:t=>"undefined"!=typeof console&&console.warn(t),getWeek:t=>{const e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var i=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-i.getTime())/864e5-3+(i.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},As={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:t=>{const e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1};var Es=As;const Ds=(t,e=2)=>`000${t}`.slice(-1*e),Os=t=>!0===t?1:0;function Is(t,e){let i;return function(){clearTimeout(i),i=setTimeout((()=>t.apply(this,arguments)),e)}}const Bs=t=>t instanceof Array?t:[t];function Rs(t,e,i){if(!0===i)return t.classList.add(e);t.classList.remove(e)}function zs(t,e,i){const n=window.document.createElement(t);return e=e||"",i=i||"",n.className=e,void 0!==i&&(n.textContent=i),n}function Fs(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function js(t,e){return e(t)?t:t.parentNode?js(t.parentNode,e):void 0}function Ns(t,e){const i=zs("div","numInputWrapper"),n=zs("input","numInput "+t),o=zs("span","arrowUp"),r=zs("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?n.type="number":(n.type="text",n.pattern="\\d*"),void 0!==e)for(const t in e)n.setAttribute(t,e[t]);return i.appendChild(n),i.appendChild(o),i.appendChild(r),i}function Us(t){try{if("function"==typeof t.composedPath){return t.composedPath()[0]}return t.target}catch(e){return t.target}}const Gs=()=>{},Hs=(t,e,i)=>i.months[e?"shorthand":"longhand"][t],Zs={D:Gs,F:function(t,e,i){t.setMonth(i.months.longhand.indexOf(e))},G:(t,e)=>{t.setHours(parseFloat(e))},H:(t,e)=>{t.setHours(parseFloat(e))},J:(t,e)=>{t.setDate(parseFloat(e))},K:(t,e,i)=>{t.setHours(t.getHours()%12+12*Os(new RegExp(i.amPM[1],"i").test(e)))},M:function(t,e,i){t.setMonth(i.months.shorthand.indexOf(e))},S:(t,e)=>{t.setSeconds(parseFloat(e))},U:(t,e)=>new Date(1e3*parseFloat(e)),W:function(t,e,i){const n=parseInt(e),o=new Date(t.getFullYear(),0,2+7*(n-1),0,0,0,0);return o.setDate(o.getDate()-o.getDay()+i.firstDayOfWeek),o},Y:(t,e)=>{t.setFullYear(parseFloat(e))},Z:(t,e)=>new Date(e),d:(t,e)=>{t.setDate(parseFloat(e))},h:(t,e)=>{t.setHours(parseFloat(e))},i:(t,e)=>{t.setMinutes(parseFloat(e))},j:(t,e)=>{t.setDate(parseFloat(e))},l:Gs,m:(t,e)=>{t.setMonth(parseFloat(e)-1)},n:(t,e)=>{t.setMonth(parseFloat(e)-1)},s:(t,e)=>{t.setSeconds(parseFloat(e))},u:(t,e)=>new Date(parseFloat(e)),w:Gs,y:(t,e)=>{t.setFullYear(2e3+parseFloat(e))}},Vs={D:"(\\w+)",F:"(\\w+)",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"(\\w+)",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"(\\w+)",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Ws={Z:t=>t.toISOString(),D:function(t,e,i){return e.weekdays.shorthand[Ws.w(t,e,i)]},F:function(t,e,i){return Hs(Ws.n(t,e,i)-1,!1,e)},G:function(t,e,i){return Ds(Ws.h(t,e,i))},H:t=>Ds(t.getHours()),J:function(t,e){return void 0!==e.ordinal?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:(t,e)=>e.amPM[Os(t.getHours()>11)],M:function(t,e){return Hs(t.getMonth(),!0,e)},S:t=>Ds(t.getSeconds()),U:t=>t.getTime()/1e3,W:function(t,e,i){return i.getWeek(t)},Y:t=>Ds(t.getFullYear(),4),d:t=>Ds(t.getDate()),h:t=>t.getHours()%12?t.getHours()%12:12,i:t=>Ds(t.getMinutes()),j:t=>t.getDate(),l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:t=>Ds(t.getMonth()+1),n:t=>t.getMonth()+1,s:t=>t.getSeconds(),u:t=>t.getTime(),w:t=>t.getDay(),y:t=>String(t.getFullYear()).substring(2)},qs=({config:t=Ts,l10n:e=As,isMobile:i=!1})=>(n,o,r)=>{const a=r||e;return void 0===t.formatDate||i?o.split("").map(((e,i,o)=>Ws[e]&&"\\"!==o[i-1]?Ws[e](n,a,t):"\\"!==e?e:"")).join(""):t.formatDate(n,o,a)},$s=({config:t=Ts,l10n:e=As})=>(i,n,o,r)=>{if(0!==i&&!i)return;const a=r||e;let s;const l=i;if(i instanceof Date)s=new Date(i.getTime());else if("string"!=typeof i&&void 0!==i.toFixed)s=new Date(i);else if("string"==typeof i){const e=n||(t||Ts).dateFormat,r=String(i).trim();if("today"===r)s=new Date,o=!0;else if(/Z$/.test(r)||/GMT$/.test(r))s=new Date(i);else if(t&&t.parseDate)s=t.parseDate(i,e);else{s=t&&t.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0);let n,o=[];for(let t=0,r=0,l="";t<e.length;t++){const c=e[t],h="\\"===c,u="\\"===e[t-1]||h;if(Vs[c]&&!u){l+=Vs[c];const t=new RegExp(l).exec(i);t&&(n=!0)&&o["Y"!==c?"push":"unshift"]({fn:Zs[c],val:t[++r]})}else h||(l+=".");o.forEach((({fn:t,val:e})=>s=t(s,e,a)||s))}s=n?s:void 0}}if(s instanceof Date&&!isNaN(s.getTime()))return!0===o&&s.setHours(0,0,0,0),s;t.errorHandler(new Error(`Invalid date provided: ${l}`))};function Ys(t,e,i=!0){return!1!==i?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}const Ks=864e5;function Js(t){let e=t.defaultHour,i=t.defaultMinute,n=t.defaultSeconds;if(void 0!==t.minDate){const o=t.minDate.getHours(),r=t.minDate.getMinutes(),a=t.minDate.getSeconds();e<o&&(e=o),e===o&&i<r&&(i=r),e===o&&i===r&&n<a&&(n=t.minDate.getSeconds())}if(void 0!==t.maxDate){const o=t.maxDate.getHours(),r=t.maxDate.getMinutes();e=Math.min(e,o),e===o&&(i=Math.min(r,i)),e===o&&i===r&&(n=t.maxDate.getSeconds())}return{hours:e,minutes:i,seconds:n}}i(1895);function Xs(t,e){const i={config:Object.assign(Object.assign({},Ts),tl.defaultConfig),l10n:Es};function n(t){return t.bind(i)}function o(){const t=i.config;!1===t.weekNumbers&&1===t.showMonths||!0!==t.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==i.calendarContainer&&(i.calendarContainer.style.visibility="hidden",i.calendarContainer.style.display="block"),void 0!==i.daysContainer){const e=(i.days.offsetWidth+1)*t.showMonths;i.daysContainer.style.width=e+"px",i.calendarContainer.style.width=e+(void 0!==i.weekWrapper?i.weekWrapper.offsetWidth:0)+"px",i.calendarContainer.style.removeProperty("visibility"),i.calendarContainer.style.removeProperty("display")}}))}function r(t){if(0===i.selectedDates.length){const t=void 0===i.config.minDate||Ys(new Date,i.config.minDate)>=0?new Date:new Date(i.config.minDate.getTime()),e=Js(i.config);t.setHours(e.hours,e.minutes,e.seconds,t.getMilliseconds()),i.selectedDates=[t],i.latestSelectedDateObj=t}void 0!==t&&"blur"!==t.type&&function(t){t.preventDefault();const e="keydown"===t.type,n=Us(t),o=n;void 0!==i.amPM&&n===i.amPM&&(i.amPM.textContent=i.l10n.amPM[Os(i.amPM.textContent===i.l10n.amPM[0])]);const r=parseFloat(o.getAttribute("min")),a=parseFloat(o.getAttribute("max")),s=parseFloat(o.getAttribute("step")),l=parseInt(o.value,10),c=t.delta||(e?38===t.which?1:-1:0);let h=l+s*c;if(void 0!==o.value&&2===o.value.length){const t=o===i.hourElement,e=o===i.minuteElement;h<r?(h=a+h+Os(!t)+(Os(t)&&Os(!i.amPM)),e&&m(void 0,-1,i.hourElement)):h>a&&(h=o===i.hourElement?h-a-Os(!i.amPM):r,e&&m(void 0,1,i.hourElement)),i.amPM&&t&&(1===s?h+l===23:Math.abs(h-l)>s)&&(i.amPM.textContent=i.l10n.amPM[Os(i.amPM.textContent===i.l10n.amPM[0])]),o.value=Ds(h)}}(t);const e=i._input.value;a(),J(),i._input.value!==e&&i._debouncedChange()}function a(){if(void 0===i.hourElement||void 0===i.minuteElement)return;let t=(parseInt(i.hourElement.value.slice(-2),10)||0)%24,e=(parseInt(i.minuteElement.value,10)||0)%60,n=void 0!==i.secondElement?(parseInt(i.secondElement.value,10)||0)%60:0;var o,r;void 0!==i.amPM&&(o=t,r=i.amPM.textContent,t=o%12+12*Os(r===i.l10n.amPM[1]));const a=void 0!==i.config.minTime||i.config.minDate&&i.minDateHasTime&&i.latestSelectedDateObj&&0===Ys(i.latestSelectedDateObj,i.config.minDate,!0);if(void 0!==i.config.maxTime||i.config.maxDate&&i.maxDateHasTime&&i.latestSelectedDateObj&&0===Ys(i.latestSelectedDateObj,i.config.maxDate,!0)){const o=void 0!==i.config.maxTime?i.config.maxTime:i.config.maxDate;t=Math.min(t,o.getHours()),t===o.getHours()&&(e=Math.min(e,o.getMinutes())),e===o.getMinutes()&&(n=Math.min(n,o.getSeconds()))}if(a){const o=void 0!==i.config.minTime?i.config.minTime:i.config.minDate;t=Math.max(t,o.getHours()),t===o.getHours()&&e<o.getMinutes()&&(e=o.getMinutes()),e===o.getMinutes()&&(n=Math.max(n,o.getSeconds()))}l(t,e,n)}function s(t){const e=t||i.latestSelectedDateObj;e&&l(e.getHours(),e.getMinutes(),e.getSeconds())}function l(t,e,n){void 0!==i.latestSelectedDateObj&&i.latestSelectedDateObj.setHours(t%24,e,n||0,0),i.hourElement&&i.minuteElement&&!i.isMobile&&(i.hourElement.value=Ds(i.config.time_24hr?t:(12+t)%12+12*Os(t%12==0)),i.minuteElement.value=Ds(e),void 0!==i.amPM&&(i.amPM.textContent=i.l10n.amPM[Os(t>=12)]),void 0!==i.secondElement&&(i.secondElement.value=Ds(n)))}function c(t){const e=Us(t),i=parseInt(e.value)+(t.delta||0);(i/1e3>1||"Enter"===t.key&&!/[^\d]/.test(i.toString()))&&T(i)}function h(t,e,n,o){return e instanceof Array?e.forEach((e=>h(t,e,n,o))):t instanceof Array?t.forEach((t=>h(t,e,n,o))):(t.addEventListener(e,n,o),void i._handlers.push({remove:()=>t.removeEventListener(e,n)}))}function u(){W("onChange")}function p(t,e){const n=void 0!==t?i.parseDate(t):i.latestSelectedDateObj||(i.config.minDate&&i.config.minDate>i.now?i.config.minDate:i.config.maxDate&&i.config.maxDate<i.now?i.config.maxDate:i.now),o=i.currentYear,r=i.currentMonth;try{void 0!==n&&(i.currentYear=n.getFullYear(),i.currentMonth=n.getMonth())}catch(t){t.message="Invalid date supplied: "+n,i.config.errorHandler(t)}e&&i.currentYear!==o&&(W("onYearChange"),x()),!e||i.currentYear===o&&i.currentMonth===r||W("onMonthChange"),i.redraw()}function d(t){const e=Us(t);~e.className.indexOf("arrow")&&m(t,e.classList.contains("arrowUp")?1:-1)}function m(t,e,i){const n=t&&Us(t),o=i||n&&n.parentNode&&n.parentNode.firstChild,r=q("increment");r.delta=e,o&&o.dispatchEvent(r)}function f(t,e,n,o){const r=A(e,!0),a=zs("span","flatpickr-day "+t,e.getDate().toString());return a.dateObj=e,a.$i=o,a.setAttribute("aria-label",i.formatDate(e,i.config.ariaDateFormat)),-1===t.indexOf("hidden")&&0===Ys(e,i.now)&&(i.todayDateElem=a,a.classList.add("today"),a.setAttribute("aria-current","date")),r?(a.tabIndex=-1,$(e)&&(a.classList.add("selected"),i.selectedDateElem=a,"range"===i.config.mode&&(Rs(a,"startRange",i.selectedDates[0]&&0===Ys(e,i.selectedDates[0],!0)),Rs(a,"endRange",i.selectedDates[1]&&0===Ys(e,i.selectedDates[1],!0)),"nextMonthDay"===t&&a.classList.add("inRange")))):a.classList.add("flatpickr-disabled"),"range"===i.config.mode&&function(t){return!("range"!==i.config.mode||i.selectedDates.length<2)&&(Ys(t,i.selectedDates[0])>=0&&Ys(t,i.selectedDates[1])<=0)}(e)&&!$(e)&&a.classList.add("inRange"),i.weekNumbers&&1===i.config.showMonths&&"prevMonthDay"!==t&&n%7==1&&i.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+i.config.getWeek(e)+"</span>"),W("onDayCreate",a),a}function g(t){t.focus(),"range"===i.config.mode&&I(t)}function _(t){const e=t>0?0:i.config.showMonths-1,n=t>0?i.config.showMonths:-1;for(let o=e;o!=n;o+=t){const e=i.daysContainer.children[o],n=t>0?0:e.children.length-1,r=t>0?e.children.length:-1;for(let i=n;i!=r;i+=t){const t=e.children[i];if(-1===t.className.indexOf("hidden")&&A(t.dateObj))return t}}}function v(t,e){const n=E(document.activeElement||document.body),o=void 0!==t?t:n?document.activeElement:void 0!==i.selectedDateElem&&E(i.selectedDateElem)?i.selectedDateElem:void 0!==i.todayDateElem&&E(i.todayDateElem)?i.todayDateElem:_(e>0?1:-1);void 0===o?i._input.focus():n?function(t,e){const n=-1===t.className.indexOf("Month")?t.dateObj.getMonth():i.currentMonth,o=e>0?i.config.showMonths:-1,r=e>0?1:-1;for(let a=n-i.currentMonth;a!=o;a+=r){const o=i.daysContainer.children[a],s=n-i.currentMonth===a?t.$i+e:e<0?o.children.length-1:0,l=o.children.length;for(let i=s;i>=0&&i<l&&i!=(e>0?l:-1);i+=r){const n=o.children[i];if(-1===n.className.indexOf("hidden")&&A(n.dateObj)&&Math.abs(t.$i-i)>=Math.abs(e))return g(n)}}i.changeMonth(r),v(_(r),0)}(o,e):g(o)}function y(t,e){const n=(new Date(t,e,1).getDay()-i.l10n.firstDayOfWeek+7)%7,o=i.utils.getDaysInMonth((e-1+12)%12,t),r=i.utils.getDaysInMonth(e,t),a=window.document.createDocumentFragment(),s=i.config.showMonths>1,l=s?"prevMonthDay hidden":"prevMonthDay",c=s?"nextMonthDay hidden":"nextMonthDay";let h=o+1-n,u=0;for(;h<=o;h++,u++)a.appendChild(f(l,new Date(t,e-1,h),h,u));for(h=1;h<=r;h++,u++)a.appendChild(f("",new Date(t,e,h),h,u));for(let o=r+1;o<=42-n&&(1===i.config.showMonths||u%7!=0);o++,u++)a.appendChild(f(c,new Date(t,e+1,o%r),o,u));const p=zs("div","dayContainer");return p.appendChild(a),p}function b(){if(void 0===i.daysContainer)return;Fs(i.daysContainer),i.weekNumbers&&Fs(i.weekNumbers);const t=document.createDocumentFragment();for(let e=0;e<i.config.showMonths;e++){const n=new Date(i.currentYear,i.currentMonth,1);n.setMonth(i.currentMonth+e),t.appendChild(y(n.getFullYear(),n.getMonth()))}i.daysContainer.appendChild(t),i.days=i.daysContainer.firstChild,"range"===i.config.mode&&1===i.selectedDates.length&&I()}function x(){if(i.config.showMonths>1||"dropdown"!==i.config.monthSelectorType)return;const t=function(t){return!(void 0!==i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&t<i.config.minDate.getMonth())&&!(void 0!==i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()&&t>i.config.maxDate.getMonth())};i.monthsDropdownContainer.tabIndex=-1,i.monthsDropdownContainer.innerHTML="";for(let e=0;e<12;e++){if(!t(e))continue;const n=zs("option","flatpickr-monthDropdown-month");n.value=new Date(i.currentYear,e).getMonth().toString(),n.textContent=Hs(e,i.config.shorthandCurrentMonth,i.l10n),n.tabIndex=-1,i.currentMonth===e&&(n.selected=!0),i.monthsDropdownContainer.appendChild(n)}}function k(){const t=zs("div","flatpickr-month"),e=window.document.createDocumentFragment();let n;i.config.showMonths>1||"static"===i.config.monthSelectorType?n=zs("span","cur-month"):(i.monthsDropdownContainer=zs("select","flatpickr-monthDropdown-months"),i.monthsDropdownContainer.setAttribute("aria-label",i.l10n.monthAriaLabel),h(i.monthsDropdownContainer,"change",(t=>{const e=Us(t),n=parseInt(e.value,10);i.changeMonth(n-i.currentMonth),W("onMonthChange")})),x(),n=i.monthsDropdownContainer);const o=Ns("cur-year",{tabindex:"-1"}),r=o.getElementsByTagName("input")[0];r.setAttribute("aria-label",i.l10n.yearAriaLabel),i.config.minDate&&r.setAttribute("min",i.config.minDate.getFullYear().toString()),i.config.maxDate&&(r.setAttribute("max",i.config.maxDate.getFullYear().toString()),r.disabled=!!i.config.minDate&&i.config.minDate.getFullYear()===i.config.maxDate.getFullYear());const a=zs("div","flatpickr-current-month");return a.appendChild(n),a.appendChild(o),e.appendChild(a),t.appendChild(e),{container:t,yearElement:r,monthElement:n}}function w(){Fs(i.monthNav),i.monthNav.appendChild(i.prevMonthNav),i.config.showMonths&&(i.yearElements=[],i.monthElements=[]);for(let t=i.config.showMonths;t--;){const t=k();i.yearElements.push(t.yearElement),i.monthElements.push(t.monthElement),i.monthNav.appendChild(t.container)}i.monthNav.appendChild(i.nextMonthNav)}function L(){i.weekdayContainer?Fs(i.weekdayContainer):i.weekdayContainer=zs("div","flatpickr-weekdays");for(let t=i.config.showMonths;t--;){const t=zs("div","flatpickr-weekdaycontainer");i.weekdayContainer.appendChild(t)}return M(),i.weekdayContainer}function M(){if(!i.weekdayContainer)return;const t=i.l10n.firstDayOfWeek;let e=[...i.l10n.weekdays.shorthand];t>0&&t<e.length&&(e=[...e.splice(t,e.length),...e.splice(0,t)]);for(let t=i.config.showMonths;t--;)i.weekdayContainer.children[t].innerHTML=`\n      <span class='flatpickr-weekday'>\n        ${e.join("</span><span class='flatpickr-weekday'>")}\n      </span>\n      `}function C(t,e=!0){const n=e?t:t-i.currentMonth;n<0&&!0===i._hidePrevMonthArrow||n>0&&!0===i._hideNextMonthArrow||(i.currentMonth+=n,(i.currentMonth<0||i.currentMonth>11)&&(i.currentYear+=i.currentMonth>11?1:-1,i.currentMonth=(i.currentMonth+12)%12,W("onYearChange"),x()),b(),W("onMonthChange"),Y())}function P(t){return!(!i.config.appendTo||!i.config.appendTo.contains(t))||i.calendarContainer.contains(t)}function S(t){if(i.isOpen&&!i.config.inline){const e=Us(t),n=P(e),o=e===i.input||e===i.altInput||i.element.contains(e)||t.path&&t.path.indexOf&&(~t.path.indexOf(i.input)||~t.path.indexOf(i.altInput)),a="blur"===t.type?o&&t.relatedTarget&&!P(t.relatedTarget):!o&&!n&&!P(t.relatedTarget),s=!i.config.ignoredFocusElements.some((t=>t.contains(e)));a&&s&&(void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement&&""!==i.input.value&&void 0!==i.input.value&&r(),i.close(),i.config&&"range"===i.config.mode&&1===i.selectedDates.length&&(i.clear(!1),i.redraw()))}}function T(t){if(!t||i.config.minDate&&t<i.config.minDate.getFullYear()||i.config.maxDate&&t>i.config.maxDate.getFullYear())return;const e=t,n=i.currentYear!==e;i.currentYear=e||i.currentYear,i.config.maxDate&&i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth=Math.min(i.config.maxDate.getMonth(),i.currentMonth):i.config.minDate&&i.currentYear===i.config.minDate.getFullYear()&&(i.currentMonth=Math.max(i.config.minDate.getMonth(),i.currentMonth)),n&&(i.redraw(),W("onYearChange"),x())}function A(t,e=!0){var n;const o=i.parseDate(t,void 0,e);if(i.config.minDate&&o&&Ys(o,i.config.minDate,void 0!==e?e:!i.minDateHasTime)<0||i.config.maxDate&&o&&Ys(o,i.config.maxDate,void 0!==e?e:!i.maxDateHasTime)>0)return!1;if(!i.config.enable&&0===i.config.disable.length)return!0;if(void 0===o)return!1;const r=!!i.config.enable,a=null!==(n=i.config.enable)&&void 0!==n?n:i.config.disable;for(let t,e=0;e<a.length;e++){if(t=a[e],"function"==typeof t&&t(o))return r;if(t instanceof Date&&void 0!==o&&t.getTime()===o.getTime())return r;if("string"==typeof t){const e=i.parseDate(t,void 0,!0);return e&&e.getTime()===o.getTime()?r:!r}if("object"==typeof t&&void 0!==o&&t.from&&t.to&&o.getTime()>=t.from.getTime()&&o.getTime()<=t.to.getTime())return r}return!r}function E(t){return void 0!==i.daysContainer&&(-1===t.className.indexOf("hidden")&&-1===t.className.indexOf("flatpickr-disabled")&&i.daysContainer.contains(t))}function D(t){!(t.target===i._input)||!(i.selectedDates.length>0||i._input.value.length>0)||t.relatedTarget&&P(t.relatedTarget)||i.setDate(i._input.value,!0,t.target===i.altInput?i.config.altFormat:i.config.dateFormat)}function O(e){const n=Us(e),o=i.config.wrap?t.contains(n):n===i._input,s=i.config.allowInput,l=i.isOpen&&(!s||!o),c=i.config.inline&&o&&!s;if(13===e.keyCode&&o){if(s)return i.setDate(i._input.value,!0,n===i.altInput?i.config.altFormat:i.config.dateFormat),n.blur();i.open()}else if(P(n)||l||c){const t=!!i.timeContainer&&i.timeContainer.contains(n);switch(e.keyCode){case 13:t?(e.preventDefault(),r(),U()):G(e);break;case 27:e.preventDefault(),U();break;case 8:case 46:o&&!i.config.allowInput&&(e.preventDefault(),i.clear());break;case 37:case 39:if(t||o)i.hourElement&&i.hourElement.focus();else if(e.preventDefault(),void 0!==i.daysContainer&&(!1===s||document.activeElement&&E(document.activeElement))){const t=39===e.keyCode?1:-1;e.ctrlKey?(e.stopPropagation(),C(t),v(_(1),0)):v(void 0,t)}break;case 38:case 40:e.preventDefault();const a=40===e.keyCode?1:-1;i.daysContainer&&void 0!==n.$i||n===i.input||n===i.altInput?e.ctrlKey?(e.stopPropagation(),T(i.currentYear-a),v(_(1),0)):t||v(void 0,7*a):n===i.currentYearElement?T(i.currentYear-a):i.config.enableTime&&(!t&&i.hourElement&&i.hourElement.focus(),r(e),i._debouncedChange());break;case 9:if(t){const t=[i.hourElement,i.minuteElement,i.secondElement,i.amPM].concat(i.pluginElements).filter((t=>t)),o=t.indexOf(n);if(-1!==o){const n=t[o+(e.shiftKey?-1:1)];e.preventDefault(),(n||i._input).focus()}}else!i.config.noCalendar&&i.daysContainer&&i.daysContainer.contains(n)&&e.shiftKey&&(e.preventDefault(),i._input.focus())}}if(void 0!==i.amPM&&n===i.amPM)switch(e.key){case i.l10n.amPM[0].charAt(0):case i.l10n.amPM[0].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[0],a(),J();break;case i.l10n.amPM[1].charAt(0):case i.l10n.amPM[1].charAt(0).toLowerCase():i.amPM.textContent=i.l10n.amPM[1],a(),J()}(o||P(n))&&W("onKeyDown",e)}function I(t){if(1!==i.selectedDates.length||t&&(!t.classList.contains("flatpickr-day")||t.classList.contains("flatpickr-disabled")))return;const e=t?t.dateObj.getTime():i.days.firstElementChild.dateObj.getTime(),n=i.parseDate(i.selectedDates[0],void 0,!0).getTime(),o=Math.min(e,i.selectedDates[0].getTime()),r=Math.max(e,i.selectedDates[0].getTime());let a=!1,s=0,l=0;for(let t=o;t<r;t+=Ks)A(new Date(t),!0)||(a=a||t>o&&t<r,t<n&&(!s||t>s)?s=t:t>n&&(!l||t<l)&&(l=t));for(let o=0;o<i.config.showMonths;o++){const r=i.daysContainer.children[o];for(let o=0,p=r.children.length;o<p;o++){const p=r.children[o],d=p.dateObj.getTime(),m=s>0&&d<s||l>0&&d>l;m?(p.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach((t=>{p.classList.remove(t)}))):a&&!m||(["startRange","inRange","endRange","notAllowed"].forEach((t=>{p.classList.remove(t)})),void 0!==t&&(t.classList.add(e<=i.selectedDates[0].getTime()?"startRange":"endRange"),n<e&&d===n?p.classList.add("startRange"):n>e&&d===n&&p.classList.add("endRange"),d>=s&&(0===l||d<=l)&&(h=n,u=e,(c=d)>Math.min(h,u)&&c<Math.max(h,u))&&p.classList.add("inRange")))}}var c,h,u}function B(){!i.isOpen||i.config.static||i.config.inline||j()}function R(t){return e=>{const n=i.config[`_${t}Date`]=i.parseDate(e,i.config.dateFormat),o=i.config[`_${"min"===t?"max":"min"}Date`];void 0!==n&&(i["min"===t?"minDateHasTime":"maxDateHasTime"]=n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0),i.selectedDates&&(i.selectedDates=i.selectedDates.filter((t=>A(t))),i.selectedDates.length||"min"!==t||s(n),J()),i.daysContainer&&(N(),void 0!==n?i.currentYearElement[t]=n.getFullYear().toString():i.currentYearElement.removeAttribute(t),i.currentYearElement.disabled=!!o&&void 0!==n&&o.getFullYear()===n.getFullYear())}}function z(){return i.config.wrap?t.querySelector("[data-input]"):t}function F(){"object"!=typeof i.config.locale&&void 0===tl.l10ns[i.config.locale]&&i.config.errorHandler(new Error(`flatpickr: invalid locale ${i.config.locale}`)),i.l10n=Object.assign(Object.assign({},tl.l10ns.default),"object"==typeof i.config.locale?i.config.locale:"default"!==i.config.locale?tl.l10ns[i.config.locale]:void 0),Vs.K=`(${i.l10n.amPM[0]}|${i.l10n.amPM[1]}|${i.l10n.amPM[0].toLowerCase()}|${i.l10n.amPM[1].toLowerCase()})`;void 0===Object.assign(Object.assign({},e),JSON.parse(JSON.stringify(t.dataset||{}))).time_24hr&&void 0===tl.defaultConfig.time_24hr&&(i.config.time_24hr=i.l10n.time_24hr),i.formatDate=qs(i),i.parseDate=$s({config:i.config,l10n:i.l10n})}function j(t){if("function"==typeof i.config.position)return void i.config.position(i,t);if(void 0===i.calendarContainer)return;W("onPreCalendarPosition");const e=t||i._positionElement,n=Array.prototype.reduce.call(i.calendarContainer.children,((t,e)=>t+e.offsetHeight),0),o=i.calendarContainer.offsetWidth,r=i.config.position.split(" "),a=r[0],s=r.length>1?r[1]:null,l=e.getBoundingClientRect(),c=window.innerHeight-l.bottom,h="above"===a||"below"!==a&&c<n&&l.top>n,u=window.pageYOffset+l.top+(h?-n-2:e.offsetHeight+2);if(Rs(i.calendarContainer,"arrowTop",!h),Rs(i.calendarContainer,"arrowBottom",h),i.config.inline)return;let p=window.pageXOffset+l.left,d=!1,m=!1;"center"===s?(p-=(o-l.width)/2,d=!0):"right"===s&&(p-=o-l.width,m=!0),Rs(i.calendarContainer,"arrowLeft",!d&&!m),Rs(i.calendarContainer,"arrowCenter",d),Rs(i.calendarContainer,"arrowRight",m);const f=window.document.body.offsetWidth-(window.pageXOffset+l.right),g=p+o>window.document.body.offsetWidth,_=f+o>window.document.body.offsetWidth;if(Rs(i.calendarContainer,"rightMost",g),!i.config.static)if(i.calendarContainer.style.top=`${u}px`,g)if(_){const t=function(){let t=null;for(let e=0;e<document.styleSheets.length;e++){const i=document.styleSheets[e];try{i.cssRules}catch(t){continue}t=i;break}return null!=t?t:function(){const t=document.createElement("style");return document.head.appendChild(t),t.sheet}()}();if(void 0===t)return;const e=window.document.body.offsetWidth,n=Math.max(0,e/2-o/2),r=".flatpickr-calendar.centerMost:before",a=".flatpickr-calendar.centerMost:after",s=t.cssRules.length,c=`{left:${l.left}px;right:auto;}`;Rs(i.calendarContainer,"rightMost",!1),Rs(i.calendarContainer,"centerMost",!0),t.insertRule(`${r},${a}${c}`,s),i.calendarContainer.style.left=`${n}px`,i.calendarContainer.style.right="auto"}else i.calendarContainer.style.left="auto",i.calendarContainer.style.right=`${f}px`;else i.calendarContainer.style.left=`${p}px`,i.calendarContainer.style.right="auto"}function N(){i.config.noCalendar||i.isMobile||(x(),Y(),b())}function U(){i._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(i.close,0):i.close()}function G(t){t.preventDefault(),t.stopPropagation();const e=js(Us(t),(t=>t.classList&&t.classList.contains("flatpickr-day")&&!t.classList.contains("flatpickr-disabled")&&!t.classList.contains("notAllowed")));if(void 0===e)return;const n=e,o=i.latestSelectedDateObj=new Date(n.dateObj.getTime()),r=(o.getMonth()<i.currentMonth||o.getMonth()>i.currentMonth+i.config.showMonths-1)&&"range"!==i.config.mode;if(i.selectedDateElem=n,"single"===i.config.mode)i.selectedDates=[o];else if("multiple"===i.config.mode){const t=$(o);t?i.selectedDates.splice(parseInt(t),1):i.selectedDates.push(o)}else"range"===i.config.mode&&(2===i.selectedDates.length&&i.clear(!1,!1),i.latestSelectedDateObj=o,i.selectedDates.push(o),0!==Ys(o,i.selectedDates[0],!0)&&i.selectedDates.sort(((t,e)=>t.getTime()-e.getTime())));if(a(),r){const t=i.currentYear!==o.getFullYear();i.currentYear=o.getFullYear(),i.currentMonth=o.getMonth(),t&&(W("onYearChange"),x()),W("onMonthChange")}if(Y(),b(),J(),r||"range"===i.config.mode||1!==i.config.showMonths?void 0!==i.selectedDateElem&&void 0===i.hourElement&&i.selectedDateElem&&i.selectedDateElem.focus():g(n),void 0!==i.hourElement&&void 0!==i.hourElement&&i.hourElement.focus(),i.config.closeOnSelect){const t="single"===i.config.mode&&!i.config.enableTime,e="range"===i.config.mode&&2===i.selectedDates.length&&!i.config.enableTime;(t||e)&&U()}u()}i.parseDate=$s({config:i.config,l10n:i.l10n}),i._handlers=[],i.pluginElements=[],i.loadedPlugins=[],i._bind=h,i._setHoursFromDate=s,i._positionCalendar=j,i.changeMonth=C,i.changeYear=T,i.clear=function(t=!0,e=!0){i.input.value="",void 0!==i.altInput&&(i.altInput.value="");void 0!==i.mobileInput&&(i.mobileInput.value="");i.selectedDates=[],i.latestSelectedDateObj=void 0,!0===e&&(i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth());if(!0===i.config.enableTime){const{hours:t,minutes:e,seconds:n}=Js(i.config);l(t,e,n)}i.redraw(),t&&W("onChange")},i.close=function(){i.isOpen=!1,i.isMobile||(void 0!==i.calendarContainer&&i.calendarContainer.classList.remove("open"),void 0!==i._input&&i._input.classList.remove("active"));W("onClose")},i._createElement=zs,i.destroy=function(){void 0!==i.config&&W("onDestroy");for(let t=i._handlers.length;t--;)i._handlers[t].remove();if(i._handlers=[],i.mobileInput)i.mobileInput.parentNode&&i.mobileInput.parentNode.removeChild(i.mobileInput),i.mobileInput=void 0;else if(i.calendarContainer&&i.calendarContainer.parentNode)if(i.config.static&&i.calendarContainer.parentNode){const t=i.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){for(;t.firstChild;)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else i.calendarContainer.parentNode.removeChild(i.calendarContainer);i.altInput&&(i.input.type="text",i.altInput.parentNode&&i.altInput.parentNode.removeChild(i.altInput),delete i.altInput);i.input&&(i.input.type=i.input._type,i.input.classList.remove("flatpickr-input"),i.input.removeAttribute("readonly"));["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((t=>{try{delete i[t]}catch(t){}}))},i.isEnabled=A,i.jumpToDate=p,i.open=function(t,e=i._positionElement){if(!0===i.isMobile){if(t){t.preventDefault();const e=Us(t);e&&e.blur()}return void 0!==i.mobileInput&&(i.mobileInput.focus(),i.mobileInput.click()),void W("onOpen")}if(i._input.disabled||i.config.inline)return;const n=i.isOpen;i.isOpen=!0,n||(i.calendarContainer.classList.add("open"),i._input.classList.add("active"),W("onOpen"),j(e));!0===i.config.enableTime&&!0===i.config.noCalendar&&(!1!==i.config.allowInput||void 0!==t&&i.timeContainer.contains(t.relatedTarget)||setTimeout((()=>i.hourElement.select()),50))},i.redraw=N,i.set=function(t,e){if(null!==t&&"object"==typeof t){Object.assign(i.config,t);for(const e in t)void 0!==H[e]&&H[e].forEach((t=>t()))}else i.config[t]=e,void 0!==H[t]?H[t].forEach((t=>t())):Ss.indexOf(t)>-1&&(i.config[t]=Bs(e));i.redraw(),J(!0)},i.setDate=function(t,e=!1,n=i.config.dateFormat){if(0!==t&&!t||t instanceof Array&&0===t.length)return i.clear(e);Z(t,n),i.latestSelectedDateObj=i.selectedDates[i.selectedDates.length-1],i.redraw(),p(void 0,e),s(),0===i.selectedDates.length&&i.clear(!1);J(e),e&&W("onChange")},i.toggle=function(t){if(!0===i.isOpen)return i.close();i.open(t)};const H={locale:[F,M],showMonths:[w,o,L],minDate:[p],maxDate:[p],clickOpens:[()=>{!0===i.config.clickOpens?(h(i._input,"focus",i.open),h(i._input,"click",i.open)):(i._input.removeEventListener("focus",i.open),i._input.removeEventListener("click",i.open))}]};function Z(t,e){let n=[];if(t instanceof Array)n=t.map((t=>i.parseDate(t,e)));else if(t instanceof Date||"number"==typeof t)n=[i.parseDate(t,e)];else if("string"==typeof t)switch(i.config.mode){case"single":case"time":n=[i.parseDate(t,e)];break;case"multiple":n=t.split(i.config.conjunction).map((t=>i.parseDate(t,e)));break;case"range":n=t.split(i.l10n.rangeSeparator).map((t=>i.parseDate(t,e)))}else i.config.errorHandler(new Error(`Invalid date supplied: ${JSON.stringify(t)}`));i.selectedDates=i.config.allowInvalidPreload?n:n.filter((t=>t instanceof Date&&A(t,!1))),"range"===i.config.mode&&i.selectedDates.sort(((t,e)=>t.getTime()-e.getTime()))}function V(t){return t.slice().map((t=>"string"==typeof t||"number"==typeof t||t instanceof Date?i.parseDate(t,void 0,!0):t&&"object"==typeof t&&t.from&&t.to?{from:i.parseDate(t.from,void 0),to:i.parseDate(t.to,void 0)}:t)).filter((t=>t))}function W(t,e){if(void 0===i.config)return;const n=i.config[t];if(void 0!==n&&n.length>0)for(let t=0;n[t]&&t<n.length;t++)n[t](i.selectedDates,i.input.value,i,e);"onChange"===t&&(i.input.dispatchEvent(q("change")),i.input.dispatchEvent(q("input")))}function q(t){const e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function $(t){for(let e=0;e<i.selectedDates.length;e++)if(0===Ys(i.selectedDates[e],t))return""+e;return!1}function Y(){i.config.noCalendar||i.isMobile||!i.monthNav||(i.yearElements.forEach(((t,e)=>{const n=new Date(i.currentYear,i.currentMonth,1);n.setMonth(i.currentMonth+e),i.config.showMonths>1||"static"===i.config.monthSelectorType?i.monthElements[e].textContent=Hs(n.getMonth(),i.config.shorthandCurrentMonth,i.l10n)+" ":i.monthsDropdownContainer.value=n.getMonth().toString(),t.value=n.getFullYear().toString()})),i._hidePrevMonthArrow=void 0!==i.config.minDate&&(i.currentYear===i.config.minDate.getFullYear()?i.currentMonth<=i.config.minDate.getMonth():i.currentYear<i.config.minDate.getFullYear()),i._hideNextMonthArrow=void 0!==i.config.maxDate&&(i.currentYear===i.config.maxDate.getFullYear()?i.currentMonth+1>i.config.maxDate.getMonth():i.currentYear>i.config.maxDate.getFullYear()))}function K(t){return i.selectedDates.map((e=>i.formatDate(e,t))).filter(((t,e,n)=>"range"!==i.config.mode||i.config.enableTime||n.indexOf(t)===e)).join("range"!==i.config.mode?i.config.conjunction:i.l10n.rangeSeparator)}function J(t=!0){void 0!==i.mobileInput&&i.mobileFormatStr&&(i.mobileInput.value=void 0!==i.latestSelectedDateObj?i.formatDate(i.latestSelectedDateObj,i.mobileFormatStr):""),i.input.value=K(i.config.dateFormat),void 0!==i.altInput&&(i.altInput.value=K(i.config.altFormat)),!1!==t&&W("onValueUpdate")}function X(t){const e=Us(t),n=i.prevMonthNav.contains(e),o=i.nextMonthNav.contains(e);n||o?C(n?-1:1):i.yearElements.indexOf(e)>=0?e.select():e.classList.contains("arrowUp")?i.changeYear(i.currentYear+1):e.classList.contains("arrowDown")&&i.changeYear(i.currentYear-1)}return function(){i.element=i.input=t,i.isOpen=!1,function(){const o=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],r=Object.assign(Object.assign({},JSON.parse(JSON.stringify(t.dataset||{}))),e),a={};i.config.parseDate=r.parseDate,i.config.formatDate=r.formatDate,Object.defineProperty(i.config,"enable",{get:()=>i.config._enable,set:t=>{i.config._enable=V(t)}}),Object.defineProperty(i.config,"disable",{get:()=>i.config._disable,set:t=>{i.config._disable=V(t)}});const s="time"===r.mode;if(!r.dateFormat&&(r.enableTime||s)){const t=tl.defaultConfig.dateFormat||Ts.dateFormat;a.dateFormat=r.noCalendar||s?"H:i"+(r.enableSeconds?":S":""):t+" H:i"+(r.enableSeconds?":S":"")}if(r.altInput&&(r.enableTime||s)&&!r.altFormat){const t=tl.defaultConfig.altFormat||Ts.altFormat;a.altFormat=r.noCalendar||s?"h:i"+(r.enableSeconds?":S K":" K"):t+` h:i${r.enableSeconds?":S":""} K`}Object.defineProperty(i.config,"minDate",{get:()=>i.config._minDate,set:R("min")}),Object.defineProperty(i.config,"maxDate",{get:()=>i.config._maxDate,set:R("max")});const l=t=>e=>{i.config["min"===t?"_minTime":"_maxTime"]=i.parseDate(e,"H:i:S")};Object.defineProperty(i.config,"minTime",{get:()=>i.config._minTime,set:l("min")}),Object.defineProperty(i.config,"maxTime",{get:()=>i.config._maxTime,set:l("max")}),"time"===r.mode&&(i.config.noCalendar=!0,i.config.enableTime=!0);Object.assign(i.config,a,r);for(let t=0;t<o.length;t++)i.config[o[t]]=!0===i.config[o[t]]||"true"===i.config[o[t]];Ss.filter((t=>void 0!==i.config[t])).forEach((t=>{i.config[t]=Bs(i.config[t]||[]).map(n)})),i.isMobile=!i.config.disableMobile&&!i.config.inline&&"single"===i.config.mode&&!i.config.disable.length&&!i.config.enable&&!i.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(let t=0;t<i.config.plugins.length;t++){const e=i.config.plugins[t](i)||{};for(const t in e)Ss.indexOf(t)>-1?i.config[t]=Bs(e[t]).map(n).concat(i.config[t]):void 0===r[t]&&(i.config[t]=e[t])}r.altInputClass||(i.config.altInputClass=z().className+" "+i.config.altInputClass);W("onParseConfig")}(),F(),function(){if(i.input=z(),!i.input)return void i.config.errorHandler(new Error("Invalid input element specified"));i.input._type=i.input.type,i.input.type="text",i.input.classList.add("flatpickr-input"),i._input=i.input,i.config.altInput&&(i.altInput=zs(i.input.nodeName,i.config.altInputClass),i._input=i.altInput,i.altInput.placeholder=i.input.placeholder,i.altInput.disabled=i.input.disabled,i.altInput.required=i.input.required,i.altInput.tabIndex=i.input.tabIndex,i.altInput.type="text",i.input.setAttribute("type","hidden"),!i.config.static&&i.input.parentNode&&i.input.parentNode.insertBefore(i.altInput,i.input.nextSibling));i.config.allowInput||i._input.setAttribute("readonly","readonly");i._positionElement=i.config.positionElement||i._input}(),function(){i.selectedDates=[],i.now=i.parseDate(i.config.now)||new Date;const t=i.config.defaultDate||("INPUT"!==i.input.nodeName&&"TEXTAREA"!==i.input.nodeName||!i.input.placeholder||i.input.value!==i.input.placeholder?i.input.value:null);t&&Z(t,i.config.dateFormat);i._initialDate=i.selectedDates.length>0?i.selectedDates[0]:i.config.minDate&&i.config.minDate.getTime()>i.now.getTime()?i.config.minDate:i.config.maxDate&&i.config.maxDate.getTime()<i.now.getTime()?i.config.maxDate:i.now,i.currentYear=i._initialDate.getFullYear(),i.currentMonth=i._initialDate.getMonth(),i.selectedDates.length>0&&(i.latestSelectedDateObj=i.selectedDates[0]);void 0!==i.config.minTime&&(i.config.minTime=i.parseDate(i.config.minTime,"H:i"));void 0!==i.config.maxTime&&(i.config.maxTime=i.parseDate(i.config.maxTime,"H:i"));i.minDateHasTime=!!i.config.minDate&&(i.config.minDate.getHours()>0||i.config.minDate.getMinutes()>0||i.config.minDate.getSeconds()>0),i.maxDateHasTime=!!i.config.maxDate&&(i.config.maxDate.getHours()>0||i.config.maxDate.getMinutes()>0||i.config.maxDate.getSeconds()>0)}(),i.utils={getDaysInMonth:(t=i.currentMonth,e=i.currentYear)=>1===t&&(e%4==0&&e%100!=0||e%400==0)?29:i.l10n.daysInMonth[t]},i.isMobile||function(){const t=window.document.createDocumentFragment();if(i.calendarContainer=zs("div","flatpickr-calendar"),i.calendarContainer.tabIndex=-1,!i.config.noCalendar){if(t.appendChild((i.monthNav=zs("div","flatpickr-months"),i.yearElements=[],i.monthElements=[],i.prevMonthNav=zs("span","flatpickr-prev-month"),i.prevMonthNav.innerHTML=i.config.prevArrow,i.nextMonthNav=zs("span","flatpickr-next-month"),i.nextMonthNav.innerHTML=i.config.nextArrow,w(),Object.defineProperty(i,"_hidePrevMonthArrow",{get:()=>i.__hidePrevMonthArrow,set(t){i.__hidePrevMonthArrow!==t&&(Rs(i.prevMonthNav,"flatpickr-disabled",t),i.__hidePrevMonthArrow=t)}}),Object.defineProperty(i,"_hideNextMonthArrow",{get:()=>i.__hideNextMonthArrow,set(t){i.__hideNextMonthArrow!==t&&(Rs(i.nextMonthNav,"flatpickr-disabled",t),i.__hideNextMonthArrow=t)}}),i.currentYearElement=i.yearElements[0],Y(),i.monthNav)),i.innerContainer=zs("div","flatpickr-innerContainer"),i.config.weekNumbers){const{weekWrapper:t,weekNumbers:e}=function(){i.calendarContainer.classList.add("hasWeeks");const t=zs("div","flatpickr-weekwrapper");t.appendChild(zs("span","flatpickr-weekday",i.l10n.weekAbbreviation));const e=zs("div","flatpickr-weeks");return t.appendChild(e),{weekWrapper:t,weekNumbers:e}}();i.innerContainer.appendChild(t),i.weekNumbers=e,i.weekWrapper=t}i.rContainer=zs("div","flatpickr-rContainer"),i.rContainer.appendChild(L()),i.daysContainer||(i.daysContainer=zs("div","flatpickr-days"),i.daysContainer.tabIndex=-1),b(),i.rContainer.appendChild(i.daysContainer),i.innerContainer.appendChild(i.rContainer),t.appendChild(i.innerContainer)}i.config.enableTime&&t.appendChild(function(){i.calendarContainer.classList.add("hasTime"),i.config.noCalendar&&i.calendarContainer.classList.add("noCalendar");const t=Js(i.config);i.timeContainer=zs("div","flatpickr-time"),i.timeContainer.tabIndex=-1;const e=zs("span","flatpickr-time-separator",":"),n=Ns("flatpickr-hour",{"aria-label":i.l10n.hourAriaLabel});i.hourElement=n.getElementsByTagName("input")[0];const o=Ns("flatpickr-minute",{"aria-label":i.l10n.minuteAriaLabel});i.minuteElement=o.getElementsByTagName("input")[0],i.hourElement.tabIndex=i.minuteElement.tabIndex=-1,i.hourElement.value=Ds(i.latestSelectedDateObj?i.latestSelectedDateObj.getHours():i.config.time_24hr?t.hours:function(t){switch(t%24){case 0:case 12:return 12;default:return t%12}}(t.hours)),i.minuteElement.value=Ds(i.latestSelectedDateObj?i.latestSelectedDateObj.getMinutes():t.minutes),i.hourElement.setAttribute("step",i.config.hourIncrement.toString()),i.minuteElement.setAttribute("step",i.config.minuteIncrement.toString()),i.hourElement.setAttribute("min",i.config.time_24hr?"0":"1"),i.hourElement.setAttribute("max",i.config.time_24hr?"23":"12"),i.hourElement.setAttribute("maxlength","2"),i.minuteElement.setAttribute("min","0"),i.minuteElement.setAttribute("max","59"),i.minuteElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(n),i.timeContainer.appendChild(e),i.timeContainer.appendChild(o),i.config.time_24hr&&i.timeContainer.classList.add("time24hr");if(i.config.enableSeconds){i.timeContainer.classList.add("hasSeconds");const e=Ns("flatpickr-second");i.secondElement=e.getElementsByTagName("input")[0],i.secondElement.value=Ds(i.latestSelectedDateObj?i.latestSelectedDateObj.getSeconds():t.seconds),i.secondElement.setAttribute("step",i.minuteElement.getAttribute("step")),i.secondElement.setAttribute("min","0"),i.secondElement.setAttribute("max","59"),i.secondElement.setAttribute("maxlength","2"),i.timeContainer.appendChild(zs("span","flatpickr-time-separator",":")),i.timeContainer.appendChild(e)}i.config.time_24hr||(i.amPM=zs("span","flatpickr-am-pm",i.l10n.amPM[Os((i.latestSelectedDateObj?i.hourElement.value:i.config.defaultHour)>11)]),i.amPM.title=i.l10n.toggleTitle,i.amPM.tabIndex=-1,i.timeContainer.appendChild(i.amPM));return i.timeContainer}());Rs(i.calendarContainer,"rangeMode","range"===i.config.mode),Rs(i.calendarContainer,"animate",!0===i.config.animate),Rs(i.calendarContainer,"multiMonth",i.config.showMonths>1),i.calendarContainer.appendChild(t);const e=void 0!==i.config.appendTo&&void 0!==i.config.appendTo.nodeType;if((i.config.inline||i.config.static)&&(i.calendarContainer.classList.add(i.config.inline?"inline":"static"),i.config.inline&&(!e&&i.element.parentNode?i.element.parentNode.insertBefore(i.calendarContainer,i._input.nextSibling):void 0!==i.config.appendTo&&i.config.appendTo.appendChild(i.calendarContainer)),i.config.static)){const t=zs("div","flatpickr-wrapper");i.element.parentNode&&i.element.parentNode.insertBefore(t,i.element),t.appendChild(i.element),i.altInput&&t.appendChild(i.altInput),t.appendChild(i.calendarContainer)}i.config.static||i.config.inline||(void 0!==i.config.appendTo?i.config.appendTo:window.document.body).appendChild(i.calendarContainer)}(),function(){i.config.wrap&&["open","close","toggle","clear"].forEach((t=>{Array.prototype.forEach.call(i.element.querySelectorAll(`[data-${t}]`),(e=>h(e,"click",i[t])))}));if(i.isMobile)return void function(){const t=i.config.enableTime?i.config.noCalendar?"time":"datetime-local":"date";i.mobileInput=zs("input",i.input.className+" flatpickr-mobile"),i.mobileInput.tabIndex=1,i.mobileInput.type=t,i.mobileInput.disabled=i.input.disabled,i.mobileInput.required=i.input.required,i.mobileInput.placeholder=i.input.placeholder,i.mobileFormatStr="datetime-local"===t?"Y-m-d\\TH:i:S":"date"===t?"Y-m-d":"H:i:S",i.selectedDates.length>0&&(i.mobileInput.defaultValue=i.mobileInput.value=i.formatDate(i.selectedDates[0],i.mobileFormatStr));i.config.minDate&&(i.mobileInput.min=i.formatDate(i.config.minDate,"Y-m-d"));i.config.maxDate&&(i.mobileInput.max=i.formatDate(i.config.maxDate,"Y-m-d"));i.input.getAttribute("step")&&(i.mobileInput.step=String(i.input.getAttribute("step")));i.input.type="hidden",void 0!==i.altInput&&(i.altInput.type="hidden");try{i.input.parentNode&&i.input.parentNode.insertBefore(i.mobileInput,i.input.nextSibling)}catch(t){}h(i.mobileInput,"change",(t=>{i.setDate(Us(t).value,!1,i.mobileFormatStr),W("onChange"),W("onClose")}))}();const t=Is(B,50);i._debouncedChange=Is(u,300),i.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&h(i.daysContainer,"mouseover",(t=>{"range"===i.config.mode&&I(Us(t))}));h(window.document.body,"keydown",O),i.config.inline||i.config.static||h(window,"resize",t);void 0!==window.ontouchstart?h(window.document,"touchstart",S):h(window.document,"mousedown",S);h(window.document,"focus",S,{capture:!0}),!0===i.config.clickOpens&&(h(i._input,"focus",i.open),h(i._input,"click",i.open));void 0!==i.daysContainer&&(h(i.monthNav,"click",X),h(i.monthNav,["keyup","increment"],c),h(i.daysContainer,"click",G));if(void 0!==i.timeContainer&&void 0!==i.minuteElement&&void 0!==i.hourElement){const t=t=>Us(t).select();h(i.timeContainer,["increment"],r),h(i.timeContainer,"blur",r,{capture:!0}),h(i.timeContainer,"click",d),h([i.hourElement,i.minuteElement],["focus","click"],t),void 0!==i.secondElement&&h(i.secondElement,"focus",(()=>i.secondElement&&i.secondElement.select())),void 0!==i.amPM&&h(i.amPM,"click",(t=>{r(t),u()}))}i.config.allowInput&&h(i._input,"blur",D)}(),(i.selectedDates.length||i.config.noCalendar)&&(i.config.enableTime&&s(i.config.noCalendar?i.latestSelectedDateObj:void 0),J(!1)),o();const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!i.isMobile&&a&&j(),W("onReady")}(),i}function Qs(t,e){const i=Array.prototype.slice.call(t).filter((t=>t instanceof HTMLElement)),n=[];for(let t=0;t<i.length;t++){const o=i[t];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Xs(o,e||{}),n.push(o._flatpickr)}catch(t){console.error(t)}}return 1===n.length?n[0]:n}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return Qs(this,t)},HTMLElement.prototype.flatpickr=function(t){return Qs([this],t)});var tl=function(t,e){return"string"==typeof t?Qs(window.document.querySelectorAll(t),e):t instanceof Node?Qs([t],e):Qs(t,e)};tl.defaultConfig={},tl.l10ns={en:Object.assign({},Es),default:Object.assign({},Es)},tl.localize=t=>{tl.l10ns.default=Object.assign(Object.assign({},tl.l10ns.default),t)},tl.setDefaults=t=>{tl.defaultConfig=Object.assign(Object.assign({},tl.defaultConfig),t)},tl.parseDate=$s({}),tl.formatDate=qs({}),tl.compareDates=Ys,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpickr=function(t){return Qs(this,t)}),Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"==typeof t?parseInt(t,10):t))},"undefined"!=typeof window&&(window.flatpickr=tl);var el=function(){var t=this;this.currentValues,this.map,this.basemaps={},this.marker,this.icon,this.geoJson=Hr().geoJSON(),function(e){function i(e){e||(e=mmpL10n.popup.info),"undefined"!=typeof switchEditors&&(e=switchEditors.wpautop(e)),t.marker.setPopupContent(e)}function n(){window.open(e("#link").val(),"_blank")}function o(){"popup"===e("input[name=action]:checked").val()?(e("#link").val(""),e("#link_settings").hide(),e("#editor").show(),void 0!==t.marker&&(t.marker.bindPopup("",t.popup),t.marker.openPopup(),t.marker.off("click",n),i(e("#popup").val()))):(e("#editor").hide(),e("#link_settings").show(),void 0!==t.marker&&(t.marker.closePopup(),t.marker.unbindPopup(),t.marker.on("click",n)))}function r(i){var n=i.lat,o=i.lng;n<-90?n=-90:n>90&&(n=90),o<-180?o=-180:o>180&&(o=180),t.marker.setLatLng([n,o]),t.map.panTo(t.marker.getLatLng()),e("#lat").val(t.marker.getLatLng().lat.toFixed(6)),e("#lng").val(t.marker.getLatLng().lng.toFixed(6))}function a(){e("#iconTarget").val(e("input[name=icon]:checked").val()),t.icon.options.iconUrl=e("input[name=icon]:checked+img").attr("src"),t.marker.setIcon(t.icon),e("#uploadFile").val(""),e("#iconSearch").val(""),e("#iconList .mmp-radio").show(),e("#icons").hide()}function s(i){if(t.currentValues=e("#markerSettings").serialize(),t.map=Hr().map("maps-marker-pro-marker",{center:[i.lat,i.lng],zoom:i.zoom,minZoom:0,maxZoom:23,zoomSnap:.5,zoomDelta:.5,maxBounds:[[-90,-180],[90,180]],attributionControl:!1}),t.attributionControl=Hr().control.attribution({prefix:i.attributionPrefix}).addTo(t.map),t.attributionControl._esriAttributionAdded=!0,e.each(i.availableBasemaps,(function(e,n){if(1===n.type||3===n.type||4===n.type||5===n.type||6===n.type){if(n.options.bounds&&"string"==typeof n.options.bounds){var o=ss(n.options.bounds);n.options.rasterTiles?n.options.bounds=[t.map.unproject(Hr().point(o[0][1],o[0][0]),n.options.maxNativeZoom),t.map.unproject(Hr().point(o[1][1],o[1][0]),n.options.maxNativeZoom)]:n.options.bounds=o}else n.options.bounds=[[-90,-180],[90,180]];n.options.minZoom=0,n.options.maxZoom=23,n.options.noWrap=!0}1===n.type?n.wms?t.basemaps[e]=Hr().tileLayer.wms(n.url,n.options):t.basemaps[e]=Hr().tileLayer(n.url,n.options):2===n.type&&i.googleApiKey?t.basemaps[e]=new(Hr().gridLayer.googleMutant)(n.options):3===n.type&&i.bingApiKey?(n.options.bingMapsKey=i.bingApiKey,n.options.culture=i.bingCulture,t.basemaps[e]=Hr().tileLayer.bing(n.options)):4===n.type&&(i.hereApiKey||i.hereAppId&&i.hereAppCode)?(n.options.apiKey=i.hereApiKey,n.options.appId=i.hereAppId,n.options.appCode=i.hereAppCode,t.basemaps[e]=Hr().tileLayer.here(n.options)):5===n.type&&i.tomApiKey?(n.options.apiKey=i.tomApiKey,t.basemaps[e]=Hr().tileLayer.tomTom(n.options)):6===n.type&&(n.labels?t.basemaps[e]=Hr().layerGroup([Ja(n.key,n.options),Ja(n.labels,n.options)]):t.basemaps[e]=Ja(n.key,n.options))})),void 0!==t.basemaps[i.basemap])t.basemaps[i.basemap].addTo(t.map);else{var n=Object.keys(t.basemaps);n.length&&t.basemaps[n[0]].addTo(t.map)}t.geoJson=Hr().geoJSON(null,{pointToLayer:function(t,e){return Hr().marker(e,{pmIgnore:!0,interactive:!1,icon:Hr().icon({iconUrl:t.properties.icon,iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor})})}}).addTo(t.map),t.icon=Hr().icon({iconUrl:i.icon?mmpVars.iconsUrl+i.icon:mmpVars.pluginUrl+"images/leaflet/marker.png",iconSize:i.iconSize,iconAnchor:i.iconAnchor,popupAnchor:i.popupAnchor,shadowUrl:i.shadowUrl,shadowSize:i.shadowSize,shadowAnchor:i.shadowAnchor}),t.popup={maxWidth:400,minWidth:200,maxHeight:400,className:"mmp-popup"},t.marker=Hr().marker([i.lat,i.lng],{icon:t.icon,draggable:!0}).addTo(t.map),o(),t.map.on("click",(function(t){r(t.latlng)})),t.map.on("zoomend",(function(){e("#zoom").val(t.map.getZoom().toFixed(1))})),t.marker.on("dragend",(function(){r(t.marker.getLatLng())}));var s,l,c={enableTime:!0,time_24hr:(l=mmpAdminL10n.global.timeFormat,!/a(?!\\)/i.test(l.replace(/\\\\/g,""))),altInput:!0,altFormat:(s=mmpAdminL10n.global.dateFormat+" "+mmpAdminL10n.global.timeFormat,s.replace(/G(?!\\)/g,"H").replace(/h(?!\\)/g,"G").replace(/g(?!\\)/g,"h").replace(/S(?!\\)/g,"J").replace(/s(?!\\)/g,"S").replace(/a(?!\\)/g,"K").replace(/A(?!\\)/g,"K")),dateFormat:"Y-m-d H:i:S"},h=e("#scheduleFrom").flatpickr(c),u=e("#scheduleUntil").flatpickr(c);e("#scheduleFromClear").on("click",(function(){h.clear()})),e("#scheduleUntilClear").on("click",(function(){u.clear()})),e("#basemap").on("change",(function(){e.each(t.basemaps,(function(t,e){e.remove()})),void 0!==t.basemaps[e(this).val()]&&t.basemaps[e(this).val()].addTo(t.map)})),e("#previewMap").on("change",(function(){e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_preview_map_markers",id:e("#previewMap").val()},beforeSend:function(){t.geoJson.clearLayers()}}).done((function(i){i.features&&(t.geoJson.addData(i),e("#previewOpacity").trigger("input"))}))})),e("#previewOpacity").on("input",Hr().Util.throttle((function(){var i=parseFloat(e("#previewOpacity").val());t.geoJson.eachLayer((function(t){t.setOpacity(i)}))}),100)),e("#lat, #lng").on("change",(function(){var t=parseFloat(e("#lat").val()),i=parseFloat(e("#lng").val());r(Hr().latLng(t,i))})),e("#zoom").on("change",(function(){t.map.setZoom(parseFloat(e("#zoom").val()))})),e("input[name=icon]").on("change",a),e("input[name=action]").on("change",o),e("#markerSettings").on("submit",(function(i){i.preventDefault(),i.stopPropagation(),e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker",settings:e("#markerSettings").serialize()},beforeSend:function(){var t;t=e("#save"),e("#save").prop("disabled",!0),e(t).addClass("mmp-button-loading")}}).done((function(i){i.success?(t.currentValues=e("#markerSettings").serialize(),"new"===e("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+i.response.id):e('<div class="notice notice-success"><p>'+i.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){e(this).remove()}))):e('<div class="notice notice-error"><p>'+i.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){e(this).remove()}))})).always((function(){var t;t=e("#save"),e(t).removeClass("mmp-button-loading"),e("#save").prop("disabled",!1)}))})),e("#saveDefaultsLink").on("click",(function(t){t.preventDefault(),t.stopPropagation(),e(this).hide(),e(".mmp-save-defaults").show()})),e("#saveDefaultsConfirm").on("click",(function(){e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker_defaults",settings:e("#markerSettings").serialize()},beforeSend:function(){e("#saveDefaultsConfirm").prop("disabled",!0),e("#saveDefaultsCancel").prop("disabled",!0),e(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always((function(){e(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),e(".mmp-save-defaults").fadeOut(500,(function(){e("#saveDefaultsConfirm").prop("disabled",!1),e("#saveDefaultsCancel").prop("disabled",!1),e("#saveDefaultsLink").show()}))}))})),e("#saveDefaultsCancel").on("click",(function(){e(".mmp-save-defaults").hide(),e("#saveDefaultsLink").show()})),e("#assignedMaps").select2({width:"260px",placeholder:mmpAdminL10n.marker.notAssigned,templateSelection:function(t){var i=e('<a href="'+mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+t.id+'" target="_blank">'+mmpAdminL10n.marker.edit+"</a>");return i.on("click",(function(t){t.stopPropagation()})),e("<span>"+t.text+"</span>").append(" (").append(i).append(")")}}),e("#changeIcon").on("click",(function(){e("#iconUpload").hide(),e("#icons").show()})),e("#iconSearch").keyup((function(){var t=e(this).val();e('input[name="icon"]').each((function(){-1===e(this).val().toUpperCase().indexOf(t.toUpperCase())?e(this).parent().hide():e(this).parent().show()}))})),e("#toggleUpload").on("click",(function(){e("#iconUpload").toggle()})),e("#upload").on("click",(function(){var t=e("#uploadFile").prop("files")[0];if(void 0!==t){var i=new FormData;i.append("action","mmp_icon_upload"),i.append("nonce",e("#upload_nonce").val()),i.append("upload",t),e.ajax({type:"POST",url:ajaxurl,processData:!1,contentType:!1,context:this,data:i}).done((function(t){t.success&&(e("#iconList").prepend('<label class="mmp-radio"><input type="radio" name="icon" value="'+t.response.name+'" checked="checked" /><img class="mmp-icon" src="'+t.response.url+'" /></label>'),e("input[name=icon]").on("change",a),e("input[name=icon]").trigger("change"))}))}}));var p=new ds("#address",(function(){e("#geocodingError").empty()}),(function(t){e("#geocodingError").html(t)}),(function(t,i){editMarker.marker.setLatLng([t,i]),editMarker.map.panTo(editMarker.marker.getLatLng()),e("#lat").val(editMarker.marker.getLatLng().lat.toFixed(6)),e("#lng").val(editMarker.marker.getLatLng().lng.toFixed(6))}),e("#geocodingProvider").val(),mmpGeocoding,400,3);p.init(),e("#geocodingProvider").on("change",(function(){p.provider=e("#geocodingProvider").val(),p.reload()})),localStorage.getItem("saved")&&(e('<div class="notice notice-success"><p>'+mmpAdminL10n.marker.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,(function(){e(this).remove()})),localStorage.removeItem("saved")),e("#save").prop("disabled",!1)}e(".mmp-delete").on("click",(function(){confirm(mmpAdminL10n.marker.delete)&&e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker_direct",nonce:e("#nonce").val(),id:e("#id").val()}}).done((function(){t.currentValues=e("#markerSettings").serialize(),window.location.href=mmpVars.adminUrl+"admin.php?page=mapsmarkerpro_markers"}))})),e(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(t){t.target===this&&e("#icons").hide()})),e("#popup").on("change",(function(){i(e(this).val())})),e("#maps-marker-pro-marker").css({width:"100%",height:"480px"}),e.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_settings",id:e("#id").val(),basemap:e("#basemap").val(),lat:e("#lat").val(),lng:e("#lng").val(),zoom:e("#zoom").val()}}).done((function(t){s(t.settings)})),window.onbeforeunload=function(){return t.currentValues!==e("#markerSettings").serialize()?"":null}}(jQuery)};var il=function(){!function(t){function e(e){t("#pagination_top button, #pagination_bottom button").prop("disabled",e),t("#page_top, #page_bottom").prop("disabled",e),t("#perpage_top, #perpage_bottom").prop("disabled",e),t("#search_top, #search_bottom").prop("disabled",e),t("#map_top, #map_bottom").prop("disabled",e)}function i(n,o,r,a,s,l){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_list",nonce:t("#markerListNonce").val(),page:n,limit:o,search:r,map:a,sort:s,order:l},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0),t("#marker_list").empty(),t("#marker_list").addClass("mmp-page-loading")}}).done((function(n){t("#markercount_top, #markercount_bottom").html(n.total),t("#previous_top, #previous_bottom").val(n.page-1),t("#next_top, #next_bottom").val(n.page+1),t("#last_top, #last_bottom").val(Math.ceil(n.total/n.limit)),t("#page_top, #page_bottom").val(n.page),t("#pagecount_top, #pagecount_bottom").html(Math.ceil(n.total/n.limit)),t("#perpage_top, #perpage_bottom").val(n.limit),t("#search_top, #search_bottom").val(n.search),t("#marker_list").html(n.html),t('.mmp-sortable[data-orderby="'+n.sort+'"]').addClass("mmp-sorted-"+n.order),t("#selectAll").on("click",(function(){t('input[name="selected[]"]').each((function(e,i){t(i).prop("checked",t("#selectAll").prop("checked"))}))})),t('input[name="selected[]"]').on("change",(function(){var e=!0;t('input[name="selected[]"]').each((function(i,n){e=e&&t(n).prop("checked")})),t("#selectAll").prop("checked",e)})),t(".mmp-sortable").on("click",(function(e){e.preventDefault(),e.stopPropagation();var n=t("#sortorder").val();n=t("#orderby").val()===t(this).data("orderby")&&"asc"===n?"desc":"asc",t("#sortorder").val(n),t("#orderby").val(t(this).data("orderby")),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t(".mmp-table td:nth-child(4)").on("mouseenter",(function(){t(".mmp-action",t(this)).css("visibility","visible")})),t(".mmp-table td:nth-child(4)").on("mouseleave",(function(){t(".mmp-action",t(this)).css("visibility","hidden")})),t(".mmp-delete").on("click",(function(){var n=t(this).data("id");confirm(mmpAdminL10n.markers.delete.replace("{marker}",n))&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker",nonce:t("#markerListNonce").val(),id:n},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))}))})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1),t("#marker_list").removeClass("mmp-page-loading")}))}t("input[name=bulkAction]").on("change",(function(){t("#bulkActionSubmit").prop("disabled",!1)})),t("#pagination_top button").on("click",(function(){i(t(this).val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#pagination_bottom button").on("click",(function(){i(t(this).val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#map_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_top, #perpage_top").on("change",(function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#page_bottom, #perpage_bottom").on("change",(function(){i(t("#page_bottom").val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t("#map_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_top").on("change",(function(){i(1,t("#perpage_top").val(),t(this).val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})),t("#search_bottom").on("change",(function(){i(1,t("#perpage_bottom").val(),t(this).val(),t("#map_bottom").val(),t("#orderby").val(),t("#sortorder").val())})),t("#map_top").select2({width:"200px"}).on("select2:select",(function(){t("#map_bottom").select2("val",t("#map_top").val()),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#map_bottom").select2({width:"200px"}).on("select2:select",(function(){t("#map_top").select2("val",t("#map_bottom").val()),i(t("#page_bottom").val(),t("#perpage_bottom").val(),t("#search_bottom").val(),t(this).val(),t("#orderby").val(),t("#sortorder").val())})),t("#markerList").on("submit",(function(n){var o;switch(n.preventDefault(),n.stopPropagation(),t("input[name=bulkAction]:checked").val()){case"duplicate":o=mmpAdminL10n.markers.bulkDuplicate;break;case"delete":o=mmpAdminL10n.markers.bulkDelete;break;case"assign":o=mmpAdminL10n.markers.bulkAssign.replace("{map}",t("#assignTarget").val());break;default:return}confirm(o)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_markers",nonce:t("#bulkNonce").val(),data:t("#markerList").serialize()},beforeSend:function(){e(!0),t("#bulkActionSubmit").prop("disabled",!0)}}).done((function(){i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1),t("#bulkActionSubmit").prop("disabled",!1)}))})),t("#mmp-markers-screen-options-apply").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_markers_screen_options",nonce:t("#screenoptionnonce").val(),hiddenColumns:t(".mmp-markers-column").not(":checked").map((function(){return this.value})).get(),perPage:t("#mmp-markers-per-page").val()},beforeSend:function(){e(!0)}}).done((function(){t("#show-settings-link").trigger("click"),i(t("#page_top").val(),t("#perpage_top").val(),t("#search_top").val(),t("#map_top").val(),t("#orderby").val(),t("#sortorder").val())})).always((function(){e(!1)}))})),i()}(jQuery)};var nl=function(){!function(t){var e=document.location.toString().split("#")[1],i=t("#settings").serialize(),n={},o=[];function r(e){t(".mmp-settings-tab").hide(),t(".mmp-tablink").removeClass("active"),t("#"+e+"_link").addClass("active"),t("#"+e+"_tab").show(),window.location.hash=e}function a(e){t(e).prop("disabled",!0),t(e).addClass("mmp-button-loading")}function s(e){t(e).removeClass("mmp-button-loading"),t(e).prop("disabled",!1)}function l(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_get_custom_layers",nonce:t("input[name=nonce]").val()}}).done((function(e){o=e;var i=t("<ul></ul>"),n=t("<ul></ul>");t.each(o,(function(e,o){var r=t("<li></li>"),a=t('<img src="'+mmpVars.pluginUrl+'images/icons/edit-layer.png" />');a.css("margin","0 10px 0 0"),a.css("verticalAlign","middle"),a.css("cursor","pointer"),a.on("click",(function(){var e;e=o.id,t("#customLayerId").val(e),c()})),r.append(a),r.append("[ID "+o.id+"] "+o.name),"1"==o.overlay?n.append(r):i.append(r)})),t("#custom-basemaps").html(i),t("#custom-overlays").html(n)}))}function c(){var e=t("#customLayerId").val(),i={},n={};"0"!=e&&(t.each(o,(function(t,o){if(o.id==e)return i=o,n=JSON.parse(o.options),!1})),"1"==i.overlay?t("#customLayerTypeOverlay").prop("checked",!0):t("#customLayerTypeBasemap").prop("checked",!0),t("#customLayerWms").prop("checked","1"==i.wms),t("#customLayerTms").prop("checked",n.tms),t("#customLayerRasterTiles").prop("checked",n.rasterTiles),t("#customLayerNoWrap").prop("checked",n.noWrap),t("#customLayerErrorTiles").prop("checked",n.errorTiles),t("#customLayerName").val(i.name),t("#customLayerUrl").val(i.url),t("#customLayerSubdomains").val(n.subdomains),t("#customLayerBounds").val(n.bounds),t("#customLayerMinZoom").val(n.minNativeZoom),t("#customLayerMaxZoom").val(n.maxNativeZoom),t("#customLayerOpacity").val(n.opacity),t("#customLayerAttribution").val(n.attribution),"1"==i.wms&&(t("#custom-layer-wms").show(),t("#customLayerTransparent").prop("checked",n.transparent),t("#customLayerUppercase").prop("checked",n.uppercase),t("#customLayerLayers").val(n.layers),t("#customLayerStyles").val(n.styles),t("#customLayerFormat").val(n.format),t("#customLayerVersion").val(n.version))),t("#mmp-custom-layer-modal").show()}t(".mmp-tablink").on("click",(function(){r(t(this).attr("id").replace("_link",""))})),t(".mmp-settings-nav ul li").each((function(){var e=t(this).closest(".mmp-settings-nav-group").find("span").html(),i=t(this).attr("id").replace("_link",""),o=t(this).html(),r=o;t("#"+i+"_tab").find("h3, p, .mmp-settings-desc, .mmp-settings-footnote").each((function(){r=r+" "+t(this).html()})),r=r.replace(/"/g,""),void 0===n[e]&&(n[e]=[]),n[e].push({value:i,search:r,title:o})})),t("#mmp-custom-layer-add").on("click",(function(){t("#customLayerId").val("0"),c()})),t("#customLayerWms").on("change",(function(){t(this).prop("checked")?t("#custom-layer-wms").show():t("#custom-layer-wms").hide()})),t("#settings").on("submit",(function(e){e.preventDefault(),e.stopPropagation();var n=t("#settings").serialize();t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_settings",settings:n},beforeSend:function(){a(t("#save"))}}).done((function(e){i=n;var o=e.success?"notice-success":"notice-error";t('<div class="notice '+o+'"><p>'+e.response+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})).fail((function(){t('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,(function(){t(this).remove()}))})).always((function(){s(t("#save"))}))}));var h=t("<select></select>").attr("id","mmp-select-search-tabs").css("width","300px").append("<option></option>");t.each(n,(function(e,i){var n=t("<optgroup></optgroup>");n.attr("label",e),t.each(i,(function(e,i){var o=t("<option></option>").attr("value",i.value).attr("data-search",i.search).html(i.title);n.append(o)})),h.append(n)})),h.appendTo("#top"),h.select2({placeholder:mmpAdminL10n.settings.search,allowClear:!0,matcher:function(e,i){if(""===t.trim(e.term))return i;if(void 0===i.text||void 0===i.children)return null;var n=[];if(t.each(i.children,(function(i,o){-1===o.text.toUpperCase().indexOf(e.term.toUpperCase())&&-1===t(o.element).data("search").toUpperCase().indexOf(e.term.toUpperCase())||n.push(o)})),n.length){var o=t.extend({},i,!0);return o.children=n,o}return null}}).on("change",(function(){r(t(this).val())})),t(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(e){e.target===this&&(t("#mmp-custom-layer-modal").hide(),t("#mmp-custom-layer-form").trigger("reset"),t("#custom-layer-wms").hide())})),t("#mmp-custom-layer-delete").on("click",(function(){t("#mmp-custom-layer-modal").hide(),t("#mmp-custom-layer-form").trigger("reset"),t("#custom-layer-wms").hide(),function(e){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_custom_layer",nonce:t("input[name=nonce]").val(),id:e}}).done((function(){l()}))}(t("#customLayerId").val())})),t("#mmp-custom-layer-save").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_custom_layer",nonce:t("input[name=nonce]").val(),settings:t("#mmp-custom-layer-form").serialize()},beforeSend:function(){a(t("#mmp-custom-layer-save"))}}).done((function(){t("#mmp-custom-layer-modal").hide(),t("#mmp-custom-layer-form").trigger("reset"),t("#custom-layer-wms").hide(),l()})).always((function(){s(t("#mmp-custom-layer-save"))}))})),t("#icons_list").select2({width:"300px",placeholder:mmpAdminL10n.settings.selectIcons,templateResult:function(e){return e.id?t('<span><img src="'+mmpVars.iconsUrl+e.element.value+'" class="icons-list-item" /> '+e.text+"</span>"):e.text}}),t("#delete_icons").on("click",(function(){confirm(mmpAdminL10n.settings.confirmDelete)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_icons",nonce:t("input[name=nonce]").val(),icons:t("#icons_list").val()}}).done((function(){t("#icons_list option:selected").remove()}))})),r(void 0!==e?e:t(".mmp-tablink").first().attr("id").replace("_link","")),l(),window.onbeforeunload=function(){return i!==t("#settings").serialize()?"":null},t("#save").prop("disabled",!1)}(jQuery)};var ol=function(){!function(t){var e=document.location.toString().split("#")[1],i=0;function n(e){t(".mmp-tools-tab").hide(),t(".mmp-tablink").removeClass("active"),t("#"+e+"_tab").addClass("active"),t("#"+e+"_tab_content").show(),window.location.hash=e}function o(e){t(e).prop("disabled",!0),t(e).addClass("mmp-button-loading")}function r(e){t(e).removeClass("mmp-button-loading"),t(e).prop("disabled",!1)}function a(e){t("#backup_log").append('<span class="mmp-error">error ('+e.status+" - "+e.statusText+")</span>")}function s(t,e,i){var n=t?"notice-success":"notice-error";i.after('<div class="notice '+n+'"><p>'+e+"</p></div>")}function l(e){return{type:"POST",url:ajaxurl,dataType:"json",delay:250,data:function(i){return{action:e,nonce:t(this).data("nonce"),term:i.term,page:i.page}},processResults:function(t){return{results:t.results,pagination:{more:t.more}}}}}function c(){var e=[];t(".mmp-basemap").each((function(){e.push(t(this).data("id").toString())})),t("#basemapsList option").each((function(){var i=-1!==t.inArray(t(this).val().toString(),e);t(this).prop("disabled",i)})),t("#basemapsList option").each((function(){if(!t(this).prop("disabled"))return t(this).prop("selected",!0),!1})),t("#basemapsList option:enabled").length?t("#basemapsAdd").prop("disabled",!1):t("#basemapsAdd").prop("disabled",!0),t("input[name=basemapDefault]:checked").length||t("input[name=basemapDefault]").first().prop("checked",!0)}function h(){var e=[];t(".mmp-overlay").each((function(){e.push(t(this).data("id").toString())})),t("#overlaysList option").each((function(){var i=-1!==t.inArray(t(this).val().toString(),e);t(this).prop("disabled",i)})),t("#overlaysList option").each((function(){if(!t(this).prop("disabled"))return t(this).prop("selected",!0),!1})),t("#overlaysList option:enabled").length?t("#overlaysAdd").prop("disabled",!1):t("#overlaysAdd").prop("disabled",!0)}function u(e,i,n,o){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_backup",nonce:t("#backup_start").data("nonce"),table:e,offset:i,total:JSON.stringify(n),filename:o||0}}).done((function(e){(e=d(e)).table>3?(t("#backup_log").append(e.message),t("#backup_start").removeClass("mmp-button-loading"),window.location=e.url):u(e.table,e.offset,e.total,e.filename)})).fail((function(t){a(t)}))}function p(e,i,n){var o=new FormData;if(o.append("action","mmp_restore"),o.append("nonce",t("#restore_start").data("nonce")),o.append("table",e),o.append("offset",i),o.append("total",n),!n.length){var r=t("#backup_file").prop("files")[0];if(void 0===r)return void t("#restore_start").removeClass("mmp-button-loading");o.append("upload",r)}t.ajax({type:"POST",url:ajaxurl,context:this,data:o,processData:!1,contentType:!1}).done((function(e){(e=d(e)).table>3?(m(e.maps),t("#backup_log").append(e.message),t("#restore_start").removeClass("mmp-button-loading")):p(e.table,e.offset,e.total)})).fail((function(t){a(t)}))}function d(e){for(var n=0;n<e.log.length;n++)t("#backup_log").append(e.log[n]+"<br />");e.offset+1e3<e.total[e.table]?(i+=1e3,e.offset+=1e3):(i+=e.total[e.table]-e.offset,e.table++,e.offset=0);for(var o=0,r=0;r<e.total.length;r++)o+=e.total[r];var a=(i/o*100).toFixed(0);return t("#backup_progress").css("width",a+"%"),e}function m(e){var i=t("#move_markers_source"),n=i.val(),o=t("#move_markers_target"),r=o.val(),a=t("#remove_markers_map"),s=a.val(),l=t("#assign_markers_map"),c=l.val(),h=t("#assign_map"),u=h.val();i.empty(),o.empty(),a.empty(),l.empty(),h.empty(),t.each(e,(function(e,p){i.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==n)),o.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==r)),a.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==s)),l.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==c)),h.append(t("<option></option>").attr("value",e).text(p).prop("selected",e==u))}))}t(".mmp-tablink").on("click",(function(){n(t(this).attr("id").replace("_tab",""))})),t(".mmp-batch-settings-tablink").on("click",(function(){var e=t(this).data("target");t(".mmp-map-batch-settings-group").hide(),t(".mmp-batch-settings-tablink").removeClass("active"),t(this).addClass("active"),t("#"+e+"Content").show()})),t(".batch-settings-check").on("change",(function(){t(this).prop("checked")?t(this).closest(".mmp-map-batch-setting").addClass("mmp-changed"):t(this).closest(".mmp-map-batch-setting").removeClass("mmp-changed"),t(".mmp-batch-settings-tablink").each((function(){var e=t(this).data("target");t(".batch-settings-check:checked",t("#"+e+"Content")).length?t(this).addClass("mmp-changed"):t(this).removeClass("mmp-changed")}))})),t("#mapSettings input, #mapSettings select, #mapSettings textarea").on("change",(function(){var e=t(this).attr("name");t("#"+e+"Check").prop("checked",!0).trigger("change")})),t(".mmp-gpx-start-icon").on("click",(function(){t("#gpxIconTarget").val("gpx-start"),t("#iconsGpx").show()})),t(".mmp-gpx-end-icon").on("click",(function(){t("#gpxIconTarget").val("gpx-end"),t("#iconsGpx").show()})),t("#iconsListGpx img").on("click",(function(){var e=t("#gpxIconTarget").val(),i=t(this).attr("src"),n=t(this).data("icon");"gpx-start"===e?(t("#gpxStartIcon").val(n).trigger("change"),t(".mmp-gpx-start-icon").attr("src",i)):"gpx-end"===e&&(t("#gpxEndIcon").val(n).trigger("change"),t(".mmp-gpx-end-icon").attr("src",i)),t("#iconsGpx").hide()})),t("#batch_settings_maps").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#save_batch_settings").on("click",(function(){confirm(mmpAdminL10n.tools.batchSettings)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_settings",nonce:t(this).data("nonce"),settings:t("#mapSettings").serialize()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#batch_settings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#batch_settings_section"))})).always((function(){r(t(this))}))})),t("#basemapList").sortable({handle:".mmp-handle"}),t("#basemapsAdd").on("click",(function(){!function(e,i){var n=t('<li class="mmp-basemap" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="basemaps[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="radio" name="basemapDefault" value="'+e+'" />');o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i+'" disabled="disabled" />');o.append(" ").append(l);var h=t('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');h.on("click",(function(){t(this).parent().parent().remove(),c()})),o.append(" ").append(h),t("#basemapList").append(n)}(t("#basemapsList").val(),t("#basemapsList option:checked").text()),c()})),t(".mmp-remove-basemap").on("click",(function(){t(this).parent().parent().remove(),c()})),c(),t("#overlayList").sortable({handle:".mmp-handle"}),t("#overlaysAdd").on("click",(function(){!function(e,i){var n=t('<li class="mmp-overlay" data-id="'+e+'"></li>'),o=t("<div></div>");n.append(o);var r=t('<input type="hidden" name="overlays[]" value="'+e+'" />');o.append(r);var a=t('<img class="mmp-handle mmp-align-middle" src="'+mmpVars.pluginUrl+'images/icons/handle.png" />');o.append(a);var s=t('<input type="checkbox" name="overlaysActive[]" value="'+e+'" />');o.append(" ").append(s);var l=t('<input type="text" class="mmp-align-middle" value="'+i+'" disabled="disabled" />');o.append(" ").append(l);var c=t('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');c.on("click",(function(){t(this).parent().parent().remove(),h()})),o.append(" ").append(c),t("#overlayList").append(n)}(t("#overlaysList").val(),t("#overlaysList option:checked").text()),h()})),t(".mmp-remove-overlay").on("click",(function(){t(this).parent().parent().remove(),h()})),h(),t("#batch_layers_maps").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#save_batch_layers").on("click",(function(){confirm(mmpAdminL10n.tools.batchLayers)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_layers",nonce:t(this).data("nonce"),settings:t("#mapLayers").serialize()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#batch_layers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#batch_layers_section"))})).always((function(){r(t(this))}))})),t("#markerIconSelection").on("click",(function(){t("#markerIcons").show()})),t("#markerIconsList img").on("click",(function(){var e=t(this).attr("src");t("#markerIconSelection").attr("src",e),t("#markerIcon").val(e),t("#markerIcons").hide()})),t("#batch_marker_markers").select2({width:"400px",ajax:l("mmp_query_markers")}),t("#batch_marker_maps").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#save_batch_marker").on("click",(function(){confirm(mmpAdminL10n.tools.batchMarker)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_marker",nonce:t(this).data("nonce"),settings:t("#markerSettings").serialize()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#batch_marker_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#batch_marker_section"))})).always((function(){r(t(this))}))})),t("#sourceIcon").on("click",(function(){t("#replaceIcon").val("0"),t("#icons").show()})),t("#targetIcon").on("click",(function(){t("#replaceIcon").val("1"),t("#icons").show()})),t("#iconsList img").on("click",(function(){var e="0"==t("#replaceIcon").val()?"#sourceIcon":"#targetIcon",i=t(this).attr("src");t(e).attr("src",i),t("#icons").hide()})),t("#replace_icon").on("click",(function(){confirm(mmpAdminL10n.tools.replaceIcon)&&t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_replace_icon",nonce:t(this).data("nonce"),source:t("#sourceIcon").attr("src"),target:t("#targetIcon").attr("src")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#replace_icon_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#replace_icon_section"))})).always((function(){r(t(this))}))})),t("#backup_file").on("change",(function(){if(i=0,t("#backup_log").empty(),t("#backup_progress").css("width","0"),this.files.length){var e=(this.files[0].size/1024/1024).toFixed(2)+" MiB",n=t("#backup_max_size").val()/1024/1024+" MiB";t("#backup_log").append(mmpAdminL10n.tools.maxFileSize.replace("{maxFileSize}",n)+"<br />"),n<=0||this.files[0].size<=t("#backup_max_size").val()?(t("#backup_log").append('<span style="color:green;">'+mmpAdminL10n.tools.chosenFileSizeGood.replace("{chosenFileSize}",e)+"</span><br />"),t("#backup_start").prop("disabled",!0),t("#restore_start").prop("disabled",!1)):t("#backup_log").append('<span style="color:red;">'+mmpAdminL10n.tools.chosenFileSizeBad.replace("{chosenFileSize}",e)+"</span><br />")}else t("#restore_start").prop("disabled",!0),t("#backup_start").prop("disabled",!1)})),t("#backup_start").on("click",(function(){i=0,t("#backup_start").prop("disabled",!0),t("#restore_start").prop("disabled",!0),t("#backup_start").addClass("mmp-button-loading"),u(0,0,[],!1)})),t("#restore_start").on("click",(function(){i=0,t("#restore_start").prop("disabled",!0),t("#backup_start").prop("disabled",!0),t("#restore_start").addClass("mmp-button-loading"),p(0,0,[])})),t("#settings").on("click",(function(){t(this).trigger("select")})),t("#update_settings").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_settings",nonce:t(this).data("nonce"),settings:t("#settings").val()},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#update_settings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#update_settings_section"))})).always((function(){r(t(this))}))})),t("#move_markers_source, #move_markers_target").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#move_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_move_markers",nonce:t(this).data("nonce"),source:t("#move_markers_source").val(),target:t("#move_markers_target").val()},beforeSend:function(){o(t(this))}}).done((function(e){e.success&&m(e.maps),s(e.success,e.message,t("#move_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#move_markers_section"))})).always((function(){r(t(this))}))})),t("#remove_markers_map").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#remove_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_remove_markers",nonce:t(this).data("nonce"),map:t("#remove_markers_map").val()},beforeSend:function(){o(t(this))}}).done((function(e){e.success&&m(e.maps),s(e.success,e.message,t("#remove_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#remove_markers_section"))})).always((function(){r(t(this))}))})),t("#delete_all_maps_confirm").on("change",(function(){t(this).prop("checked")?t("#delete_all_maps").prop("disabled",!1):t("#delete_all_maps").prop("disabled",!0)})),t("#delete_all_maps").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_maps",nonce:t(this).data("nonce"),confirm:t("#delete_all_maps_confirm").prop("checked"),truncate:t("#delete_all_maps_reset_ids").prop("checked")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#delete_all_maps_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#delete_all_maps_section"))})).always((function(){r(t(this))}))})),t("#delete_all_markers_confirm").on("change",(function(){t(this).prop("checked")?t("#delete_all_markers").prop("disabled",!1):t("#delete_all_markers").prop("disabled",!0)})),t("#delete_all_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_all_markers",nonce:t(this).data("nonce"),confirm:t("#delete_all_markers_confirm").prop("checked"),truncate:t("#delete_all_markers_reset_ids").prop("checked")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#delete_all_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#delete_all_markers_section"))})).always((function(){r(t(this))}))})),t("#assign_markers_map").select2({width:"400px",ajax:l("mmp_query_maps")}),t("#assign_markers").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_assign_markers",nonce:t(this).data("nonce"),map:t("#assign_markers_map").val()},beforeSend:function(){o(t(this))}}).done((function(e){e.success&&m(e.maps),s(e.success,e.message,t("#assign_markers_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#assign_markers_section"))})).always((function(){r(t(this))}))})),t("#register_strings").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_strings",nonce:t(this).data("nonce")},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#register_strings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#register_strings_section"))})).always((function(){r(t(this))}))})),t("input[name=test_mode]").on("change",(function(){"on"===t(this).val()?(t("#test_mode_wrap").attr("class","mmp-test-mode-on"),t("#test_mode_status").html(mmpAdminL10n.tools.testModeOn)):(t("#test_mode_wrap").attr("class","mmp-test-mode-off"),t("#test_mode_status").html(mmpAdminL10n.tools.testModeOff))})),t("#assign_maps").select2({width:"220px",ajax:l("mmp_query_maps")}),t("#import_file").on("change",(function(){if(t("#import_start").prop("disabled",!0),this.files.length){var e=t("#import_max_size").val();e<=0||this.files[0].size<=e?(t("#import_filesize_error").hide(),t("#import_start").prop("disabled",!1)):t("#import_filesize_error").show()}else t("#import_filesize_error").hide()})),t("#import_form").on("submit",(function(e){e.preventDefault(),e.stopPropagation();var i=new FormData(this);t.ajax({type:"POST",url:ajaxurl,context:this,data:i,processData:!1,contentType:!1,beforeSend:function(){o(t("#import_start")),t("#import_log").empty()}}).done((function(e){if(e.success){var i=e.summary+"\n";t.each(e.details,(function(t,e){i+="["+(t+1)+"] "+e.message+"\n"})),t("#import_log").text(i),m(e.maps)}else t("#import_log").append(e.message)})).fail((function(){t("#import_log").append("Failed to send request")})).always((function(){r(t("#import_start"))}))})),t("#export_include, #export_exclude").select2({width:"220px",ajax:l("mmp_query_maps")}),t("#export_form").on("submit",(function(e){e.preventDefault(),e.stopPropagation(),t.ajax({type:"POST",url:ajaxurl,context:this,data:t(this).serialize(),beforeSend:function(){o(t("#export_start")),t("#export_log").empty()}}).done((function(e){e.success?(t("#export_log").append(e.response.message),window.location.href=e.response.url):t("#export_log").append(e.response)})).fail((function(){t("#export_log").append(mmpAdminL10n.global.ajaxError)})).always((function(){r(t("#export_start"))}))})),t("#reset_database_confirm").on("change",(function(){t(this).prop("checked")?t("#reset_database").prop("disabled",!1):t("#reset_database").prop("disabled",!0)})),t("#reset_database").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_database",nonce:t(this).data("nonce"),confirm:t("#reset_database_confirm").prop("checked")},beforeSend:function(){o(t(this))}}).done((function(e){e.success&&m(e.maps),s(e.success,e.message,t("#reset_database_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#reset_database_section"))})).always((function(){r(t(this))}))})),t("#reset_settings_confirm").on("change",(function(){t(this).prop("checked")?t("#reset_settings").prop("disabled",!1):t("#reset_settings").prop("disabled",!0)})),t("#reset_settings").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_settings",nonce:t(this).data("nonce"),confirm:t("#reset_settings_confirm").prop("checked"),reset:{plugin:t("#reset_plugin_settings").prop("checked"),map:t("#reset_map_settings").prop("checked"),marker:t("#reset_marker_settings").prop("checked")}},beforeSend:function(){o(t(this))}}).done((function(e){s(e.success,e.message,t("#reset_settings_section"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#reset_settings_section"))})).always((function(){r(t(this))}))})),t("#data_migration_check").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_check_migration",nonce:t(this).data("nonce")},beforeSend:function(){t(this).prop("disabled",!0),t(this).addClass("mmp-button-loading")}}).done((function(e){t("#migration_log").html(e.log),t(".mmp-migration-shortcode").on("click",(function(){t(this).trigger("select")})),t("#data_migration_start").prop("disabled",!1)})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#data_migration"))})).always((function(){t(this).removeClass("mmp-button-loading")}))})),t("#data_migration_start").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_data_migration",nonce:t(this).data("nonce")},beforeSend:function(){t(this).prop("disabled",!0),t(this).addClass("mmp-button-loading")}}).done((function(e){s(e.success,e.message,t("#data_migration"))})).fail((function(){s(!1,mmpAdminL10n.global.ajaxError,t("#data_migration"))})).always((function(){t(this).removeClass("mmp-button-loading")}))})),t(".mmp-admin-modal, .mmp-admin-modal-close").on("click",(function(e){e.target===this&&(t("#icons").hide(),t("#iconsGpx").hide(),t("#markerIcons").hide())})),t(window).on("hashchange",(function(){var t=document.location.toString().split("#")[1];void 0!==t&&n(t)})),n(void 0!==e?e:t(".mmp-tablink").first().attr("id").replace("_tab","")),t(".mmp-batch-settings-tablink").first().trigger("click")}(jQuery)};var rl=function(){!function(t){function e(e){t(".mmp-license-error").remove(),t(".mmp-license-section button").prop("disabled",!0),t(e).addClass("mmp-button-loading")}function i(e){t(e).removeClass("mmp-button-loading"),t(".mmp-license-section button").prop("disabled",!1)}function n(e,i){t(e).closest(".mmp-license-section").after('<div class="notice notice-error mmp-license-error"><p>'+i+"</p></div>")}t("#update_license").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_license",nonce:t(this).data("nonce"),key:t("#license_key").val(),multisite:t("#distribute_multisite").prop("checked")?1:0},beforeSend:function(){e(this)}}).done((function(t){t.success?location.reload():n(this,t.response)})).fail((function(){n(this,mmpAdminL10n.global.ajaxError)})).always((function(){i(this)}))})),t("#personal_trial_submit").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_personal_trial",nonce:t(this).data("nonce"),first_name:t("#personal_trial_first_name").val(),last_name:t("#personal_trial_last_name").val(),email:t("#personal_trial_email").val(),tos:t("#personal_trial_tos").prop("checked")?1:0},beforeSend:function(){e(this)}}).done((function(t){t.success?location.reload():n(this,t.response)})).fail((function(){n(this,mmpAdminL10n.global.ajaxError)})).always((function(){i(this)}))})),t("#anonymous_trial_show").on("click",(function(e){e.preventDefault(),e.stopPropagation(),t(this).remove(),t("#anonymous_trial").removeClass("mmp-hidden")})),t("#anonymous_trial_submit").on("click",(function(){t.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_anonymous_trial",nonce:t(this).data("nonce"),tos:t("#anonymous_trial_tos").prop("checked")?1:0},beforeSend:function(){e(this)}}).done((function(t){t.success?location.reload():n(this,t.response)})).fail((function(){n(this,mmpAdminL10n.global.ajaxError)})).always((function(){i(this)}))}))}(jQuery)};window.MapsMarkerPro=ws,window.editMapActions=Ls,window.listMapsActions=Ps,window.editMarkerActions=el,window.listMarkersActions=il,window.settingsActions=nl,window.toolsActions=ol,window.licenseActions=rl},4107:function(t,e,i){var n,o,r;o=[i(5243)],void 0===(r="function"==typeof(n=function(t){var e="polyline-measure-control",i="polyline-measure-unicode-icon";return t.Control.PolylineMeasure=t.Control.extend({options:{position:"topleft",unit:"metres",clearMeasurementsOnStop:!0,showBearings:!1,bearingTextIn:"In",bearingTextOut:"Out",tooltipTextFinish:"Click to <b>finish line</b><br>",tooltipTextDelete:"Press SHIFT-key and click to <b>delete point</b>",tooltipTextMove:"Click and drag to <b>move point</b><br>",tooltipTextResume:"<br>Press CTRL-key and click to <b>resume line</b>",tooltipTextAdd:"Press CTRL-key and click to <b>add point</b>",measureControlTitleOn:"Turn on PolylineMeasure",measureControlTitleOff:"Turn off PolylineMeasure",measureControlLabel:"&#8614;",measureControlClasses:[],showClearControl:!1,clearControlTitle:"Clear Measurements",clearControlLabel:"&times;",clearControlClasses:[],showUnitControl:!1,distanceShowSameUnit:!1,unitControlTitle:{text:"Change Units",metres:"metres",landmiles:"land miles",nauticalmiles:"nautical miles"},unitControlLabel:{metres:"m",kilometres:"km",feet:"ft",landmiles:"mi",nauticalmiles:"nm"},tempLine:{color:"#00f",weight:2},fixedLine:{color:"#006",weight:2},startCircle:{color:"#000",weight:1,fillColor:"#0f0",fillOpacity:1,radius:3},intermedCircle:{color:"#000",weight:1,fillColor:"#ff0",fillOpacity:1,radius:3},currentCircle:{color:"#000",weight:1,fillColor:"#f0f",fillOpacity:1,radius:6},endCircle:{color:"#000",weight:1,fillColor:"#f00",fillOpacity:1,radius:3}},_arcpoints:100,_circleNr:-1,_lineNr:-1,_createControl:function(e,i,n,o,r,a){var s=document.createElement("a");return s.innerHTML=e,s.setAttribute("title",i),n.forEach((function(t){s.classList.add(t)})),t.DomEvent.on(s,"click",r,a),o.appendChild(s),s},onAdd:function(n){var o=this;n.on("movestart ",(function(){o._mapdragging=!0})),this._container=document.createElement("div"),this._container.classList.add("leaflet-bar"),t.DomEvent.disableClickPropagation(this._container);var r=this.options.measureControlTitleOn,a=this.options.measureControlLabel,s=this.options.measureControlClasses;return-1!=a.indexOf("&")&&s.push(i),this._arrPolylines=[],this._measureControl=this._createControl(a,r,s,this._container,this._toggleMeasure,this),this._defaultControlBgColor=this._measureControl.style.backgroundColor,this._measureControl.setAttribute("id",e),this.options.showClearControl&&(r=this.options.clearControlTitle,a=this.options.clearControlLabel,s=this.options.clearControlClasses,-1!=a.indexOf("&")&&s.push(i),this._clearMeasureControl=this._createControl(a,r,s,this._container,this._clearAllMeasurements,this),this._clearMeasureControl.classList.add("polyline-measure-clearControl")),this.options.showUnitControl&&("metres"==this.options.unit?(a=this.options.unitControlLabel.metres,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"):"landmiles"==this.options.unit?(a=this.options.unitControlLabel.landmiles,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):(a=this.options.unitControlLabel.nauticalmiles,r=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"),s=[],this._unitControl=this._createControl(a,r,s,this._container,this._changeUnit,this),this._unitControl.setAttribute("id","unitControlId")),this._container},onRemove:function(){this._measuring&&this._toggleMeasure()},_saveNonpolylineEvents:function(){this._nonpolylineTargets=this._map._targets,void 0!==this._polylineTargets?this._map._targets=this._polylineTargets:this._map._targets={}},_savePolylineEvents:function(){this._polylineTargets=this._map._targets,this._map._targets=this._nonpolylineTargets},_toggleMeasure:function(){this._measuring=!this._measuring,this._measuring?(this._mapdragging=!1,this._saveNonpolylineEvents(),this._measureControl.classList.add("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this.options.backgroundColor,this._measureControl.title=this.options.measureControlTitleOff,this._oldCursor=this._map._container.style.cursor,this._map._container.style.cursor="crosshair",this._doubleClickZoom=this._map.doubleClickZoom.enabled(),this._map.doubleClickZoom.disable(),this._layerPaint||(this._layerPaint=t.layerGroup().addTo(this._map)),this._map.on("mousemove",this._mouseMove,this),this._map.on("click",this._mouseClick,this),t.DomEvent.on(document,"keydown",this._onKeyDown,this),this._resetPathVariables()):(this._savePolylineEvents(),this._measureControl.classList.remove("polyline-measure-controlOnBgColor"),this._measureControl.style.backgroundColor=this._defaultControlBgColor,this._measureControl.title=this.options.measureControlTitleOn,this._map._container.style.cursor=this._oldCursor,this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.off("mouseup",this._dragCircleMouseup,this),t.DomEvent.off(document,"keydown",this._onKeyDown,this),this._doubleClickZoom&&this._map.doubleClickZoom.enable(),this.options.clearMeasurementsOnStop&&this._layerPaint&&this._clearAllMeasurements(),0!==this._cntCircle&&this._finishPolylinePath()),this._map.fire("polylinemeasure:toggle",{sttus:this._measuring})},_clearAllMeasurements:function(){void 0!==this._cntCircle&&0!==this._cntCircle&&this._finishPolylinePath(),this._layerPaint&&this._layerPaint.clearLayers(),this._arrPolylines=[],this._map.fire("polylinemeasure:clear")},_changeUnit:function(){"metres"==this.options.unit?(this.options.unit="landmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.landmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.landmiles+"]"):"landmiles"==this.options.unit?(this.options.unit="nauticalmiles",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.nauticalmiles,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.nauticalmiles+"]"):(this.options.unit="metres",document.getElementById("unitControlId").innerHTML=this.options.unitControlLabel.metres,this._unitControl.title=this.options.unitControlTitle.text+" ["+this.options.unitControlTitle.metres+"]"),this._arrPolylines.map(function(t){var e=0;t.circleCoords.map(function(i,n){if(n>=1){var o=t.circleCoords[n-1].distanceTo(t.circleCoords[n]);e+=o,this._updateTooltip(t.tooltips[n],t.tooltips[n-1],e,o,t.circleCoords[n-1],t.circleCoords[n])}}.bind(this))}.bind(this))},_onKeyDown:function(t){if(27===t.keyCode){if(!0===this._resumeFirstpointFlag){this._resumeFirstpointFlag=!1;var e=this._lineNr;this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._layerPaint.removeLayer(this._tooltipNew),this._arrPolylines[e].circleMarkers[0].setStyle(this.options.startCircle);var i="",n=0;return!0===this.options.showBearings&&(i=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),i+='<div class="polyline-measure-tooltip-difference">+0</div>',i+='<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[e].tooltips[0]._icon.innerHTML=i,this._arrPolylines[e].tooltips.map(function(t,i){if(i>=1){var o=this._arrPolylines[e].circleCoords[i-1].distanceTo(this._arrPolylines[e].circleCoords[i]),r=this._arrPolylines[e].circleCoords[i-1],a=this._arrPolylines[e].circleCoords[i];n+=o;var s=this._arrPolylines[e].tooltips[i-1];this._updateTooltip(t,s,n,o,r,a)}}.bind(this)),void this._map.on("mousemove",this._mouseMove,this)}this._currentLine?this._finishPolylinePath(t):this._toggleMeasure()}},_getDistance:function(t){var e,i=t;return"nauticalmiles"===this.options.unit?(e=this.options.unitControlLabel.nauticalmiles,i>=185200?i=(i/1852).toFixed(0):i>=18520?i=(i/1852).toFixed(1):i>=1852?i=(i/1852).toFixed(2):this.options.distanceShowSameUnit?i=(i/1852).toFixed(3):(i=(i/.3048).toFixed(0),e=this.options.unitControlLabel.feet)):"landmiles"===this.options.unit?(e=this.options.unitControlLabel.landmiles,i>=160934.4?i=(i/1609.344).toFixed(0):i>=16093.44?i=(i/1609.344).toFixed(1):i>=1609.344?i=(i/1609.344).toFixed(2):this.options.distanceShowSameUnit?i=(i/1609.344).toFixed(3):(i=(i/.3048).toFixed(0),e=this.options.unitControlLabel.feet)):(e=this.options.unitControlLabel.kilometres,i>=1e5?i=(i/1e3).toFixed(0):i>=1e4?i=(i/1e3).toFixed(1):i>=1e3?i=(i/1e3).toFixed(2):this.options.distanceShowSameUnit?i=(i/1e3).toFixed(3):(i=i.toFixed(0),e=this.options.unitControlLabel.metres)),{value:i,unit:e}},_polylineArc:function(t,e){function i(t){var e=Math.sin((1-t)*l)/Math.sin(l),i=Math.sin(t*l)/Math.sin(l),n=e*Math.cos(o)*Math.cos(r)+i*Math.cos(a)*Math.cos(s),c=e*Math.cos(o)*Math.sin(r)+i*Math.cos(a)*Math.sin(s),h=e*Math.sin(o)+i*Math.sin(a),u=180/Math.PI*Math.atan2(h,Math.sqrt(Math.pow(n,2)+Math.pow(c,2))),p=180/Math.PI*Math.atan2(c,n),d=p-180*r/Math.PI;function m(t){return Math[t>0?"floor":"ceil"](t)}return[u,p-=d<0?360*m((d-180)/360):360*m((d+180)/360)]}function n(t){for(var e=[],n=1/(t-1),o=0;o<t;o++){var r=i(n*o);e.push(r)}return e}var o=t.lat,r=t.lng,a=e.lat,s=e.lng;o=o*Math.PI/180,r=r*Math.PI/180,a=a*Math.PI/180,s=s*Math.PI/180;var l=2*Math.asin(Math.sqrt(Math.pow(Math.sin((o-a)/2),2)+Math.cos(o)*Math.cos(a)*Math.pow(Math.sin((r-s)/2),2)));return 0===l?[[o,r]]:n(this._arcpoints)},_updateTooltip:function(t,e,i,n,o,r){var a=function(t,e,i){var n=t.lat/180*Math.PI,o=e.lat/180*Math.PI,r=t.lng/180*Math.PI,a=e.lng/180*Math.PI,s=Math.sin(a-r)*Math.cos(o),l=Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(a-r);if("inbound"===i)var c=(180*Math.atan2(s,l)/Math.PI+180).toFixed(0);else c=(180*Math.atan2(s,l)/Math.PI+360).toFixed(0);return c%360},s=a(r,o,"inbound"),l=a(o,r,"outbound"),c=this._getDistance(i),h=this._getDistance(n),u="";if(h.value>0&&(!0===this.options.showBearings&&(u=this.options.bearingTextIn+": "+s+"°<br>"+this.options.bearingTextOut+":---°"),u+='<div class="polyline-measure-tooltip-difference">+'+h.value+"&nbsp;"+h.unit+"</div>"),u+='<div class="polyline-measure-tooltip-total">'+c.value+"&nbsp;"+c.unit+"</div>",t._icon.innerHTML=u,!0===this.options.showBearings&&e){var p=e._icon.innerHTML,d=new RegExp(this.options.bearingTextOut+".*°"),m=p.replace(d,this.options.bearingTextOut+": "+l+"°");e._icon.innerHTML=m}},_drawArrow:function(e){var i=Math.round(e.length/2),n=e[i-1],o=e[i],r=o[1]-n[1],a=o[0]-n[0],s=[n[0]+a/2,n[1]+r/2],l=57.29578*-Math.atan2(a,r),c=t.divIcon({className:"",iconSize:[16,16],iconAnchor:[8,8],html:"<div style = 'font-size: 16px; line-height: 16px; vertical-align:top; transform: rotate("+l+"deg)'>&#x27a4;</div>"}),h=t.marker(s,{icon:c,zIndexOffset:-50}).addTo(this._layerPaint);return this._currentLine||h.bindTooltip(this.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),h.on("click",this._clickedArrow,this),h},_mouseMove:function(t){var e=t.latlng;if(this._map.on("click",this._mouseClick,this),e&&this._currentLine){var i=this._currentLine.circleCoords.last();this._rubberlinePath.setLatLngs(this._polylineArc(i,e));var n=this._currentLine.tooltips.last(),o=this._currentLine.tooltips.slice(-2,-1)[0];n.setLatLng(e);var r=e.distanceTo(i);this._updateTooltip(n,o,this._currentLine.distance+r,r,i,e)}},_startLine:function(e){var i=t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),n=function(){return this.slice(-1)[0]};this._rubberlinePath=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack();var o=this;this._currentLine={id:0,circleCoords:[],circleMarkers:[],arrowMarkers:[],tooltips:[],distance:0,polylinePath:t.polyline([],{color:this.options.fixedLine.color,weight:this.options.fixedLine.weight,interactive:!1}).addTo(this._layerPaint).bringToBack(),handleMarkers:function(e){var i=this.circleMarkers.last();i&&(i.bindTooltip(o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),i.off("click",o._finishPolylinePath,o),1===this.circleMarkers.length?i.setStyle(o.options.startCircle):i.setStyle(o.options.intermedCircle));var n=new t.CircleMarker(e,o.options.currentCircle).addTo(o._layerPaint);n.bindTooltip(o.options.tooltipTextFinish+o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),n.cntLine=o._currentLine.id,n.cntCircle=o._cntCircle,o._cntCircle++,n.on("mousedown",o._dragCircle,o),n.on("click",o._finishPolylinePath,o),this.circleMarkers.push(n)},getNewToolTip:function(e){return t.marker(e,{icon:i,interactive:!1})},addPoint:function(t){var e=this.circleCoords.last();if(!e||!e.equals(t)){if(this.circleCoords.push(t),this.circleCoords.length>1){var i=o._polylineArc(e,t);this.circleCoords.length>2&&i.shift(),this.polylinePath.setLatLngs(this.polylinePath.getLatLngs().concat(i));var n=o._drawArrow(i);n.cntLine=o._currentLine.id,n.cntArrow=o._cntCircle-1,o._currentLine.arrowMarkers.push(n);var r=e.distanceTo(t);this.distance+=r;var a=o._currentLine.tooltips.last(),s=o._currentLine.tooltips.slice(-1,-2)[0];o._updateTooltip(a,s,this.distance,r,e,t)}a&&a.setLatLng(t);var l=this.getNewToolTip(t);l.addTo(o._layerPaint),this.tooltips.push(l),this.handleMarkers(t)}},finalize:function(){if(o._layerPaint.removeLayer(this.tooltips.last()),this.tooltips.pop(),o._layerPaint.removeLayer(o._rubberlinePath),this.circleCoords.length>1){this.tooltips.last()._icon.classList.add("polyline-measure-tooltip-end");var t=this.circleMarkers.last();t.setStyle(o.options.endCircle),t.unbindTooltip(),o._currentLine.circleMarkers.map((function(t){t.bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})})),o._currentLine.circleMarkers[0].bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete+o.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),t.bindTooltip(o.options.tooltipTextMove+o.options.tooltipTextDelete+o.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),o._currentLine.arrowMarkers.map((function(t){t.bindTooltip(o.options.tooltipTextAdd,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"})})),t.off("click",o._finishPolylinePath,o),t.on("click",o._resumePolylinePath,o),o._arrPolylines.push(this)}else o._layerPaint.removeLayer(this.circleMarkers.last()),o._layerPaint.removeLayer(this.tooltips.last());o._resetPathVariables()}};var r=t.marker(e,{icon:i,interactive:!1});r.addTo(this._layerPaint);var a="";!0===this.options.showBearings&&(a=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),a+='<div class="polyline-measure-tooltip-difference">+0</div>',a+='<div class="polyline-measure-tooltip-total">0</div>',r._icon.innerHTML=a,this._currentLine.tooltips.push(r),this._currentLine.circleCoords.last=n,this._currentLine.tooltips.last=n,this._currentLine.circleMarkers.last=n,this._currentLine.id=this._arrPolylines.length},_mouseClick:function(t){!t.latlng||this._finishCircleScreencoords&&this._finishCircleScreencoords.equals(t.containerPoint)||(this._currentLine||this._mapdragging||(this._startLine(t.latlng),this._map.fire("polylinemeasure:start",this._currentLine)),this._mapdragging?this._mapdragging=!1:(this._currentLine.addPoint(t.latlng),this._map.fire("polylinemeasure:add",t)))},_finishPolylinePath:function(t){this._map.fire("polylinemeasure:finish",this._currentLine),this._currentLine.finalize(),t&&(this._finishCircleScreencoords=t.containerPoint)},_resumePolylinePath:function(e){if(!0===e.originalEvent.ctrlKey){this._currentLine=this._arrPolylines[e.target.cntLine],this._rubberlinePath=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._currentLine.tooltips.last()._icon.classList.remove("polyline-measure-tooltip-end");var i=this._currentLine.getNewToolTip(e.latlng);i.addTo(this._layerPaint),this._currentLine.tooltips.push(i),this._currentLine.circleMarkers.last().unbindTooltip(),this._currentLine.circleMarkers.last().bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.last().setStyle(this.options.currentCircle),this._cntCircle=this._currentLine.circleCoords.length,this._map.fire("polylinemeasure:resume",this._currentLine)}},_resetPathVariables:function(){this._cntCircle=0,this._currentLine=null},_clickedArrow:function(e){if(e.originalEvent.ctrlKey){var i=e.target.cntLine,n=e.target.cntArrow;this._arrPolylines[i].arrowMarkers[n].removeFrom(this._layerPaint);var o=new t.CircleMarker(e.latlng,this.options.intermedCircle).addTo(this._layerPaint);o.cntLine=i,o.on("mousedown",this._dragCircle,this),o.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.splice(n+1,0,o),this._arrPolylines[i].circleMarkers.map((function(t,e){t.cntCircle=e})),this._arrPolylines[i].circleCoords.splice(n+1,0,e.latlng),lineCoords=this._arrPolylines[i].polylinePath.getLatLngs();var r=this._polylineArc(this._arrPolylines[i].circleCoords[n],e.latlng);r.pop();var a=this._polylineArc(e.latlng,this._arrPolylines[i].circleCoords[n+2]);Array.prototype.splice.apply(lineCoords,[n*(this._arcpoints-1),this._arcpoints].concat(r,a)),this._arrPolylines[i].polylinePath.setLatLngs(lineCoords);var s=this._drawArrow(r);this._arrPolylines[i].arrowMarkers[n]=s,s=this._drawArrow(a),this._arrPolylines[i].arrowMarkers.splice(n+1,0,s),this._arrPolylines[i].arrowMarkers.map((function(t,e){t.cntLine=i,t.cntArrow=e})),this._tooltipNew=t.marker(e.latlng,{icon:t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint),this._arrPolylines[i].tooltips.splice(n+1,0,this._tooltipNew);var l=0;this._arrPolylines[i].tooltips.map(function(t,e){if(e>=1){var n=this._arrPolylines[i].circleCoords[e-1].distanceTo(this._arrPolylines[i].circleCoords[e]),o=this._arrPolylines[i].circleCoords[e-1],r=this._arrPolylines[i].circleCoords[e];l+=n;var a=this._arrPolylines[i].tooltips[e-1];this._updateTooltip(t,a,l,n,o,r)}}.bind(this)),this._map.fire("polylinemeasure:insert",e)}},_dragCircleMouseup:function(){0===this._circleNr||this._circleNr===this._arrPolylines[this._lineNr].circleCoords.length-1?this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}):this._e1.target.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._resetPathVariables(),this._map.off("mousemove",this._dragCircleMousemove,this),this._map.dragging.enable(),this._map.on("mousemove",this._mouseMove,this),this._map.off("mouseup",this._dragCircleMouseup,this),this._map.fire("polylinemeasure:move",this._e1)},_dragCircleMousemove:function(e){var i=e.latlng.lat,n=e.latlng.lng,o=i-this._mouseStartingLat,r=n-this._mouseStartingLng,a=t.latLng(this._circleStartingLat+o,this._circleStartingLng+r),s=this._arcpoints,l=this._e1.target.cntLine;this._lineNr=l;var c=this._e1.target.cntCircle;this._circleNr=c,this._e1.target.setLatLng(a),this._e1.target.unbindTooltip(),this._arrPolylines[l].circleCoords[c]=a;var h=this._arrPolylines[l].polylinePath.getLatLngs();if(c>=1){var u=this._polylineArc(this._arrPolylines[l].circleCoords[c-1],a);Array.prototype.splice.apply(h,[(c-1)*(s-1),s].concat(u));var p=this._drawArrow(u);p.cntLine=l,p.cntArrow=c-1,this._arrPolylines[l].arrowMarkers[c-1].removeFrom(this._layerPaint),this._arrPolylines[l].arrowMarkers[c-1]=p}if(c<this._arrPolylines[l].circleCoords.length-1){var d=this._polylineArc(a,this._arrPolylines[l].circleCoords[c+1]);Array.prototype.splice.apply(h,[c*(s-1),s].concat(d)),(p=this._drawArrow(d)).cntLine=l,p.cntArrow=c,this._arrPolylines[l].arrowMarkers[c].removeFrom(this._layerPaint),this._arrPolylines[l].arrowMarkers[c]=p}this._arrPolylines[l].polylinePath.setLatLngs(h),c>=0&&this._arrPolylines[l].tooltips[c].setLatLng(a);var m=0;this._arrPolylines[l].tooltips.map(function(t,e){if(e>=1){var i=this._arrPolylines[l].circleCoords[e-1].distanceTo(this._arrPolylines[l].circleCoords[e]),n=this._arrPolylines[l].circleCoords[e-1],o=this._arrPolylines[l].circleCoords[e];m+=i,this._arrPolylines[l].distance=m;var r=this._arrPolylines[l].tooltips[e-1];this._updateTooltip(t,r,m,i,n,o)}}.bind(this)),this._map.on("mouseup",this._dragCircleMouseup,this)},_resumeFirstpointMousemove:function(t){var e=this._lineNr;this._map.on("click",this._resumeFirstpointClick,this);var i=t.latlng;this._rubberlinePath2.setLatLngs(this._polylineArc(i,currentCircleCoords)),this._tooltipNew.setLatLng(i);var n=0,o=i.distanceTo(this._arrPolylines[e].circleCoords[0]),r=i,a=this._arrPolylines[e].circleCoords[0];n+=o;var s=this._tooltipNew,l=this._arrPolylines[e].tooltips[0];this._updateTooltip(l,s,n,o,r,a),this._arrPolylines[e].tooltips.map(function(t,i){if(i>=1){var o=this._arrPolylines[e].circleCoords[i-1].distanceTo(this._arrPolylines[e].circleCoords[i]),r=this._arrPolylines[e].circleCoords[i-1],a=this._arrPolylines[e].circleCoords[i];n+=o;var s=this._arrPolylines[e].tooltips[i-1];this._updateTooltip(t,s,n,o,r,a)}}.bind(this))},_resumeFirstpointClick:function(e){var i=this._lineNr;this._resumeFirstpointFlag=!1,this._map.off("mousemove",this._resumeFirstpointMousemove,this),this._map.off("click",this._resumeFirstpointClick,this),this._layerPaint.removeLayer(this._rubberlinePath2),this._arrPolylines[i].circleMarkers[0].setStyle(this.options.intermedCircle),this._arrPolylines[i].circleMarkers[0].unbindTooltip(),this._arrPolylines[i].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"});var n=new t.CircleMarker(e.latlng,this.options.startCircle).addTo(this._layerPaint);n.cntLine=i,n.cntCircle=0,n.on("mousedown",this._dragCircle,this),n.bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[i].circleMarkers.unshift(n),this._arrPolylines[i].circleMarkers.map((function(t,e){t.cntCircle=e})),this._arrPolylines[i].circleCoords.unshift(e.latlng);var o=this._polylineArc(e.latlng,currentCircleCoords),r=this._drawArrow(o);this._arrPolylines[i].arrowMarkers.unshift(r),this._arrPolylines[i].arrowMarkers.map((function(t,e){t.cntLine=i,t.cntArrow=e})),o.pop(),this._arrPolylines[i].polylinePath.setLatLngs(o.concat(this._arrPolylines[i].polylinePath.getLatLngs())),this._arrPolylines[i].tooltips.unshift(this._tooltipNew),this._map.on("mousemove",this._mouseMove,this)},_dragCircle:function(e){var i=this._arcpoints;if(e.originalEvent.ctrlKey){if(this._map.off("click",this._mouseClick,this),0===e.target.cntCircle){this._resumeFirstpointFlag=!0,this._lineNr=e.target.cntLine;var n=this._lineNr;this._circleNr=e.target.cntCircle,currentCircleCoords=e.latlng,this._arrPolylines[n].circleMarkers[0].setStyle(this.options.currentCircle),this._rubberlinePath2=t.polyline([],{color:this.options.tempLine.color,weight:this.options.tempLine.weight,interactive:!1,dashArray:"8,8"}).addTo(this._layerPaint).bringToBack(),this._tooltipNew=t.marker(currentCircleCoords,{icon:t.divIcon({className:"polyline-measure-tooltip",iconAnchor:[-4,-4]}),interactive:!1}),this._tooltipNew.addTo(this._layerPaint);var o="";!0===this.options.showBearings&&(o=o+this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),o+='<div class="polyline-measure-tooltip-difference">+0</div>',o+='<div class="polyline-measure-tooltip-total">0</div>',this._tooltipNew._icon.innerHTML=o,this._map.off("mousemove",this._mouseMove,this),this._map.on("mousemove",this._resumeFirstpointMousemove,this)}}else if(e.originalEvent.shiftKey){this._lineNr=e.target.cntLine,n=this._lineNr,this._circleNr=e.target.cntCircle;var r=this._circleNr;if(this._arrPolylines[n]){if(2===this._arrPolylines[n].circleMarkers.length)return this._layerPaint.removeLayer(this._arrPolylines[n].circleMarkers[1]),this._layerPaint.removeLayer(this._arrPolylines[n].tooltips[1]),this._layerPaint.removeLayer(this._arrPolylines[n].circleMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[n].tooltips[0]),this._layerPaint.removeLayer(this._arrPolylines[n].arrowMarkers[0]),this._layerPaint.removeLayer(this._arrPolylines[n].polylinePath),void this._map.fire("polylinemeasure:remove",e);this._arrPolylines[n].circleCoords.splice(r,1),this._arrPolylines[n].circleMarkers[r].removeFrom(this._layerPaint),this._arrPolylines[n].circleMarkers.splice(r,1),this._arrPolylines[n].circleMarkers.map((function(t,e){t.cntCircle=e}));var a=this._arrPolylines[n].polylinePath.getLatLngs();if(this._arrPolylines[n].tooltips[r].removeFrom(this._layerPaint),this._arrPolylines[n].tooltips.splice(r,1),!this._arrPolylines[n].circleMarkers.length)return this._arrPolylines.splice(n,1),void this._arrPolylines.forEach((function(t,e){t.circleMarkers.map((function(t){t.cntLine=e})),t.arrowMarkers.map((function(t){t.cntLine=e}))}));if(0===r)this._arrPolylines[n].circleMarkers[0].setStyle(this.options.startCircle),a.splice(0,i-1),this._arrPolylines[n].circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[n].arrowMarkers[r].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers.splice(0,1),o="",!0===this.options.showBearings&&(o=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),o+='<div class="polyline-measure-tooltip-difference">+0</div>',o+='<div class="polyline-measure-tooltip-total">0</div>',this._arrPolylines[n].tooltips[0]._icon.innerHTML=o;else if(r===this._arrPolylines[n].circleCoords.length)this._arrPolylines[n].circleMarkers[r-1].on("click",this._resumePolylinePath,this),this._arrPolylines[n].circleMarkers[r-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._arrPolylines[n].circleMarkers.slice(-1)[0].setStyle(this.options.endCircle),this._arrPolylines[n].tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),a.splice(-(i-1),i-1),this._arrPolylines[n].arrowMarkers[r-1].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers.splice(-1,1);else{newLineSegment=this._polylineArc(this._arrPolylines[n].circleCoords[r-1],this._arrPolylines[n].circleCoords[r]),Array.prototype.splice.apply(a,[(r-1)*(i-1),2*i-1].concat(newLineSegment)),this._arrPolylines[n].arrowMarkers[r-1].removeFrom(this._layerPaint),this._arrPolylines[n].arrowMarkers[r].removeFrom(this._layerPaint);var s=this._drawArrow(newLineSegment);this._arrPolylines[n].arrowMarkers.splice(r-1,2,s)}this._arrPolylines[n].polylinePath.setLatLngs(a),this._arrPolylines[n].arrowMarkers.map((function(t,e){t.cntLine=n,t.cntArrow=e}));var l=0;this._arrPolylines[n].tooltips.map(function(t,e){if(e>=1){var i=this._arrPolylines[n].circleCoords[e-1].distanceTo(this._arrPolylines[n].circleCoords[e]),o=this._arrPolylines[n].circleCoords[e-1],r=this._arrPolylines[n].circleCoords[e];l+=i,this._arrPolylines[n].distance=l;var a=this._arrPolylines[n].tooltips[e-1];this._updateTooltip(t,a,l,i,o,r)}}.bind(this))}else{if(this._cntCircle--,1===this._currentLine.circleMarkers.length)return void this._currentLine.finalize();this._currentLine.circleCoords.splice(r,1),this._currentLine.circleMarkers[r].removeFrom(this._layerPaint),this._currentLine.circleMarkers.splice(r,1),this._currentLine.circleMarkers.map((function(t,e){t.cntCircle=e})),a=this._currentLine.polylinePath.getLatLngs(),this._currentLine.tooltips[r].removeFrom(this._layerPaint),this._currentLine.tooltips.splice(r,1),0===r?(1===this._currentLine.circleMarkers.length?this._currentLine.circleMarkers[0].setStyle(this.options.currentCircle):this._currentLine.circleMarkers[0].setStyle(this.options.startCircle),a.splice(0,i-1),this._currentLine.circleMarkers[0].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.arrowMarkers[r].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(0,1),o="",!0===this.options.showBearings&&(o=this.options.bearingTextIn+":---°<br>"+this.options.bearingTextOut+":---°"),o+='<div class="polyline-measure-tooltip-difference">+0</div>',o+='<div class="polyline-measure-tooltip-total">0</div>',this._currentLine.tooltips[0]._icon.innerHTML=o):r===this._currentLine.circleCoords.length?(this._currentLine.circleMarkers[r-1].on("click",this._resumePolylinePath,this),this._currentLine.circleMarkers[r-1].bindTooltip(this.options.tooltipTextMove+this.options.tooltipTextDelete+this.options.tooltipTextResume,{direction:"top",opacity:.7,className:"polyline-measure-popupTooltip"}),this._currentLine.circleMarkers.slice(-1)[0].setStyle(this.options.currentCircle),this._currentLine.tooltips.slice(-1)[0]._icon.classList.add("polyline-measure-tooltip-end"),a.splice(-(i-1),i-1),this._currentLine.arrowMarkers[r-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers.splice(-1,1)):(newLineSegment=this._polylineArc(this._currentLine.circleCoords[r-1],this._currentLine.circleCoords[r]),Array.prototype.splice.apply(a,[(r-1)*(i-1),2*i-1].concat(newLineSegment)),this._currentLine.arrowMarkers[r-1].removeFrom(this._layerPaint),this._currentLine.arrowMarkers[r].removeFrom(this._layerPaint),s=this._drawArrow(newLineSegment),this._currentLine.arrowMarkers.splice(r-1,2,s)),this._currentLine.polylinePath.setLatLngs(a),this._currentLine.arrowMarkers.map((function(t,e){t.cntLine=n,t.cntArrow=e}));var c=0;this._currentLine.tooltips.map(function(t,i,n){if(i>=1){var o,r,a=this._currentLine.tooltips[i-1],s=this._currentLine.circleCoords[i-1];i===n.length-1?(o=this._currentLine.circleCoords[i-1].distanceTo(e.latlng),r=e.latlng,this._updateTooltip(t,a,c+o,o,s,r)):(o=this._currentLine.circleCoords[i-1].distanceTo(this._currentLine.circleCoords[i]),r=this._currentLine.circleCoords[i],c+=o,this._updateTooltip(t,a,c,o,s,r))}}.bind(this)),this._currentLine.distance=c}this._map.fire("polylinemeasure:remove",e)}else this._e1=e,this._measuring&&0===this._cntCircle&&(this._map.dragging.disable(),this._map.off("mousemove",this._mouseMove,this),this._map.off("click",this._mouseClick,this),this._mouseStartingLat=e.latlng.lat,this._mouseStartingLng=e.latlng.lng,this._circleStartingLat=e.target._latlng.lat,this._circleStartingLng=e.target._latlng.lng,this._map.on("mousemove",this._dragCircleMousemove,this))}}),t.Map.mergeOptions({PolylineMeasureControl:!1}),t.Map.addInitHook((function(){this.options.polylineMeasureControl&&(this.PMControl=new t.Control.PolylineMeasure,this.addControl(this.PMControl))})),t.control.polylineMeasure=function(e){return new t.Control.PolylineMeasure(e)},t.Control.PolylineMeasure})?n.apply(e,o):n)||(t.exports=r)},5568:function(t){t.exports=function(t,e){return!(t[0]>e[2]||t[2]<e[0]||t[3]<e[1]||t[1]>e[3])}},4144:function(t,e){var i,n,o;n=[e,t],void 0===(o="function"==typeof(i=function(t,e){"use strict";var i={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(t){try{delete window[t]}catch(e){window[t]=void 0}}function r(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}function a(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t,s=e.timeout||i.timeout,l=e.jsonpCallback||i.jsonpCallback,c=void 0;return new Promise((function(i,h){var u=e.jsonpCallbackFunction||n(),p=l+"_"+u;window[u]=function(t){i({ok:!0,json:function(){return Promise.resolve(t)}}),c&&clearTimeout(c),r(p),o(u)},a+=-1===a.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+a+l+"="+u),e.charset&&d.setAttribute("charset",e.charset),d.id=p,document.getElementsByTagName("head")[0].appendChild(d),c=setTimeout((function(){h(new Error("JSONP request to "+t+" timed out")),o(u),r(p),window[u]=function(){o(u)}}),s),d.onerror=function(){h(new Error("JSONP request to "+t+" failed")),o(u),r(p),c&&clearTimeout(c)}}))}e.exports=a})?i.apply(e,n):i)||(t.exports=o)},1895:function(){"use strict";"function"!=typeof Object.assign&&(Object.assign=function(t,...e){if(!t)throw TypeError("Cannot convert undefined or null to object");for(const i of e)i&&Object.keys(i).forEach((e=>t[e]=i[e]));return t})},624:function(t,e,i){"use strict";var n,o,r,a=[i(5525),i(4785),i(8291),i(2709),i(2506),i(9176)],s=-1,l=[],c=!1;function h(){n&&o&&(n=!1,o.length?l=o.concat(l):s=-1,l.length&&u())}function u(){if(!n){c=!1,n=!0;for(var t=l.length,e=setTimeout(h);t;){for(o=l,l=[];o&&++s<t;)o[s].run();s=-1,t=l.length}o=null,s=-1,n=!1,clearTimeout(e)}}for(var p=-1,d=a.length;++p<d;)if(a[p]&&a[p].test&&a[p].test()){r=a[p].install(u);break}function m(t,e){this.fun=t,this.array=e}m.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}},t.exports=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];l.push(new m(t,e)),c||n||(c=!0,r())}},2709:function(t,e,i){"use strict";e.test=function(){return!i.g.setImmediate&&void 0!==i.g.MessageChannel},e.install=function(t){var e=new i.g.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}}},8291:function(t,e,i){"use strict";var n=i.g.MutationObserver||i.g.WebKitMutationObserver;e.test=function(){return n},e.install=function(t){var e=0,o=new n(t),r=i.g.document.createTextNode("");return o.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}},4785:function(t,e,i){"use strict";e.test=function(){return"function"==typeof i.g.queueMicrotask},e.install=function(t){return function(){i.g.queueMicrotask(t)}}},2506:function(t,e,i){"use strict";e.test=function(){return"document"in i.g&&"onreadystatechange"in i.g.document.createElement("script")},e.install=function(t){return function(){var e=i.g.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},i.g.document.documentElement.appendChild(e),t}}},9176:function(t,e){"use strict";e.test=function(){return!0},e.install=function(t){return function(){setTimeout(t,0)}}},7977:function(t,e,i){var n=i(5243),o=i(4144),r=i(5568);var a=["Aerial","AerialWithLabels","AerialWithLabelsOnDemand","Road","RoadOnDemand","CanvasLight","CanvasDark","CanvasGray","OrdnanceSurvey"],s=["AerialWithLabelsOnDemand","RoadOnDemand"];n.TileLayer.Bing=n.TileLayer.extend({options:{bingMapsKey:null,imagerySet:"Aerial",culture:"en-US",minZoom:1,minNativeZoom:1,maxNativeZoom:19},statics:{METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}?key={bingMapsKey}&include=ImageryProviders&uriScheme=https&c={culture}",POINT_METADATA_URL:"https://dev.virtualearth.net/REST/v1/Imagery/Metadata/{imagerySet}/{lat},{lng}?zl={z}&key={bingMapsKey}&uriScheme=https&c={culture}"},initialize:function(t){if("string"==typeof t&&(t={bingMapsKey:t}),t&&t.BingMapsKey&&(t.bingMapsKey=t.BingMapsKey,console.warn("use options.bingMapsKey instead of options.BingMapsKey")),!t||!t.bingMapsKey)throw new Error("Must supply options.BingMapsKey");if(t=n.setOptions(this,t),a.indexOf(t.imagerySet)<0)throw new Error("'"+t.imagerySet+"' is an invalid imagerySet, see https://github.com/digidem/leaflet-bing-layer#parameters");t&&t.style&&s.indexOf(t.imagerySet)<0&&console.warn("Dynamic styles will only work with these imagerySet choices: "+s.join(", "));var e=n.Util.template(n.TileLayer.Bing.METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,culture:this.options.culture});this._imageryProviders=[],this._attributions=[],this._fetch=o(e,{jsonpCallback:"jsonp"}).then((function(t){return t.json()})).then(this._metaDataOnLoad.bind(this)).catch(console.error.bind(console)),n.Browser.android||this.on("tileunload",this._onTileRemove)},createTile:function(t,e){var i=document.createElement("img");return n.DomEvent.on(i,"load",n.bind(this._tileOnLoad,this,e,i)),n.DomEvent.on(i,"error",n.bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",this._url?i.src=this.getTileUrl(t):this._fetch.then(function(){i.src=this.getTileUrl(t)}.bind(this)).catch((function(t){console.error(t),e(t)})),i},getTileUrl:function(t){var e=function(t,e,i){for(var n="",o=i;o>0;o--){var r=0,a=1<<o-1;0!=(t&a)&&r++,0!=(e&a)&&(r+=2),n+=r.toString()}return n}(t.x,t.y,t.z),i=n.Util.template(this._url,{quadkey:e,subdomain:this._getSubdomain(t),culture:this.options.culture});return"string"==typeof this.options.style&&(i+="&st="+this.options.style),i},onAdd:function(t){t.on("moveend",this._updateAttribution,this),n.TileLayer.prototype.onAdd.call(this,t),this._attributions.forEach((function(e){t.attributionControl.addAttribution(e)}))},onRemove:function(t){t.off("moveend",this._updateAttribution,this),this._attributions.forEach((function(e){t.attributionControl.removeAttribution(e)})),n.TileLayer.prototype.onRemove.call(this,t)},getMetaData:function(t,e){if(!(this._map||t&&e))return Promise.reject(new Error("If layer is not attached to map, you must provide LatLng and zoom"));t=t||this._map.getCenter(),e=e||this._map.getZoom();var i=n.Util.template(n.TileLayer.Bing.POINT_METADATA_URL,{bingMapsKey:this.options.bingMapsKey,imagerySet:this.options.imagerySet,z:e,lat:t.lat,lng:t.lng});return o(i,{jsonpCallback:"jsonp"}).then((function(t){return t.json()})).catch(console.error.bind(console))},_metaDataOnLoad:function(t){if(200!==t.statusCode)throw new Error("Bing Imagery Metadata error: \n"+JSON.stringify(t,null,"  "));var e=t.resourceSets[0].resources[0];return this._url=e.imageUrl,this._imageryProviders=e.imageryProviders||[],this.options.subdomains=e.imageUrlSubdomains,this._updateAttribution(),Promise.resolve()},_updateAttribution:function(){var t=this._map;if(t&&t.attributionControl){var e=t.getZoom(),i=function(t){var e=t.split(",");return[e[1],e[0],e[3],e[2]]}(t.getBounds().toBBoxString());this._fetch.then(function(){var n=this._getAttributions(i,e),o=this._attributions;n.forEach((function(e){o.indexOf(e)>-1||t.attributionControl.addAttribution(e)})),o.filter((function(e){n.indexOf(e)>-1||t.attributionControl.removeAttribution(e)})),this._attributions=n}.bind(this))}},_getAttributions:function(t,e){return this._imageryProviders.reduce((function(i,n){for(var o=0;o<n.coverageAreas.length;o++)if(r(t,n.coverageAreas[o].bbox)&&e>=n.coverageAreas[o].zoomMin&&e<=n.coverageAreas[o].zoomMax)return i.push(n.attribution),i;return i}),[])}}),n.tileLayer.bing=function(t){return new n.TileLayer.Bing(t)},t.exports=n.TileLayer.Bing},5356:function(t,e,i){var n,o,r;
/*
	Leaflet.contextmenu, a context menu for Leaflet.
	(c) 2015, Adam Ratcliffe, GeoSmart Maps Limited

	@preserve
*/o=[i(5243)],void 0===(r="function"==typeof(n=function(t){t.Map.mergeOptions({contextmenuItems:[]}),t.Map.ContextMenu=t.Handler.extend({_touchstart:t.Browser.msPointer?"MSPointerDown":t.Browser.pointer?"pointerdown":"touchstart",statics:{BASE_CLS:"leaflet-contextmenu"},initialize:function(e){t.Handler.prototype.initialize.call(this,e),this._items=[],this._visible=!1;var i=this._container=t.DomUtil.create("div",t.Map.ContextMenu.BASE_CLS,e._container);i.style.zIndex=1e4,i.style.position="absolute",e.options.contextmenuWidth&&(i.style.width=e.options.contextmenuWidth+"px"),this._createItems(),t.DomEvent.on(i,"click",t.DomEvent.stop).on(i,"mousedown",t.DomEvent.stop).on(i,"dblclick",t.DomEvent.stop).on(i,"contextmenu",t.DomEvent.stop)},addHooks:function(){var e=this._map.getContainer();t.DomEvent.on(e,"mouseleave",this._hide,this).on(document,"keydown",this._onKeyDown,this),t.Browser.touch&&t.DomEvent.on(document,this._touchstart,this._hide,this),this._map.on({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},removeHooks:function(){var e=this._map.getContainer();t.DomEvent.off(e,"mouseleave",this._hide,this).off(document,"keydown",this._onKeyDown,this),t.Browser.touch&&t.DomEvent.off(document,this._touchstart,this._hide,this),this._map.off({contextmenu:this._show,mousedown:this._hide,movestart:this._hide,zoomstart:this._hide},this)},showAt:function(e,i){e instanceof t.LatLng&&(e=this._map.latLngToContainerPoint(e)),this._showAtPoint(e,i)},hide:function(){this._hide()},addItem:function(t){return this.insertItem(t)},insertItem:function(t,e){e=void 0!==e?e:this._items.length;var i=this._createItem(this._container,t,e);return this._items.push(i),this._sizeChanged=!0,this._map.fire("contextmenu.additem",{contextmenu:this,el:i.el,index:e}),i.el},removeItem:function(e){var i=this._container;return isNaN(e)||(e=i.children[e]),e?(this._removeItem(t.Util.stamp(e)),this._sizeChanged=!0,this._map.fire("contextmenu.removeitem",{contextmenu:this,el:e}),e):null},removeAllItems:function(){for(var e,i=this._container.children;i.length;)e=i[0],this._removeItem(t.Util.stamp(e));return i},hideAllItems:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._items[t].el.style.display="none"},showAllItems:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._items[t].el.style.display=""},setDisabled:function(e,i){var n=this._container,o=t.Map.ContextMenu.BASE_CLS+"-item";isNaN(e)||(e=n.children[e]),e&&t.DomUtil.hasClass(e,o)&&(i?(t.DomUtil.addClass(e,o+"-disabled"),this._map.fire("contextmenu.disableitem",{contextmenu:this,el:e})):(t.DomUtil.removeClass(e,o+"-disabled"),this._map.fire("contextmenu.enableitem",{contextmenu:this,el:e})))},isVisible:function(){return this._visible},_createItems:function(){var t,e,i=this._map.options.contextmenuItems;for(t=0,e=i.length;t<e;t++)this._items.push(this._createItem(this._container,i[t]))},_createItem:function(e,i,n){if(i.separator||"-"===i)return this._createSeparator(e,n);var o=t.Map.ContextMenu.BASE_CLS+"-item",r=i.disabled?o+" "+o+"-disabled":o,a=this._insertElementAt("a",r,e,n),s=this._createEventHandler(a,i.callback,i.context,i.hideOnSelect),l=this._getIcon(i),c=this._getIconCls(i),h="";return l?h='<img class="'+t.Map.ContextMenu.BASE_CLS+'-icon" src="'+l+'"/>':c&&(h='<span class="'+t.Map.ContextMenu.BASE_CLS+"-icon "+c+'"></span>'),a.innerHTML=h+i.text,a.href="#",t.DomEvent.on(a,"mouseover",this._onItemMouseOver,this).on(a,"mouseout",this._onItemMouseOut,this).on(a,"mousedown",t.DomEvent.stopPropagation).on(a,"click",s),t.Browser.touch&&t.DomEvent.on(a,this._touchstart,t.DomEvent.stopPropagation),t.Browser.pointer||t.DomEvent.on(a,"click",this._onItemMouseOut,this),{id:t.Util.stamp(a),el:a,callback:s}},_removeItem:function(e){var i,n,o,r,a;for(o=0,r=this._items.length;o<r;o++)if((i=this._items[o]).id===e)return n=i.el,(a=i.callback)&&(t.DomEvent.off(n,"mouseover",this._onItemMouseOver,this).off(n,"mouseover",this._onItemMouseOut,this).off(n,"mousedown",t.DomEvent.stopPropagation).off(n,"click",a),t.Browser.touch&&t.DomEvent.off(n,this._touchstart,t.DomEvent.stopPropagation),t.Browser.pointer||t.DomEvent.on(n,"click",this._onItemMouseOut,this)),this._container.removeChild(n),this._items.splice(o,1),i;return null},_createSeparator:function(e,i){var n=this._insertElementAt("div",t.Map.ContextMenu.BASE_CLS+"-separator",e,i);return{id:t.Util.stamp(n),el:n}},_createEventHandler:function(e,i,n,o){var r=this,a=this._map,s=t.Map.ContextMenu.BASE_CLS+"-item-disabled";return o=void 0===o||o,function(l){t.DomUtil.hasClass(e,s)||(o&&r._hide(),i&&i.call(n||a,r._showLocation),r._map.fire("contextmenu.select",{contextmenu:r,el:e}))}},_insertElementAt:function(t,e,i,n){var o,r=document.createElement(t);return r.className=e,void 0!==n&&(o=i.children[n]),o?i.insertBefore(r,o):i.appendChild(r),r},_show:function(t){this._showAtPoint(t.containerPoint,t)},_showAtPoint:function(e,i){if(this._items.length){var n=this._map,o=n.containerPointToLayerPoint(e),r=n.layerPointToLatLng(o),a=t.extend(i||{},{contextmenu:this});this._showLocation={latlng:r,layerPoint:o,containerPoint:e},i&&i.relatedTarget&&(this._showLocation.relatedTarget=i.relatedTarget),this._setPosition(e),this._visible||(this._container.style.display="block",this._visible=!0),this._map.fire("contextmenu.show",a)}},_hide:function(){this._visible&&(this._visible=!1,this._container.style.display="none",this._map.fire("contextmenu.hide",{contextmenu:this}))},_getIcon:function(e){return t.Browser.retina&&e.retinaIcon||e.icon},_getIconCls:function(e){return t.Browser.retina&&e.retinaIconCls||e.iconCls},_setPosition:function(e){var i,n=this._map.getSize(),o=this._container,r=this._getElementSize(o);this._map.options.contextmenuAnchor&&(i=t.point(this._map.options.contextmenuAnchor),e=e.add(i)),o._leaflet_pos=e,e.x+r.x>n.x?(o.style.left="auto",o.style.right=Math.min(Math.max(n.x-e.x,0),n.x-r.x-1)+"px"):(o.style.left=Math.max(e.x,0)+"px",o.style.right="auto"),e.y+r.y>n.y?(o.style.top="auto",o.style.bottom=Math.min(Math.max(n.y-e.y,0),n.y-r.y-1)+"px"):(o.style.top=Math.max(e.y,0)+"px",o.style.bottom="auto")},_getElementSize:function(t){var e=this._size,i=t.style.display;return e&&!this._sizeChanged||(e={},t.style.left="-999999px",t.style.right="auto",t.style.display="block",e.x=t.offsetWidth,e.y=t.offsetHeight,t.style.left="auto",t.style.display=i,this._sizeChanged=!1),e},_onKeyDown:function(t){27===t.keyCode&&this._hide()},_onItemMouseOver:function(e){t.DomUtil.addClass(e.target||e.srcElement,"over")},_onItemMouseOut:function(e){t.DomUtil.removeClass(e.target||e.srcElement,"over")}}),t.Map.addInitHook("addHandler","contextmenu",t.Map.ContextMenu),t.Mixin.ContextMenu={bindContextMenu:function(e){return t.setOptions(this,e),this._initContextMenu(),this},unbindContextMenu:function(){return this.off("contextmenu",this._showContextMenu,this),this},addContextMenuItem:function(t){this.options.contextmenuItems.push(t)},removeContextMenuItemWithIndex:function(t){for(var e=[],i=0;i<this.options.contextmenuItems.length;i++)this.options.contextmenuItems[i].index==t&&e.push(i);for(var n=e.pop();void 0!==n;)this.options.contextmenuItems.splice(n,1),n=e.pop()},replaceContextMenuItem:function(t){this.removeContextMenuItemWithIndex(t.index),this.addContextMenuItem(t)},_initContextMenu:function(){this._items=[],this.on("contextmenu",this._showContextMenu,this)},_showContextMenu:function(e){var i,n,o,r,a;if(this._map.contextmenu){for(n=t.extend({relatedTarget:this},e),o=this._map.mouseEventToContainerPoint(e.originalEvent),this.options.contextmenuInheritItems||this._map.contextmenu.hideAllItems(),r=0,a=this.options.contextmenuItems.length;r<a;r++)i=this.options.contextmenuItems[r],this._items.push(this._map.contextmenu.insertItem(i,i.index));this._map.once("contextmenu.hide",this._hideContextMenu,this),this._map.contextmenu.showAt(o,n)}},_hideContextMenu:function(){var t,e;for(t=0,e=this._items.length;t<e;t++)this._map.contextmenu.removeItem(this._items[t]);this._items.length=0,this.options.contextmenuInheritItems||this._map.contextmenu.showAllItems()}};var e,i,n,o=[t.Marker,t.Path],r={contextmenu:!1,contextmenuItems:[],contextmenuInheritItems:!0};for(i=0,n=o.length;i<n;i++)(e=o[i]).prototype.options?e.mergeOptions(r):e.prototype.options=r,e.addInitHook((function(){this.options.contextmenu&&this._initContextMenu()})),e.include(t.Mixin.ContextMenu);return t.Map.ContextMenu})?n.apply(e,o):n)||(t.exports=r)},810:function(t,e,i){var n,o,r;!function(a,s){o=[i(5243)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&!s.L.EdgeBuffer&&a(s.L)}((function(t){t.EdgeBuffer={previousMethods:{getTiledPixelBounds:t.GridLayer.prototype._getTiledPixelBounds}},t.GridLayer.include({_getTiledPixelBounds:function(e,i,n){var o=t.EdgeBuffer.previousMethods.getTiledPixelBounds.call(this,e,i,n),r=1;if(void 0!==this.options.edgeBufferTiles&&null!==this.options.edgeBufferTiles&&(r=this.options.edgeBufferTiles),r>0){var a=t.GridLayer.prototype.getTileSize.call(this).multiplyBy(r);o=new t.Bounds(o.min.subtract(a),o.max.add(a))}return o}})}),window)},8292:function(){L.Control.Fullscreen=L.Control.extend({options:{position:"topleft",title:{false:"View Fullscreen",true:"Exit Fullscreen"}},onAdd:function(t){var e=L.DomUtil.create("div","leaflet-control-fullscreen leaflet-bar leaflet-control");return this.link=L.DomUtil.create("a","leaflet-control-fullscreen-button leaflet-bar-part",e),this.link.href="#",this._map=t,this._map.on("fullscreenchange",this._toggleTitle,this),this._toggleTitle(),L.DomEvent.on(this.link,"click",this._click,this),e},_click:function(t){L.DomEvent.stopPropagation(t),L.DomEvent.preventDefault(t),this._map.toggleFullscreen(this.options)},_toggleTitle:function(){this.link.title=this.options.title[this._map.isFullscreen()]}}),L.Map.include({isFullscreen:function(){return this._isFullscreen||!1},toggleFullscreen:function(t){var e=this.getContainer();this.isFullscreen()?t&&t.pseudoFullscreen?this._disablePseudoFullscreen(e):document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():this._disablePseudoFullscreen(e):t&&t.pseudoFullscreen?this._enablePseudoFullscreen(e):e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen?e.msRequestFullscreen():this._enablePseudoFullscreen(e)},_enablePseudoFullscreen:function(t){L.DomUtil.addClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!0),this.fire("fullscreenchange")},_disablePseudoFullscreen:function(t){L.DomUtil.removeClass(t,"leaflet-pseudo-fullscreen"),this._setFullscreen(!1),this.fire("fullscreenchange")},_setFullscreen:function(t){this._isFullscreen=t;var e=this.getContainer();t?L.DomUtil.addClass(e,"leaflet-fullscreen-on"):L.DomUtil.removeClass(e,"leaflet-fullscreen-on"),this.invalidateSize()},_onFullscreenChange:function(t){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;e!==this.getContainer()||this._isFullscreen?e!==this.getContainer()&&this._isFullscreen&&(this._setFullscreen(!1),this.fire("fullscreenchange")):(this._setFullscreen(!0),this.fire("fullscreenchange"))}}),L.Map.mergeOptions({fullscreenControl:!1}),L.Map.addInitHook((function(){var t;if(this.options.fullscreenControl&&(this.fullscreenControl=new L.Control.Fullscreen(this.options.fullscreenControl),this.addControl(this.fullscreenControl)),"onfullscreenchange"in document?t="fullscreenchange":"onmozfullscreenchange"in document?t="mozfullscreenchange":"onwebkitfullscreenchange"in document?t="webkitfullscreenchange":"onmsfullscreenchange"in document&&(t="MSFullscreenChange"),t){var e=L.bind(this._onFullscreenChange,this);this.whenReady((function(){L.DomEvent.on(document,t,e)})),this.on("unload",(function(){L.DomEvent.off(document,t,e)}))}})),L.control.fullscreen=function(t){return new L.Control.Fullscreen(t)}},5830:function(t,e){!function(t){"use strict";var e={ar:{touch:"استخدم إصبعين لتحريك الخريطة",scroll:"‏استخدم ctrl + scroll لتصغير/تكبير الخريطة",scrollMac:"يمكنك استخدام ⌘ + التمرير لتكبير/تصغير الخريطة"},bg:{touch:"Използвайте два пръста, за да преместите картата",scroll:"Задръжте бутона Ctrl натиснат, докато превъртате, за да промените мащаба на картата",scrollMac:"Задръжте бутона ⌘ натиснат, докато превъртате, за да промените мащаба на картата"},bn:{touch:"মানচিত্রটিকে সরাতে দুটি আঙ্গুল ব্যবহার করুন",scroll:"ম্যাপ জুম করতে ctrl + scroll ব্যবহার করুন",scrollMac:"ম্যাপে জুম করতে ⌘ বোতাম টিপে স্ক্রল করুন"},ca:{touch:"Fes servir dos dits per moure el mapa",scroll:"Prem la tecla Control mentre et desplaces per apropar i allunyar el mapa",scrollMac:"Prem la tecla ⌘ mentre et desplaces per apropar i allunyar el mapa"},cs:{touch:"K posunutí mapy použijte dva prsty",scroll:"Velikost zobrazení mapy změňte podržením klávesy Ctrl a posouváním kolečka myši",scrollMac:"Velikost zobrazení mapy změníte podržením klávesy ⌘ a posunutím kolečka myši / touchpadu"},da:{touch:"Brug to fingre til at flytte kortet",scroll:"Brug ctrl + rullefunktionen til at zoome ind og ud på kortet",scrollMac:"Brug ⌘ + rullefunktionen til at zoome ind og ud på kortet"},de:{touch:"Verschieben der Karte mit zwei Fingern",scroll:"Verwende Strg+Scrollen zum Zoomen der Karte",scrollMac:"⌘"},el:{touch:"Χρησιμοποιήστε δύο δάχτυλα για μετακίνηση στον χάρτη",scroll:"Χρησιμοποιήστε το πλήκτρο Ctrl και κύλιση, για να μεγεθύνετε τον χάρτη",scrollMac:"Χρησιμοποιήστε το πλήκτρο ⌘ + κύλιση για εστίαση στον χάρτη"},en:{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-AU":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},"en-GB":{touch:"Use two fingers to move the map",scroll:"Use ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},es:{touch:"Para mover el mapa, utiliza dos dedos",scroll:"Mantén pulsada la tecla Ctrl mientras te desplazas para acercar o alejar el mapa",scrollMac:"Mantén pulsada la tecla ⌘ mientras te desplazas para acercar o alejar el mapa"},eu:{touch:"Erabili bi hatz mapa mugitzeko",scroll:"Mapan zooma aplikatzeko, sakatu Ktrl eta egin gora edo behera",scrollMac:"Eduki sakatuta ⌘ eta egin gora eta behera mapa handitu eta txikitzeko"},fa:{touch:"برای حرکت دادن نقشه از دو انگشت استفاده کنید.",scroll:"‏برای بزرگ‌نمایی نقشه از ctrl + scroll استفاده کنید",scrollMac:"برای بزرگ‌نمایی نقشه، از ⌘ + پیمایش استفاده کنید."},fi:{touch:"Siirrä karttaa kahdella sormella.",scroll:"Zoomaa karttaa painamalla Ctrl-painiketta ja vierittämällä.",scrollMac:"Zoomaa karttaa pitämällä painike ⌘ painettuna ja vierittämällä."},fil:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},fr:{touch:"Utilisez deux doigts pour déplacer la carte",scroll:"Vous pouvez zoomer sur la carte à l'aide de CTRL+Molette de défilement",scrollMac:"Vous pouvez zoomer sur la carte à l'aide de ⌘+Molette de défilement"},gl:{touch:"Utiliza dous dedos para mover o mapa",scroll:"Preme Ctrl mentres te desprazas para ampliar o mapa",scrollMac:"Preme ⌘ e desprázate para ampliar o mapa"},gu:{touch:"નકશો ખસેડવા બે આંગળીઓનો ઉપયોગ કરો",scroll:"નકશાને ઝૂમ કરવા માટે ctrl + સ્ક્રોલનો ઉપયોગ કરો",scrollMac:"નકશાને ઝૂમ કરવા ⌘ + સ્ક્રોલનો ઉપયોગ કરો"},hi:{touch:"मैप एक जगह से दूसरी जगह ले जाने के लिए दो उंगलियों का इस्तेमाल करें",scroll:"मैप को ज़ूम करने के लिए ctrl + स्क्रोल का उपयोग करें",scrollMac:"मैप को ज़ूम करने के लिए ⌘ + स्क्रोल का उपयोग करें"},hr:{touch:"Pomičite kartu pomoću dva prsta",scroll:"Upotrijebite Ctrl i klizač miša da biste zumirali kartu",scrollMac:"Upotrijebite gumb ⌘ dok se pomičete za zumiranje karte"},hu:{touch:"Két ujjal mozgassa a térképet",scroll:"A térkép a ctrl + görgetés használatával nagyítható",scrollMac:"A térkép a ⌘ + görgetés használatával nagyítható"},id:{touch:"Gunakan dua jari untuk menggerakkan peta",scroll:"Gunakan ctrl + scroll untuk memperbesar atau memperkecil peta",scrollMac:"Gunakan ⌘ + scroll untuk memperbesar atau memperkecil peta"},it:{touch:"Utilizza due dita per spostare la mappa",scroll:"Utilizza CTRL + scorrimento per eseguire lo zoom della mappa",scrollMac:"Utilizza ⌘ + scorrimento per eseguire lo zoom della mappa"},iw:{touch:"הזז את המפה באמצעות שתי אצבעות",scroll:"‏אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ctrl וגלילה",scrollMac:"אפשר לשנות את מרחק התצוגה במפה באמצעות מקש ⌘ וגלילה"},ja:{touch:"地図を移動させるには指 2 本で操作します",scroll:"地図をズームするには、Ctrl キーを押しながらスクロールしてください",scrollMac:"地図をズームするには、⌘ キーを押しながらスクロールしてください"},kn:{touch:"Use two fingers to move the map",scroll:"Use Ctrl + scroll to zoom the map",scrollMac:"Use ⌘ + scroll to zoom the map"},ko:{touch:"지도를 움직이려면 두 손가락을 사용하세요.",scroll:"지도를 확대/축소하려면 Ctrl을 누른 채 스크롤하세요.",scrollMac:"지도를 확대하려면 ⌘ + 스크롤 사용"},lt:{touch:"Perkelkite žemėlapį dviem pirštais",scroll:"Slinkite nuspaudę klavišą „Ctrl“, kad pakeistumėte žemėlapio mastelį",scrollMac:"Paspauskite klavišą ⌘ ir slinkite, kad priartintumėte žemėlapį"},lv:{touch:"Lai pārvietotu karti, bīdiet to ar diviem pirkstiem",scroll:"Kartes tālummaiņai izmantojiet ctrl + ritināšanu",scrollMac:"Lai veiktu kartes tālummaiņu, izmantojiet ⌘ + ritināšanu"},ml:{touch:"മാപ്പ് നീക്കാൻ രണ്ട് വിരലുകൾ ഉപയോഗിക്കുക",scroll:"കൺട്രോൾ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക",scrollMac:"⌘ + സ്‌ക്രോൾ ഉപയോഗിച്ച് ‌മാപ്പ് ‌സൂം ചെയ്യുക"},mr:{touch:"नकाशा हलविण्यासाठी दोन बोटे वापरा",scroll:"नकाशा झूम करण्यासाठी ctrl + scroll वापरा",scrollMac:"नकाशावर झूम करण्यासाठी ⌘ + स्क्रोल वापरा"},nl:{touch:"Gebruik twee vingers om de kaart te verplaatsen",scroll:"Gebruik Ctrl + scrollen om in- en uit te zoomen op de kaart",scrollMac:"Gebruik ⌘ + scrollen om in en uit te zoomen op de kaart"},no:{touch:"Bruk to fingre for å flytte kartet",scroll:"Hold ctrl-tasten inne og rull for å zoome på kartet",scrollMac:"Hold inne ⌘-tasten og rull for å zoome på kartet"},pl:{touch:"Przesuń mapę dwoma palcami",scroll:"Naciśnij CTRL i przewiń, by przybliżyć mapę",scrollMac:"Naciśnij ⌘ i przewiń, by przybliżyć mapę"},pt:{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-BR":{touch:"Use dois dedos para mover o mapa",scroll:"Pressione Ctrl e role a tela simultaneamente para aplicar zoom no mapa",scrollMac:"Use ⌘ e role a tela simultaneamente para aplicar zoom no mapa"},"pt-PT":{touch:"Utilize dois dedos para mover o mapa",scroll:"Utilizar ctrl + deslocar para aumentar/diminuir zoom do mapa",scrollMac:"Utilize ⌘ + deslocar para aumentar/diminuir o zoom do mapa"},ro:{touch:"Folosiți două degete pentru a deplasa harta",scroll:"Apăsați tasta ctrl și derulați simultan pentru a mări harta",scrollMac:"Folosiți ⌘ și derulați pentru a mări/micșora harta"},ru:{touch:"Чтобы переместить карту, проведите по ней двумя пальцами",scroll:"Чтобы изменить масштаб, прокручивайте карту, удерживая клавишу Ctrl.",scrollMac:"Чтобы изменить масштаб, нажмите ⌘ + прокрутка"},sk:{touch:"Mapu môžete posunúť dvoma prstami",scroll:"Ak chcete priblížiť mapu, stlačte kláves ctrl a posúvajte",scrollMac:"Ak chcete priblížiť mapu, stlačte kláves ⌘ a posúvajte kolieskom myši"},sl:{touch:"Premaknite zemljevid z dvema prstoma",scroll:"Zemljevid povečate tako, da držite tipko Ctrl in vrtite kolesce na miški",scrollMac:"Uporabite ⌘ + funkcijo pomika, da povečate ali pomanjšate zemljevid"},sr:{touch:"Мапу померајте помоћу два прста",scroll:"Притисните ctrl тастер док померате да бисте зумирали мапу",scrollMac:"Притисните тастер ⌘ док померате да бисте зумирали мапу"},sv:{touch:"Använd två fingrar för att flytta kartan",scroll:"Använd ctrl + rulla för att zooma kartan",scrollMac:"Använd ⌘ + rulla för att zooma på kartan"},ta:{touch:"மேப்பை நகர்த்த இரண்டு விரல்களைப் பயன்படுத்தவும்",scroll:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ctrl பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்",scrollMac:"மேப்பை பெரிதாக்கி/சிறிதாக்கிப் பார்க்க, ⌘ பட்டனைப் பிடித்தபடி, மேலே/கீழே ஸ்க்ரால் செய்யவும்"},te:{touch:"మ్యాప్‌ని తరలించడం కోసం రెండు వేళ్లను ఉపయోగించండి",scroll:"మ్యాప్‌ని జూమ్ చేయడానికి ctrl బటన్‌ను నొక్కి ఉంచి, స్క్రోల్ చేయండి",scrollMac:"మ్యాప్ జూమ్ చేయాలంటే ⌘ + స్క్రోల్ ఉపయోగించండి"},th:{touch:"ใช้ 2 นิ้วเพื่อเลื่อนแผนที่",scroll:"กด Ctrl ค้างไว้ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่",scrollMac:"กด ⌘ แล้วเลื่อนหน้าจอเพื่อซูมแผนที่"},tl:{touch:"Gumamit ng dalawang daliri upang iusog ang mapa",scroll:"Gamitin ang ctrl + scroll upang i-zoom ang mapa",scrollMac:"Gamitin ang ⌘ + scroll upang i-zoom ang mapa"},tr:{touch:"Haritada gezinmek için iki parmağınızı kullanın",scroll:"Haritayı yakınlaştırmak için ctrl + kaydırma kombinasyonunu kullanın",scrollMac:"Haritayı yakınlaştırmak için ⌘ tuşuna basıp ekranı kaydırın"},uk:{touch:"Переміщуйте карту двома пальцями",scroll:"Щоб змінювати масштаб карти, прокручуйте коліщатко миші, утримуючи клавішу Ctrl",scrollMac:"Щоб змінити масштаб карти, використовуйте ⌘ + прокручування"},vi:{touch:"Sử dụng hai ngón tay để di chuyển bản đồ",scroll:"Sử dụng ctrl + cuộn để thu phóng bản đồ",scrollMac:"Sử dụng ⌘ + cuộn để thu phóng bản đồ"},"zh-CN":{touch:"使用双指移动地图",scroll:"按住 Ctrl 并滚动鼠标滚轮才可缩放地图",scrollMac:"按住 ⌘ 并滚动鼠标滚轮才可缩放地图"},"zh-TW":{touch:"同時以兩指移動地圖",scroll:"按住 ctrl 鍵加上捲動滑鼠可以縮放地圖",scrollMac:"按 ⌘ 加上滾動捲軸可以縮放地圖"}};L.Map.mergeOptions({gestureHandlingOptions:{text:{},duration:1e3}});var i=!1,n=L.Handler.extend({addHooks:function(){this._handleTouch=this._handleTouch.bind(this),this._setupPluginOptions(),this._setLanguageContent(),this._disableInteractions(),this._map._container.addEventListener("touchstart",this._handleTouch),this._map._container.addEventListener("touchmove",this._handleTouch),this._map._container.addEventListener("touchend",this._handleTouch),this._map._container.addEventListener("touchcancel",this._handleTouch),this._map._container.addEventListener("click",this._handleTouch),L.DomEvent.on(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.on(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.on(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.on(this._map,"movestart",this._handleDragging,this),L.DomEvent.on(this._map,"move",this._handleDragging,this),L.DomEvent.on(this._map,"moveend",this._handleDragging,this)},removeHooks:function(){this._enableInteractions(),this._map._container.removeEventListener("touchstart",this._handleTouch),this._map._container.removeEventListener("touchmove",this._handleTouch),this._map._container.removeEventListener("touchend",this._handleTouch),this._map._container.removeEventListener("touchcancel",this._handleTouch),this._map._container.removeEventListener("click",this._handleTouch),L.DomEvent.off(this._map._container,"wheel",this._handleScroll,this),L.DomEvent.off(this._map,"mouseover",this._handleMouseOver,this),L.DomEvent.off(this._map,"mouseout",this._handleMouseOut,this),L.DomEvent.off(this._map,"movestart",this._handleDragging,this),L.DomEvent.off(this._map,"move",this._handleDragging,this),L.DomEvent.off(this._map,"moveend",this._handleDragging,this)},_handleDragging:function(t){"movestart"==t.type||"move"==t.type?i=!0:"moveend"==t.type&&(i=!1)},_disableInteractions:function(){this._map.dragging.disable(),this._map.scrollWheelZoom.disable(),this._map.tap&&this._map.tap.disable()},_enableInteractions:function(){this._map.dragging.enable(),this._map.scrollWheelZoom.enable(),this._map.tap&&this._map.tap.enable()},_setupPluginOptions:function(){this._map.options.gestureHandlingText&&(this._map.options.gestureHandlingOptions.text=this._map.options.gestureHandlingText)},_setLanguageContent:function(){var t,i=this._map.options.gestureHandlingOptions&&this._map.options.gestureHandlingOptions.text&&this._map.options.gestureHandlingOptions.text.touch&&this._map.options.gestureHandlingOptions.text.scroll&&this._map.options.gestureHandlingOptions.text.scrollMac?this._map.options.gestureHandlingOptions.text:(t=this._getUserLanguage(),e[t=t||"en"]&&(i=e[t]),i||-1===t.indexOf("-")||(t=t.split("-")[0],i=e[t]),i||e[t="en"]),n=!1;0<=navigator.platform.toUpperCase().indexOf("MAC")&&(n=!0);var o=i.scroll;n&&(o=i.scrollMac),this._map._container.setAttribute("data-gesture-handling-touch-content",i.touch),this._map._container.setAttribute("data-gesture-handling-scroll-content",o)},_getUserLanguage:function(){return navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage},_handleTouch:function(t){for(var e=["leaflet-control-minimap","leaflet-interactive","leaflet-popup-content","leaflet-popup-content-wrapper","leaflet-popup-close-button","leaflet-control-zoom-in","leaflet-control-zoom-out"],i=!1,n=0;n<e.length;n++)L.DomUtil.hasClass(t.target,e[n])&&(i=!0);i?L.DomUtil.hasClass(t.target,"leaflet-interactive")&&"touchmove"===t.type&&1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning"):"touchmove"===t.type||"touchstart"===t.type?1===t.touches.length?(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-touch-warning"),this._disableInteractions()):(this._enableInteractions(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")):L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-touch-warning")},_isScrolling:!1,_handleScroll:function(t){t.metaKey||t.ctrlKey?(t.preventDefault(),L.DomUtil.removeClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.enable()):(L.DomUtil.addClass(this._map._container,"leaflet-gesture-handling-scroll-warning"),this._map.scrollWheelZoom.disable(),clearTimeout(this._isScrolling),this._isScrolling=setTimeout((function(){for(var t=document.getElementsByClassName("leaflet-gesture-handling-scroll-warning"),e=0;e<t.length;e++)L.DomUtil.removeClass(t[e],"leaflet-gesture-handling-scroll-warning")}),this._map.options.gestureHandlingOptions.duration))},_handleMouseOver:function(t){this._enableInteractions()},_handleMouseOut:function(t){i||this._disableInteractions()}});L.Map.addInitHook("addHandler","gestureHandling",n),t.GestureHandling=n,t.default=n,Object.defineProperty(t,"__esModule",{value:!0})}(e)},7244:function(t,e,i){var n,o,r;!function(a,s){o=[i(5243)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&(s.L.Control.MiniMap=a(L),s.L.control.minimap=function(t,e){return new s.L.Control.MiniMap(t,e)})}((function(t){var e=t.Control.extend({includes:t.Evented?t.Evented.prototype:t.Mixin.Events,options:{position:"bottomright",toggleDisplay:!1,zoomLevelOffset:-5,zoomLevelFixed:!1,centerFixed:!1,zoomAnimation:!1,autoToggleDisplay:!1,minimized:!1,width:150,height:150,collapsedWidth:19,collapsedHeight:19,aimingRectOptions:{color:"#ff7800",weight:1,clickable:!1},shadowRectOptions:{color:"#000000",weight:1,clickable:!1,opacity:0,fillOpacity:0},strings:{hideText:"Hide MiniMap",showText:"Show MiniMap"},mapOptions:{}},initialize:function(e,i){t.Util.setOptions(this,i),this.options.aimingRectOptions.clickable=!1,this.options.shadowRectOptions.clickable=!1,this._layer=e},onAdd:function(e){this._mainMap=e,this._container=t.DomUtil.create("div","leaflet-control-minimap"),this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",t.DomEvent.disableClickPropagation(this._container),t.DomEvent.on(this._container,"mousewheel",t.DomEvent.stopPropagation);var i={attributionControl:!1,dragging:!this.options.centerFixed,zoomControl:!1,zoomAnimation:this.options.zoomAnimation,autoToggleDisplay:this.options.autoToggleDisplay,touchZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),scrollWheelZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),doubleClickZoom:this.options.centerFixed?"center":!this._isZoomLevelFixed(),boxZoom:!this._isZoomLevelFixed(),crs:e.options.crs};return i=t.Util.extend(this.options.mapOptions,i),this._miniMap=new t.Map(this._container,i),this._miniMap.addLayer(this._layer),this._mainMapMoving=!1,this._miniMapMoving=!1,this._userToggledDisplay=!1,this._minimized=!1,this.options.toggleDisplay&&this._addToggleButton(),this._miniMap.whenReady(t.Util.bind((function(){this._aimingRect=t.rectangle(this._mainMap.getBounds(),this.options.aimingRectOptions).addTo(this._miniMap),this._shadowRect=t.rectangle(this._mainMap.getBounds(),this.options.shadowRectOptions).addTo(this._miniMap),this._mainMap.on("moveend",this._onMainMapMoved,this),this._mainMap.on("move",this._onMainMapMoving,this),this._miniMap.on("movestart",this._onMiniMapMoveStarted,this),this._miniMap.on("move",this._onMiniMapMoving,this),this._miniMap.on("moveend",this._onMiniMapMoved,this)}),this)),this._container},addTo:function(e){t.Control.prototype.addTo.call(this,e);var i=this.options.centerFixed||this._mainMap.getCenter();return this._miniMap.setView(i,this._decideZoom(!0)),this._setDisplay(this.options.minimized),this},onRemove:function(t){this._mainMap.off("moveend",this._onMainMapMoved,this),this._mainMap.off("move",this._onMainMapMoving,this),this._miniMap.off("moveend",this._onMiniMapMoved,this),this._miniMap.removeLayer(this._layer)},changeLayer:function(t){this._miniMap.removeLayer(this._layer),this._layer=t,this._miniMap.addLayer(this._layer)},_addToggleButton:function(){this._toggleDisplayButton=this.options.toggleDisplay?this._createButton("",this._toggleButtonInitialTitleText(),"leaflet-control-minimap-toggle-display leaflet-control-minimap-toggle-display-"+this.options.position,this._container,this._toggleDisplayButtonClicked,this):void 0,this._toggleDisplayButton.style.width=this.options.collapsedWidth+"px",this._toggleDisplayButton.style.height=this.options.collapsedHeight+"px"},_toggleButtonInitialTitleText:function(){return this.options.minimized?this.options.strings.showText:this.options.strings.hideText},_createButton:function(e,i,n,o,r,a){var s=t.DomUtil.create("a",n,o);s.innerHTML=e,s.href="#",s.title=i;var l=t.DomEvent.stopPropagation;return t.DomEvent.on(s,"click",l).on(s,"mousedown",l).on(s,"dblclick",l).on(s,"click",t.DomEvent.preventDefault).on(s,"click",r,a),s},_toggleDisplayButtonClicked:function(){this._userToggledDisplay=!0,this._minimized?this._restore():this._minimize()},_setDisplay:function(t){t!==this._minimized&&(this._minimized?this._restore():this._minimize())},_minimize:function(){this.options.toggleDisplay?(this._container.style.width=this.options.collapsedWidth+"px",this._container.style.height=this.options.collapsedHeight+"px",this._toggleDisplayButton.className+=" minimized-"+this.options.position,this._toggleDisplayButton.title=this.options.strings.showText):this._container.style.display="none",this._minimized=!0,this._onToggle()},_restore:function(){this.options.toggleDisplay?(this._container.style.width=this.options.width+"px",this._container.style.height=this.options.height+"px",this._toggleDisplayButton.className=this._toggleDisplayButton.className.replace("minimized-"+this.options.position,""),this._toggleDisplayButton.title=this.options.strings.hideText):this._container.style.display="block",this._minimized=!1,this._onToggle()},_onMainMapMoved:function(t){if(this._miniMapMoving)this._miniMapMoving=!1;else{var e=this.options.centerFixed||this._mainMap.getCenter();this._mainMapMoving=!0,this._miniMap.setView(e,this._decideZoom(!0)),this._setDisplay(this._decideMinimized())}this._aimingRect.setBounds(this._mainMap.getBounds())},_onMainMapMoving:function(t){this._aimingRect.setBounds(this._mainMap.getBounds())},_onMiniMapMoveStarted:function(t){if(!this.options.centerFixed){var e=this._aimingRect.getBounds(),i=this._miniMap.latLngToContainerPoint(e.getSouthWest()),n=this._miniMap.latLngToContainerPoint(e.getNorthEast());this._lastAimingRectPosition={sw:i,ne:n}}},_onMiniMapMoving:function(e){this.options.centerFixed||!this._mainMapMoving&&this._lastAimingRectPosition&&(this._shadowRect.setBounds(new t.LatLngBounds(this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.sw),this._miniMap.containerPointToLatLng(this._lastAimingRectPosition.ne))),this._shadowRect.setStyle({opacity:1,fillOpacity:.3}))},_onMiniMapMoved:function(t){this._mainMapMoving?this._mainMapMoving=!1:(this._miniMapMoving=!0,this._mainMap.setView(this._miniMap.getCenter(),this._decideZoom(!1)),this._shadowRect.setStyle({opacity:0,fillOpacity:0}))},_isZoomLevelFixed:function(){var t=this.options.zoomLevelFixed;return this._isDefined(t)&&this._isInteger(t)},_decideZoom:function(t){if(this._isZoomLevelFixed())return t?this.options.zoomLevelFixed:this._mainMap.getZoom();if(t)return this._mainMap.getZoom()+this.options.zoomLevelOffset;var e,i=this._miniMap.getZoom()-this._mainMap.getZoom(),n=this._miniMap.getZoom()-this.options.zoomLevelOffset;return i>this.options.zoomLevelOffset&&this._mainMap.getZoom()<this._miniMap.getMinZoom()-this.options.zoomLevelOffset?this._miniMap.getZoom()>this._lastMiniMapZoom?(e=this._mainMap.getZoom()+1,this._miniMap.setZoom(this._miniMap.getZoom()-1)):e=this._mainMap.getZoom():e=n,this._lastMiniMapZoom=this._miniMap.getZoom(),e},_decideMinimized:function(){return this._userToggledDisplay?this._minimized:this.options.autoToggleDisplay?!!this._mainMap.getBounds().contains(this._miniMap.getBounds()):this._minimized},_isInteger:function(t){return"number"==typeof t},_isDefined:function(t){return void 0!==t},_onToggle:function(){t.Util.requestAnimFrame((function(){t.DomEvent.on(this._container,"transitionend",this._fireToggleEvents,this),t.Browser.any3d||t.Util.requestAnimFrame(this._fireToggleEvents,this)}),this)},_fireToggleEvents:function(){t.DomEvent.off(this._container,"transitionend",this._fireToggleEvents,this);var e={minimized:this._minimized};this.fire(this._minimized?"minimize":"restore",e),this.fire("toggle",e)}});return t.Map.mergeOptions({miniMapControl:!1}),t.Map.addInitHook((function(){this.options.miniMapControl&&(this.miniMapControl=(new e).addTo(this))})),e}),window)},9627:function(){!function(){"use strict";var t=Symbol("newer"),e=Symbol("older"),i=function(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))};function n(i,n){this.key=i,this.value=n,this[t]=void 0,this[e]=void 0}function o(t){this.entry=t}function r(t){this.entry=t}function a(t){this.entry=t}i.prototype._markEntryAsUsed=function(i){i!==this.newest&&(i[t]&&(i===this.oldest&&(this.oldest=i[t]),i[t][e]=i[e]),i[e]&&(i[e][t]=i[t]),i[t]=void 0,i[e]=this.newest,this.newest&&(this.newest[t]=i),this.newest=i)},i.prototype.assign=function(i){var o,r=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var a=i[Symbol.iterator](),s=a.next();!s.done;s=a.next()){var l=new n(s.value[0],s.value[1]);if(this._keymap.set(l.key,l),o?(o[t]=l,l[e]=o):this.oldest=l,o=l,0==r--)throw new Error("overflow")}this.newest=o,this.size=this._keymap.size},i.prototype.get=function(t){var e=this._keymap.get(t);if(e)return this._markEntryAsUsed(e),e.value},i.prototype.set=function(i,o){var r=this._keymap.get(i);return r?(r.value=o,this._markEntryAsUsed(r),this):(this._keymap.set(i,r=new n(i,o)),this.newest?(this.newest[t]=r,r[e]=this.newest):this.oldest=r,this.newest=r,++this.size,this.size>this.limit&&this.shift(),this)},i.prototype.shift=function(){var i=this.oldest;if(i)return this.oldest[t]?(this.oldest=this.oldest[t],this.oldest[e]=void 0):(this.oldest=void 0,this.newest=void 0),i[t]=i[e]=void 0,this._keymap.delete(i.key),--this.size,[i.key,i.value]},i.prototype.find=function(t){var e=this._keymap.get(t);return e?e.value:void 0},i.prototype.has=function(t){return this._keymap.has(t)},i.prototype.delete=function(i){var n=this._keymap.get(i);if(n)return this._keymap.delete(n.key),n[t]&&n[e]?(n[e][t]=n[t],n[t][e]=n[e]):n[t]?(n[t][e]=void 0,this.oldest=n[t]):n[e]?(n[e][t]=void 0,this.newest=n[e]):this.oldest=this.newest=void 0,this.size--,n.value},i.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},i.prototype.keys=function(){return new r(this.oldest)},i.prototype.values=function(){return new a(this.oldest)},i.prototype.entries=function(){return this},i.prototype[Symbol.iterator]=function(){return new o(this.oldest)},i.prototype.forEach=function(e,i){"object"!=typeof i&&(i=this);for(var n=this.oldest;n;)e.call(i,n.value,n.key,this),n=n[t]},i.prototype.toJSON=function(){for(var e=new Array(this.size),i=0,n=this.oldest;n;)e[i++]={key:n.key,value:n.value},n=n[t];return e},i.prototype.toString=function(){for(var e="",i=this.oldest;i;)e+=String(i.key)+":"+i.value,(i=i[t])&&(e+=" < ");return e},o.prototype[Symbol.iterator]=function(){return this},o.prototype.next=function(){var e=this.entry;return e?(this.entry=e[t],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},r.prototype[Symbol.iterator]=function(){return this},r.prototype.next=function(){var e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.key}):{done:!0,value:void 0}},a.prototype[Symbol.iterator]=function(){return this},a.prototype.next=function(){var e=this.entry;return e?(this.entry=e[t],{done:!1,value:e.value}):{done:!0,value:void 0}},L.GridLayer.GoogleMutant=L.GridLayer.extend({options:{minZoom:0,maxZoom:21,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1,type:"roadmap",maxNativeZoom:21},initialize:function(t){L.GridLayer.prototype.initialize.call(this,t),this._tileCallbacks={},this._lru=new i(100),this._imagesPerTile="hybrid"===this.options.type?2:1,this._boundOnMutatedImage=this._onMutatedImage.bind(this)},onAdd:function(t){var e,i,n,o,r=this;L.GridLayer.prototype.onAdd.call(this,t),this._initMutantContainer(),this._logoContainer&&t._controlCorners.bottomleft.appendChild(this._logoContainer),this._attributionContainer&&t._controlCorners.bottomright.appendChild(this._attributionContainer),e=function(){r._map&&(r._initMutant(),google.maps.event.addListenerOnce(r._mutant,"idle",(function(){r._map&&(r._checkZoomLevels(),r._mutantIsReady=!0)})))},n=0,o=null,o=setInterval((function(){if(n>=20)throw clearInterval(o),new Error("window.google not found after 10 seconds");window.google&&window.google.maps&&window.google.maps.Map&&(clearInterval(o),e.call(i)),++n}),500)},onRemove:function(t){L.GridLayer.prototype.onRemove.call(this,t),this._observer.disconnect(),t._container.removeChild(this._mutantContainer),this._logoContainer&&L.DomUtil.remove(this._logoContainer),this._attributionContainer&&L.DomUtil.remove(this._attributionContainer),this._mutant&&google.maps.event.clearListeners(this._mutant,"idle")},addGoogleLayer:function(t,e){var i=this;return this._subLayers||(this._subLayers={}),this.whenReady((function(){var n=new(0,google.maps[t])(e);n.setMap(i._mutant),i._subLayers[t]=n})),this},removeGoogleLayer:function(t){var e=this;return this.whenReady((function(){var i=e._subLayers&&e._subLayers[t];i&&(i.setMap(null),delete e._subLayers[t])})),this},_initMutantContainer:function(){this._mutantContainer||(this._mutantContainer=L.DomUtil.create("div","leaflet-google-mutant leaflet-top leaflet-left"),this._mutantContainer.id="_MutantContainer_"+L.Util.stamp(this._mutantContainer),this._mutantContainer.style.zIndex=800,this._mutantContainer.style.pointerEvents="none",L.DomEvent.off(this._mutantContainer)),this._map.getContainer().appendChild(this._mutantContainer),this.setOpacity(this.options.opacity);var t=this._mutantContainer.style;this._map.options.zoomSnap<1?(t.width="180%",t.height="180%"):(t.width="100%",t.height="100%"),t.zIndex=-1,this._attachObserver(this._mutantContainer)},_initMutant:function(){var t=this;if(!this._mutant){var e=new google.maps.Map(this._mutantContainer,{center:{lat:0,lng:0},zoom:0,tilt:0,mapTypeId:this.options.type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1,styles:this.options.styles||{},backgroundColor:"transparent"});this._mutant=e,google.maps.event.addListenerOnce(e,"idle",(function(){for(var e=t._mutantContainer.querySelectorAll("a"),i=0;i<e.length;++i)e[i].style.pointerEvents="auto"})),this._update(),this.fire("spawned",{mapObject:e})}},_attachObserver:function(t){this._observer||(this._observer=new MutationObserver(this._onMutations.bind(this))),this._observer.observe(t,{childList:!0,subtree:!0}),Array.prototype.forEach.call(t.querySelectorAll("img"),this._boundOnMutatedImage)},_onMutations:function(t){for(var e=0;e<t.length;++e)for(var i=t[e],n=0;n<i.addedNodes.length;++n){var o=i.addedNodes[n];if(o instanceof HTMLImageElement)this._onMutatedImage(o);else if(o instanceof HTMLElement){if(Array.prototype.forEach.call(o.querySelectorAll("img"),this._boundOnMutatedImage),"white"===o.style.backgroundColor&&L.DomUtil.remove(o),0===o.textContent.indexOf("For development purposes only")&&L.DomUtil.remove(o),Array.prototype.forEach.call(o.querySelectorAll('div[draggable=false][style*="text-align: center"]'),L.DomUtil.remove),o.querySelectorAll(".gmnoprint").length>0||o.querySelectorAll('a[title="Click to see this area on Google Maps"]').length>0){var r=this._attributionContainer=L.DomUtil.create("div","leaflet-control leaflet-control-attribution");L.DomEvent.disableClickPropagation(r),r.style.height="14px",r.style.background="none",this._map._controlCorners.bottomright.appendChild(r),r.appendChild(o)}1e6==o.style.zIndex&&(this._map._controlCorners.bottomleft.appendChild(o),this._logoContainer=o)}}},_roadRegexp:/!1i(\d+)!2i(\d+)!3i(\d+)!/,_satRegexp:/x=(\d+)&y=(\d+)&z=(\d+)/,_staticRegExp:/StaticMapService\.GetMapImage/,_onMutatedImage:function(t){var e,i=t.src.match(this._roadRegexp),n=0;if(i?(e={z:i[1],x:i[2],y:i[3]},this._imagesPerTile>1&&(t.style.zIndex=1,n=1)):((i=t.src.match(this._satRegexp))&&(e={x:i[1],y:i[2],z:i[3]}),n=0),e){var o=this._tileCoordsToKey(e);t.style.position="absolute",t.style.visibility="hidden";var r=o+"/"+n;this._lru.set(r,t),r in this._tileCallbacks&&this._tileCallbacks[r]&&(this._tileCallbacks[r].forEach((function(e){return e(t)})),delete this._tileCallbacks[r])}else t.src.match(this._staticRegExp)&&(t.style.visibility="hidden")},createTile:function(t,e){var i=this._tileCoordsToKey(t),n=L.DomUtil.create("div");n.style.textAlign="left",n.dataset.pending=this._imagesPerTile,e=e.bind(this,null,n);for(var o=0;o<this._imagesPerTile;++o){var r=i+"/"+o,a=this._lru.get(r);a?(n.appendChild(this._clone(a)),--n.dataset.pending):(this._tileCallbacks[r]=this._tileCallbacks[r]||[],this._tileCallbacks[r].push(function(t){return function(i){t.appendChild(this._clone(i)),--t.dataset.pending,parseInt(t.dataset.pending)||e()}.bind(this)}.bind(this)(n)))}return parseInt(n.dataset.pending)||L.Util.requestAnimFrame(e),n},_clone:function(t){var e=t.cloneNode(!0);return e.style.visibility="visible",e},_checkZoomLevels:function(){var t=this._map.getZoom(),e=this._mutant.getZoom();t&&e&&(e!==t||e>this.options.maxNativeZoom)&&this._setMaxNativeZoom(e)},_setMaxNativeZoom:function(t){t!==this.options.maxNativeZoom&&(this.options.maxNativeZoom=t,this._resetView())},_update:function(t){if(this._mutant){t=t||this._map.getCenter();var e=new google.maps.LatLng(t.lat,t.lng),i=Math.round(this._map.getZoom()),n=this._mutant.getZoom();this._mutant.setCenter(e),i!==n&&(this._mutant.setZoom(i),this._mutantIsReady&&this._checkZoomLevels())}L.GridLayer.prototype._update.call(this,t)},whenReady:function(t,e){return this._mutant?t.call(e||this,{target:this}):this.on("spawned",t,e),this}}),L.gridLayer.googleMutant=function(t){return new L.GridLayer.GoogleMutant(t)}}()},687:function(t,e,i){var n,o,r;
/*!
Copyright (c) 2016 Dominik Moritz

This file is part of the leaflet locate control. It is licensed under the MIT license.
You can find the project at: https://github.com/domoritz/leaflet-locatecontrol
*/!function(a,s){o=[i(5243)],void 0===(r="function"==typeof(n=a)?n.apply(e,o):n)||(t.exports=r),void 0!==s&&s.L&&(s.L.Control.Locate=a(L))}((function(t){var e=function(e,i,n){(n=n.split(" ")).forEach((function(n){t.DomUtil[e].call(this,i,n)}))},i=function(t,i){e("addClass",t,i)},n=function(t,i){e("removeClass",t,i)},o=t.Marker.extend({initialize:function(e,i){t.Util.setOptions(this,i),this._latlng=e,this.createIcon()},createIcon:function(){var e=this.options,i="";void 0!==e.color&&(i+="stroke:"+e.color+";"),void 0!==e.weight&&(i+="stroke-width:"+e.weight+";"),void 0!==e.fillColor&&(i+="fill:"+e.fillColor+";"),void 0!==e.fillOpacity&&(i+="fill-opacity:"+e.fillOpacity+";"),void 0!==e.opacity&&(i+="opacity:"+e.opacity+";");var n=this._getIconSVG(e,i);this._locationIcon=t.divIcon({className:n.className,html:n.svg,iconSize:[n.w,n.h]}),this.setIcon(this._locationIcon)},_getIconSVG:function(t,e){var i=t.radius,n=i+t.weight,o=2*n;return{className:"leaflet-control-locate-location",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+o+'" height="'+o+'" version="1.1" viewBox="-'+n+" -"+n+" "+o+" "+o+'"><circle r="'+i+'" style="'+e+'" /></svg>',w:o,h:o}},setStyle:function(e){t.Util.setOptions(this,e),this.createIcon()}}),r=o.extend({initialize:function(e,i,n){t.Util.setOptions(this,n),this._latlng=e,this._heading=i,this.createIcon()},setHeading:function(t){this._heading=t},_getIconSVG:function(t,e){var i=t.radius,n=t.width+t.weight,o=2*(i+t.depth+t.weight),r="M0,0 l"+t.width/2+","+t.depth+" l-"+n+",0 z";return{className:"leaflet-control-locate-heading",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+o+'" version="1.1" viewBox="-'+n/2+" 0 "+n+" "+o+'" style="'+("transform: rotate("+this._heading+"deg)")+'"><path d="'+r+'" style="'+e+'" /></svg>',w:n,h:o}}}),a=t.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPanOrZoom",keepCurrentZoomLevel:!1,initialZoomLevel:!1,getLocationBounds:function(t){return t.bounds},flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView",inViewNotFollowing:"inView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,showCompass:!0,markerClass:o,compassClass:r,circleStyle:{className:"leaflet-control-locate-circle",color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:0},markerStyle:{className:"leaflet-control-locate-marker",color:"#fff",fillColor:"#2A93EE",fillOpacity:1,weight:3,opacity:1,radius:9},compassStyle:{fillColor:"#2A93EE",fillOpacity:1,weight:0,color:"#fff",opacity:1,radius:9,width:9,depth:6},followCircleStyle:{},followMarkerStyle:{},followCompassStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",textElementTag:"small",circlePadding:[0,0],metric:!0,createButtonCallback:function(e,i){var n=t.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",e);n.title=i.strings.title,n.role="button",n.href="#";var o=t.DomUtil.create(i.iconElementTag,i.icon,n);void 0!==i.strings.text&&(t.DomUtil.create(i.textElementTag,"leaflet-locate-text",n).textContent=i.strings.text,n.classList.add("leaflet-locate-text-active"),n.parentNode.style.display="flex",i.icon.length>0&&o.classList.add("leaflet-locate-icon"));return{link:n,icon:o}},onLocationError:function(t,e){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(e){for(var i in e)"object"==typeof this.options[i]?t.extend(this.options[i],e[i]):this.options[i]=e[i];this.options.followMarkerStyle=t.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=t.extend({},this.options.circleStyle,this.options.followCircleStyle),this.options.followCompassStyle=t.extend({},this.options.compassStyle,this.options.followCompassStyle)},onAdd:function(e){var i=t.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");this._container=i,this._map=e,this._layer=this.options.layer||new t.LayerGroup,this._layer.addTo(e),this._event=void 0,this._compassHeading=null,this._prevBounds=null;var n=this.options.createButtonCallback(i,this.options);return this._link=n.link,this._icon=n.icon,t.DomEvent.on(this._link,"click",(function(e){t.DomEvent.stopPropagation(e),t.DomEvent.preventDefault(e),this._onClick()}),this).on(this._link,"dblclick",t.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),i},_onClick:function(){this._justClicked=!0;var t=this._isFollowing();if(this._userPanned=!1,this._userZoomed=!1,this._active&&!this._event)this.stop();else if(this._active){var e=this.options.clickBehavior,i=e.outOfView;switch(this._map.getBounds().contains(this._event.latlng)&&(i=t?e.inView:e.inViewNotFollowing),e[i]&&(i=e[i]),i){case"setView":this.setView();break;case"stop":if(this.stop(),this.options.returnToPrevBounds)(this.options.flyTo?this._map.flyToBounds:this._map.fitBounds).bind(this._map)(this._prevBounds)}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},stopFollowing:function(){this._userPanned=!0,this._updateContainerStyle(),this._drawMarker()},_activate:function(){if(!this._active&&(this._map.locate(this.options.locateOptions),this._map.fire("locateactivate",this),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this),this._map.on("zoomstart",this._onZoom,this),this._map.on("zoomend",this._onZoomEnd,this),this.options.showCompass)){var e="ondeviceorientationabsolute"in window;if(e||"ondeviceorientation"in window){var i=this,n=function(){t.DomEvent.on(window,e?"deviceorientationabsolute":"deviceorientation",i._onDeviceOrientation,i)};DeviceOrientationEvent&&"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(t){"granted"===t&&n()})):n()}}},_deactivate:function(){this._map.stopLocate(),this._map.fire("locatedeactivate",this),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this),this._map.off("zoomstart",this._onZoom,this),this._map.off("zoomend",this._onZoomEnd,this),this.options.showCompass&&(this._compassHeading=null,"ondeviceorientationabsolute"in window?t.DomEvent.off(window,"deviceorientationabsolute",this._onDeviceOrientation,this):"ondeviceorientation"in window&&t.DomEvent.off(window,"deviceorientation",this._onDeviceOrientation,this))},setView:function(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this._justClicked&&!1!==this.options.initialZoomLevel)(e=this.options.flyTo?this._map.flyTo:this._map.setView).bind(this._map)([this._event.latitude,this._event.longitude],this.options.initialZoomLevel);else if(this.options.keepCurrentZoomLevel){(e=this.options.flyTo?this._map.flyTo:this._map.panTo).bind(this._map)([this._event.latitude,this._event.longitude])}else{var e=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;this._ignoreEvent=!0,e.bind(this._map)(this.options.getLocationBounds(this._event),{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom}),t.Util.requestAnimFrame((function(){this._ignoreEvent=!1}),this)}},_drawCompass:function(){if(this._event){var t=this._event.latlng;if(this.options.showCompass&&t&&null!==this._compassHeading){var e=this._isFollowing()?this.options.followCompassStyle:this.options.compassStyle;this._compass?(this._compass.setLatLng(t),this._compass.setHeading(this._compassHeading),this._compass.setStyle&&this._compass.setStyle(e)):this._compass=new this.options.compassClass(t,this._compassHeading,e).addTo(this._layer)}!this._compass||this.options.showCompass&&null!==this._compassHeading||(this._compass.removeFrom(this._layer),this._compass=null)}},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var e,i,n=this._event.accuracy,o=this._event.latlng;if(this.options.drawCircle){var r=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(o).setRadius(n).setStyle(r):this._circle=t.circle(o,n,r).addTo(this._layer)}if(this.options.metric?(e=n.toFixed(0),i=this.options.strings.metersUnit):(e=(3.2808399*n).toFixed(0),i=this.options.strings.feetUnit),this.options.drawMarker){var a=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(o),this._marker.setStyle&&this._marker.setStyle(a)):this._marker=new this.options.markerClass(o,a).addTo(this._layer)}this._drawCompass();var s=this.options.strings.popup;function l(){return"string"==typeof s?t.Util.template(s,{distance:e,unit:i}):"function"==typeof s?s({distance:e,unit:i}):s}this.options.showPopup&&s&&this._marker&&this._marker.bindPopup(l())._popup.setLatLng(o),this.options.showPopup&&s&&this._compass&&this._compass.bindPopup(l())._popup.setLatLng(o)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_setCompassHeading:function(e){!isNaN(parseFloat(e))&&isFinite(e)?(e=Math.round(e),this._compassHeading=e,t.Util.requestAnimFrame(this._drawCompass,this)):this._compassHeading=null},_onCompassNeedsCalibration:function(){this._setCompassHeading()},_onDeviceOrientation:function(t){this._active&&(t.webkitCompassHeading?this._setCompassHeading(t.webkitCompassHeading):t.absolute&&t.alpha&&this._setCompassHeading(360-t.alpha))},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"untilPanOrZoom":this._userPanned||this._userZoomed||this.setView();break;case"always":this.setView()}this._justClicked=!1}},_onDrag:function(){this._event&&!this._ignoreEvent&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_onZoom:function(){this._event&&!this._ignoreEvent&&(this._userZoomed=!0,this._updateContainerStyle(),this._drawMarker())},_onZoomEnd:function(){this._event&&this._drawCompass(),this._event&&!this._ignoreEvent&&this._marker&&!this._map.getBounds().pad(-.3).contains(this._marker.getLatLng())&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:"untilPanOrZoom"===this.options.setView?!this._userPanned&&!this._userZoomed:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&(this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng))},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(t){"requesting"==t?(n(this._container,"active following"),i(this._container,"requesting"),n(this._icon,this.options.icon),i(this._icon,this.options.iconLoading)):"active"==t?(n(this._container,"requesting following"),i(this._container,"active"),n(this._icon,this.options.iconLoading),i(this._icon,this.options.icon)):"following"==t&&(n(this._container,"requesting"),i(this._container,"active following"),n(this._icon,this.options.iconLoading),i(this._icon,this.options.icon))},_cleanClasses:function(){t.DomUtil.removeClass(this._container,"requesting"),t.DomUtil.removeClass(this._container,"active"),t.DomUtil.removeClass(this._container,"following"),n(this._icon,this.options.iconLoading),i(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1,this._userZoomed=!1}});return t.control.locate=function(e){return new t.Control.Locate(e)},a}),window)},5732:function(t,e){!function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i,n=this._featureGroup,o=this._nonPointGroup,r=this.options.chunkedLoading,a=this.options.chunkInterval,s=this.options.chunkProgress,l=t.length,c=0,h=!0;if(this._map){var u=(new Date).getTime(),p=L.bind((function(){var d=(new Date).getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();c<l&&!(r&&c%200==0&&(new Date).getTime()-d>a);c++)if((i=t[c])instanceof L.LayerGroup)h&&(t=t.slice(),h=!1),this._extractNonGroupLayers(i,t),l=t.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),e||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var m=i.__parent.getAllChildMarkers(),f=m[0]===i?m[1]:m[0];n.removeLayer(f)}}else o.addLayer(i),e||this.fire("layeradd",{layer:i});s&&s(c,l,(new Date).getTime()-u),c===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(p,this.options.chunkDelay)}),this);p()}else for(var d=this._needsClustering;c<l;c++)(i=t[c])instanceof L.LayerGroup?(h&&(t=t.slice(),h=!1),this._extractNonGroupLayers(i,t),l=t.length):i.getLatLng?this.hasLayer(i)||d.push(i):o.addLayer(i);return this},removeLayers:function(t){var e,i,n=t.length,o=this._featureGroup,r=this._nonPointGroup,a=!0;if(!this._map){for(e=0;e<n;e++)(i=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(i,t),n=t.length):(this._arraySplice(this._needsClustering,i),r.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var s=t.slice(),l=n;for(e=0;e<l;e++)(i=s[e])instanceof L.LayerGroup?(this._extractNonGroupLayers(i,s),l=s.length):this._unspiderfyLayer(i)}for(e=0;e<n;e++)(i=t[e])instanceof L.LayerGroup?(a&&(t=t.slice(),a=!1),this._extractNonGroupLayers(i,t),n=t.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),o.hasLayer(i)&&(o.removeLayer(i),i.clusterShow&&i.clusterShow())):(r.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer((function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent}),this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n,o,r=this._needsClustering.slice(),a=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),n=r.length-1;n>=0;n--){for(i=!0,o=a.length-1;o>=0;o--)if(a[o].layer===r[n]){i=!1;break}i&&t.call(e,r[n])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer((function(e){t.push(e)})),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer((function(i){L.stamp(i)===t&&(e=i)})),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(e=(i=this._needsRemoving).length-1;e>=0;e--)if(i[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){var i=this._map;"function"!=typeof e&&(e=function(){});var n=function(){!i.hasLayer(t)&&!i.hasLayer(t.__parent)||this._inZoomAnimation||(this._map.off("moveend",n,this),this.off("animationend",n,this),i.hasLayer(t)?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",n,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",n,this),this.on("animationend",n,this),t.__parent.zoomToBounds())},onAdd:function(t){var e,i,n;if(this._map=t,!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)(n=this._needsRemoving[e]).newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());e>=o&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){var e=t.target.__dragStart;delete t.target.__dragStart,e&&this._moveChild(t.target,e,t.target._latlng)},_removeLayer:function(t,e,i){var n=this._gridClusters,o=this._gridUnclustered,r=this._featureGroup,a=this._map,s=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,c=t.__parent,h=c._markers;for(this._arraySplice(h,t);c&&(c._childCount--,c._boundsNeedUpdate=!0,!(c._zoom<s));)e&&c._childCount<=1?(l=c._markers[0]===t?c._markers[1]:c._markers[0],n[c._zoom].removeObject(c,a.project(c._cLatLng,c._zoom)),o[c._zoom].addObject(l,a.project(l.getLatLng(),c._zoom)),this._arraySplice(c.__parent._childClusters,c),c.__parent._markers.push(l),l.__parent=c.__parent,c._icon&&(r.removeLayer(c),i||r.addLayer(l))):c._iconNeedsUpdate=!0,c=c.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){var e=t.layer,i=e;if("clusterkeypress"!==t.type||!t.originalEvent||13===t.originalEvent.keyCode){for(;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()}},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;"function"!=typeof i&&(n=function(){return i}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var o=t;o>=e;o--)this._gridClusters[o]=new L.DistanceGrid(n(o)),this._gridUnclustered[o]=new L.DistanceGrid(n(o));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,n,o=this._gridClusters,r=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=a;e--){i=this._map.project(t.getLatLng(),e);var s=o[e].getNearObject(i);if(s)return s._addChild(t),void(t.__parent=s);if(s=r[e].getNearObject(i)){var l=s.__parent;l&&this._removeLayer(s,!1);var c=new this._markerCluster(this,e,s,t);o[e].addObject(c,this._map.project(c._cLatLng,e)),s.__parent=c,t.__parent=c;var h=c;for(n=e-1;n>l._zoom;n--)h=new this._markerCluster(this,n,h),o[n].addObject(h,this._map.project(s.getLatLng(),n));return l._addChild(h),void this._removeFromGridUnclustered(s,e)}r[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer((function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()}))},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,n=t.getLayers(),o=0;for(e=e||[];o<n.length;o++)(i=n[o])instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),o=this._featureGroup,r=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(n,t,r,(function(r){var a,s=r._latlng,l=r._markers;for(n.contains(s)||(s=null),r._isSingleParent()&&t+1===e?(o.removeLayer(r),r._recursivelyAddChildrenToMap(null,e,n)):(r.clusterHide(),r._recursivelyAddChildrenToMap(s,e,n)),i=l.length-1;i>=0;i--)a=l[i],n.contains(a._latlng)||o.removeLayer(a)})),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),o.eachLayer((function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()})),this._topClusterLevel._recursively(n,t,e,(function(t){t._recursivelyRestoreChildPositions(e)})),this._ignoreMove=!1,this._enqueue((function(){this._topClusterLevel._recursively(n,t,r,(function(t){o.removeLayer(t),t.clusterShow()})),this._animationEnd()}))},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue((function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()}))):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds(),o=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,o,e+1,i);var r=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue((function(){if(1===t._childCount){var a=t._markers[0];this._ignoreMove=!0,a.setLatLng(a.getLatLng()),this._ignoreMove=!1,a.clusterShow&&a.clusterShow()}else t._recursively(n,i,o,(function(t){t._recursivelyRemoveChildrenFromMap(n,o,e+1)}));r._animationEnd()}))},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t,e){t=t||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(t);for(var n=this._markers.length-1;n>=0;n--)e&&this._markers[n].__dragStart||t.push(this._markers[n]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,i=this._childClusters.slice(),n=this._group._map,o=n.getBoundsZoom(this._bounds),r=this._zoom+1,a=n.getZoom();i.length>0&&o>r;){r++;var s=[];for(e=0;e<i.length;e++)s=s.concat(i[e]._childClusters);i=s}o>r?this._group._map.setView(this._latlng,r):o<=a?this._group._map.setView(this._latlng,a+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,n,o=this._markers,r=this._childClusters,a=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),t=0;t<o.length;t++)i=o[t]._latlng,this._bounds.extend(i),a+=i.lat,s+=i.lng;for(t=0;t<r.length;t++)(e=r[t])._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),i=e._wLatLng,n=e._childCount,a+=i.lat*n,s+=i.lng*n;this._latlng=this._wLatLng=new L.LatLng(a/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,(function(t){var i,n,o=t._markers;for(i=o.length-1;i>=0;i--)(n=o[i])._icon&&(n._setPos(e),n.clusterHide())}),(function(t){var i,n,o=t._childClusters;for(i=o.length-1;i>=0;i--)(n=o[i])._icon&&(n._setPos(e),n.clusterHide())}))},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,n){this._recursively(t,n,e,(function(o){o._recursivelyAnimateChildrenIn(t,o._group._map.latLngToLayerPoint(o.getLatLng()).round(),i),o._isSingleParent()&&i-1===n?(o.clusterShow(),o._recursivelyRemoveChildrenFromMap(t,e,i)):o.clusterHide(),o._addToMap()}))},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,(function(t){t.clusterShow()}))},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,(function(n){if(e!==n._zoom)for(var o=n._markers.length-1;o>=0;o--){var r=n._markers[o];i.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.clusterHide&&r.clusterHide()),n._group._featureGroup.addLayer(r))}}),(function(e){e._addToMap(t)}))},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var o=this._childClusters.length-1;o>=0;o--)this._childClusters[o]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var o,r;this._recursively(t,e-1,i-1,(function(t){for(r=t._markers.length-1;r>=0;r--)o=t._markers[r],n&&n.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())}),(function(t){for(r=t._childClusters.length-1;r>=0;r--)o=t._childClusters[r],n&&n.contains(o._latlng)||(t._group._featureGroup.removeLayer(o),o.clusterShow&&o.clusterShow())}))},_recursively:function(t,e,i,n,o){var r,a,s=this._childClusters,l=this._zoom;if(e<=l&&(n&&n(this),o&&l===i&&o(this)),l<e||l<i)for(r=s.length-1;r>=0;r--)(a=s[r])._boundsNeedUpdate&&a._recalculateBounds(),t.intersects(a._bounds)&&a._recursively(t,e,i,n,o)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var t=this.options.opacity;return this.setOpacity(0),this.options.opacity=t,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),o=this._grid,r=o[n]=o[n]||{},a=r[i]=r[i]||[],s=L.Util.stamp(t);this._objectPoint[s]=e,a.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,o=this._getCoord(e.x),r=this._getCoord(e.y),a=this._grid,s=a[r]=a[r]||{},l=s[o]=s[o]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=l.length;i<n;i++)if(l[i]===t)return l.splice(i,1),1===n&&delete s[o],!0},eachObject:function(t,e){var i,n,o,r,a,s,l=this._grid;for(i in l)for(n in a=l[i])for(o=0,r=(s=a[n]).length;o<r;o++)t.call(e,s[o])&&(o--,r--)},getNearObject:function(t){var e,i,n,o,r,a,s,l,c=this._getCoord(t.x),h=this._getCoord(t.y),u=this._objectPoint,p=this._sqCellSize,d=null;for(e=h-1;e<=h+1;e++)if(o=this._grid[e])for(i=c-1;i<=c+1;i++)if(r=o[i])for(n=0,a=r.length;n<a;n++)s=r[n],((l=this._sqDist(u[L.Util.stamp(s)],t))<p||l<=p&&null===d)&&(p=l,d=s);return d},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,o,r=0,a=null,s=[];for(i=e.length-1;i>=0;i--)n=e[i],(o=this.getDistant(n,t))>0&&(s.push(n),o>r&&(r=o,a=n));return{maxPoint:a,newPoints:s}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?i=(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints))).concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints)):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,o=!1,r=!1,a=null,s=null,l=null,c=null,h=null,u=null;for(e=t.length-1;e>=0;e--){var p=t[e];(!1===i||p.lat>i)&&(a=p,i=p.lat),(!1===n||p.lat<n)&&(s=p,n=p.lat),(!1===o||p.lng>o)&&(l=p,o=p.lng),(!1===r||p.lng<r)&&(c=p,r=p.lng)}return n!==i?(u=s,h=a):(u=c,h=l),[].concat(this.buildConvexHull([u,h],t),this.buildConvexHull([h,u],t))}},L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(null,!0),i=this._group._map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?t=this._group.options.spiderfyShapePositions(e.length,i):e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,i):(i.y+=10,t=this._generatePointsCircle(e.length,i)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,o=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t)/this._2PI,r=this._2PI/t,a=[];for(o=Math.max(o,35),a.length=t,i=0;i<t;i++)n=this._circleStartAngle+i*r,a[i]=new L.Point(e.x+o*Math.cos(n),e.y+o*Math.sin(n))._round();return a},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier,o=n*this._spiralLengthStart,r=n*this._spiralFootSeparation,a=n*this._spiralLengthFactor*this._2PI,s=0,l=[];for(l.length=t,i=t;i>=0;i--)i<t&&(l[i]=new L.Point(e.x+o*Math.cos(s),e.y+o*Math.sin(s))._round()),o+=a/(s+=r/o+5e-4*i);return l},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,o=i._featureGroup,r=this.getAllChildMarkers(null,!0);for(i._ignoreMove=!0,this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],o.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:r}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,n,o,r,a=this._group,s=a._map,l=a._featureGroup,c=this._group.options.spiderLegPolylineOptions;for(a._ignoreMove=!0,i=0;i<t.length;i++)r=s.layerPointToLatLng(e[i]),n=t[i],o=new L.Polyline([this._latlng,r],c),s.addLayer(o),n._spiderLeg=o,n._preSpiderfyLatlng=n._latlng,n.setLatLng(r),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),a._ignoreMove=!1,a.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,n,o,r,a,s,l=this,c=this._group,h=c._map,u=c._featureGroup,p=this._latlng,d=h.latLngToLayerPoint(p),m=L.Path.SVG,f=L.extend({},this._group.options.spiderLegPolylineOptions),g=f.opacity;for(void 0===g&&(g=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),m?(f.opacity=0,f.className=(f.className||"")+" leaflet-cluster-spider-leg"):f.opacity=g,c._ignoreMove=!0,i=0;i<t.length;i++)n=t[i],s=h.layerPointToLatLng(e[i]),o=new L.Polyline([p,s],f),h.addLayer(o),n._spiderLeg=o,m&&(a=(r=o._path).getTotalLength()+.1,r.style.strokeDasharray=a,r.style.strokeDashoffset=a),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),u.addLayer(n),n._setPos&&n._setPos(d);for(c._forceLayout(),c._animationStart(),i=t.length-1;i>=0;i--)s=h.layerPointToLatLng(e[i]),(n=t[i])._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.clusterShow&&n.clusterShow(),m&&((r=(o=n._spiderLeg)._path).style.strokeDashoffset=0,o.setStyle({opacity:g}));this.setOpacity(.3),c._ignoreMove=!1,setTimeout((function(){c._animationEnd(),c.fire("spiderfied",{cluster:l,markers:t})}),200)},_animationUnspiderfy:function(t){var e,i,n,o,r,a,s=this,l=this._group,c=l._map,h=l._featureGroup,u=t?c._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):c.latLngToLayerPoint(this._latlng),p=this.getAllChildMarkers(null,!0),d=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),i=p.length-1;i>=0;i--)(e=p[i])._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,a=!0,e._setPos&&(e._setPos(u),a=!1),e.clusterHide&&(e.clusterHide(),a=!1),a&&h.removeLayer(e),d&&(r=(o=(n=e._spiderLeg)._path).getTotalLength()+.1,o.style.strokeDashoffset=r,n.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout((function(){var t=0;for(i=p.length-1;i>=0;i--)(e=p[i])._spiderLeg&&t++;for(i=p.length-1;i>=0;i--)(e=p[i])._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&h.removeLayer(e),c.removeLayer(e._spiderLeg),delete e._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:p})}),200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i,Object.defineProperty(t,"__esModule",{value:!0})}(e)},5243:function(t,e){
/* @preserve
 * Leaflet 1.6.0, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
!function(t){"use strict";var e="1.6.0",i=Object.freeze;function n(t){var e,i,n,o;for(i=1,n=arguments.length;i<n;i++)for(e in o=arguments[i])t[e]=o[e];return t}Object.freeze=function(t){return t};var o=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}var a=0;function s(t){return t._leaflet_id=t._leaflet_id||++a,t._leaflet_id}function l(t,e,i){var n,o,r,a;return a=function(){n=!1,o&&(r.apply(i,o),o=!1)},r=function(){n?o=arguments:(t.apply(i,arguments),setTimeout(a,e),n=!0)}}function c(t,e,i){var n=e[1],o=e[0],r=n-o;return t===n&&i?t:((t-o)%r+r)%r+o}function h(){return!1}function u(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function p(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return p(t).split(/\s+/)}function m(t,e){for(var i in t.hasOwnProperty("options")||(t.options=t.options?o(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}var g=/\{ *([\w_-]+) *\}/g;function _(t,e){return t.replace(g,(function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n}))}var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}var b="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function x(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var k=0;function w(t){var e=+new Date,i=Math.max(0,16-(e-k));return k=e+i,window.setTimeout(t,i)}var M=window.requestAnimationFrame||x("RequestAnimationFrame")||w,C=window.cancelAnimationFrame||x("CancelAnimationFrame")||x("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function P(t,e,i){if(!i||M!==w)return M.call(window,r(t,e));t.call(e)}function S(t){t&&C.call(window,t)}var T=(Object.freeze||Object)({freeze:i,extend:n,create:o,bind:r,lastId:a,stamp:s,throttle:l,wrapNum:c,falseFn:h,formatNum:u,trim:p,splitWords:d,setOptions:m,getParamString:f,template:_,isArray:v,indexOf:y,emptyImageUrl:b,requestFn:M,cancelFn:C,requestAnimFrame:P,cancelAnimFrame:S});function A(){}function E(t){if("undefined"!=typeof L&&L&&L.Mixin){t=v(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}A.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,r=o(i);for(var a in r.constructor=e,e.prototype=r,this)this.hasOwnProperty(a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(E(t.includes),n.apply(null,[r].concat(t.includes)),delete t.includes),r.options&&(t.options=n(o(r.options),t.options)),n(r,t),r._initHooks=[],r.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=r._initHooks.length;t<e;t++)r._initHooks[t].call(this)}},e},A.include=function(t){return n(this.prototype,t),this},A.mergeOptions=function(t){return n(this.prototype.options,t),this},A.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var D={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else for(var o=0,r=(t=d(t)).length;o<r;o++)this._on(t[o],e,i);return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else for(var o=0,r=(t=d(t)).length;o<r;o++)this._off(t[o],e,i);else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var o={fn:e,ctx:i},r=n,a=0,s=r.length;a<s;a++)if(r[a].fn===e&&r[a].ctx===i)return;r.push(o)},_off:function(t,e,i){var n,o,r;if(this._events&&(n=this._events[t]))if(e){if(i===this&&(i=void 0),n)for(o=0,r=n.length;o<r;o++){var a=n[o];if(a.ctx===i&&a.fn===e)return a.fn=h,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}else{for(o=0,r=n.length;o<r;o++)n[o].fn=h;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var o=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var r=this._events[t];if(r){this._firingCount=this._firingCount+1||1;for(var a=0,s=r.length;a<s;a++){var l=r[a];l.fn.call(l.ctx||this,o)}this._firingCount--}}return i&&this._propagateEvent(o),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var o=r((function(){this.off(t,e,i).off(t,o,i)}),this);return this.on(t,e,i).on(t,o,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};D.addEventListener=D.on,D.removeEventListener=D.clearAllEventListeners=D.off,D.addOneTimeEventListener=D.once,D.fireEvent=D.fire,D.hasEventListeners=D.listens;var O=A.extend(D);function I(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}var B=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function R(t,e,i){return t instanceof I?t:v(t)?new I(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new I(t.x,t.y):new I(t,e,i)}function z(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function F(t,e){return!t||t instanceof z?t:new z(t,e)}function j(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;n<o;n++)this.extend(i[n])}function N(t,e){return t instanceof j?t:new j(t,e)}function U(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function G(t,e,i){return t instanceof U?t:v(t)&&"object"!=typeof t[0]?3===t.length?new U(t[0],t[1],t[2]):2===t.length?new U(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new U(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new U(t,e,i)}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new I(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new I(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=B(this.x),this.y=B(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+u(this.x)+", "+u(this.y)+")"}},z.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new I((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new I(this.min.x,this.max.y)},getTopRight:function(){return new I(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return(t="number"==typeof t[0]||t instanceof I?R(t):F(t))instanceof z?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>=e.x&&n.x<=i.x,a=o.y>=e.y&&n.y<=i.y;return r&&a},overlaps:function(t){t=F(t);var e=this.min,i=this.max,n=t.min,o=t.max,r=o.x>e.x&&n.x<i.x,a=o.y>e.y&&n.y<i.y;return r&&a},isValid:function(){return!(!this.min||!this.max)}},j.prototype={extend:function(t){var e,i,n=this._southWest,o=this._northEast;if(t instanceof U)e=t,i=t;else{if(!(t instanceof j))return t?this.extend(G(t)||N(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||o?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),o.lat=Math.max(i.lat,o.lat),o.lng=Math.max(i.lng,o.lng)):(this._southWest=new U(e.lat,e.lng),this._northEast=new U(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,o=Math.abs(e.lng-i.lng)*t;return new j(new U(e.lat-n,e.lng-o),new U(i.lat+n,i.lng+o))},getCenter:function(){return new U((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new U(this.getNorth(),this.getWest())},getSouthEast:function(){return new U(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof U||"lat"in t?G(t):N(t);var e,i,n=this._southWest,o=this._northEast;return t instanceof j?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=o.lat&&e.lng>=n.lng&&i.lng<=o.lng},intersects:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>=e.lat&&n.lat<=i.lat,a=o.lng>=e.lng&&n.lng<=i.lng;return r&&a},overlaps:function(t){t=N(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),r=o.lat>e.lat&&n.lat<i.lat,a=o.lng>e.lng&&n.lng<i.lng;return r&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=N(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},U.prototype={equals:function(t,e){return!!t&&(t=G(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+u(this.lat,t)+", "+u(this.lng,t)+")"},distanceTo:function(t){return V.distance(this,G(t))},wrap:function(){return V.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return N([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new U(this.lat,this.lng,this.alt)}};var H,Z={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new z(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?c(t.lng,this.wrapLng,!0):t.lng;return new U(this.wrapLat?c(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,o=e.lng-i.lng;if(0===n&&0===o)return t;var r=t.getSouthWest(),a=t.getNorthEast();return new j(new U(r.lat-n,r.lng-o),new U(a.lat-n,a.lng-o))}},V=n({},Z,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),a=Math.sin((e.lng-t.lng)*i/2),s=r*r+Math.cos(n)*Math.cos(o)*a*a,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),W=6378137,q={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),o=Math.sin(n*e);return new I(this.R*t.lng*e,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var e=180/Math.PI;return new U((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:(H=W*Math.PI,new z([-H,-H],[H,H]))};function $(t,e,i,n){if(v(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function Y(t,e,i,n){return new $(t,e,i,n)}$.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new I((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var K=n({},V,{code:"EPSG:3857",projection:q,transformation:function(){var t=.5/(Math.PI*q.R);return Y(t,.5,-t,.5)}()}),J=n({},K,{code:"EPSG:900913"});function X(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var i,n,o,r,a,s,l="";for(i=0,o=t.length;i<o;i++){for(n=0,r=(a=t[i]).length;n<r;n++)l+=(n?"L":"M")+(s=a[n]).x+" "+s.y;l+=e?Et?"z":"x":""}return l||"M0 0"}var tt=document.documentElement.style,et="ActiveXObject"in window,it=et&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),ot=Ot("webkit"),rt=Ot("android"),at=Ot("android 2")||Ot("android 3"),st=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lt=rt&&Ot("Google")&&st<537&&!("AudioNode"in window),ct=!!window.opera,ht=Ot("chrome"),ut=Ot("gecko")&&!ot&&!ct&&!et,pt=!ht&&Ot("safari"),dt=Ot("phantom"),mt="OTransition"in tt,ft=0===navigator.platform.indexOf("Win"),gt=et&&"transition"in tt,_t="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!at,vt="MozPerspective"in tt,yt=!window.L_DISABLE_3D&&(gt||_t||vt)&&!mt&&!dt,bt="undefined"!=typeof orientation||Ot("mobile"),xt=bt&&ot,kt=bt&&_t,wt=!window.PointerEvent&&window.MSPointerEvent,Lt=!(ot||!window.PointerEvent&&!wt),Mt=!window.L_NO_TOUCH&&(Lt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Ct=bt&&ct,Pt=bt&&ut,St=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",h,e),window.removeEventListener("testPassiveEventSupport",h,e)}catch(t){}return t},At=!!document.createElement("canvas").getContext,Et=!(!document.createElementNS||!X("svg").createSVGRect),Dt=!Et&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Ot(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var It=(Object.freeze||Object)({ie:et,ielt9:it,edge:nt,webkit:ot,android:rt,android23:at,androidStock:lt,opera:ct,chrome:ht,gecko:ut,safari:pt,phantom:dt,opera12:mt,win:ft,ie3d:gt,webkit3d:_t,gecko3d:vt,any3d:yt,mobile:bt,mobileWebkit:xt,mobileWebkit3d:kt,msPointer:wt,pointer:Lt,touch:Mt,mobileOpera:Ct,mobileGecko:Pt,retina:St,passiveEvents:Tt,canvas:At,svg:Et,vml:Dt}),Bt=wt?"MSPointerDown":"pointerdown",Rt=wt?"MSPointerMove":"pointermove",zt=wt?"MSPointerUp":"pointerup",Ft=wt?"MSPointerCancel":"pointercancel",jt=["INPUT","SELECT","OPTION"],Nt={},Ut=!1,Gt=0;function Ht(t,e,i,n){return"touchstart"===e?Vt(t,i,n):"touchmove"===e?Kt(t,i,n):"touchend"===e&&Jt(t,i,n),this}function Zt(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(Bt,n,!1):"touchmove"===e?t.removeEventListener(Rt,n,!1):"touchend"===e&&(t.removeEventListener(zt,n,!1),t.removeEventListener(Ft,n,!1)),this}function Vt(t,e,i){var n=r((function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(jt.indexOf(t.target.tagName)<0))return;Ve(t)}Yt(t,e)}));t["_leaflet_touchstart"+i]=n,t.addEventListener(Bt,n,!1),Ut||(document.documentElement.addEventListener(Bt,Wt,!0),document.documentElement.addEventListener(Rt,qt,!0),document.documentElement.addEventListener(zt,$t,!0),document.documentElement.addEventListener(Ft,$t,!0),Ut=!0)}function Wt(t){Nt[t.pointerId]=t,Gt++}function qt(t){Nt[t.pointerId]&&(Nt[t.pointerId]=t)}function $t(t){delete Nt[t.pointerId],Gt--}function Yt(t,e){for(var i in t.touches=[],Nt)t.touches.push(Nt[i]);t.changedTouches=[t],e(t)}function Kt(t,e,i){var n=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&Yt(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(Rt,n,!1)}function Jt(t,e,i){var n=function(t){Yt(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(zt,n,!1),t.addEventListener(Ft,n,!1)}var Xt=wt?"MSPointerDown":Lt?"pointerdown":"touchstart",Qt=wt?"MSPointerUp":Lt?"pointerup":"touchend",te="_leaflet_";function ee(t,e,i){var n,o,r=!1,a=250;function s(t){var e;if(Lt){if(!nt||"mouse"===t.pointerType)return;e=Gt}else e=t.touches.length;if(!(e>1)){var i=Date.now(),s=i-(n||i);o=t.touches?t.touches[0]:t,r=s>0&&s<=a,n=i}}function l(t){if(r&&!o.cancelBubble){if(Lt){if(!nt||"mouse"===t.pointerType)return;var i,a,s={};for(a in o)i=o[a],s[a]=i&&i.bind?i.bind(o):i;o=s}o.type="dblclick",o.button=0,e(o),n=null}}return t[te+Xt+i]=s,t[te+Qt+i]=l,t[te+"dblclick"+i]=e,t.addEventListener(Xt,s,!!Tt&&{passive:!1}),t.addEventListener(Qt,l,!!Tt&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function ie(t,e){var i=t[te+Xt+e],n=t[te+Qt+e],o=t[te+"dblclick"+e];return t.removeEventListener(Xt,i,!!Tt&&{passive:!1}),t.removeEventListener(Qt,n,!!Tt&&{passive:!1}),nt||t.removeEventListener("dblclick",o,!1),this}var ne,oe,re,ae,se,le=Me(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ce=Me(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),he="webkitTransition"===ce||"OTransition"===ce?ce+"End":"transitionend";function ue(t){return"string"==typeof t?document.getElementById(t):t}function pe(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function de(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function me(t){var e=t.parentNode;e&&e.removeChild(t)}function fe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ge(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function _e(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ve(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=ke(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function ye(t,e){if(void 0!==t.classList)for(var i=d(e),n=0,o=i.length;n<o;n++)t.classList.add(i[n]);else if(!ve(t,e)){var r=ke(t);xe(t,(r?r+" ":"")+e)}}function be(t,e){void 0!==t.classList?t.classList.remove(e):xe(t,p((" "+ke(t)+" ").replace(" "+e+" "," ")))}function xe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ke(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function we(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Le(t,e)}function Le(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function Me(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function Ce(t,e,i){var n=e||new I(0,0);t.style[le]=(gt?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function Pe(t,e){t._leaflet_pos=e,yt?Ce(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Se(t){return t._leaflet_pos||new I(0,0)}if("onselectstart"in document)ne=function(){ze(window,"selectstart",Ve)},oe=function(){je(window,"selectstart",Ve)};else{var Te=Me(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ne=function(){if(Te){var t=document.documentElement.style;re=t[Te],t[Te]="none"}},oe=function(){Te&&(document.documentElement.style[Te]=re,re=void 0)}}function Ae(){ze(window,"dragstart",Ve)}function Ee(){je(window,"dragstart",Ve)}function De(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Oe(),ae=t,se=t.style.outline,t.style.outline="none",ze(window,"keydown",Oe))}function Oe(){ae&&(ae.style.outline=se,ae=void 0,se=void 0,je(window,"keydown",Oe))}function Ie(t){do{t=t.parentNode}while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function Be(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Re=(Object.freeze||Object)({TRANSFORM:le,TRANSITION:ce,TRANSITION_END:he,get:ue,getStyle:pe,create:de,remove:me,empty:fe,toFront:ge,toBack:_e,hasClass:ve,addClass:ye,removeClass:be,setClass:xe,getClass:ke,setOpacity:we,testProp:Me,setTransform:Ce,setPosition:Pe,getPosition:Se,disableTextSelection:ne,enableTextSelection:oe,disableImageDrag:Ae,enableImageDrag:Ee,preventOutline:De,restoreOutline:Oe,getSizedParentNode:Ie,getScale:Be});function ze(t,e,i,n){if("object"==typeof e)for(var o in e)Ne(t,o,e[o],i);else for(var r=0,a=(e=d(e)).length;r<a;r++)Ne(t,e[r],i,n);return this}var Fe="_leaflet_events";function je(t,e,i,n){if("object"==typeof e)for(var o in e)Ue(t,o,e[o],i);else if(e)for(var r=0,a=(e=d(e)).length;r<a;r++)Ue(t,e[r],i,n);else{for(var s in t[Fe])Ue(t,s,t[Fe][s]);delete t[Fe]}return this}function Ne(t,e,i,n){var o=e+s(i)+(n?"_"+s(n):"");if(t[Fe]&&t[Fe][o])return this;var r=function(e){return i.call(n||t,e||window.event)},a=r;Lt&&0===e.indexOf("touch")?Ht(t,e,r,o):!Mt||"dblclick"!==e||!ee||Lt&&ht?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!!Tt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,ti(t,e)&&a(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1)):("click"===e&&rt&&(r=function(t){ei(t,a)}),t.addEventListener(e,r,!1)):"attachEvent"in t&&t.attachEvent("on"+e,r):ee(t,r,o),t[Fe]=t[Fe]||{},t[Fe][o]=r}function Ue(t,e,i,n){var o=e+s(i)+(n?"_"+s(n):""),r=t[Fe]&&t[Fe][o];if(!r)return this;Lt&&0===e.indexOf("touch")?Zt(t,e,o):!Mt||"dblclick"!==e||!ie||Lt&&ht?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!!Tt&&{passive:!1}):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r):ie(t,o),t[Fe][o]=null}function Ge(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Qe(t),this}function He(t){return Ne(t,"mousewheel",Ge),this}function Ze(t){return ze(t,"mousedown touchstart dblclick",Ge),Ne(t,"click",Xe),this}function Ve(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function We(t){return Ve(t),Ge(t),this}function qe(t,e){if(!e)return new I(t.clientX,t.clientY);var i=Be(e),n=i.boundingClientRect;return new I((t.clientX-n.left)/i.x-e.clientLeft,(t.clientY-n.top)/i.y-e.clientTop)}var $e=ft&&ht?2*window.devicePixelRatio:ut?window.devicePixelRatio:1;function Ye(t){return nt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/$e:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ke,Je={};function Xe(t){Je[t.type]=!0}function Qe(t){var e=Je[t.type];return Je[t.type]=!1,e}function ti(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}function ei(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=Ke&&i-Ke;n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?We(t):(Ke=i,e(t))}var ii=(Object.freeze||Object)({on:ze,off:je,stopPropagation:Ge,disableScrollPropagation:He,disableClickPropagation:Ze,preventDefault:Ve,stop:We,getMousePosition:qe,getWheelDelta:Ye,fakeStop:Xe,skipped:Qe,isExternalTarget:ti,addListener:ze,removeListener:je}),ni=O.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=Se(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=P(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),Pe(this._el,i),this.fire("step")},_complete:function(){S(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),oi=O.extend({options:{crs:K,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=m(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(G(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ce&&yt&&!Ct&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ze(this._proxy,he,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(G(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(yt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),o=this.getSize().divideBy(2),r=(t instanceof I?t:this.latLngToContainerPoint(t)).subtract(o).multiplyBy(1-1/n),a=this.containerPointToLatLng(o.add(r));return this.setView(a,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():N(t);var i=R(e.paddingTopLeft||e.padding||[0,0]),n=R(e.paddingBottomRight||e.padding||[0,0]),o=this.getBoundsZoom(t,!1,i.add(n));if((o="number"==typeof e.maxZoom?Math.min(e.maxZoom,o):o)===1/0)return{center:t.getCenter(),zoom:o};var r=n.subtract(i).divideBy(2),a=this.project(t.getSouthWest(),o),s=this.project(t.getNorthEast(),o);return{center:this.unproject(a.add(s).divideBy(2).add(r),o),zoom:o}},fitBounds:function(t,e){if(!(t=N(t)).isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=R(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ni,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){ye(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){if(!1===(i=i||{}).animate||!yt)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),o=this.project(t),r=this.getSize(),a=this._zoom;t=G(t),e=void 0===e?a:e;var s=Math.max(r.x,r.y),l=s*this.getZoomScale(a,e),c=o.distanceTo(n)||1,h=1.42,u=h*h;function p(t){var e=(l*l-s*s+(t?-1:1)*u*u*c*c)/(2*(t?l:s)*u*c),i=Math.sqrt(e*e+1)-e;return i<1e-9?-18:Math.log(i)}function d(t){return(Math.exp(t)-Math.exp(-t))/2}function m(t){return(Math.exp(t)+Math.exp(-t))/2}function f(t){return d(t)/m(t)}var g=p(0);function _(t){return s*(m(g)/m(g+h*t))}function v(t){return s*(m(g)*f(g+h*t)-d(g))/u}function y(t){return 1-Math.pow(1-t,1.5)}var b=Date.now(),x=(p(1)-g)/h,k=i.duration?1e3*i.duration:1e3*x*.8;function w(){var i=(Date.now()-b)/k,r=y(i)*x;i<=1?(this._flyToFrame=P(w,this),this._move(this.unproject(n.add(o.subtract(n).multiplyBy(v(r)/c)),a),this.getScaleZoom(s/_(r),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,i.noMoveStart),w.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return(t=N(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,N(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},panInside:function(t,e){var i=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),n=R(e.paddingBottomRight||e.padding||[0,0]),o=this.getCenter(),r=this.project(o),a=this.project(t),s=this.getPixelBounds(),l=s.getSize().divideBy(2),c=F([s.min.add(i),s.max.subtract(n)]);if(!c.contains(a)){this._enforcingBounds=!0;var h=r.subtract(a),u=R(a.x+h.x,a.y+h.y);(a.x<c.min.x||a.x>c.max.x)&&(u.x=r.x-h.x,h.x>0?u.x+=l.x-i.x:u.x-=l.x-n.x),(a.y<c.min.y||a.y>c.max.y)&&(u.y=r.y-h.y,h.y>0?u.y+=l.y-i.y:u.y-=l.y-n.y),this.panTo(this.unproject(u),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=new U(t.coords.latitude,t.coords.longitude),i=e.toBounds(2*t.coords.accuracy),n=this._locateOptions;if(n.setView){var o=this.getBoundsZoom(i);this.setView(e,n.maxZoom?Math.min(o,n.maxZoom):o)}var r={latlng:e,bounds:i,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(r[a]=t.coords[a]);this.fire("locationfound",r)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),me(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(S(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)me(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i=de("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=i),i},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new j(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=N(t),i=R(i||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),r=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),c=F(this.project(s,n),this.project(a,n)).getSize(),h=yt?this.options.zoomSnap:1,u=l.x/c.x,p=l.y/c.y,d=e?Math.max(u,p):Math.min(u,p);return n=this.getScaleZoom(d,n),h&&(n=Math.round(n/(h/100))*(h/100),n=e?Math.ceil(n/h)*h:Math.floor(n/h)*h),Math.max(o,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new I(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new z(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(G(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(G(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(G(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(N(t))},distance:function(t,e){return this.options.crs.distance(G(t),G(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(G(t)))},mouseEventToContainerPoint:function(t){return qe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ue(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");ze(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&yt,ye(t,"leaflet-container"+(Mt?" leaflet-touch":"")+(St?" leaflet-retina":"")+(it?" leaflet-oldie":"")+(pt?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=pe(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Pe(this._mapPane,new I(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ye(t.markerPane,"leaflet-zoom-hide"),ye(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Pe(this._mapPane,new I(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return S(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Pe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[s(this._container)]=this;var e=t?je:ze;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),yt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){S(this._resizeRequest),this._resizeRequest=P((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],o="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,a=!1;r;){if((i=this._targets[s(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){a=!0;break}if(i&&i.listens(e,!0)){if(o&&!ti(r,t))break;if(n.push(i),o)break}if(r===this._container)break;r=r.parentNode}return n.length||a||o||!ti(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!Qe(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||De(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var o=n({},t);o.type="preclick",this._fireDOMEvent(o,o.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var r=i[0];"contextmenu"===e&&r.listens(e,!0)&&Ve(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=r.getLatLng&&(!r._radius||r._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(r.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?r.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var l=0;l<i.length;l++)if(i[l].fire(e,a,!0),a.originalEvent._stopped||!1===i[l].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Se(this._mapPane)||new I(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return F([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),o=this.getSize().divideBy(2),r=new z(n.subtract(o),n.add(o)),a=this._getBoundsOffset(r,i,e);return a.round().equals([0,0])?t:this.unproject(n.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new z(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=F(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),o=n.min.subtract(t.min),r=n.max.subtract(t.max);return new I(this._rebound(o.x,-r.x),this._rebound(o.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=yt?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){be(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i)||(this.panBy(i,e),0))},_createAnimProxy:function(){var t=this._proxy=de("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=le,i=this._proxy.style[e];Ce(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){me(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Ce(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(o)||(P((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),0))},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,ye(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&be(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),P((function(){this._moveEnd(!0)}),this))}});function ri(t,e){return new oi(t,e)}var ai=A.extend({options:{position:"topright"},initialize:function(t){m(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return ye(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(me(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),si=function(t){return new ai(t)};oi.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=de("div",e+"control-container",this._container);function n(n,o){var r=e+n+" "+e+o;t[n+o]=de("div",r,i)}n("top","left"),n("top","right"),n("bottom","left"),n("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)me(this._controlCorners[t]);me(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var li=ai.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){for(var n in m(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return ai.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){ye(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(ye(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):be(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return be(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=de("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ze(e),He(e);var n=this._section=de("section",t+"-list");i&&(this._map.on("click",this.collapse,this),rt||ze(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=de("a",t+"-toggle",e);o.href="#",o.title="Layers",Mt?(ze(o,"click",We),ze(o,"click",this.expand,this)):ze(o,"focus",this.expand,this),i||this.expand(),this._baseLayersList=de("div",t+"-base",n),this._separator=de("div",t+"-separator",n),this._overlaysList=de("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fe(this._baseLayersList),fe(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,o=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers_"+s(this),n),this._layerControlInputs.push(e),e.layerId=s(t.layer),ze(e,"click",this._onInputClick,this);var o=document.createElement("span");o.innerHTML=" "+t.name;var r=document.createElement("div");return i.appendChild(r),r.appendChild(e),r.appendChild(o),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||o.push(e);for(r=0;r<o.length;r++)this._map.hasLayer(o[r])&&this._map.removeLayer(o[r]);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])||this._map.addLayer(n[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),o=i.length-1;o>=0;o--)t=i[o],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),ci=function(t,e,i){return new li(t,e,i)},hi=ai.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=de("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,o){var r=de("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),Ze(r),ze(r,"click",We),ze(r,"click",o,this),ze(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";be(this._zoomInButton,e),be(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&ye(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&ye(this._zoomInButton,e)}});oi.mergeOptions({zoomControl:!0}),oi.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new hi,this.addControl(this.zoomControl))}));var ui=function(t){return new hi(t)},pi=ai.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",i=de("div",e),n=this.options;return this._addScales(n,e+"-line",i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=de("div",e,i)),t.imperial&&(this._iScale=de("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,o=3.2808399*t;o>5280?(e=o/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return e*(i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1)}}),di=function(t){return new pi(t)},mi=ai.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){m(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=de("div","leaflet-control-attribution"),Ze(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});oi.mergeOptions({attributionControl:!0}),oi.addInitHook((function(){this.options.attributionControl&&(new mi).addTo(this)}));var fi=function(t){return new mi(t)};ai.Layers=li,ai.Zoom=hi,ai.Scale=pi,ai.Attribution=mi,si.layers=ci,si.zoom=ui,si.scale=di,si.attribution=fi;var gi=A.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gi.addTo=function(t,e){return t.addHandler(e,this),this};var _i,vi={Events:D},yi=Mt?"touchstart mousedown":"mousedown",bi={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},xi={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ki=O.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){m(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(ze(this._dragStartTarget,yi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ki._dragging===this&&this.finishDrag(),je(this._dragStartTarget,yi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!ve(this._element,"leaflet-zoom-anim")&&!(ki._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(ki._dragging=this,this._preventOutline&&De(this._element),Ae(),ne(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t,i=Ie(this._element);this._startPoint=new I(e.clientX,e.clientY),this._parentScale=Be(i),ze(document,xi[t.type],this._onMove,this),ze(document,bi[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new I(e.clientX,e.clientY)._subtract(this._startPoint);(i.x||i.y)&&(Math.abs(i.x)+Math.abs(i.y)<this.options.clickTolerance||(i.x/=this._parentScale.x,i.y/=this._parentScale.y,Ve(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Se(this._element).subtract(i),ye(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ye(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(i),this._moving=!0,S(this._animRequest),this._lastEvent=t,this._animRequest=P(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Pe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in be(document.body,"leaflet-dragging"),this._lastTarget&&(be(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),xi)je(document,xi[t],this._onMove,this),je(document,bi[t],this._onUp,this);Ee(),oe(),this._moved&&this._moving&&(S(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ki._dragging=!1}});function wi(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=Ci(t=Si(t,i),i)}function Li(t,e,i){return Math.sqrt(Oi(t,e,i,!0))}function Mi(t,e,i){return Oi(t,e,i)}function Ci(t,e){var i=t.length,n=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(i);n[0]=n[i-1]=1,Pi(t,n,e,0,i-1);var o,r=[];for(o=0;o<i;o++)n[o]&&r.push(t[o]);return r}function Pi(t,e,i,n,o){var r,a,s,l=0;for(a=n+1;a<=o-1;a++)(s=Oi(t[a],t[n],t[o],!0))>l&&(r=a,l=s);l>i&&(e[r]=1,Pi(t,e,i,n,r),Pi(t,e,i,r,o))}function Si(t,e){for(var i=[t[0]],n=1,o=0,r=t.length;n<r;n++)Di(t[n],t[o])>e&&(i.push(t[n]),o=n);return o<r-1&&i.push(t[r-1]),i}function Ti(t,e,i,n,o){var r,a,s,l=n?_i:Ei(t,i),c=Ei(e,i);for(_i=c;;){if(!(l|c))return[t,e];if(l&c)return!1;s=Ei(a=Ai(t,e,r=l||c,i,o),i),r===l?(t=a,l=s):(e=a,c=s)}}function Ai(t,e,i,n,o){var r,a,s=e.x-t.x,l=e.y-t.y,c=n.min,h=n.max;return 8&i?(r=t.x+s*(h.y-t.y)/l,a=h.y):4&i?(r=t.x+s*(c.y-t.y)/l,a=c.y):2&i?(r=h.x,a=t.y+l*(h.x-t.x)/s):1&i&&(r=c.x,a=t.y+l*(c.x-t.x)/s),new I(r,a,o)}function Ei(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function Di(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function Oi(t,e,i,n){var o,r=e.x,a=e.y,s=i.x-r,l=i.y-a,c=s*s+l*l;return c>0&&((o=((t.x-r)*s+(t.y-a)*l)/c)>1?(r=i.x,a=i.y):o>0&&(r+=s*o,a+=l*o)),s=t.x-r,l=t.y-a,n?s*s+l*l:new I(r,a)}function Ii(t){return!v(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function Bi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ii(t)}var Ri=(Object.freeze||Object)({simplify:wi,pointToSegmentDistance:Li,closestPointOnSegment:Mi,clipSegment:Ti,_getEdgeIntersection:Ai,_getBitCode:Ei,_sqClosestPointOnSegment:Oi,isFlat:Ii,_flat:Bi});function zi(t,e,i){var n,o,r,a,s,l,c,h,u,p=[1,4,2,8];for(o=0,c=t.length;o<c;o++)t[o]._code=Ei(t[o],e);for(a=0;a<4;a++){for(h=p[a],n=[],o=0,r=(c=t.length)-1;o<c;r=o++)s=t[o],l=t[r],s._code&h?l._code&h||((u=Ai(l,s,h,e,i))._code=Ei(u,e),n.push(u)):(l._code&h&&((u=Ai(l,s,h,e,i))._code=Ei(u,e),n.push(u)),n.push(s));t=n}return t}var Fi=(Object.freeze||Object)({clipPolygon:zi}),ji={project:function(t){return new I(t.lng,t.lat)},unproject:function(t){return new U(t.y,t.x)},bounds:new z([-180,-90],[180,90])},Ni={R:6378137,R_MINOR:6356752.314245179,bounds:new z([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,o=this.R_MINOR/i,r=Math.sqrt(1-o*o),a=r*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-a)/(1+a),r/2);return n=-i*Math.log(Math.max(s,1e-10)),new I(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,o=this.R_MINOR/n,r=Math.sqrt(1-o*o),a=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(a),l=0,c=.1;l<15&&Math.abs(c)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),s+=c=Math.PI/2-2*Math.atan(a*e)-s;return new U(s*i,t.x*i/n)}},Ui=(Object.freeze||Object)({LonLat:ji,Mercator:Ni,SphericalMercator:q}),Gi=n({},V,{code:"EPSG:3395",projection:Ni,transformation:function(){var t=.5/(Math.PI*Ni.R);return Y(t,.5,-t,.5)}()}),Hi=n({},V,{code:"EPSG:4326",projection:ji,transformation:Y(1/180,1,-1/180,.5)}),Zi=n({},Z,{projection:ji,transformation:Y(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});Z.Earth=V,Z.EPSG3395=Gi,Z.EPSG3857=K,Z.EPSG900913=J,Z.EPSG4326=Hi,Z.Simple=Zi;var Vi=O.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",(function(){e.off(i,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});oi.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=s(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&s(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){for(var e=0,i=(t=t?v(t)?t:[t]:[]).length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),e=void 0===o.maxZoom?e:Math.max(e,o.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wi=Vi.extend({initialize:function(t,e){var i,n;if(m(this,e),this._layers={},t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)(i=this._layers[e])[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s(t)}}),qi=function(t,e){return new Wi(t,e)},$i=Wi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Wi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Wi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new j;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),Yi=function(t){return new $i(t)},Ki=A.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){m(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var o=R(n),r=R("shadow"===e&&i.shadowAnchor||i.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return St&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ji(t){return new Ki(t)}var Xi=Ki.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Xi.imagePath||(Xi.imagePath=this._detectIconPath()),(this.options.imagePath||Xi.imagePath)+Ki.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=de("div","leaflet-default-icon-path",document.body),e=pe(t,"background-image")||pe(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Qi=gi.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ki(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ye(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&be(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,r=Se(e._icon),a=i.getPixelBounds(),s=i.getPixelOrigin(),l=F(a.min._subtract(s).add(o),a.max._subtract(s).subtract(o));if(!l.contains(r)){var c=R((Math.max(l.max.x,r.x)-l.max.x)/(a.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(a.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(a.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(a.min.y-l.min.y)).multiplyBy(n);i.panBy(c,{animate:!1}),this._draggable._newPos._add(c),this._draggable._startPos._add(c),Pe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=P(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(S(this._panRequest),this._panRequest=P(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=Se(e._icon),o=e._map.layerPointToLatLng(n);i&&Pe(i,n),e._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){S(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),tn=Vi.extend({options:{icon:new Xi,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){m(this,e),this._latlng=G(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=G(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),ye(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),r=!1;o!==this._shadow&&(this._removeShadow(),r=!0),o&&(ye(o,e),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&r&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),me(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&me(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Pe(this._icon,t),this._shadow&&Pe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(ye(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Qi)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Qi(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&we(this._icon,t),this._shadow&&we(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function en(t,e){return new tn(t,e)}var nn=Vi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return m(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),on=nn.extend({options:{fill:!0,radius:10},initialize:function(t,e){m(this,e),this._latlng=G(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=G(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return nn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new z(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function rn(t,e){return new on(t,e)}var an=on.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=n({},i,{radius:e})),m(this,e),this._latlng=G(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new j(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:nn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===V.distance){var o=Math.PI/180,r=this._mRadius/V.R/o,a=i.project([e+r,t]),s=i.project([e-r,t]),l=a.add(s).divideBy(2),c=i.unproject(l).lat,h=Math.acos((Math.cos(r*o)-Math.sin(e*o)*Math.sin(c*o))/(Math.cos(e*o)*Math.cos(c*o)))/o;(isNaN(h)||0===h)&&(h=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(h)?0:l.x-i.project([c,t-h]).x,this._radiusY=l.y-a.y}else{var u=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(u).x}this._updateBounds()}});function sn(t,e,i){return new an(t,e,i)}var ln=nn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){m(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,o=null,r=Oi,a=0,s=this._parts.length;a<s;a++)for(var l=this._parts[a],c=1,h=l.length;c<h;c++){var u=r(t,e=l[c-1],i=l[c],!0);u<n&&(n=u,o=r(t,e,i))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,a,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,n=0;t<l-1;t++)if(o=s[t],r=s[t+1],(n+=i=o.distanceTo(r))>e)return a=(n-e)/i,this._map.layerPointToLatLng([r.x-a*(r.x-o.x),r.y-a*(r.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=G(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new j,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ii(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=Ii(t),n=0,o=t.length;n<o;n++)i?(e[n]=G(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new z;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new I(t,t);this._pxBounds=new z([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,i){var n,o,r=t[0]instanceof U,a=t.length;if(r){for(o=[],n=0;n<a;n++)o[n]=this._map.latLngToLayerPoint(t[n]),i.extend(o[n]);e.push(o)}else for(n=0;n<a;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,i,n,o,r,a,s,l=this._parts;for(e=0,n=0,o=this._rings.length;e<o;e++)for(i=0,r=(s=this._rings[e]).length;i<r-1;i++)(a=Ti(s[i],s[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(a[0]),a[1]===s[i+1]&&i!==r-2||(l[n].push(a[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=wi(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,o,r,a,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(n=0,o=(a=(s=this._parts[i]).length)-1;n<a;o=n++)if((e||0!==n)&&Li(t,s[o],s[n])<=l)return!0;return!1}});function cn(t,e){return new ln(t,e)}ln._flat=Bi;var hn=ln.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,o,r,a,s,l,c=this._rings[0],h=c.length;if(!h)return null;for(r=a=s=0,t=0,e=h-1;t<h;e=t++)i=c[t],n=c[e],o=i.y*n.x-n.y*i.x,a+=(i.x+n.x)*o,s+=(i.y+n.y)*o,r+=3*o;return l=0===r?c[0]:[a/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=ln.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof U&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){ln.prototype._setLatLngs.call(this,t),Ii(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ii(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new I(e,e);if(t=new z(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var n,o=0,r=this._rings.length;o<r;o++)(n=zi(this._rings[o],t,!0)).length&&this._parts.push(n)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,o,r,a,s,l,c=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,s=this._parts.length;o<s;o++)for(r=0,a=(l=(e=this._parts[o]).length)-1;r<l;a=r++)i=e[r],n=e[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(c=!c);return c||ln.prototype._containsPoint.call(this,t,!0)}});function un(t,e){return new hn(t,e)}var pn=$i.extend({initialize:function(t,e){m(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,o=v(t)?t:t.features;if(o){for(e=0,i=o.length;e<i;e++)((n=o[e]).geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var a=dn(t,r);return a?(a.feature=bn(t),a.defaultOptions=a.options,this.resetStyle(a),r.onEachFeature&&r.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function dn(t,e){var i,n,o,r,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,l=[],c=e&&e.pointToLayer,h=e&&e.coordsToLatLng||fn;if(!s&&!a)return null;switch(a.type){case"Point":return mn(c,t,i=h(s),e);case"MultiPoint":for(o=0,r=s.length;o<r;o++)i=h(s[o]),l.push(mn(c,t,i,e));return new $i(l);case"LineString":case"MultiLineString":return n=gn(s,"LineString"===a.type?0:1,h),new ln(n,e);case"Polygon":case"MultiPolygon":return n=gn(s,"Polygon"===a.type?1:2,h),new hn(n,e);case"GeometryCollection":for(o=0,r=a.geometries.length;o<r;o++){var u=dn({geometry:a.geometries[o],type:"Feature",properties:t.properties},e);u&&l.push(u)}return new $i(l);default:throw new Error("Invalid GeoJSON object.")}}function mn(t,e,i,n){return t?t(e,i):new tn(i,n&&n.markersInheritOptions&&n)}function fn(t){return new U(t[1],t[0],t[2])}function gn(t,e,i){for(var n,o=[],r=0,a=t.length;r<a;r++)n=e?gn(t[r],e-1,i):(i||fn)(t[r]),o.push(n);return o}function _n(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[u(t.lng,e),u(t.lat,e),u(t.alt,e)]:[u(t.lng,e),u(t.lat,e)]}function vn(t,e,i,n){for(var o=[],r=0,a=t.length;r<a;r++)o.push(e?vn(t[r],e-1,i,n):_n(t[r],n));return!e&&i&&o.push(o[0]),o}function yn(t,e){return t.feature?n({},t.feature,{geometry:e}):bn(e)}function bn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var xn={toGeoJSON:function(t){return yn(this,{type:"Point",coordinates:_n(this.getLatLng(),t)})}};function kn(t,e){return new pn(t,e)}tn.include(xn),an.include(xn),on.include(xn),ln.include({toGeoJSON:function(t){var e=!Ii(this._latlngs);return yn(this,{type:(e?"Multi":"")+"LineString",coordinates:vn(this._latlngs,e?1:0,!1,t)})}}),hn.include({toGeoJSON:function(t){var e=!Ii(this._latlngs),i=e&&!Ii(this._latlngs[0]),n=vn(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),yn(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),Wi.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(i){e.push(i.toGeoJSON(t).geometry.coordinates)})),yn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer((function(e){if(e.toGeoJSON){var o=e.toGeoJSON(t);if(i)n.push(o.geometry);else{var r=bn(o);"FeatureCollection"===r.type?n.push.apply(n,r.features):n.push(r)}}})),i?yn(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var wn=kn,Ln=Vi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=N(e),m(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ye(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){me(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ge(this._image),this},bringToBack:function(){return this._map&&_e(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=N(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:de("img");ye(e,"leaflet-image-layer"),this._zoomAnimated&&ye(e,"leaflet-zoom-animated"),this.options.className&&ye(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ce(this._image,i,e)},_reset:function(){var t=this._image,e=new z(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();Pe(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Mn=function(t,e,i){return new Ln(t,e,i)},Cn=Ln.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:de("video");if(ye(e,"leaflet-image-layer"),this._zoomAnimated&&ye(e,"leaflet-zoom-animated"),this.options.className&&ye(e,this.options.className),e.onselectstart=h,e.onmousemove=h,e.onloadeddata=r(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],o=0;o<i.length;o++)n.push(i[o].src);this._url=i.length>0?n:[e.src]}else{v(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&e.style.hasOwnProperty("objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var s=de("source");s.src=this._url[a],e.appendChild(s)}}}});function Pn(t,e,i){return new Cn(t,e,i)}var Sn=Ln.extend({_initImage:function(){var t=this._image=this._url;ye(t,"leaflet-image-layer"),this._zoomAnimated&&ye(t,"leaflet-zoom-animated"),this.options.className&&ye(t,this.options.className),t.onselectstart=h,t.onmousemove=h}});function Tn(t,e,i){return new Sn(t,e,i)}var An=Vi.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){m(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&we(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(r(me,void 0,this._container),200)):me(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=G(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ge(this._container),this},bringToBack:function(){return this._map&&_e(this._container),this},_prepareOpen:function(t,e,i){if(e instanceof Vi||(i=e,e=t),e instanceof $i)for(var n in t._layers){e=t._layers[n];break}if(!i)if(e.getCenter)i=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");i=e.getLatLng()}return this._source=e,this.update(),i},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),i=this._getAnchor();this._zoomAnimated?Pe(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),En=An.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){An.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof nn||this._source.on("preclick",Ge))},onRemove:function(t){An.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof nn||this._source.off("preclick",Ge))},getEvents:function(){var t=An.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=de("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=de("div",t+"-content-wrapper",e);if(this._contentNode=de("div",t+"-content",i),Ze(i),He(this._contentNode),ze(i,"contextmenu",Ge),this._tipContainer=de("div",t+"-tip-container",e),this._tip=de("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=de("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",ze(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,o=this.options.maxHeight,r="leaflet-popup-scrolled";o&&n>o?(e.height=o+"px",ye(t,r)):be(t,r),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();Pe(this._container,e.add(i))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(pe(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,o=new I(this._containerLeft,-i-this._containerBottom);o._add(Se(this._container));var r=t.layerPointToContainerPoint(o),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),l=R(this.options.autoPanPaddingBottomRight||a),c=t.getSize(),h=0,u=0;r.x+n+l.x>c.x&&(h=r.x+n-c.x+l.x),r.x-h-s.x<0&&(h=r.x-s.x),r.y+i+l.y>c.y&&(u=r.y+i-c.y+l.y),r.y-u-s.y<0&&(u=r.y-s.y),(h||u)&&t.fire("autopanstart").panBy([h,u])}},_onCloseButtonClick:function(t){this._close(),We(t)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Dn=function(t,e){return new En(t,e)};oi.mergeOptions({closePopupOnClick:!0}),oi.include({openPopup:function(t,e,i){return t instanceof En||(t=new En(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Vi.include({bindPopup:function(t,e){return t instanceof En?(m(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new En(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(We(t),e instanceof nn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var On=An.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){An.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){An.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=An.prototype.getEvents.call(this);return Mt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=de("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),o=e.layerPointToContainerPoint(t),r=this.options.direction,a=i.offsetWidth,s=i.offsetHeight,l=R(this.options.offset),c=this._getAnchor();"top"===r?t=t.add(R(-a/2+l.x,-s+l.y+c.y,!0)):"bottom"===r?t=t.subtract(R(a/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(R(a/2+l.x,s/2-c.y+l.y,!0)):"right"===r||"auto"===r&&o.x<n.x?(r="right",t=t.add(R(l.x+c.x,c.y-s/2+l.y,!0))):(r="left",t=t.subtract(R(a+c.x-l.x,s/2-c.y-l.y,!0))),be(i,"leaflet-tooltip-right"),be(i,"leaflet-tooltip-left"),be(i,"leaflet-tooltip-top"),be(i,"leaflet-tooltip-bottom"),ye(i,"leaflet-tooltip-"+r),Pe(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&we(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),In=function(t,e){return new On(t,e)};oi.include({openTooltip:function(t,e,i){return t instanceof On||(t=new On(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Vi.include({bindTooltip:function(t,e){return t instanceof On?(m(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new On(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),Mt&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(ye(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(be(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var Bn=Ki.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(i.html instanceof Element?(fe(e),e.appendChild(i.html)):e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=R(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Rn(t){return new Bn(t)}Ki.Default=Xi;var zn=Vi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:bt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){m(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),me(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ge(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(_e(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=l(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof I?t:new I(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),o=0,r=i.length;o<r;o++)e=i[o].style.zIndex,i[o]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!it){we(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var r=Math.min(1,(t-o.loaded)/200);we(o.el,r),r<1?e=!0:(o.active?i=!0:this._onOpaqueTile(o),o.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(S(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=de("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(me(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],o=this._map;return n||((n=this._levels[t]={}).el=de("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),h(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)me(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var o=Math.floor(t/2),r=Math.floor(e/2),a=i-1,s=new I(+o,+r);s.z=+a;var l=this._tileCoordsToKey(s),c=this._tiles[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>n&&this._retainParent(o,r,a,n))},_retainChildren:function(t,e,i,n){for(var o=2*t;o<2*t+2;o++)for(var r=2*e;r<2*e+2;r++){var a=new I(o,r);a.z=i+1;var s=this._tileCoordsToKey(a),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(o,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var o=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var r=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!r||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();yt?Ce(t.el,o,n):Pe(t.el,o)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),o=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new z(o.subtract(r),o.add(r))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),r=o.getCenter(),a=[],s=this.options.keepBuffer,l=new z(o.getBottomLeft().subtract([s,-s]),o.getTopRight().add([s,-s]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var c in this._tiles){var h=this._tiles[c].coords;h.z===this._tileZoom&&l.contains(new I(h.x,h.y))||(this._tiles[c].current=!1)}if(Math.abs(i-this._tileZoom)>1)this._setView(t,i);else{for(var u=o.min.y;u<=o.max.y;u++)for(var p=o.min.x;p<=o.max.x;p++){var d=new I(p,u);if(d.z=this._tileZoom,this._isValidTile(d)){var m=this._tiles[this._tileCoordsToKey(d)];m?m.current=!0:a.push(d)}}if(a.sort((function(t,e){return t.distanceTo(r)-e.distanceTo(r)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var f=document.createDocumentFragment();for(p=0;p<a.length;p++)this._addTile(a[p],f);this._level.el.appendChild(f)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return N(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),o=n.add(i);return[e.unproject(n,t.z),e.unproject(o,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new j(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new I(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(me(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){ye(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=h,t.onmousemove=h,it&&this.options.opacity<1&&we(t,this.options.opacity),rt&&!at&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&P(r(this._tileReady,this,t,null,o)),Pe(o,i),this._tiles[n]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,i){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);(i=this._tiles[n])&&(i.loaded=+new Date,this._map._fadeAnimated?(we(i.el,0),S(this._fadeFrame),this._fadeFrame=P(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(ye(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),it||!this._map._fadeAnimated?P(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new I(this._wrapX?c(t.x,this._wrapX):t.x,this._wrapY?c(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new z(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Fn(t){return new zn(t)}var jn=zn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=m(this,e)).detectRetina&&St&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),rt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return ze(i,"load",r(this._tileOnLoad,this,e,i)),ze(i,"error",r(this._tileOnError,this,e,i)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:St?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return _(this._url,n(e,this.options))},_tileOnLoad:function(t,e){it?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=h,e.onerror=h,e.complete||(e.src=b,me(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return lt||e.el.setAttribute("src",b),zn.prototype._removeTile.call(this,t)},_tileReady:function(t,e,i){if(this._map&&(!i||i.getAttribute("src")!==b))return zn.prototype._tileReady.call(this,t,e,i)}});function Nn(t,e){return new jn(t,e)}var Un=jn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var o in e)o in this.options||(i[o]=e[o]);var r=(e=m(this,e)).detectRetina&&St?2:1,a=this.getTileSize();i.width=a.x*r,i.height=a.y*r,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,jn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=F(i.project(e[0]),i.project(e[1])),o=n.min,r=n.max,a=(this._wmsVersion>=1.3&&this._crs===Hi?[o.y,o.x,r.y,r.x]:[o.x,o.y,r.x,r.y]).join(","),s=jn.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function Gn(t,e){return new Un(t,e)}jn.WMS=Un,Nn.wms=Gn;var Hn=Vi.extend({options:{padding:.1,tolerance:0},initialize:function(t){m(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&ye(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=Se(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),a=this._map.project(t,e).subtract(r),s=o.multiplyBy(-i).add(n).add(o).subtract(a);yt?Ce(this._container,s,i):Pe(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new z(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Zn=Hn.extend({getEvents:function(){var t=Hn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");ze(t,"mousemove",this._onMouseMove,this),ze(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ze(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){S(this._redrawRequest),delete this._ctx,me(this._container),je(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hn.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=St?2:1;Pe(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",St&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Hn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[s(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var e,i,n=t.options.dashArray.split(/[, ]+/),o=[];for(i=0;i<n.length;i++){if(e=Number(n[i]),isNaN(e))return;o.push(e)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||P(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new z,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,o,r,a=t._parts,s=a.length,l=this._ctx;if(s){for(l.beginPath(),i=0;i<s;i++){for(n=0,o=a[i].length;n<o;n++)r=a[i][n],l[n?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==o&&(i.save(),i.scale(1,o)),i.beginPath(),i.arc(e.x,e.y/o,n,0,2*Math.PI,!1),1!==o&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)(e=o.layer).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(Xe(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(be(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var i,n,o=this._drawFirst;o;o=o.next)(i=o.layer).options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(ye(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function Vn(t){return At?new Zn(t):null}var Wn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),qn={_initContainer:function(){this._container=de("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Wn("shape");ye(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Wn("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;me(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(e||(e=t._stroke=Wn("stroke")),o.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=v(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(o.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=Wn("fill")),o.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(o.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ge(t._container)},_bringToBack:function(t){_e(t._container)}},$n=Dt?Wn:X,Yn=Hn.extend({getEvents:function(){var t=Hn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=$n("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=$n("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){me(this._container),je(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Hn.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),Pe(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=$n("path");t.options.className&&ye(e,t.options.className),t.options.interactive&&ye(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){me(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n="a"+i+","+(Math.max(Math.round(t._radiusY),1)||i)+" 0 1,0 ",o=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+n+2*i+",0 "+n+2*-i+",0 ";this._setPath(t,o)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ge(t._path)},_bringToBack:function(t){_e(t._path)}});function Kn(t){return Et||Dt?new Yn(t):null}Dt&&Yn.include(qn),oi.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&Vn(t)||Kn(t)}});var Jn=hn.extend({initialize:function(t,e){hn.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=N(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Xn(t,e){return new Jn(t,e)}Yn.create=$n,Yn.pointsToPath=Q,pn.geometryToLayer=dn,pn.coordsToLatLng=fn,pn.coordsToLatLngs=gn,pn.latLngToCoords=_n,pn.latLngsToCoords=vn,pn.getFeature=yn,pn.asFeature=bn,oi.mergeOptions({boxZoom:!0});var Qn=gi.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){je(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){me(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),ne(),Ae(),this._startPoint=this._map.mouseEventToContainerPoint(t),ze(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=de("div","leaflet-zoom-box",this._container),ye(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new z(this._point,this._startPoint),i=e.getSize();Pe(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(me(this._box),be(this._container,"leaflet-crosshair")),oe(),Ee(),je(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new j(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});oi.addInitHook("addHandler","boxZoom",Qn),oi.mergeOptions({doubleClickZoom:!0});var to=gi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,o=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(o):e.setZoomAround(t.containerPoint,o)}});oi.addInitHook("addHandler","doubleClickZoom",to),oi.mergeOptions({dragging:!0,inertia:!at,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var eo=gi.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ki(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}ye(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){be(this._map._container,"leaflet-grab"),be(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=N(this._map.options.maxBounds);this._offsetLimit=F(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(r+i)?o:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,a=i.easeLinearity,s=o.multiplyBy(a/r),l=s.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,l),h=s.multiplyBy(c/l),u=c/(i.inertiaDeceleration*a),p=h.multiplyBy(-u/2).round();p.x||p.y?(p=e._limitOffset(p,e.options.maxBounds),P((function(){e.panBy(p,{duration:u,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});oi.addInitHook("addHandler","dragging",eo),oi.mergeOptions({keyboard:!0,keyboardPanDelta:80});var io=gi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),ze(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),je(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;e<i;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;e<i;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;e<i;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;e<i;e++)n[o.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;e<i;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;e<i;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){je(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys)n._panAnim&&n._panAnim._inProgress||(e=this._panKeys[i],t.shiftKey&&(e=R(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}We(t)}}});oi.addInitHook("addHandler","keyboard",io),oi.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var no=gi.extend({addHooks:function(){ze(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){je(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ye(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),n),We(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=i?Math.ceil(o/i)*i:o,a=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});oi.addInitHook("addHandler","scrollWheelZoom",no),oi.mergeOptions({tap:!0,tapTolerance:15});var oo=gi.extend({addHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){je(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ve(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new I(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&ye(i,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),ze(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),je(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&be(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new I(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});Mt&&!Lt&&oi.addInitHook("addHandler","tap",oo),oi.mergeOptions({touchZoom:Mt&&!at,bounceAtZoomLimits:!0});var ro=gi.extend({addHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){be(this._map._container,"leaflet-touch-zoom"),je(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend",this._onTouchEnd,this),Ve(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),o=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),S(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=P(s,this,!0),Ve(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,S(this._animRequest),je(document,"touchmove",this._onTouchMove),je(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});oi.addInitHook("addHandler","touchZoom",ro),oi.BoxZoom=Qn,oi.DoubleClickZoom=to,oi.Drag=eo,oi.Keyboard=io,oi.ScrollWheelZoom=no,oi.Tap=oo,oi.TouchZoom=ro,Object.freeze=i,t.version=e,t.Control=ai,t.control=si,t.Browser=It,t.Evented=O,t.Mixin=vi,t.Util=T,t.Class=A,t.Handler=gi,t.extend=n,t.bind=r,t.stamp=s,t.setOptions=m,t.DomEvent=ii,t.DomUtil=Re,t.PosAnimation=ni,t.Draggable=ki,t.LineUtil=Ri,t.PolyUtil=Fi,t.Point=I,t.point=R,t.Bounds=z,t.bounds=F,t.Transformation=$,t.transformation=Y,t.Projection=Ui,t.LatLng=U,t.latLng=G,t.LatLngBounds=j,t.latLngBounds=N,t.CRS=Z,t.GeoJSON=pn,t.geoJSON=kn,t.geoJson=wn,t.Layer=Vi,t.LayerGroup=Wi,t.layerGroup=qi,t.FeatureGroup=$i,t.featureGroup=Yi,t.ImageOverlay=Ln,t.imageOverlay=Mn,t.VideoOverlay=Cn,t.videoOverlay=Pn,t.SVGOverlay=Sn,t.svgOverlay=Tn,t.DivOverlay=An,t.Popup=En,t.popup=Dn,t.Tooltip=On,t.tooltip=In,t.Icon=Ki,t.icon=Ji,t.DivIcon=Bn,t.divIcon=Rn,t.Marker=tn,t.marker=en,t.TileLayer=jn,t.tileLayer=Nn,t.GridLayer=zn,t.gridLayer=Fn,t.SVG=Yn,t.svg=Kn,t.Renderer=Hn,t.Canvas=Zn,t.canvas=Vn,t.Path=nn,t.CircleMarker=on,t.circleMarker=rn,t.Circle=an,t.circle=sn,t.Polyline=ln,t.polyline=cn,t.Polygon=hn,t.polygon=un,t.Rectangle=Jn,t.rectangle=Xn,t.Map=oi,t.map=ri;var ao=window.L;t.noConflict=function(){return window.L=ao,this},window.L=t}(e)},6492:function(){},4111:function(){},4528:function(){},6145:function(){},1170:function(){},3336:function(){},3981:function(){},2559:function(){},7615:function(){},2171:function(){},1909:function(){},434:function(){},3067:function(){},2189:function(){},5964:function(){},1441:function(){},711:function(){},4301:function(){},7344:function(){},7252:function(){},6192:function(t,e){var i,n,o,r=function(){var t=function(t,e){var i=t,n=h[e],o=null,r=0,a=null,s=[],l={},c=function(t,e){o=function(t){for(var e=new Array(t),i=0;i<t;i+=1){e[i]=new Array(t);for(var n=0;n<t;n+=1)e[i][n]=null}return e}(r=4*i+17),u(0,0),u(r-7,0),u(0,r-7),d(),p(),f(t,e),i>=7&&m(t),null==a&&(a=_(i,n,s)),g(a,e)},u=function(t,e){for(var i=-1;i<=7;i+=1)if(!(t+i<=-1||r<=t+i))for(var n=-1;n<=7;n+=1)e+n<=-1||r<=e+n||(o[t+i][e+n]=0<=i&&i<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==i||6==i)||2<=i&&i<=4&&2<=n&&n<=4)},p=function(){for(var t=8;t<r-8;t+=1)null==o[t][6]&&(o[t][6]=t%2==0);for(var e=8;e<r-8;e+=1)null==o[6][e]&&(o[6][e]=e%2==0)},d=function(){for(var t=y.getPatternPosition(i),e=0;e<t.length;e+=1)for(var n=0;n<t.length;n+=1){var r=t[e],a=t[n];if(null==o[r][a])for(var s=-2;s<=2;s+=1)for(var l=-2;l<=2;l+=1)o[r+s][a+l]=-2==s||2==s||-2==l||2==l||0==s&&0==l}},m=function(t){for(var e=y.getBCHTypeNumber(i),n=0;n<18;n+=1){var a=!t&&1==(e>>n&1);o[Math.floor(n/3)][n%3+r-8-3]=a}for(n=0;n<18;n+=1){a=!t&&1==(e>>n&1);o[n%3+r-8-3][Math.floor(n/3)]=a}},f=function(t,e){for(var i=n<<3|e,a=y.getBCHTypeInfo(i),s=0;s<15;s+=1){var l=!t&&1==(a>>s&1);s<6?o[s][8]=l:s<8?o[s+1][8]=l:o[r-15+s][8]=l}for(s=0;s<15;s+=1){l=!t&&1==(a>>s&1);s<8?o[8][r-s-1]=l:s<9?o[8][15-s-1+1]=l:o[8][15-s-1]=l}o[r-8][8]=!t},g=function(t,e){for(var i=-1,n=r-1,a=7,s=0,l=y.getMaskFunction(e),c=r-1;c>0;c-=2)for(6==c&&(c-=1);;){for(var h=0;h<2;h+=1)if(null==o[n][c-h]){var u=!1;s<t.length&&(u=1==(t[s]>>>a&1)),l(n,c-h)&&(u=!u),o[n][c-h]=u,-1==(a-=1)&&(s+=1,a=7)}if((n+=i)<0||r<=n){n-=i,i=-i;break}}},_=function(t,e,i){for(var n=k.getRSBlocks(t,e),o=w(),r=0;r<i.length;r+=1){var a=i[r];o.put(a.getMode(),4),o.put(a.getLength(),y.getLengthInBits(a.getMode(),t)),a.write(o)}var s=0;for(r=0;r<n.length;r+=1)s+=n[r].dataCount;if(o.getLengthInBits()>8*s)throw"code length overflow. ("+o.getLengthInBits()+">"+8*s+")";for(o.getLengthInBits()+4<=8*s&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*s||(o.put(236,8),o.getLengthInBits()>=8*s));)o.put(17,8);return function(t,e){for(var i=0,n=0,o=0,r=new Array(e.length),a=new Array(e.length),s=0;s<e.length;s+=1){var l=e[s].dataCount,c=e[s].totalCount-l;n=Math.max(n,l),o=Math.max(o,c),r[s]=new Array(l);for(var h=0;h<r[s].length;h+=1)r[s][h]=255&t.getBuffer()[h+i];i+=l;var u=y.getErrorCorrectPolynomial(c),p=x(r[s],u.getLength()-1).mod(u);for(a[s]=new Array(u.getLength()-1),h=0;h<a[s].length;h+=1){var d=h+p.getLength()-a[s].length;a[s][h]=d>=0?p.getAt(d):0}}var m=0;for(h=0;h<e.length;h+=1)m+=e[h].totalCount;var f=new Array(m),g=0;for(h=0;h<n;h+=1)for(s=0;s<e.length;s+=1)h<r[s].length&&(f[g]=r[s][h],g+=1);for(h=0;h<o;h+=1)for(s=0;s<e.length;s+=1)h<a[s].length&&(f[g]=a[s][h],g+=1);return f}(o,n)};l.addData=function(t,e){var i=null;switch(e=e||"Byte"){case"Numeric":i=L(t);break;case"Alphanumeric":i=M(t);break;case"Byte":i=C(t);break;case"Kanji":i=P(t);break;default:throw"mode:"+e}s.push(i),a=null},l.isDark=function(t,e){if(t<0||r<=t||e<0||r<=e)throw t+","+e;return o[t][e]},l.getModuleCount=function(){return r},l.make=function(){if(i<1){for(var t=1;t<40;t++){for(var e=k.getRSBlocks(t,n),o=w(),r=0;r<s.length;r++){var a=s[r];o.put(a.getMode(),4),o.put(a.getLength(),y.getLengthInBits(a.getMode(),t)),a.write(o)}var h=0;for(r=0;r<e.length;r++)h+=e[r].dataCount;if(o.getLengthInBits()<=8*h)break}i=t}c(!1,function(){for(var t=0,e=0,i=0;i<8;i+=1){c(!0,i);var n=y.getLostPoint(l);(0==i||t>n)&&(t=n,e=i)}return e}())},l.createTableTag=function(t,e){t=t||2;var i="";i+='<table style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: "+(e=void 0===e?4*t:e)+"px;",i+='">',i+="<tbody>";for(var n=0;n<l.getModuleCount();n+=1){i+="<tr>";for(var o=0;o<l.getModuleCount();o+=1)i+='<td style="',i+=" border-width: 0px; border-style: none;",i+=" border-collapse: collapse;",i+=" padding: 0px; margin: 0px;",i+=" width: "+t+"px;",i+=" height: "+t+"px;",i+=" background-color: ",i+=l.isDark(n,o)?"#000000":"#ffffff",i+=";",i+='"/>';i+="</tr>"}return i+="</tbody>",i+="</table>"},l.createSvgTag=function(t,e,i,n){var o={};"object"==typeof arguments[0]&&(t=(o=arguments[0]).cellSize,e=o.margin,i=o.alt,n=o.title),t=t||2,e=void 0===e?4*t:e,(i="string"==typeof i?{text:i}:i||{}).text=i.text||null,i.id=i.text?i.id||"qrcode-description":null,(n="string"==typeof n?{text:n}:n||{}).text=n.text||null,n.id=n.text?n.id||"qrcode-title":null;var r,a,s,c,h=l.getModuleCount()*t+2*e,u="";for(c="l"+t+",0 0,"+t+" -"+t+",0 0,-"+t+"z ",u+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',u+=o.scalable?"":' width="'+h+'px" height="'+h+'px"',u+=' viewBox="0 0 '+h+" "+h+'" ',u+=' preserveAspectRatio="xMinYMin meet"',u+=n.text||i.text?' role="img" aria-labelledby="'+v([n.id,i.id].join(" ").trim())+'"':"",u+=">",u+=n.text?'<title id="'+v(n.id)+'">'+v(n.text)+"</title>":"",u+=i.text?'<description id="'+v(i.id)+'">'+v(i.text)+"</description>":"",u+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',u+='<path d="',a=0;a<l.getModuleCount();a+=1)for(s=a*t+e,r=0;r<l.getModuleCount();r+=1)l.isDark(a,r)&&(u+="M"+(r*t+e)+","+s+c);return u+='" stroke="transparent" fill="black"/>',u+="</svg>"},l.createDataURL=function(t,e){t=t||2,e=void 0===e?4*t:e;var i=l.getModuleCount()*t+2*e,n=e,o=i-e;return A(i,i,(function(e,i){if(n<=e&&e<o&&n<=i&&i<o){var r=Math.floor((e-n)/t),a=Math.floor((i-n)/t);return l.isDark(a,r)?0:1}return 1}))},l.createImgTag=function(t,e,i){t=t||2,e=void 0===e?4*t:e;var n=l.getModuleCount()*t+2*e,o="";return o+="<img",o+=' src="',o+=l.createDataURL(t,e),o+='"',o+=' width="',o+=n,o+='"',o+=' height="',o+=n,o+='"',i&&(o+=' alt="',o+=v(i),o+='"'),o+="/>"};var v=function(t){for(var e="",i=0;i<t.length;i+=1){var n=t.charAt(i);switch(n){case"<":e+="&lt;";break;case">":e+="&gt;";break;case"&":e+="&amp;";break;case'"':e+="&quot;";break;default:e+=n}}return e};return l.createASCII=function(t,e){if((t=t||1)<2)return function(t){t=void 0===t?2:t;var e,i,n,o,r,a=1*l.getModuleCount()+2*t,s=t,c=a-t,h={"██":"█","█ ":"▀"," █":"▄","  ":" "},u={"██":"▀","█ ":"▀"," █":" ","  ":" "},p="";for(e=0;e<a;e+=2){for(n=Math.floor((e-s)/1),o=Math.floor((e+1-s)/1),i=0;i<a;i+=1)r="█",s<=i&&i<c&&s<=e&&e<c&&l.isDark(n,Math.floor((i-s)/1))&&(r=" "),s<=i&&i<c&&s<=e+1&&e+1<c&&l.isDark(o,Math.floor((i-s)/1))?r+=" ":r+="█",p+=t<1&&e+1>=c?u[r]:h[r];p+="\n"}return a%2&&t>0?p.substring(0,p.length-a-1)+Array(a+1).join("▀"):p.substring(0,p.length-1)}(e);t-=1,e=void 0===e?2*t:e;var i,n,o,r,a=l.getModuleCount()*t+2*e,s=e,c=a-e,h=Array(t+1).join("██"),u=Array(t+1).join("  "),p="",d="";for(i=0;i<a;i+=1){for(o=Math.floor((i-s)/t),d="",n=0;n<a;n+=1)r=1,s<=n&&n<c&&s<=i&&i<c&&l.isDark(o,Math.floor((n-s)/t))&&(r=0),d+=r?h:u;for(o=0;o<t;o+=1)p+=d+"\n"}return p.substring(0,p.length-1)},l.renderTo2dContext=function(t,e){e=e||2;for(var i=l.getModuleCount(),n=0;n<i;n++)for(var o=0;o<i;o++)t.fillStyle=l.isDark(n,o)?"black":"white",t.fillRect(n*e,o*e,e,e)},l};t.stringToBytes=(t.stringToBytesFuncs={default:function(t){for(var e=[],i=0;i<t.length;i+=1){var n=t.charCodeAt(i);e.push(255&n)}return e}}).default,t.createStringToBytes=function(t,e){var i=function(){for(var i=T(t),n=function(){var t=i.read();if(-1==t)throw"eof";return t},o=0,r={};;){var a=i.read();if(-1==a)break;var s=n(),l=n()<<8|n();r[String.fromCharCode(a<<8|s)]=l,o+=1}if(o!=e)throw o+" != "+e;return r}(),n="?".charCodeAt(0);return function(t){for(var e=[],o=0;o<t.length;o+=1){var r=t.charCodeAt(o);if(r<128)e.push(r);else{var a=i[t.charAt(o)];"number"==typeof a?(255&a)==a?e.push(a):(e.push(a>>>8),e.push(255&a)):e.push(n)}}return e}};var e,i,n,o,r,a=1,s=2,l=4,c=8,h={L:1,M:0,Q:3,H:2},u=0,p=1,d=2,m=3,f=4,g=5,_=6,v=7,y=(e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i=1335,n=7973,r=function(t){for(var e=0;0!=t;)e+=1,t>>>=1;return e},(o={}).getBCHTypeInfo=function(t){for(var e=t<<10;r(e)-r(i)>=0;)e^=i<<r(e)-r(i);return 21522^(t<<10|e)},o.getBCHTypeNumber=function(t){for(var e=t<<12;r(e)-r(n)>=0;)e^=n<<r(e)-r(n);return t<<12|e},o.getPatternPosition=function(t){return e[t-1]},o.getMaskFunction=function(t){switch(t){case u:return function(t,e){return(t+e)%2==0};case p:return function(t,e){return t%2==0};case d:return function(t,e){return e%3==0};case m:return function(t,e){return(t+e)%3==0};case f:return function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0};case g:return function(t,e){return t*e%2+t*e%3==0};case _:return function(t,e){return(t*e%2+t*e%3)%2==0};case v:return function(t,e){return(t*e%3+(t+e)%2)%2==0};default:throw"bad maskPattern:"+t}},o.getErrorCorrectPolynomial=function(t){for(var e=x([1],0),i=0;i<t;i+=1)e=e.multiply(x([1,b.gexp(i)],0));return e},o.getLengthInBits=function(t,e){if(1<=e&&e<10)switch(t){case a:return 10;case s:return 9;case l:case c:return 8;default:throw"mode:"+t}else if(e<27)switch(t){case a:return 12;case s:return 11;case l:return 16;case c:return 10;default:throw"mode:"+t}else{if(!(e<41))throw"type:"+e;switch(t){case a:return 14;case s:return 13;case l:return 16;case c:return 12;default:throw"mode:"+t}}},o.getLostPoint=function(t){for(var e=t.getModuleCount(),i=0,n=0;n<e;n+=1)for(var o=0;o<e;o+=1){for(var r=0,a=t.isDark(n,o),s=-1;s<=1;s+=1)if(!(n+s<0||e<=n+s))for(var l=-1;l<=1;l+=1)o+l<0||e<=o+l||0==s&&0==l||a==t.isDark(n+s,o+l)&&(r+=1);r>5&&(i+=3+r-5)}for(n=0;n<e-1;n+=1)for(o=0;o<e-1;o+=1){var c=0;t.isDark(n,o)&&(c+=1),t.isDark(n+1,o)&&(c+=1),t.isDark(n,o+1)&&(c+=1),t.isDark(n+1,o+1)&&(c+=1),0!=c&&4!=c||(i+=3)}for(n=0;n<e;n+=1)for(o=0;o<e-6;o+=1)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(i+=40);for(o=0;o<e;o+=1)for(n=0;n<e-6;n+=1)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(i+=40);var h=0;for(o=0;o<e;o+=1)for(n=0;n<e;n+=1)t.isDark(n,o)&&(h+=1);return i+=Math.abs(100*h/e/e-50)/5*10},o),b=function(){for(var t=new Array(256),e=new Array(256),i=0;i<8;i+=1)t[i]=1<<i;for(i=8;i<256;i+=1)t[i]=t[i-4]^t[i-5]^t[i-6]^t[i-8];for(i=0;i<255;i+=1)e[t[i]]=i;var n={glog:function(t){if(t<1)throw"glog("+t+")";return e[t]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return t[e]}};return n}();function x(t,e){if(void 0===t.length)throw t.length+"/"+e;var i=function(){for(var i=0;i<t.length&&0==t[i];)i+=1;for(var n=new Array(t.length-i+e),o=0;o<t.length-i;o+=1)n[o]=t[o+i];return n}(),n={getAt:function(t){return i[t]},getLength:function(){return i.length},multiply:function(t){for(var e=new Array(n.getLength()+t.getLength()-1),i=0;i<n.getLength();i+=1)for(var o=0;o<t.getLength();o+=1)e[i+o]^=b.gexp(b.glog(n.getAt(i))+b.glog(t.getAt(o)));return x(e,0)},mod:function(t){if(n.getLength()-t.getLength()<0)return n;for(var e=b.glog(n.getAt(0))-b.glog(t.getAt(0)),i=new Array(n.getLength()),o=0;o<n.getLength();o+=1)i[o]=n.getAt(o);for(o=0;o<t.getLength();o+=1)i[o]^=b.gexp(b.glog(t.getAt(o))+e);return x(i,0).mod(t)}};return n}var k=function(){var t=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e=function(t,e){var i={};return i.totalCount=t,i.dataCount=e,i},i={};return i.getRSBlocks=function(i,n){var o=function(e,i){switch(i){case h.L:return t[4*(e-1)+0];case h.M:return t[4*(e-1)+1];case h.Q:return t[4*(e-1)+2];case h.H:return t[4*(e-1)+3];default:return}}(i,n);if(void 0===o)throw"bad rs block @ typeNumber:"+i+"/errorCorrectionLevel:"+n;for(var r=o.length/3,a=[],s=0;s<r;s+=1)for(var l=o[3*s+0],c=o[3*s+1],u=o[3*s+2],p=0;p<l;p+=1)a.push(e(c,u));return a},i}(),w=function(){var t=[],e=0,i={getBuffer:function(){return t},getAt:function(e){var i=Math.floor(e/8);return 1==(t[i]>>>7-e%8&1)},put:function(t,e){for(var n=0;n<e;n+=1)i.putBit(1==(t>>>e-n-1&1))},getLengthInBits:function(){return e},putBit:function(i){var n=Math.floor(e/8);t.length<=n&&t.push(0),i&&(t[n]|=128>>>e%8),e+=1}};return i},L=function(t){var e=a,i=t,n={getMode:function(){return e},getLength:function(t){return i.length},write:function(t){for(var e=i,n=0;n+2<e.length;)t.put(o(e.substring(n,n+3)),10),n+=3;n<e.length&&(e.length-n==1?t.put(o(e.substring(n,n+1)),4):e.length-n==2&&t.put(o(e.substring(n,n+2)),7))}},o=function(t){for(var e=0,i=0;i<t.length;i+=1)e=10*e+r(t.charAt(i));return e},r=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+t};return n},M=function(t){var e=s,i=t,n={getMode:function(){return e},getLength:function(t){return i.length},write:function(t){for(var e=i,n=0;n+1<e.length;)t.put(45*o(e.charAt(n))+o(e.charAt(n+1)),11),n+=2;n<e.length&&t.put(o(e.charAt(n)),6)}},o=function(t){if("0"<=t&&t<="9")return t.charCodeAt(0)-"0".charCodeAt(0);if("A"<=t&&t<="Z")return t.charCodeAt(0)-"A".charCodeAt(0)+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+t}};return n},C=function(e){var i=l,n=t.stringToBytes(e),o={getMode:function(){return i},getLength:function(t){return n.length},write:function(t){for(var e=0;e<n.length;e+=1)t.put(n[e],8)}};return o},P=function(e){var i=c,n=t.stringToBytesFuncs.SJIS;if(!n)throw"sjis not supported.";!function(t,e){var i=n("友");if(2!=i.length||38726!=(i[0]<<8|i[1]))throw"sjis not supported."}();var o=n(e),r={getMode:function(){return i},getLength:function(t){return~~(o.length/2)},write:function(t){for(var e=o,i=0;i+1<e.length;){var n=(255&e[i])<<8|255&e[i+1];if(33088<=n&&n<=40956)n-=33088;else{if(!(57408<=n&&n<=60351))throw"illegal char at "+(i+1)+"/"+n;n-=49472}n=192*(n>>>8&255)+(255&n),t.put(n,13),i+=2}if(i<e.length)throw"illegal char at "+(i+1)}};return r},S=function(){var t=[],e={writeByte:function(e){t.push(255&e)},writeShort:function(t){e.writeByte(t),e.writeByte(t>>>8)},writeBytes:function(t,i,n){i=i||0,n=n||t.length;for(var o=0;o<n;o+=1)e.writeByte(t[o+i])},writeString:function(t){for(var i=0;i<t.length;i+=1)e.writeByte(t.charCodeAt(i))},toByteArray:function(){return t},toString:function(){var e="";e+="[";for(var i=0;i<t.length;i+=1)i>0&&(e+=","),e+=t[i];return e+="]"}};return e},T=function(t){var e=t,i=0,n=0,o=0,r={read:function(){for(;o<8;){if(i>=e.length){if(0==o)return-1;throw"unexpected end of file./"+o}var t=e.charAt(i);if(i+=1,"="==t)return o=0,-1;t.match(/^\s$/)||(n=n<<6|a(t.charCodeAt(0)),o+=6)}var r=n>>>o-8&255;return o-=8,r}},a=function(t){if(65<=t&&t<=90)return t-65;if(97<=t&&t<=122)return t-97+26;if(48<=t&&t<=57)return t-48+52;if(43==t)return 62;if(47==t)return 63;throw"c:"+t};return r},A=function(t,e,i){for(var n=function(t,e){var i=t,n=e,o=new Array(t*e),r={setPixel:function(t,e,n){o[e*i+t]=n},write:function(t){t.writeString("GIF87a"),t.writeShort(i),t.writeShort(n),t.writeByte(128),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(0),t.writeByte(255),t.writeByte(255),t.writeByte(255),t.writeString(","),t.writeShort(0),t.writeShort(0),t.writeShort(i),t.writeShort(n),t.writeByte(0);var e=a(2);t.writeByte(2);for(var o=0;e.length-o>255;)t.writeByte(255),t.writeBytes(e,o,255),o+=255;t.writeByte(e.length-o),t.writeBytes(e,o,e.length-o),t.writeByte(0),t.writeString(";")}},a=function(t){for(var e=1<<t,i=1+(1<<t),n=t+1,r=s(),a=0;a<e;a+=1)r.add(String.fromCharCode(a));r.add(String.fromCharCode(e)),r.add(String.fromCharCode(i));var l,c,h,u=S(),p=(l=u,c=0,h=0,{write:function(t,e){if(t>>>e!=0)throw"length over";for(;c+e>=8;)l.writeByte(255&(t<<c|h)),e-=8-c,t>>>=8-c,h=0,c=0;h|=t<<c,c+=e},flush:function(){c>0&&l.writeByte(h)}});p.write(e,n);var d=0,m=String.fromCharCode(o[d]);for(d+=1;d<o.length;){var f=String.fromCharCode(o[d]);d+=1,r.contains(m+f)?m+=f:(p.write(r.indexOf(m),n),r.size()<4095&&(r.size()==1<<n&&(n+=1),r.add(m+f)),m=f)}return p.write(r.indexOf(m),n),p.write(i,n),p.flush(),u.toByteArray()},s=function(){var t={},e=0,i={add:function(n){if(i.contains(n))throw"dup key:"+n;t[n]=e,e+=1},size:function(){return e},indexOf:function(e){return t[e]},contains:function(e){return void 0!==t[e]}};return i};return r}(t,e),o=0;o<e;o+=1)for(var r=0;r<t;r+=1)n.setPixel(r,o,i(r,o));var a=S();n.write(a);for(var s=function(){var t=0,e=0,i=0,n="",o={},r=function(t){n+=String.fromCharCode(a(63&t))},a=function(t){if(t<0);else{if(t<26)return 65+t;if(t<52)return t-26+97;if(t<62)return t-52+48;if(62==t)return 43;if(63==t)return 47}throw"n:"+t};return o.writeByte=function(n){for(t=t<<8|255&n,e+=8,i+=1;e>=6;)r(t>>>e-6),e-=6},o.flush=function(){if(e>0&&(r(t<<6-e),t=0,e=0),i%3!=0)for(var o=3-i%3,a=0;a<o;a+=1)n+="="},o.toString=function(){return n},o}(),l=a.toByteArray(),c=0;c<l.length;c+=1)s.writeByte(l[c]);return s.flush(),"data:image/gif;base64,"+s};return t}();r.stringToBytesFuncs["UTF-8"]=function(t){return function(t){for(var e=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(i++,n=65536+((1023&n)<<10|1023&t.charCodeAt(i)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return e}(t)},n=[],void 0===(o="function"==typeof(i=function(){return r})?i.apply(e,n):i)||(t.exports=o)},686:function(t,e,i){var n,o,r;
/*!
 * Select2 4.0.13
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */o=[i(3609)],void 0===(r="function"==typeof(n=function(t){var e=function(){if(t&&t.fn&&t.fn.select2&&t.fn.select2.amd)var e=t.fn.select2.amd;var i,n,o;return e&&e.requirejs||(e?n=e:e={},function(t){var e,r,a,s,l={},c={},h={},u={},p=Object.prototype.hasOwnProperty,d=[].slice,m=/\.js$/;function f(t,e){return p.call(t,e)}function g(t,e){var i,n,o,r,a,s,l,c,u,p,d,f=e&&e.split("/"),g=h.map,_=g&&g["*"]||{};if(t){for(a=(t=t.split("/")).length-1,h.nodeIdCompat&&m.test(t[a])&&(t[a]=t[a].replace(m,"")),"."===t[0].charAt(0)&&f&&(t=f.slice(0,f.length-1).concat(t)),u=0;u<t.length;u++)if("."===(d=t[u]))t.splice(u,1),u-=1;else if(".."===d){if(0===u||1===u&&".."===t[2]||".."===t[u-1])continue;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}if((f||_)&&g){for(u=(i=t.split("/")).length;u>0;u-=1){if(n=i.slice(0,u).join("/"),f)for(p=f.length;p>0;p-=1)if((o=g[f.slice(0,p).join("/")])&&(o=o[n])){r=o,s=u;break}if(r)break;!l&&_&&_[n]&&(l=_[n],c=u)}!r&&l&&(r=l,s=c),r&&(i.splice(0,s,r),t=i.join("/"))}return t}function _(e,i){return function(){var n=d.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),r.apply(t,n.concat([e,i]))}}function v(t){return function(e){return g(e,t)}}function y(t){return function(e){l[t]=e}}function b(i){if(f(c,i)){var n=c[i];delete c[i],u[i]=!0,e.apply(t,n)}if(!f(l,i)&&!f(u,i))throw new Error("No "+i);return l[i]}function x(t){var e,i=t?t.indexOf("!"):-1;return i>-1&&(e=t.substring(0,i),t=t.substring(i+1,t.length)),[e,t]}function k(t){return t?x(t):[]}function w(t){return function(){return h&&h.config&&h.config[t]||{}}}a=function(t,e){var i,n=x(t),o=n[0],r=e[1];return t=n[1],o&&(i=b(o=g(o,r))),o?t=i&&i.normalize?i.normalize(t,v(r)):g(t,r):(o=(n=x(t=g(t,r)))[0],t=n[1],o&&(i=b(o))),{f:o?o+"!"+t:t,n:t,pr:o,p:i}},s={require:function(t){return _(t)},exports:function(t){var e=l[t];return void 0!==e?e:l[t]={}},module:function(t){return{id:t,uri:"",exports:l[t],config:w(t)}}},e=function(e,i,n,o){var r,h,p,d,m,g,v,x=[],w=typeof n;if(g=k(o=o||e),"undefined"===w||"function"===w){for(i=!i.length&&n.length?["require","exports","module"]:i,m=0;m<i.length;m+=1)if("require"===(h=(d=a(i[m],g)).f))x[m]=s.require(e);else if("exports"===h)x[m]=s.exports(e),v=!0;else if("module"===h)r=x[m]=s.module(e);else if(f(l,h)||f(c,h)||f(u,h))x[m]=b(h);else{if(!d.p)throw new Error(e+" missing "+h);d.p.load(d.n,_(o,!0),y(h),{}),x[m]=l[h]}p=n?n.apply(l[e],x):void 0,e&&(r&&r.exports!==t&&r.exports!==l[e]?l[e]=r.exports:p===t&&v||(l[e]=p))}else e&&(l[e]=n)},i=n=r=function(i,n,o,l,c){if("string"==typeof i)return s[i]?s[i](n):b(a(i,k(n)).f);if(!i.splice){if((h=i).deps&&r(h.deps,h.callback),!n)return;n.splice?(i=n,n=o,o=null):i=t}return n=n||function(){},"function"==typeof o&&(o=l,l=c),l?e(t,i,n,o):setTimeout((function(){e(t,i,n,o)}),4),r},r.config=function(t){return r(t)},i._defined=l,(o=function(t,e,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(i=e,e=[]),f(l,t)||f(c,t)||(c[t]=[t,e,i])}).amd={jQuery:!0}}(),e.requirejs=i,e.require=n,e.define=o),e.define("almond",(function(){})),e.define("jquery",[],(function(){var e=t||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e})),e.define("select2/utils",["jquery"],(function(t){var e={};function i(t){var e=t.prototype,i=[];for(var n in e)"function"==typeof e[n]&&"constructor"!==n&&i.push(n);return i}e.Extend=function(t,e){var i={}.hasOwnProperty;function n(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},e.Decorate=function(t,e){var n=i(e),o=i(t);function r(){var i=Array.prototype.unshift,n=e.prototype.constructor.length,o=t.prototype.constructor;n>0&&(i.call(arguments,t.prototype.constructor),o=e.prototype.constructor),o.apply(this,arguments)}function a(){this.constructor=r}e.displayName=t.displayName,r.prototype=new a;for(var s=0;s<o.length;s++){var l=o[s];r.prototype[l]=t.prototype[l]}for(var c=function(t){var i=function(){};t in r.prototype&&(i=r.prototype[t]);var n=e.prototype[t];return function(){return Array.prototype.unshift.call(arguments,i),n.apply(this,arguments)}},h=0;h<n.length;h++){var u=n[h];r.prototype[u]=c(u)}return r};var n=function(){this.listeners={}};n.prototype.on=function(t,e){this.listeners=this.listeners||{},t in this.listeners?this.listeners[t].push(e):this.listeners[t]=[e]},n.prototype.trigger=function(t){var e=Array.prototype.slice,i=e.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),i[0]._type=t,t in this.listeners&&this.invoke(this.listeners[t],e.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},n.prototype.invoke=function(t,e){for(var i=0,n=t.length;i<n;i++)t[i].apply(this,e)},e.Observable=n,e.generateChars=function(t){for(var e="",i=0;i<t;i++)e+=Math.floor(36*Math.random()).toString(36);return e},e.bind=function(t,e){return function(){t.apply(e,arguments)}},e._convertData=function(t){for(var e in t){var i=e.split("-"),n=t;if(1!==i.length){for(var o=0;o<i.length;o++){var r=i[o];(r=r.substring(0,1).toLowerCase()+r.substring(1))in n||(n[r]={}),o==i.length-1&&(n[r]=t[e]),n=n[r]}delete t[e]}}return t},e.hasScroll=function(e,i){var n=t(i),o=i.style.overflowX,r=i.style.overflowY;return(o!==r||"hidden"!==r&&"visible"!==r)&&("scroll"===o||"scroll"===r||n.innerHeight()<i.scrollHeight||n.innerWidth()<i.scrollWidth)},e.escapeMarkup=function(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof t?t:String(t).replace(/[&<>"'\/\\]/g,(function(t){return e[t]}))},e.appendMany=function(e,i){if("1.7"===t.fn.jquery.substr(0,3)){var n=t();t.map(i,(function(t){n=n.add(t)})),i=n}e.append(i)},e.__cache={};var o=0;return e.GetUniqueElementId=function(t){var e=t.getAttribute("data-select2-id");return null==e&&(t.id?(e=t.id,t.setAttribute("data-select2-id",e)):(t.setAttribute("data-select2-id",++o),e=o.toString())),e},e.StoreData=function(t,i,n){var o=e.GetUniqueElementId(t);e.__cache[o]||(e.__cache[o]={}),e.__cache[o][i]=n},e.GetData=function(i,n){var o=e.GetUniqueElementId(i);return n?e.__cache[o]&&null!=e.__cache[o][n]?e.__cache[o][n]:t(i).data(n):e.__cache[o]},e.RemoveData=function(t){var i=e.GetUniqueElementId(t);null!=e.__cache[i]&&delete e.__cache[i],t.removeAttribute("data-select2-id")},e})),e.define("select2/results",["jquery","./utils"],(function(t,e){function i(t,e,n){this.$element=t,this.data=n,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<ul class="select2-results__options" role="listbox"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e,e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var i=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=t('<li role="alert" aria-live="assertive" class="select2-results__option"></li>'),o=this.options.get("translations").get(e.message);n.append(i(o(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(t){this.hideLoading();var e=[];if(null!=t.results&&0!==t.results.length){t.results=this.sort(t.results);for(var i=0;i<t.results.length;i++){var n=t.results[i],o=this.option(n);e.push(o)}this.$results.append(e)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(t,e){e.find(".select2-results").append(t)},i.prototype.sort=function(t){return this.options.get("sorter")(t)},i.prototype.highlightFirstItem=function(){var t=this.$results.find(".select2-results__option[aria-selected]"),e=t.filter("[aria-selected=true]");e.length>0?e.first().trigger("mouseenter"):t.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var i=this;this.data.current((function(n){var o=t.map(n,(function(t){return t.id.toString()}));i.$results.find(".select2-results__option[aria-selected]").each((function(){var i=t(this),n=e.GetData(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&t.inArray(r,o)>-1?i.attr("aria-selected","true"):i.attr("aria-selected","false")}))}))},i.prototype.showLoading=function(t){this.hideLoading();var e={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(t)},i=this.option(e);i.className+=" loading-results",this.$results.prepend(i)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(i){var n=document.createElement("li");n.className="select2-results__option";var o={role:"option","aria-selected":"false"},r=window.Element.prototype.matches||window.Element.prototype.msMatchesSelector||window.Element.prototype.webkitMatchesSelector;for(var a in(null!=i.element&&r.call(i.element,":disabled")||null==i.element&&i.disabled)&&(delete o["aria-selected"],o["aria-disabled"]="true"),null==i.id&&delete o["aria-selected"],null!=i._resultId&&(n.id=i._resultId),i.title&&(n.title=i.title),i.children&&(o.role="group",o["aria-label"]=i.text,delete o["aria-selected"]),o){var s=o[a];n.setAttribute(a,s)}if(i.children){var l=t(n),c=document.createElement("strong");c.className="select2-results__group",t(c),this.template(i,c);for(var h=[],u=0;u<i.children.length;u++){var p=i.children[u],d=this.option(p);h.push(d)}var m=t("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});m.append(h),l.append(c),l.append(m)}else this.template(i,n);return e.StoreData(n,"data",i),n},i.prototype.bind=function(i,n){var o=this,r=i.id+"-results";this.$results.attr("id",r),i.on("results:all",(function(t){o.clear(),o.append(t.data),i.isOpen()&&(o.setClasses(),o.highlightFirstItem())})),i.on("results:append",(function(t){o.append(t.data),i.isOpen()&&o.setClasses()})),i.on("query",(function(t){o.hideMessages(),o.showLoading(t)})),i.on("select",(function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),i.on("unselect",(function(){i.isOpen()&&(o.setClasses(),o.options.get("scrollAfterSelect")&&o.highlightFirstItem())})),i.on("open",(function(){o.$results.attr("aria-expanded","true"),o.$results.attr("aria-hidden","false"),o.setClasses(),o.ensureHighlightVisible()})),i.on("close",(function(){o.$results.attr("aria-expanded","false"),o.$results.attr("aria-hidden","true"),o.$results.removeAttr("aria-activedescendant")})),i.on("results:toggle",(function(){var t=o.getHighlightedResults();0!==t.length&&t.trigger("mouseup")})),i.on("results:select",(function(){var t=o.getHighlightedResults();if(0!==t.length){var i=e.GetData(t[0],"data");"true"==t.attr("aria-selected")?o.trigger("close",{}):o.trigger("select",{data:i})}})),i.on("results:previous",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),i=e.index(t);if(!(i<=0)){var n=i-1;0===t.length&&(n=0);var r=e.eq(n);r.trigger("mouseenter");var a=o.$results.offset().top,s=r.offset().top,l=o.$results.scrollTop()+(s-a);0===n?o.$results.scrollTop(0):s-a<0&&o.$results.scrollTop(l)}})),i.on("results:next",(function(){var t=o.getHighlightedResults(),e=o.$results.find("[aria-selected]"),i=e.index(t)+1;if(!(i>=e.length)){var n=e.eq(i);n.trigger("mouseenter");var r=o.$results.offset().top+o.$results.outerHeight(!1),a=n.offset().top+n.outerHeight(!1),s=o.$results.scrollTop()+a-r;0===i?o.$results.scrollTop(0):a>r&&o.$results.scrollTop(s)}})),i.on("results:focus",(function(t){t.element.addClass("select2-results__option--highlighted")})),i.on("results:message",(function(t){o.displayMessage(t)})),t.fn.mousewheel&&this.$results.on("mousewheel",(function(t){var e=o.$results.scrollTop(),i=o.$results.get(0).scrollHeight-e+t.deltaY,n=t.deltaY>0&&e-t.deltaY<=0,r=t.deltaY<0&&i<=o.$results.height();n?(o.$results.scrollTop(0),t.preventDefault(),t.stopPropagation()):r&&(o.$results.scrollTop(o.$results.get(0).scrollHeight-o.$results.height()),t.preventDefault(),t.stopPropagation())})),this.$results.on("mouseup",".select2-results__option[aria-selected]",(function(i){var n=t(this),r=e.GetData(this,"data");"true"!==n.attr("aria-selected")?o.trigger("select",{originalEvent:i,data:r}):o.options.get("multiple")?o.trigger("unselect",{originalEvent:i,data:r}):o.trigger("close",{})})),this.$results.on("mouseenter",".select2-results__option[aria-selected]",(function(i){var n=e.GetData(this,"data");o.getHighlightedResults().removeClass("select2-results__option--highlighted"),o.trigger("results:focus",{data:n,element:t(this)})}))},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var t=this.getHighlightedResults();if(0!==t.length){var e=this.$results.find("[aria-selected]").index(t),i=this.$results.offset().top,n=t.offset().top,o=this.$results.scrollTop()+(n-i),r=n-i;o-=2*t.outerHeight(!1),e<=2?this.$results.scrollTop(0):(r>this.$results.outerHeight()||r<0)&&this.$results.scrollTop(o)}},i.prototype.template=function(e,i){var n=this.options.get("templateResult"),o=this.options.get("escapeMarkup"),r=n(e,i);null==r?i.style.display="none":"string"==typeof r?i.innerHTML=o(r):t(i).append(r)},i})),e.define("select2/keys",[],(function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}})),e.define("select2/selection/base",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var i=t('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=e.GetData(this.$element[0],"old-tabindex")?this._tabindex=e.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),i.attr("title",this.$element.attr("title")),i.attr("tabindex",this._tabindex),i.attr("aria-disabled","false"),this.$selection=i,i},n.prototype.bind=function(t,e){var n=this,o=t.id+"-results";this.container=t,this.$selection.on("focus",(function(t){n.trigger("focus",t)})),this.$selection.on("blur",(function(t){n._handleBlur(t)})),this.$selection.on("keydown",(function(t){n.trigger("keypress",t),t.which===i.SPACE&&t.preventDefault()})),t.on("results:focus",(function(t){n.$selection.attr("aria-activedescendant",t.data._resultId)})),t.on("selection:update",(function(t){n.update(t.data)})),t.on("open",(function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",o),n._attachCloseHandler(t)})),t.on("close",(function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),n.$selection.trigger("focus"),n._detachCloseHandler(t)})),t.on("enable",(function(){n.$selection.attr("tabindex",n._tabindex),n.$selection.attr("aria-disabled","false")})),t.on("disable",(function(){n.$selection.attr("tabindex","-1"),n.$selection.attr("aria-disabled","true")}))},n.prototype._handleBlur=function(e){var i=this;window.setTimeout((function(){document.activeElement==i.$selection[0]||t.contains(i.$selection[0],document.activeElement)||i.trigger("blur",e)}),1)},n.prototype._attachCloseHandler=function(i){t(document.body).on("mousedown.select2."+i.id,(function(i){var n=t(i.target).closest(".select2");t(".select2.select2-container--open").each((function(){this!=n[0]&&e.GetData(this,"element").select2("close")}))}))},n.prototype._detachCloseHandler=function(e){t(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(t,e){e.find(".selection").append(t)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(t){throw new Error("The `update` method must be defined in child classes.")},n.prototype.isEnabled=function(){return!this.isDisabled()},n.prototype.isDisabled=function(){return this.options.get("disabled")},n})),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],(function(t,e,i,n){function o(){o.__super__.constructor.apply(this,arguments)}return i.Extend(o,e),o.prototype.render=function(){var t=o.__super__.render.call(this);return t.addClass("select2-selection--single"),t.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),t},o.prototype.bind=function(t,e){var i=this;o.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",(function(t){1===t.which&&i.trigger("toggle",{originalEvent:t})})),this.$selection.on("focus",(function(t){})),this.$selection.on("blur",(function(t){})),t.on("focus",(function(e){t.isOpen()||i.$selection.trigger("focus")}))},o.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},o.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},o.prototype.selectionContainer=function(){return t("<span></span>")},o.prototype.update=function(t){if(0!==t.length){var e=t[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(e,i);i.empty().append(n);var o=e.title||e.text;o?i.attr("title",o):i.removeAttr("title")}else this.clear()},o})),e.define("select2/selection/multiple",["jquery","./base","../utils"],(function(t,e,i){function n(t,e){n.__super__.constructor.apply(this,arguments)}return i.Extend(n,e),n.prototype.render=function(){var t=n.__super__.render.call(this);return t.addClass("select2-selection--multiple"),t.html('<ul class="select2-selection__rendered"></ul>'),t},n.prototype.bind=function(e,o){var r=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",(function(t){r.trigger("toggle",{originalEvent:t})})),this.$selection.on("click",".select2-selection__choice__remove",(function(e){if(!r.isDisabled()){var n=t(this).parent(),o=i.GetData(n[0],"data");r.trigger("unselect",{originalEvent:e,data:o})}}))},n.prototype.clear=function(){var t=this.$selection.find(".select2-selection__rendered");t.empty(),t.removeAttr("title")},n.prototype.display=function(t,e){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(t,e))},n.prototype.selectionContainer=function(){return t('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(t){if(this.clear(),0!==t.length){for(var e=[],n=0;n<t.length;n++){var o=t[n],r=this.selectionContainer(),a=this.display(o,r);r.append(a);var s=o.title||o.text;s&&r.attr("title",s),i.StoreData(r[0],"data",o),e.push(r)}var l=this.$selection.find(".select2-selection__rendered");i.appendMany(l,e)}},n})),e.define("select2/selection/placeholder",["../utils"],(function(t){function e(t,e,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i)}return e.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},e.prototype.createPlaceholder=function(t,e){var i=this.selectionContainer();return i.html(this.display(e)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},e.prototype.update=function(t,e){var i=1==e.length&&e[0].id!=this.placeholder.id;if(e.length>1||i)return t.call(this,e);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},e})),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],(function(t,e,i){function n(){}return n.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",(function(t){n._handleClear(t)})),e.on("keypress",(function(t){n._handleKeyboardClear(t,e)}))},n.prototype._handleClear=function(t,e){if(!this.isDisabled()){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){e.stopPropagation();var o=i.GetData(n[0],"data"),r=this.$element.val();this.$element.val(this.placeholder.id);var a={data:o};if(this.trigger("clear",a),a.prevented)this.$element.val(r);else{for(var s=0;s<o.length;s++)if(a={data:o[s]},this.trigger("unselect",a),a.prevented)return void this.$element.val(r);this.$element.trigger("input").trigger("change"),this.trigger("toggle",{})}}}},n.prototype._handleKeyboardClear=function(t,i,n){n.isOpen()||i.which!=e.DELETE&&i.which!=e.BACKSPACE||this._handleClear(i)},n.prototype.update=function(e,n){if(e.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var o=this.options.get("translations").get("removeAllItems"),r=t('<span class="select2-selection__clear" title="'+o()+'">&times;</span>');i.StoreData(r[0],"data",n),this.$selection.find(".select2-selection__rendered").prepend(r)}},n})),e.define("select2/selection/search",["jquery","../utils","../keys"],(function(t,e,i){function n(t,e,i){t.call(this,e,i)}return n.prototype.render=function(e){var i=t('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></li>');this.$searchContainer=i,this.$search=i.find("input");var n=e.call(this);return this._transferTabIndex(),n},n.prototype.bind=function(t,n,o){var r=this,a=n.id+"-results";t.call(this,n,o),n.on("open",(function(){r.$search.attr("aria-controls",a),r.$search.trigger("focus")})),n.on("close",(function(){r.$search.val(""),r.$search.removeAttr("aria-controls"),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")})),n.on("enable",(function(){r.$search.prop("disabled",!1),r._transferTabIndex()})),n.on("disable",(function(){r.$search.prop("disabled",!0)})),n.on("focus",(function(t){r.$search.trigger("focus")})),n.on("results:focus",(function(t){t.data._resultId?r.$search.attr("aria-activedescendant",t.data._resultId):r.$search.removeAttr("aria-activedescendant")})),this.$selection.on("focusin",".select2-search--inline",(function(t){r.trigger("focus",t)})),this.$selection.on("focusout",".select2-search--inline",(function(t){r._handleBlur(t)})),this.$selection.on("keydown",".select2-search--inline",(function(t){if(t.stopPropagation(),r.trigger("keypress",t),r._keyUpPrevented=t.isDefaultPrevented(),t.which===i.BACKSPACE&&""===r.$search.val()){var n=r.$searchContainer.prev(".select2-selection__choice");if(n.length>0){var o=e.GetData(n[0],"data");r.searchRemoveChoice(o),t.preventDefault()}}})),this.$selection.on("click",".select2-search--inline",(function(t){r.$search.val()&&t.stopPropagation()}));var s=document.documentMode,l=s&&s<=11;this.$selection.on("input.searchcheck",".select2-search--inline",(function(t){l?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")})),this.$selection.on("keyup.search input.search",".select2-search--inline",(function(t){if(l&&"input"===t.type)r.$selection.off("input.search input.searchcheck");else{var e=t.which;e!=i.SHIFT&&e!=i.CTRL&&e!=i.ALT&&e!=i.TAB&&r.handleSearch(t)}}))},n.prototype._transferTabIndex=function(t){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},n.prototype.createPlaceholder=function(t,e){this.$search.attr("placeholder",e.text)},n.prototype.update=function(t,e){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),t.call(this,e),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.trigger("focus")},n.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.searchRemoveChoice=function(t,e){this.trigger("unselect",{data:e}),this.$search.val(e.text),this.handleSearch()},n.prototype.resizeSearch=function(){this.$search.css("width","25px");var t="";t=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").width():.75*(this.$search.val().length+1)+"em",this.$search.css("width",t)},n})),e.define("select2/selection/eventRelay",["jquery"],(function(t){function e(){}return e.prototype.bind=function(e,i,n){var o=this,r=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];e.call(this,i,n),i.on("*",(function(e,i){if(-1!==t.inArray(e,r)){i=i||{};var n=t.Event("select2:"+e,{params:i});o.$element.trigger(n),-1!==t.inArray(e,a)&&(i.prevented=n.isDefaultPrevented())}}))},e})),e.define("select2/translation",["jquery","require"],(function(t,e){function i(t){this.dict=t||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(t){return this.dict[t]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(t){if(!(t in i._cache)){var n=e(t);i._cache[t]=n}return new i(i._cache[t])},i})),e.define("select2/diacritics",[],(function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Œ":"OE","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","œ":"oe","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ώ":"ω","ς":"σ","’":"'"}})),e.define("select2/data/base",["../utils"],(function(t){function e(t,i){e.__super__.constructor.call(this)}return t.Extend(e,t.Observable),e.prototype.current=function(t){throw new Error("The `current` method must be defined in child classes.")},e.prototype.query=function(t,e){throw new Error("The `query` method must be defined in child classes.")},e.prototype.bind=function(t,e){},e.prototype.destroy=function(){},e.prototype.generateResultId=function(e,i){var n=e.id+"-result-";return n+=t.generateChars(4),null!=i.id?n+="-"+i.id.toString():n+="-"+t.generateChars(4),n},e})),e.define("select2/data/select",["./base","../utils","jquery"],(function(t,e,i){function n(t,e){this.$element=t,this.options=e,n.__super__.constructor.call(this)}return e.Extend(n,t),n.prototype.current=function(t){var e=[],n=this;this.$element.find(":selected").each((function(){var t=i(this),o=n.item(t);e.push(o)})),t(e)},n.prototype.select=function(t){var e=this;if(t.selected=!0,i(t.element).is("option"))return t.element.selected=!0,void this.$element.trigger("input").trigger("change");if(this.$element.prop("multiple"))this.current((function(n){var o=[];(t=[t]).push.apply(t,n);for(var r=0;r<t.length;r++){var a=t[r].id;-1===i.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("input").trigger("change")}));else{var n=t.id;this.$element.val(n),this.$element.trigger("input").trigger("change")}},n.prototype.unselect=function(t){var e=this;if(this.$element.prop("multiple")){if(t.selected=!1,i(t.element).is("option"))return t.element.selected=!1,void this.$element.trigger("input").trigger("change");this.current((function(n){for(var o=[],r=0;r<n.length;r++){var a=n[r].id;a!==t.id&&-1===i.inArray(a,o)&&o.push(a)}e.$element.val(o),e.$element.trigger("input").trigger("change")}))}},n.prototype.bind=function(t,e){var i=this;this.container=t,t.on("select",(function(t){i.select(t.data)})),t.on("unselect",(function(t){i.unselect(t.data)}))},n.prototype.destroy=function(){this.$element.find("*").each((function(){e.RemoveData(this)}))},n.prototype.query=function(t,e){var n=[],o=this;this.$element.children().each((function(){var e=i(this);if(e.is("option")||e.is("optgroup")){var r=o.item(e),a=o.matches(t,r);null!==a&&n.push(a)}})),e({results:n})},n.prototype.addOptions=function(t){e.appendMany(this.$element,t)},n.prototype.option=function(t){var n;t.children?(n=document.createElement("optgroup")).label=t.text:void 0!==(n=document.createElement("option")).textContent?n.textContent=t.text:n.innerText=t.text,void 0!==t.id&&(n.value=t.id),t.disabled&&(n.disabled=!0),t.selected&&(n.selected=!0),t.title&&(n.title=t.title);var o=i(n),r=this._normalizeItem(t);return r.element=n,e.StoreData(n,"data",r),o},n.prototype.item=function(t){var n={};if(null!=(n=e.GetData(t[0],"data")))return n;if(t.is("option"))n={id:t.val(),text:t.text(),disabled:t.prop("disabled"),selected:t.prop("selected"),title:t.prop("title")};else if(t.is("optgroup")){n={text:t.prop("label"),children:[],title:t.prop("title")};for(var o=t.children("option"),r=[],a=0;a<o.length;a++){var s=i(o[a]),l=this.item(s);r.push(l)}n.children=r}return(n=this._normalizeItem(n)).element=t[0],e.StoreData(t[0],"data",n),n},n.prototype._normalizeItem=function(t){t!==Object(t)&&(t={id:t,text:t});var e={selected:!1,disabled:!1};return null!=(t=i.extend({},{text:""},t)).id&&(t.id=t.id.toString()),null!=t.text&&(t.text=t.text.toString()),null==t._resultId&&t.id&&null!=this.container&&(t._resultId=this.generateResultId(this.container,t)),i.extend({},e,t)},n.prototype.matches=function(t,e){return this.options.get("matcher")(t,e)},n})),e.define("select2/data/array",["./select","../utils","jquery"],(function(t,e,i){function n(t,e){this._dataToConvert=e.get("data")||[],n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype.bind=function(t,e){n.__super__.bind.call(this,t,e),this.addOptions(this.convertToOptions(this._dataToConvert))},n.prototype.select=function(t){var e=this.$element.find("option").filter((function(e,i){return i.value==t.id.toString()}));0===e.length&&(e=this.option(t),this.addOptions(e)),n.__super__.select.call(this,t)},n.prototype.convertToOptions=function(t){var n=this,o=this.$element.find("option"),r=o.map((function(){return n.item(i(this)).id})).get(),a=[];function s(t){return function(){return i(this).val()==t.id}}for(var l=0;l<t.length;l++){var c=this._normalizeItem(t[l]);if(i.inArray(c.id,r)>=0){var h=o.filter(s(c)),u=this.item(h),p=i.extend(!0,{},c,u),d=this.option(p);h.replaceWith(d)}else{var m=this.option(c);if(c.children){var f=this.convertToOptions(c.children);e.appendMany(m,f)}a.push(m)}}return a},n})),e.define("select2/data/ajax",["./array","../utils","jquery"],(function(t,e,i){function n(t,e){this.ajaxOptions=this._applyDefaults(e.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,t,e)}return e.Extend(n,t),n.prototype._applyDefaults=function(t){var e={data:function(t){return i.extend({},t,{q:t.term})},transport:function(t,e,n){var o=i.ajax(t);return o.then(e),o.fail(n),o}};return i.extend({},e,t,!0)},n.prototype.processResults=function(t){return t},n.prototype.query=function(t,e){var n=this;null!=this._request&&(i.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=i.extend({type:"GET"},this.ajaxOptions);function r(){var r=o.transport(o,(function(o){var r=n.processResults(o,t);n.options.get("debug")&&window.console&&console.error&&(r&&r.results&&i.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),e(r)}),(function(){(!("status"in r)||0!==r.status&&"0"!==r.status)&&n.trigger("results:message",{message:"errorLoading"})}));n._request=r}"function"==typeof o.url&&(o.url=o.url.call(this.$element,t)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,t)),this.ajaxOptions.delay&&null!=t.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(r,this.ajaxOptions.delay)):r()},n})),e.define("select2/data/tags",["jquery"],(function(t){function e(e,i,n){var o=n.get("tags"),r=n.get("createTag");void 0!==r&&(this.createTag=r);var a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,i,n),t.isArray(o))for(var s=0;s<o.length;s++){var l=o[s],c=this._normalizeItem(l),h=this.option(c);this.$element.append(h)}}return e.prototype.query=function(t,e,i){var n=this;function o(t,r){for(var a=t.results,s=0;s<a.length;s++){var l=a[s],c=null!=l.children&&!o({results:l.children},!0);if((l.text||"").toUpperCase()===(e.term||"").toUpperCase()||c)return!r&&(t.data=a,void i(t))}if(r)return!0;var h=n.createTag(e);if(null!=h){var u=n.option(h);u.attr("data-select2-tag",!0),n.addOptions([u]),n.insertTag(a,h)}t.results=a,i(t)}this._removeOldTags(),null!=e.term&&null==e.page?t.call(this,e,o):t.call(this,e,i)},e.prototype.createTag=function(e,i){var n=t.trim(i.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(t,e,i){e.unshift(i)},e.prototype._removeOldTags=function(e){this.$element.find("option[data-select2-tag]").each((function(){this.selected||t(this).remove()}))},e})),e.define("select2/data/tokenizer",["jquery"],(function(t){function e(t,e,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),t.call(this,e,i)}return e.prototype.bind=function(t,e,i){t.call(this,e,i),this.$search=e.dropdown.$search||e.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,i,n){var o=this;function r(e){var i=o._normalizeItem(e);if(!o.$element.find("option").filter((function(){return t(this).val()===i.id})).length){var n=o.option(i);n.attr("data-select2-tag",!0),o._removeOldTags(),o.addOptions([n])}a(i)}function a(t){o.trigger("select",{data:t})}i.term=i.term||"";var s=this.tokenizer(i,this.options,r);s.term!==i.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.trigger("focus")),i.term=s.term),e.call(this,i,n)},e.prototype.tokenizer=function(e,i,n,o){for(var r=n.get("tokenSeparators")||[],a=i.term,s=0,l=this.createTag||function(t){return{id:t.term,text:t.term}};s<a.length;){var c=a[s];if(-1!==t.inArray(c,r)){var h=a.substr(0,s),u=l(t.extend({},i,{term:h}));null!=u?(o(u),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e})),e.define("select2/data/minimumInputLength",[],(function(){function t(t,e,i){this.minimumInputLength=i.get("minimumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",e.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumInputLength",[],(function(){function t(t,e,i){this.maximumInputLength=i.get("maximumInputLength"),t.call(this,e,i)}return t.prototype.query=function(t,e,i){e.term=e.term||"",this.maximumInputLength>0&&e.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:e.term,params:e}}):t.call(this,e,i)},t})),e.define("select2/data/maximumSelectionLength",[],(function(){function t(t,e,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),t.call(this,e,i)}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(){n._checkIfMaximumSelected()}))},t.prototype.query=function(t,e,i){var n=this;this._checkIfMaximumSelected((function(){t.call(n,e,i)}))},t.prototype._checkIfMaximumSelected=function(t,e){var i=this;this.current((function(t){var n=null!=t?t.length:0;i.maximumSelectionLength>0&&n>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):e&&e()}))},t})),e.define("select2/dropdown",["jquery","./utils"],(function(t,e){function i(t,e){this.$element=t,this.options=e,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e,e},i.prototype.bind=function(){},i.prototype.position=function(t,e){},i.prototype.destroy=function(){this.$dropdown.remove()},i})),e.define("select2/dropdown/search",["jquery","../utils"],(function(t,e){function i(){}return i.prototype.render=function(e){var i=e.call(this),n=t('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="searchbox" aria-autocomplete="list" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),i.prepend(n),i},i.prototype.bind=function(e,i,n){var o=this,r=i.id+"-results";e.call(this,i,n),this.$search.on("keydown",(function(t){o.trigger("keypress",t),o._keyUpPrevented=t.isDefaultPrevented()})),this.$search.on("input",(function(e){t(this).off("keyup")})),this.$search.on("keyup input",(function(t){o.handleSearch(t)})),i.on("open",(function(){o.$search.attr("tabindex",0),o.$search.attr("aria-controls",r),o.$search.trigger("focus"),window.setTimeout((function(){o.$search.trigger("focus")}),0)})),i.on("close",(function(){o.$search.attr("tabindex",-1),o.$search.removeAttr("aria-controls"),o.$search.removeAttr("aria-activedescendant"),o.$search.val(""),o.$search.trigger("blur")})),i.on("focus",(function(){i.isOpen()||o.$search.trigger("focus")})),i.on("results:all",(function(t){null!=t.query.term&&""!==t.query.term||(o.showSearch(t)?o.$searchContainer.removeClass("select2-search--hide"):o.$searchContainer.addClass("select2-search--hide"))})),i.on("results:focus",(function(t){t.data._resultId?o.$search.attr("aria-activedescendant",t.data._resultId):o.$search.removeAttr("aria-activedescendant")}))},i.prototype.handleSearch=function(t){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.showSearch=function(t,e){return!0},i})),e.define("select2/dropdown/hidePlaceholder",[],(function(){function t(t,e,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),t.call(this,e,i,n)}return t.prototype.append=function(t,e){e.results=this.removePlaceholder(e.results),t.call(this,e)},t.prototype.normalizePlaceholder=function(t,e){return"string"==typeof e&&(e={id:"",text:e}),e},t.prototype.removePlaceholder=function(t,e){for(var i=e.slice(0),n=e.length-1;n>=0;n--){var o=e[n];this.placeholder.id===o.id&&i.splice(n,1)}return i},t})),e.define("select2/dropdown/infiniteScroll",["jquery"],(function(t){function e(t,e,i,n){this.lastParams={},t.call(this,e,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(t,e){this.$loadingMore.remove(),this.loading=!1,t.call(this,e),this.showLoadingMore(e)&&(this.$results.append(this.$loadingMore),this.loadMoreIfNeeded())},e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("query",(function(t){n.lastParams=t,n.loading=!0})),e.on("query:append",(function(t){n.lastParams=t,n.loading=!0})),this.$results.on("scroll",this.loadMoreIfNeeded.bind(this))},e.prototype.loadMoreIfNeeded=function(){var e=t.contains(document.documentElement,this.$loadingMore[0]);!this.loading&&e&&this.$results.offset().top+this.$results.outerHeight(!1)+50>=this.$loadingMore.offset().top+this.$loadingMore.outerHeight(!1)&&this.loadMore()},e.prototype.loadMore=function(){this.loading=!0;var e=t.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(t,e){return e.pagination&&e.pagination.more},e.prototype.createLoadingMore=function(){var e=t('<li class="select2-results__option select2-results__option--load-more"role="option" aria-disabled="true"></li>'),i=this.options.get("translations").get("loadingMore");return e.html(i(this.lastParams)),e},e})),e.define("select2/dropdown/attachBody",["jquery","../utils"],(function(t,e){function i(e,i,n){this.$dropdownParent=t(n.get("dropdownParent")||document.body),e.call(this,i,n)}return i.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("open",(function(){n._showDropdown(),n._attachPositioningHandler(e),n._bindContainerResultHandlers(e)})),e.on("close",(function(){n._hideDropdown(),n._detachPositioningHandler(e)})),this.$dropdownContainer.on("mousedown",(function(t){t.stopPropagation()}))},i.prototype.destroy=function(t){t.call(this),this.$dropdownContainer.remove()},i.prototype.position=function(t,e,i){e.attr("class",i.attr("class")),e.removeClass("select2"),e.addClass("select2-container--open"),e.css({position:"absolute",top:-999999}),this.$container=i},i.prototype.render=function(e){var i=t("<span></span>"),n=e.call(this);return i.append(n),this.$dropdownContainer=i,i},i.prototype._hideDropdown=function(t){this.$dropdownContainer.detach()},i.prototype._bindContainerResultHandlers=function(t,e){if(!this._containerResultsHandlersBound){var i=this;e.on("results:all",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:append",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("results:message",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("select",(function(){i._positionDropdown(),i._resizeDropdown()})),e.on("unselect",(function(){i._positionDropdown(),i._resizeDropdown()})),this._containerResultsHandlersBound=!0}},i.prototype._attachPositioningHandler=function(i,n){var o=this,r="scroll.select2."+n.id,a="resize.select2."+n.id,s="orientationchange.select2."+n.id,l=this.$container.parents().filter(e.hasScroll);l.each((function(){e.StoreData(this,"select2-scroll-position",{x:t(this).scrollLeft(),y:t(this).scrollTop()})})),l.on(r,(function(i){var n=e.GetData(this,"select2-scroll-position");t(this).scrollTop(n.y)})),t(window).on(r+" "+a+" "+s,(function(t){o._positionDropdown(),o._resizeDropdown()}))},i.prototype._detachPositioningHandler=function(i,n){var o="scroll.select2."+n.id,r="resize.select2."+n.id,a="orientationchange.select2."+n.id;this.$container.parents().filter(e.hasScroll).off(o),t(window).off(o+" "+r+" "+a)},i.prototype._positionDropdown=function(){var e=t(window),i=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),o=null,r=this.$container.offset();r.bottom=r.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=r.top,a.bottom=r.top+a.height;var s={height:this.$dropdown.outerHeight(!1)},l={top:e.scrollTop(),bottom:e.scrollTop()+e.height()},c=l.top<r.top-s.height,h=l.bottom>r.bottom+s.height,u={left:r.left,top:a.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var d={top:0,left:0};(t.contains(document.body,p[0])||p[0].isConnected)&&(d=p.offset()),u.top-=d.top,u.left-=d.left,i||n||(o="below"),h||!c||i?!c&&h&&i&&(o="below"):o="above",("above"==o||i&&"below"!==o)&&(u.top=a.top-d.top-s.height),null!=o&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+o),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+o)),this.$dropdownContainer.css(u)},i.prototype._resizeDropdown=function(){var t={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(t.minWidth=t.width,t.position="relative",t.width="auto"),this.$dropdown.css(t)},i.prototype._showDropdown=function(t){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},i})),e.define("select2/dropdown/minimumResultsForSearch",[],(function(){function t(e){for(var i=0,n=0;n<e.length;n++){var o=e[n];o.children?i+=t(o.children):i++}return i}function e(t,e,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),t.call(this,e,i,n)}return e.prototype.showSearch=function(e,i){return!(t(i.data.results)<this.minimumResultsForSearch)&&e.call(this,i)},e})),e.define("select2/dropdown/selectOnClose",["../utils"],(function(t){function e(){}return e.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("close",(function(t){n._handleSelectOnClose(t)}))},e.prototype._handleSelectOnClose=function(e,i){if(i&&null!=i.originalSelect2Event){var n=i.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var o=this.getHighlightedResults();if(!(o.length<1)){var r=t.GetData(o[0],"data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e})),e.define("select2/dropdown/closeOnSelect",[],(function(){function t(){}return t.prototype.bind=function(t,e,i){var n=this;t.call(this,e,i),e.on("select",(function(t){n._selectTriggered(t)})),e.on("unselect",(function(t){n._selectTriggered(t)}))},t.prototype._selectTriggered=function(t,e){var i=e.originalEvent;i&&(i.ctrlKey||i.metaKey)||this.trigger("close",{originalEvent:i,originalSelect2Event:e})},t})),e.define("select2/i18n/en",[],(function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var e=t.input.length-t.maximum,i="Please delete "+e+" character";return 1!=e&&(i+="s"),i},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var e="You can only select "+t.maximum+" item";return 1!=t.maximum&&(e+="s"),e},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}})),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],(function(t,e,i,n,o,r,a,s,l,c,h,u,p,d,m,f,g,_,v,y,b,x,k,w,L,M,C,P,S){function T(){this.reset()}return T.prototype.apply=function(h){if(null==(h=t.extend(!0,{},this.defaults,h)).dataAdapter){if(null!=h.ajax?h.dataAdapter=m:null!=h.data?h.dataAdapter=d:h.dataAdapter=p,h.minimumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,_)),h.maximumInputLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,v)),h.maximumSelectionLength>0&&(h.dataAdapter=c.Decorate(h.dataAdapter,y)),h.tags&&(h.dataAdapter=c.Decorate(h.dataAdapter,f)),null==h.tokenSeparators&&null==h.tokenizer||(h.dataAdapter=c.Decorate(h.dataAdapter,g)),null!=h.query){var u=e(h.amdBase+"compat/query");h.dataAdapter=c.Decorate(h.dataAdapter,u)}if(null!=h.initSelection){var S=e(h.amdBase+"compat/initSelection");h.dataAdapter=c.Decorate(h.dataAdapter,S)}}if(null==h.resultsAdapter&&(h.resultsAdapter=i,null!=h.ajax&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,w)),null!=h.placeholder&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,k)),h.selectOnClose&&(h.resultsAdapter=c.Decorate(h.resultsAdapter,C))),null==h.dropdownAdapter){if(h.multiple)h.dropdownAdapter=b;else{var T=c.Decorate(b,x);h.dropdownAdapter=T}if(0!==h.minimumResultsForSearch&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,M)),h.closeOnSelect&&(h.dropdownAdapter=c.Decorate(h.dropdownAdapter,P)),null!=h.dropdownCssClass||null!=h.dropdownCss||null!=h.adaptDropdownCssClass){var A=e(h.amdBase+"compat/dropdownCss");h.dropdownAdapter=c.Decorate(h.dropdownAdapter,A)}h.dropdownAdapter=c.Decorate(h.dropdownAdapter,L)}if(null==h.selectionAdapter){if(h.multiple?h.selectionAdapter=o:h.selectionAdapter=n,null!=h.placeholder&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,r)),h.allowClear&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,a)),h.multiple&&(h.selectionAdapter=c.Decorate(h.selectionAdapter,s)),null!=h.containerCssClass||null!=h.containerCss||null!=h.adaptContainerCssClass){var E=e(h.amdBase+"compat/containerCss");h.selectionAdapter=c.Decorate(h.selectionAdapter,E)}h.selectionAdapter=c.Decorate(h.selectionAdapter,l)}h.language=this._resolveLanguage(h.language),h.language.push("en");for(var D=[],O=0;O<h.language.length;O++){var I=h.language[O];-1===D.indexOf(I)&&D.push(I)}return h.language=D,h.translations=this._processTranslations(h.language,h.debug),h},T.prototype.reset=function(){function e(t){function e(t){return u[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function i(n,o){if(""===t.trim(n.term))return o;if(o.children&&o.children.length>0){for(var r=t.extend(!0,{},o),a=o.children.length-1;a>=0;a--)null==i(n,o.children[a])&&r.children.splice(a,1);return r.children.length>0?r:i(n,r)}var s=e(o.text).toUpperCase(),l=e(n.term).toUpperCase();return s.indexOf(l)>-1?o:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:{},matcher:i,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(t){return t},templateResult:function(t){return t.text},templateSelection:function(t){return t.text},theme:"default",width:"resolve"}},T.prototype.applyFromElement=function(t,e){var i=t.language,n=this.defaults.language,o=e.prop("lang"),r=e.closest("[lang]").prop("lang"),a=Array.prototype.concat.call(this._resolveLanguage(o),this._resolveLanguage(i),this._resolveLanguage(n),this._resolveLanguage(r));return t.language=a,t},T.prototype._resolveLanguage=function(e){if(!e)return[];if(t.isEmptyObject(e))return[];if(t.isPlainObject(e))return[e];var i;i=t.isArray(e)?e:[e];for(var n=[],o=0;o<i.length;o++)if(n.push(i[o]),"string"==typeof i[o]&&i[o].indexOf("-")>0){var r=i[o].split("-")[0];n.push(r)}return n},T.prototype._processTranslations=function(e,i){for(var n=new h,o=0;o<e.length;o++){var r=new h,a=e[o];if("string"==typeof a)try{r=h.loadPath(a)}catch(t){try{a=this.defaults.amdLanguageBase+a,r=h.loadPath(a)}catch(t){i&&window.console&&console.warn&&console.warn('Select2: The language file for "'+a+'" could not be automatically loaded. A fallback will be used instead.')}}else r=t.isPlainObject(a)?new h(a):a;n.extend(r)}return n},T.prototype.set=function(e,i){var n={};n[t.camelCase(e)]=i;var o=c._convertData(n);t.extend(!0,this.defaults,o)},new T})),e.define("select2/options",["require","jquery","./defaults","./utils"],(function(t,e,i,n){function o(e,o){if(this.options=e,null!=o&&this.fromElement(o),null!=o&&(this.options=i.applyFromElement(this.options,o)),this.options=i.apply(this.options),o&&o.is("input")){var r=t(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=n.Decorate(this.options.dataAdapter,r)}}return o.prototype.fromElement=function(t){var i=["select2"];null==this.options.multiple&&(this.options.multiple=t.prop("multiple")),null==this.options.disabled&&(this.options.disabled=t.prop("disabled")),null==this.options.dir&&(t.prop("dir")?this.options.dir=t.prop("dir"):t.closest("[dir]").prop("dir")?this.options.dir=t.closest("[dir]").prop("dir"):this.options.dir="ltr"),t.prop("disabled",this.options.disabled),t.prop("multiple",this.options.multiple),n.GetData(t[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),n.StoreData(t[0],"data",n.GetData(t[0],"select2Tags")),n.StoreData(t[0],"tags",!0)),n.GetData(t[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),t.attr("ajax--url",n.GetData(t[0],"ajaxUrl")),n.StoreData(t[0],"ajax-Url",n.GetData(t[0],"ajaxUrl")));var o={};function r(t,e){return e.toUpperCase()}for(var a=0;a<t[0].attributes.length;a++){var s=t[0].attributes[a].name,l="data-";if(s.substr(0,l.length)==l){var c=s.substring(l.length),h=n.GetData(t[0],c);o[c.replace(/-([a-z])/g,r)]=h}}e.fn.jquery&&"1."==e.fn.jquery.substr(0,2)&&t[0].dataset&&(o=e.extend(!0,{},t[0].dataset,o));var u=e.extend(!0,{},n.GetData(t[0]),o);for(var p in u=n._convertData(u))e.inArray(p,i)>-1||(e.isPlainObject(this.options[p])?e.extend(this.options[p],u[p]):this.options[p]=u[p]);return this},o.prototype.get=function(t){return this.options[t]},o.prototype.set=function(t,e){this.options[t]=e},o})),e.define("select2/core",["jquery","./options","./utils","./keys"],(function(t,e,i,n){var o=function(t,n){null!=i.GetData(t[0],"select2")&&i.GetData(t[0],"select2").destroy(),this.$element=t,this.id=this._generateId(t),n=n||{},this.options=new e(n,t),o.__super__.constructor.call(this);var r=t.attr("tabindex")||0;i.StoreData(t[0],"old-tabindex",r),t.attr("tabindex","-1");var a=this.options.get("dataAdapter");this.dataAdapter=new a(t,this.options);var s=this.render();this._placeContainer(s);var l=this.options.get("selectionAdapter");this.selection=new l(t,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var c=this.options.get("dropdownAdapter");this.dropdown=new c(t,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var h=this.options.get("resultsAdapter");this.results=new h(t,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current((function(t){u.trigger("selection:update",{data:t})})),t.addClass("select2-hidden-accessible"),t.attr("aria-hidden","true"),this._syncAttributes(),i.StoreData(t[0],"select2",this),t.data("select2",this)};return i.Extend(o,i.Observable),o.prototype._generateId=function(t){return"select2-"+(null!=t.attr("id")?t.attr("id"):null!=t.attr("name")?t.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},o.prototype._placeContainer=function(t){t.insertAfter(this.$element);var e=this._resolveWidth(this.$element,this.options.get("width"));null!=e&&t.css("width",e)},o.prototype._resolveWidth=function(t,e){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==e){var n=this._resolveWidth(t,"style");return null!=n?n:this._resolveWidth(t,"element")}if("element"==e){var o=t.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"==e){var r=t.attr("style");if("string"!=typeof r)return null;for(var a=r.split(";"),s=0,l=a.length;s<l;s+=1){var c=a[s].replace(/\s/g,"").match(i);if(null!==c&&c.length>=1)return c[1]}return null}return"computedstyle"==e?window.getComputedStyle(t[0]).width:e},o.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},o.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",(function(){t.dataAdapter.current((function(e){t.trigger("selection:update",{data:e})}))})),this.$element.on("focus.select2",(function(e){t.trigger("focus",e)})),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e((function(e){t._syncA(),t._syncS(null,e)})),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},o.prototype._registerDataEvents=function(){var t=this;this.dataAdapter.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerSelectionEvents=function(){var e=this,i=["toggle","focus"];this.selection.on("toggle",(function(){e.toggleDropdown()})),this.selection.on("focus",(function(t){e.focus(t)})),this.selection.on("*",(function(n,o){-1===t.inArray(n,i)&&e.trigger(n,o)}))},o.prototype._registerDropdownEvents=function(){var t=this;this.dropdown.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerResultsEvents=function(){var t=this;this.results.on("*",(function(e,i){t.trigger(e,i)}))},o.prototype._registerEvents=function(){var t=this;this.on("open",(function(){t.$container.addClass("select2-container--open")})),this.on("close",(function(){t.$container.removeClass("select2-container--open")})),this.on("enable",(function(){t.$container.removeClass("select2-container--disabled")})),this.on("disable",(function(){t.$container.addClass("select2-container--disabled")})),this.on("blur",(function(){t.$container.removeClass("select2-container--focus")})),this.on("query",(function(e){t.isOpen()||t.trigger("open",{}),this.dataAdapter.query(e,(function(i){t.trigger("results:all",{data:i,query:e})}))})),this.on("query:append",(function(e){this.dataAdapter.query(e,(function(i){t.trigger("results:append",{data:i,query:e})}))})),this.on("keypress",(function(e){var i=e.which;t.isOpen()?i===n.ESC||i===n.TAB||i===n.UP&&e.altKey?(t.close(e),e.preventDefault()):i===n.ENTER?(t.trigger("results:select",{}),e.preventDefault()):i===n.SPACE&&e.ctrlKey?(t.trigger("results:toggle",{}),e.preventDefault()):i===n.UP?(t.trigger("results:previous",{}),e.preventDefault()):i===n.DOWN&&(t.trigger("results:next",{}),e.preventDefault()):(i===n.ENTER||i===n.SPACE||i===n.DOWN&&e.altKey)&&(t.open(),e.preventDefault())}))},o.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.isDisabled()?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},o.prototype._isChangeMutation=function(e,i){var n=!1,o=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(i)if(i.addedNodes&&i.addedNodes.length>0)for(var r=0;r<i.addedNodes.length;r++)i.addedNodes[r].selected&&(n=!0);else i.removedNodes&&i.removedNodes.length>0?n=!0:t.isArray(i)&&t.each(i,(function(t,e){if(o._isChangeMutation(t,e))return n=!0,!1}));else n=!0;return n}},o.prototype._syncSubtree=function(t,e){var i=this._isChangeMutation(t,e),n=this;i&&this.dataAdapter.current((function(t){n.trigger("selection:update",{data:t})}))},o.prototype.trigger=function(t,e){var i=o.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===e&&(e={}),t in n){var r=n[t],a={prevented:!1,name:t,args:e};if(i.call(this,r,a),a.prevented)return void(e.prevented=!0)}i.call(this,t,e)},o.prototype.toggleDropdown=function(){this.isDisabled()||(this.isOpen()?this.close():this.open())},o.prototype.open=function(){this.isOpen()||this.isDisabled()||this.trigger("query",{})},o.prototype.close=function(t){this.isOpen()&&this.trigger("close",{originalEvent:t})},o.prototype.isEnabled=function(){return!this.isDisabled()},o.prototype.isDisabled=function(){return this.options.get("disabled")},o.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},o.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},o.prototype.focus=function(t){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},o.prototype.enable=function(t){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=t&&0!==t.length||(t=[!0]);var e=!t[0];this.$element.prop("disabled",e)},o.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current((function(e){t=e})),t},o.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var i=e[0];t.isArray(i)&&(i=t.map(i,(function(t){return t.toString()}))),this.$element.val(i).trigger("input").trigger("change")},o.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",i.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),i.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},o.prototype.render=function(){var e=t('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),i.StoreData(e[0],"element",this.$element),e},o})),e.define("jquery-mousewheel",["jquery"],(function(t){return t})),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],(function(t,e,i,n,o){if(null==t.fn.select2){var r=["open","close","destroy"];t.fn.select2=function(e){if("object"==typeof(e=e||{}))return this.each((function(){var n=t.extend(!0,{},e);new i(t(this),n)})),this;if("string"==typeof e){var n,a=Array.prototype.slice.call(arguments,1);return this.each((function(){var t=o.GetData(this,"select2");null==t&&window.console&&console.error&&console.error("The select2('"+e+"') method was called on an element that is not using Select2."),n=t[e].apply(t,a)})),t.inArray(e,r)>-1?this:n}throw new Error("Invalid arguments for Select2: "+e)}}return null==t.fn.select2.defaults&&(t.fn.select2.defaults=n),i})),{define:e.define,require:e.require}}(),i=e.require("jquery.select2");return t.fn.select2.amd=e,i})?n.apply(e,o):n)||(t.exports=r)},5911:function(t,e,i){var n,o,r;!function(a){"use strict";o=[i(3609)],void 0===(r="function"==typeof(n=function(t,e){var i={beforeShow:d,move:d,change:d,show:d,hide:d,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],o=!!/msie/i.exec(window.navigator.userAgent),r=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div").style;return e.cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),s=function(){var t="";if(o)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(e,i,n,o){for(var a=[],s=0;s<e.length;s++){var l=e[s];if(l){var c=tinycolor(l),h=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";h+=tinycolor.equals(i,l)?" sp-thumb-active":"";var u=c.toString(o.preferredFormat||"rgb"),p=r?"background-color:"+c.toRgbString():"filter:"+c.toFilter();a.push('<span title="'+u+'" data-color="'+c.toRgbString()+'" class="'+h+'"><span class="sp-thumb-inner" style="'+p+';"></span></span>')}else{var d="sp-clear-display";a.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",o.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+a.join("")+"</div>"}function c(){for(var t=0;t<n.length;t++)n[t]&&n[t].hide()}function h(e,n){var o=t.extend({},i,e);return o.callbacks={move:f(o.move,n),change:f(o.change,n),show:f(o.show,n),hide:f(o.hide,n),beforeShow:f(o.beforeShow,n)},o}function u(i,u){var d=h(u,i),f=d.flat,y=d.showSelectionPalette,b=d.localStorageKey,x=d.theme,k=d.callbacks,w=_(Zt,10),L=!1,M=!1,C=0,P=0,S=0,T=0,A=0,E=0,D=0,O=0,I=0,B=0,R=1,z=[],F=[],j={},N=d.selectionPalette.slice(0),U=d.maxSelectionSize,G="sp-dragging",H=null,Z=i.ownerDocument,V=(Z.body,t(i)),W=!1,q=t(s,Z).addClass(x),$=q.find(".sp-picker-container"),Y=q.find(".sp-color"),K=q.find(".sp-dragger"),J=q.find(".sp-hue"),X=q.find(".sp-slider"),Q=q.find(".sp-alpha-inner"),tt=q.find(".sp-alpha"),et=q.find(".sp-alpha-handle"),it=q.find(".sp-input"),nt=q.find(".sp-palette"),ot=q.find(".sp-initial"),rt=q.find(".sp-cancel"),at=q.find(".sp-clear"),st=q.find(".sp-choose"),lt=q.find(".sp-palette-toggle"),ct=V.is("input"),ht=ct&&"color"===V.attr("type")&&v(),ut=ct&&!f,pt=ut?t(a).addClass(x).addClass(d.className).addClass(d.replacerClassName):t([]),dt=ut?pt:V,mt=pt.find(".sp-preview-inner"),ft=d.color||ct&&V.val(),gt=!1,_t=d.preferredFormat,vt=!d.showButtons||d.clickoutFiresChange,yt=!ft,bt=d.allowEmpty&&!ht;function xt(){if(d.showPaletteOnly&&(d.showPalette=!0),lt.text(d.showPaletteOnly?d.togglePaletteMoreText:d.togglePaletteLessText),d.palette){z=d.palette.slice(0),F=t.isArray(z[0])?z:[z],j={};for(var e=0;e<F.length;e++)for(var i=0;i<F[e].length;i++){var n=tinycolor(F[e][i]).toRgbString();j[n]=!0}}q.toggleClass("sp-flat",f),q.toggleClass("sp-input-disabled",!d.showInput),q.toggleClass("sp-alpha-enabled",d.showAlpha),q.toggleClass("sp-clear-enabled",bt),q.toggleClass("sp-buttons-disabled",!d.showButtons),q.toggleClass("sp-palette-buttons-disabled",!d.togglePaletteOnly),q.toggleClass("sp-palette-disabled",!d.showPalette),q.toggleClass("sp-palette-only",d.showPaletteOnly),q.toggleClass("sp-initial-disabled",!d.showInitial),q.addClass(d.className).addClass(d.containerClassName),Zt()}function kt(){if(o&&q.find("*:not(input)").attr("unselectable","on"),xt(),ut&&V.after(pt).hide(),bt||at.hide(),f)V.after(q).hide();else{var e="parent"===d.appendTo?V.parent():t(d.appendTo);1!==e.length&&(e=t("body")),e.append(q)}function i(e){return e.data&&e.data.ignore?(zt(t(e.target).closest(".sp-thumb-el").data("color")),Nt()):(zt(t(e.target).closest(".sp-thumb-el").data("color")),Nt(),d.hideAfterPaletteSelect?(Ht(!0),Bt()):Ht()),!1}wt(),dt.on("click.spectrum touchstart.spectrum",(function(e){W||Et(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()})),(V.is(":disabled")||!0===d.disabled)&&$t(),q.click(m),it.change(At),it.on("paste",(function(){setTimeout(At,1)})),it.keydown((function(t){13==t.keyCode&&At()})),rt.text(d.cancelText),rt.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),Rt(),Bt()})),at.attr("title",d.clearText),at.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),yt=!0,Nt(),f&&Ht(!0)})),st.text(d.chooseText),st.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),o&&it.is(":focus")&&it.trigger("change"),jt()&&(Ht(!0),Bt())})),lt.text(d.showPaletteOnly?d.togglePaletteMoreText:d.togglePaletteLessText),lt.on("click.spectrum",(function(t){t.stopPropagation(),t.preventDefault(),d.showPaletteOnly=!d.showPaletteOnly,d.showPaletteOnly||f||q.css("left","-="+($.outerWidth(!0)+5)),xt()})),g(tt,(function(t,e,i){R=t/A,yt=!1,i.shiftKey&&(R=Math.round(10*R)/10),Nt()}),St,Tt),g(J,(function(t,e){O=parseFloat(e/T),yt=!1,d.showAlpha||(R=1),Nt()}),St,Tt),g(Y,(function(t,e,i){if(i.shiftKey){if(!H){var n=I*C,o=P-B*P,r=Math.abs(t-n)>Math.abs(e-o);H=r?"x":"y"}}else H=null;var a=!H||"y"===H;(!H||"x"===H)&&(I=parseFloat(t/C)),a&&(B=parseFloat((P-e)/P)),yt=!1,d.showAlpha||(R=1),Nt()}),St,Tt),ft?(zt(ft),Ut(),_t=d.preferredFormat||tinycolor(ft).format,Lt(ft)):Ut(),f&&Dt();var n=o?"mousedown.spectrum":"click.spectrum touchstart.spectrum";nt.on(n,".sp-thumb-el",i),ot.on(n,".sp-thumb-el:nth-child(1)",{ignore:!0},i)}function wt(){if(b&&window.localStorage){try{var e=window.localStorage[b].split(",#");e.length>1&&(delete window.localStorage[b],t.each(e,(function(t,e){Lt(e)})))}catch(t){}try{N=window.localStorage[b].split(";")}catch(t){}}}function Lt(e){if(y){var i=tinycolor(e).toRgbString();if(!j[i]&&-1===t.inArray(i,N))for(N.push(i);N.length>U;)N.shift();if(b&&window.localStorage)try{window.localStorage[b]=N.join(";")}catch(t){}}}function Mt(){var t=[];if(d.showPalette)for(var e=0;e<N.length;e++){var i=tinycolor(N[e]).toRgbString();j[i]||t.push(N[e])}return t.reverse().slice(0,d.maxSelectionSize)}function Ct(){var e=Ft(),i=t.map(F,(function(t,i){return l(t,e,"sp-palette-row sp-palette-row-"+i,d)}));wt(),N&&i.push(l(Mt(),e,"sp-palette-row sp-palette-row-selection",d)),nt.html(i.join(""))}function Pt(){if(d.showInitial){var t=gt,e=Ft();ot.html(l([t,e],e,"sp-palette-row-initial",d))}}function St(){(P<=0||C<=0||T<=0)&&Zt(),M=!0,q.addClass(G),H=null,V.trigger("dragstart.spectrum",[Ft()])}function Tt(){M=!1,q.removeClass(G),V.trigger("dragstop.spectrum",[Ft()])}function At(){var t=it.val();if(null!==t&&""!==t||!bt){var e=tinycolor(t);e.isValid()?(zt(e),Nt(),Ht()):it.addClass("sp-validation-error")}else zt(null),Nt(),Ht()}function Et(){L?Bt():Dt()}function Dt(){var e=t.Event("beforeShow.spectrum");L?Zt():(V.trigger(e,[Ft()]),!1===k.beforeShow(Ft())||e.isDefaultPrevented()||(c(),L=!0,t(Z).on("keydown.spectrum",Ot),t(Z).on("click.spectrum",It),t(window).on("resize.spectrum",w),pt.addClass("sp-active"),q.removeClass("sp-hidden"),Zt(),Ut(),gt=Ft(),Pt(),k.show(gt),V.trigger("show.spectrum",[gt])))}function Ot(t){27===t.keyCode&&Bt()}function It(t){2!=t.button&&(M||(vt?Ht(!0):Rt(),Bt()))}function Bt(){L&&!f&&(L=!1,t(Z).off("keydown.spectrum",Ot),t(Z).off("click.spectrum",It),t(window).off("resize.spectrum",w),pt.removeClass("sp-active"),q.addClass("sp-hidden"),k.hide(Ft()),V.trigger("hide.spectrum",[Ft()]))}function Rt(){zt(gt,!0),Ht(!0)}function zt(t,e){var i,n;tinycolor.equals(t,Ft())?Ut():(!t&&bt?yt=!0:(yt=!1,n=(i=tinycolor(t)).toHsv(),O=n.h%360/360,I=n.s,B=n.v,R=n.a),Ut(),i&&i.isValid()&&!e&&(_t=d.preferredFormat||i.getFormat()))}function Ft(t){return t=t||{},bt&&yt?null:tinycolor.fromRatio({h:O,s:I,v:B,a:Math.round(1e3*R)/1e3},{format:t.format||_t})}function jt(){return!it.hasClass("sp-validation-error")}function Nt(){Ut(),k.move(Ft()),V.trigger("move.spectrum",[Ft()])}function Ut(){it.removeClass("sp-validation-error"),Gt();var t=tinycolor.fromRatio({h:O,s:1,v:1});Y.css("background-color",t.toHexString());var e=_t;R<1&&(0!==R||"name"!==e)&&("hex"!==e&&"hex3"!==e&&"hex6"!==e&&"name"!==e||(e="rgb"));var i=Ft({format:e}),n="";if(mt.removeClass("sp-clear-display"),mt.css("background-color","transparent"),!i&&bt)mt.addClass("sp-clear-display");else{var a=i.toHexString(),s=i.toRgbString();if(r||1===i.alpha?mt.css("background-color",s):(mt.css("background-color","transparent"),mt.css("filter",i.toFilter())),d.showAlpha){var l=i.toRgb();l.a=0;var c=tinycolor(l).toRgbString(),h="linear-gradient(left, "+c+", "+a+")";o?Q.css("filter",tinycolor(c).toFilter({gradientType:1},a)):(Q.css("background","-webkit-"+h),Q.css("background","-moz-"+h),Q.css("background","-ms-"+h),Q.css("background","linear-gradient(to right, "+c+", "+a+")"))}n=i.toString(e)}d.showInput&&it.val(n),d.showPalette&&Ct(),Pt()}function Gt(){var t=I,e=B;if(bt&&yt)et.hide(),X.hide(),K.hide();else{et.show(),X.show(),K.show();var i=t*C,n=P-e*P;i=Math.max(-S,Math.min(C-S,i-S)),n=Math.max(-S,Math.min(P-S,n-S)),K.css({top:n+"px",left:i+"px"});var o=R*A;et.css({left:o-E/2+"px"});var r=O*T;X.css({top:r-D+"px"})}}function Ht(t){var e=Ft(),i="",n=!tinycolor.equals(e,gt);e&&(i=e.toString(_t),Lt(e)),ct&&V.val(i),t&&n&&(k.change(e),V.trigger("change",[e]))}function Zt(){L&&(C=Y.width(),P=Y.height(),S=K.height(),J.width(),T=J.height(),D=X.height(),A=tt.width(),E=et.width(),f||(q.css("position","absolute"),d.offset?q.offset(d.offset):q.offset(p(q,dt))),Gt(),d.showPalette&&Ct(),V.trigger("reflow.spectrum"))}function Vt(){V.show(),dt.off("click.spectrum touchstart.spectrum"),q.remove(),pt.remove(),n[Kt.id]=null}function Wt(i,n){return i===e?t.extend({},d):n===e?d[i]:(d[i]=n,"preferredFormat"===i&&(_t=d.preferredFormat),void xt())}function qt(){W=!1,V.attr("disabled",!1),dt.removeClass("sp-disabled")}function $t(){Bt(),W=!0,V.attr("disabled",!0),dt.addClass("sp-disabled")}function Yt(t){d.offset=t,Zt()}kt();var Kt={show:Dt,hide:Bt,toggle:Et,reflow:Zt,option:Wt,enable:qt,disable:$t,offset:Yt,set:function(t){zt(t),Ht()},get:Ft,destroy:Vt,container:q};return Kt.id=n.push(Kt)-1,Kt}function p(e,i){var n=0,o=e.outerWidth(),r=e.outerHeight(),a=i.outerHeight(),s=e[0].ownerDocument,l=s.documentElement,c=l.clientWidth+t(s).scrollLeft(),h=l.clientHeight+t(s).scrollTop(),u=i.offset(),p=u.left,d=u.top;return d+=a,p-=Math.min(p,p+o>c&&c>o?Math.abs(p+o-c):0),{top:d-=Math.min(d,d+r>h&&h>r?Math.abs(r+a-n):n),bottom:u.bottom,left:p,right:u.right,width:u.width,height:u.height}}function d(){}function m(t){t.stopPropagation()}function f(t,e){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function g(e,i,n,r){i=i||function(){},n=n||function(){},r=r||function(){};var a=document,s=!1,l={},c=0,h=0,u="ontouchstart"in window,p={};function d(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function m(t){if(s){if(o&&a.documentMode<9&&!t.button)return g();var n=t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0],r=n&&n.pageX||t.pageX,p=n&&n.pageY||t.pageY,m=Math.max(0,Math.min(r-l.left,h)),f=Math.max(0,Math.min(p-l.top,c));u&&d(t),i.apply(e,[m,f,t])}}function f(i){(i.which?3==i.which:2==i.button)||s||!1!==n.apply(e,arguments)&&(s=!0,c=t(e).height(),h=t(e).width(),l=t(e).offset(),t(a).on(p),t(a.body).addClass("sp-dragging"),m(i),d(i))}function g(){s&&(t(a).off(p),t(a.body).removeClass("sp-dragging"),setTimeout((function(){r.apply(e,arguments)}),0)),s=!1}p.selectstart=d,p.dragstart=d,p["touchmove mousemove"]=m,p["touchend mouseup"]=g,t(e).on("touchstart mousedown",f)}function _(t,e,i){var n;return function(){var o=this,r=arguments,a=function(){n=null,t.apply(o,r)};i&&clearTimeout(n),!i&&n||(n=setTimeout(a,e))}}function v(){return t.fn.spectrum.inputTypeColorSupport()}var y="spectrum.id";t.fn.spectrum=function(e,i){if("string"==typeof e){var o=this,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var i=n[t(this).data(y)];if(i){var a=i[e];if(!a)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?o=i.get():"container"==e?o=i.container:"option"==e?o=i.option.apply(i,r):"destroy"==e?(i.destroy(),t(this).removeData(y)):a.apply(i,r)}})),o}return this.spectrum("destroy").each((function(){var i=u(this,t.extend({},t(this).data(),e));t(this).data(y,i.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=g,t.fn.spectrum.defaults=i,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var i=t("<input type='color'/>")[0];e._cachedResult="color"===i.type&&""!==i.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t("input[type=color]");e.length&&!v()&&e.spectrum({preferredFormat:"hex6"})},function(){var t=/^[\s,#]+/,e=/\s+$/,i=0,n=Math,o=n.round,r=n.min,a=n.max,s=n.random,l=function(t,e){if(e=e||{},(t=t||"")instanceof l)return t;if(!(this instanceof l))return new l(t,e);var n=c(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=o(1e3*this._a)/1e3,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=n.ok,this._tc_id=i++};function c(t){var e={r:0,g:0,b:0},i=1,n=!1,o=!1;return"string"==typeof t&&(t=q(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(e=h(t.r,t.g,t.b),n=!0,o="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=N(t.s),t.v=N(t.v),e=m(t.h,t.s,t.v),n=!0,o="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=N(t.s),t.l=N(t.l),e=p(t.h,t.s,t.l),n=!0,o="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=O(i),{ok:n,format:t.format||o,r:r(255,a(e.r,0)),g:r(255,a(e.g,0)),b:r(255,a(e.b,0)),a:i}}function h(t,e,i){return{r:255*I(t,255),g:255*I(e,255),b:255*I(i,255)}}function u(t,e,i){t=I(t,255),e=I(e,255),i=I(i,255);var n,o,s=a(t,e,i),l=r(t,e,i),c=(s+l)/2;if(s==l)n=o=0;else{var h=s-l;switch(o=c>.5?h/(2-s-l):h/(s+l),s){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:o,l:c}}function p(t,e,i){var n,o,r;function a(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=I(t,360),e=I(e,100),i=I(i,100),0===e)n=o=r=i;else{var s=i<.5?i*(1+e):i+e-i*e,l=2*i-s;n=a(l,s,t+1/3),o=a(l,s,t),r=a(l,s,t-1/3)}return{r:255*n,g:255*o,b:255*r}}function d(t,e,i){t=I(t,255),e=I(e,255),i=I(i,255);var n,o,s=a(t,e,i),l=r(t,e,i),c=s,h=s-l;if(o=0===s?0:h/s,s==l)n=0;else{switch(s){case t:n=(e-i)/h+(e<i?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:o,v:c}}function m(t,e,i){t=6*I(t,360),e=I(e,100),i=I(i,100);var o=n.floor(t),r=t-o,a=i*(1-e),s=i*(1-r*e),l=i*(1-(1-r)*e),c=o%6;return{r:255*[i,s,a,a,l,i][c],g:255*[l,i,i,s,a,a][c],b:255*[a,a,l,i,i,s][c]}}function f(t,e,i,n){var r=[j(o(t).toString(16)),j(o(e).toString(16)),j(o(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function g(t,e,i,n){return[j(U(n)),j(o(t).toString(16)),j(o(e).toString(16)),j(o(i).toString(16))].join("")}function _(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.s-=e/100,i.s=B(i.s),l(i)}function v(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.s+=e/100,i.s=B(i.s),l(i)}function y(t){return l(t).desaturate(100)}function b(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.l+=e/100,i.l=B(i.l),l(i)}function x(t,e){e=0===e?0:e||10;var i=l(t).toRgb();return i.r=a(0,r(255,i.r-o(-e/100*255))),i.g=a(0,r(255,i.g-o(-e/100*255))),i.b=a(0,r(255,i.b-o(-e/100*255))),l(i)}function k(t,e){e=0===e?0:e||10;var i=l(t).toHsl();return i.l-=e/100,i.l=B(i.l),l(i)}function w(t,e){var i=l(t).toHsl(),n=(o(i.h)+e)%360;return i.h=n<0?360+n:n,l(i)}function L(t){var e=l(t).toHsl();return e.h=(e.h+180)%360,l(e)}function M(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+120)%360,s:e.s,l:e.l}),l({h:(i+240)%360,s:e.s,l:e.l})]}function C(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+90)%360,s:e.s,l:e.l}),l({h:(i+180)%360,s:e.s,l:e.l}),l({h:(i+270)%360,s:e.s,l:e.l})]}function P(t){var e=l(t).toHsl(),i=e.h;return[l(t),l({h:(i+72)%360,s:e.s,l:e.l}),l({h:(i+216)%360,s:e.s,l:e.l})]}function S(t,e,i){e=e||6,i=i||30;var n=l(t).toHsl(),o=360/i,r=[l(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;)n.h=(n.h+o)%360,r.push(l(n));return r}function T(t,e){e=e||6;for(var i=l(t).toHsv(),n=i.h,o=i.s,r=i.v,a=[],s=1/e;e--;)a.push(l({h:n,s:o,v:r})),r=(r+s)%1;return a}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=O(t),this._roundA=o(1e3*this._a)/1e3,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=o(360*t.h),i=o(100*t.s),n=o(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=o(360*t.h),i=o(100*t.s),n=o(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return f(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return g(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*I(this._r,255))+"%",g:o(100*I(this._g,255))+"%",b:o(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*I(this._r,255))+"%, "+o(100*I(this._g,255))+"%, "+o(100*I(this._b,255))+"%)":"rgba("+o(100*I(this._r,255))+"%, "+o(100*I(this._g,255))+"%, "+o(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(E[f(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+g(this._r,this._g,this._b,this._a),i=e,n=this._gradientType?"GradientType = 1, ":"";t&&(i=l(t).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+i+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"name"!==t?("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(b,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(y,arguments)},spin:function(){return this._applyModification(w,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(S,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(T,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(M,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},l.fromRatio=function(t,e){if("object"==typeof t){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]="a"===n?t[n]:N(t[n]));t=i}return l(t,e)},l.equals=function(t,e){return!(!t||!e)&&l(t).toRgbString()==l(e).toRgbString()},l.random=function(){return l.fromRatio({r:s(),g:s(),b:s()})},l.mix=function(t,e,i){i=0===i?0:i||50;var n,o=l(t).toRgb(),r=l(e).toRgb(),a=i/100,s=2*a-1,c=r.a-o.a,h=1-(n=((n=s*c==-1?s:(s+c)/(1+s*c))+1)/2),u={r:r.r*n+o.r*h,g:r.g*n+o.g*h,b:r.b*n+o.b*h,a:r.a*a+o.a*(1-a)};return l(u)},l.readability=function(t,e){var i=l(t),n=l(e),o=i.toRgb(),r=n.toRgb(),a=i.getBrightness(),s=n.getBrightness(),c=Math.max(o.r,r.r)-Math.min(o.r,r.r)+Math.max(o.g,r.g)-Math.min(o.g,r.g)+Math.max(o.b,r.b)-Math.min(o.b,r.b);return{brightness:Math.abs(a-s),color:c}},l.isReadable=function(t,e){var i=l.readability(t,e);return i.brightness>125&&i.color>500},l.mostReadable=function(t,e){for(var i=null,n=0,o=!1,r=0;r<e.length;r++){var a=l.readability(t,e[r]),s=a.brightness>125&&a.color>500,c=a.brightness/125*3+a.color/500;(s&&!o||s&&o&&c>n||!s&&!o&&c>n)&&(o=s,n=c,i=l(e[r]))}return i};var A=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},E=l.hexNames=D(A);function D(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function O(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function I(t,e){z(t)&&(t="100%");var i=F(t);return t=r(e,a(0,parseFloat(t))),i&&(t=parseInt(t*e,10)/100),n.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function B(t){return r(1,a(0,t))}function R(t){return parseInt(t,16)}function z(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function F(t){return"string"==typeof t&&-1!=t.indexOf("%")}function j(t){return 1==t.length?"0"+t:""+t}function N(t){return t<=1&&(t=100*t+"%"),t}function U(t){return Math.round(255*parseFloat(t)).toString(16)}function G(t){return R(t)/255}var H,Z,V,W=(Z="[\\s|\\(]+("+(H="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",V="[\\s|\\(]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")[,|\\s]+("+H+")\\s*\\)?",{rgb:new RegExp("rgb"+Z),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+Z),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+Z),hsva:new RegExp("hsva"+V),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function q(i){i=i.replace(t,"").replace(e,"").toLowerCase();var n,o=!1;if(A[i])i=A[i],o=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};return(n=W.rgb.exec(i))?{r:n[1],g:n[2],b:n[3]}:(n=W.rgba.exec(i))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=W.hsl.exec(i))?{h:n[1],s:n[2],l:n[3]}:(n=W.hsla.exec(i))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=W.hsv.exec(i))?{h:n[1],s:n[2],v:n[3]}:(n=W.hsva.exec(i))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=W.hex8.exec(i))?{a:G(n[1]),r:R(n[2]),g:R(n[3]),b:R(n[4]),format:o?"name":"hex8"}:(n=W.hex6.exec(i))?{r:R(n[1]),g:R(n[2]),b:R(n[3]),format:o?"name":"hex"}:!!(n=W.hex3.exec(i))&&{r:R(n[1]+""+n[1]),g:R(n[2]+""+n[2]),b:R(n[3]+""+n[3]),format:o?"name":"hex"}}window.tinycolor=l}(),t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))})?n.apply(e,o):n)||(t.exports=r)}()},3609:function(t){"use strict";t.exports=jQuery},5525:function(){}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i(6626),i(2171),i(6492),i(7615),i(2559),i(4301),i(1170),i(1441),i(6145),i(3336),i(3981),i(2189),i(5964),i(711),i(4528),i(7344),i(7252),i(434),i(1909),i(4111);i(3067)}();