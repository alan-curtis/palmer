jQuery(document).ready((function(o){function e(){o.ajax({type:"POST",url:ajaxurl,data:{action:"mmp_get_shortcode_list",nonce:o("#mmp-shortcode-nonce").val(),search:o("#mmp-shortcode-search").val()},beforeSend:function(){o("#mmp-shortcode-insert").prop("disabled",!0)}}).done((function(e){o("#mmp-shortcode-list-container .mmp-shortcode-error").remove(),o("#mmp-shortcode-list").empty(),e.success?(o.each(e.shortcodes,(function(e,t){o("#mmp-shortcode-list").append('<li data-id="'+t.id+'">'+t.name+"</li>")})),o("#mmp-shortcode-list li").first().trigger("click")):o("#mmp-shortcode-list-container").append('<p class="mmp-shortcode-error">'+e.message+"</p>")}))}function t(){var e=o("#mmp-shortcode-list li.mmp-shortcode-row-active").first().data("id");if(e){var t="["+o("#mmp-shortcode-string").val()+' map="'+e+'"]';wp.media.editor.insert(t),o("#mmp-shortcode-modal").hide()}}o("#mmp-shortcode-button").on("click",(function(){o("#mmp-shortcode-modal").show(),o("#mmp-shortcode-search").val("").trigger("focus"),e()})),o("#mmp-shortcode-search").keyup((function(o){13!==o.keyCode?e():t()})),o("#mmp-shortcode-insert").on("click",(function(){t()})),o(".mmp-shortcode-modal, .mmp-shortcode-modal-close").on("click",(function(e){e.target===this&&o("#mmp-shortcode-modal").hide()})),o("#mmp-shortcode-list").on("click","li",(function(){o("#mmp-shortcode-list li.mmp-shortcode-row-active").removeClass("mmp-shortcode-row-active"),o(this).addClass("mmp-shortcode-row-active"),o("#mmp-shortcode-insert").prop("disabled",!1)})),o("#mmp-shortcode-add-map").on("click",(function(){o("#mmp-shortcode-modal").hide()}))}));